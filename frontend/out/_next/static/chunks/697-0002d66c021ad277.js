(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[697],{219:e=>{"use strict";let t=/^[0-9]+$/,r=(e,r)=>{if("number"==typeof e&&"number"==typeof r)return e===r?0:e<r?-1:1;let n=t.test(e),i=t.test(r);return n&&i&&(e*=1,r*=1),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1},n=(e,t)=>r(t,e);e.exports={compareIdentifiers:r,rcompareIdentifiers:n}},332:(e,t,r)=>{"use strict";let n=r(98566);e.exports=(e,t,r)=>n(e,t,r)>0},913:(e,t,r)=>{"use strict";r.d(t,{yn:()=>s});var n=r(67893),i=r(62531),a=r(44182);r(15765);var s={};(0,n.V)(s,{applyPatch:()=>i.X6,compare:()=>a.U})},1995:(e,t,r)=>{"use strict";r.d(t,{YN:()=>s.YN,fJ:()=>s.fJ,jY:()=>s.jY,kI:()=>o.k,zZ:()=>s.zZ,Bp:()=>s.Bp,ZI:()=>i.ZI,kJ:()=>i.kJ,SV:()=>i.SV,tn:()=>i.tn,oL:()=>a.o,N8:()=>m});var n=r(67893),i=r(92173),a=r(67146),s=r(41180),o=r(27123),l=class extends s.YN{static lc_name(){return"RouterRunnable"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;runnables;constructor(e){super(e),this.runnables=e.runnables}async invoke(e,t){let{key:r,input:n}=e,a=this.runnables[r];if(void 0===a)throw Error(`No runnable associated with key "${r}".`);return a.invoke(n,(0,i.ZI)(t))}async batch(e,t,r){let n=e.map(e=>e.key),i=e.map(e=>e.input);if(void 0!==n.find(e=>void 0===this.runnables[e]))throw Error("One or more keys do not have a corresponding runnable.");let a=n.map(e=>this.runnables[e]),s=this._getOptionsList(t??{},e.length),o=s[0]?.maxConcurrency??r?.maxConcurrency,l=o&&o>0?o:e.length,u=[];for(let e=0;e<i.length;e+=l){let t=i.slice(e,e+l).map((e,t)=>a[t].invoke(e,s[t])),r=await Promise.all(t);u.push(r)}return u.flat()}async stream(e,t){let{key:r,input:n}=e,i=this.runnables[r];if(void 0===i)throw Error(`No runnable associated with key "${r}".`);return i.stream(n,t)}},u=r(87150),c=class extends s.YN{static lc_name(){return"RunnableBranch"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;default;branches;constructor(e){super(e),this.branches=e.branches,this.default=e.default}static from(e){if(e.length<1)throw Error("RunnableBranch requires at least one branch");return new this({branches:e.slice(0,-1).map(([e,t])=>[(0,s.Bp)(e),(0,s.Bp)(t)]),default:(0,s.Bp)(e[e.length-1])})}async _invoke(e,t,r){let n;for(let a=0;a<this.branches.length;a+=1){let[s,o]=this.branches[a];if(await s.invoke(e,(0,i.tn)(t,{callbacks:r?.getChild(`condition:${a+1}`)}))){n=await o.invoke(e,(0,i.tn)(t,{callbacks:r?.getChild(`branch:${a+1}`)}));break}}return n||(n=await this.default.invoke(e,(0,i.tn)(t,{callbacks:r?.getChild("branch:default")}))),n}async invoke(e,t={}){return this._callWithConfig(this._invoke,e,t)}async *_streamIterator(e,t){let r,n,a=await (0,i.kJ)(t),o=await a?.handleChainStart(this.toJSON(),(0,s.GH)(e,"input"),t?.runId,void 0,void 0,void 0,t?.runName),l=!0;try{for(let a=0;a<this.branches.length;a+=1){let[s,c]=this.branches[a];if(await s.invoke(e,(0,i.tn)(t,{callbacks:o?.getChild(`condition:${a+1}`)}))){for await(let s of n=await c.stream(e,(0,i.tn)(t,{callbacks:o?.getChild(`branch:${a+1}`)})))if(yield s,l)if(void 0===r)r=s;else try{r=(0,u.xW)(r,s)}catch{r=void 0,l=!1}break}}if(void 0===n){for await(let a of n=await this.default.stream(e,(0,i.tn)(t,{callbacks:o?.getChild("branch:default")})))if(yield a,l)if(void 0===r)r=a;else try{r=(0,u.xW)(r,a)}catch{r=void 0,l=!1}}}catch(e){throw await o?.handleChainError(e),e}await o?.handleChainEnd(r??{})}},d=r(79271),p=r(62886),h=r(64184);r(67286);var f=class extends s.fJ{runnable;inputMessagesKey;outputMessagesKey;historyMessagesKey;getMessageHistory;constructor(e){let t=s.jY.from((e,t)=>this._enterHistory(e,t??{})).withConfig({runName:"loadHistory"}),r=e.historyMessagesKey??e.inputMessagesKey;r&&(t=o.k.assign({[r]:t}).withConfig({runName:"insertHistory"})),super({...e,config:e.config??{},bound:t.pipe(e.runnable.withListeners({onEnd:(e,t)=>this._exitHistory(e,t??{})})).withConfig({runName:"RunnableWithMessageHistory"})}),this.runnable=e.runnable,this.getMessageHistory=e.getMessageHistory,this.inputMessagesKey=e.inputMessagesKey,this.outputMessagesKey=e.outputMessagesKey,this.historyMessagesKey=e.historyMessagesKey}_getInputMessages(e){let t;if("object"!=typeof e||Array.isArray(e)||(0,d.ny)(e))t=e;else{let r;r=this.inputMessagesKey?this.inputMessagesKey:1===Object.keys(e).length?Object.keys(e)[0]:"input",t=Array.isArray(e[r])&&Array.isArray(e[r][0])?e[r][0]:e[r]}if("string"==typeof t)return[new p.xc(t)];if(Array.isArray(t))return t;if((0,d.ny)(t))return[t];throw Error(`Expected a string, BaseMessage, or array of BaseMessages.
Got ${JSON.stringify(t,null,2)}`)}_getOutputMessages(e){let t;if(Array.isArray(e)||(0,d.ny)(e)||"string"==typeof e)t=e;else{let r;r=void 0!==this.outputMessagesKey?this.outputMessagesKey:1===Object.keys(e).length?Object.keys(e)[0]:"output",t=void 0!==e.generations?e.generations[0][0].message:e[r]}if("string"==typeof t)return[new h.Od(t)];if(Array.isArray(t))return t;if((0,d.ny)(t))return[t];throw Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(t,null,2)}`)}async _enterHistory(e,t){let r=t?.configurable?.messageHistory,n=await r.getMessages();return void 0===this.historyMessagesKey?n.concat(this._getInputMessages(e)):n}async _exitHistory(e,t){let r,n=t.configurable?.messageHistory;r=Array.isArray(e.inputs)&&Array.isArray(e.inputs[0])?e.inputs[0]:e.inputs;let i=this._getInputMessages(r);if(void 0===this.historyMessagesKey){let e=await n.getMessages();i=i.slice(e.length)}let a=e.outputs;if(!a)throw Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(e,null,2)}`);let s=this._getOutputMessages(a);await n.addMessages([...i,...s])}async _mergeConfig(...e){let t=await super._mergeConfig(...e);if(!t.configurable||!t.configurable.sessionId){let e={[this.inputMessagesKey??"input"]:"foo"},t={configurable:{sessionId:"123"}};throw Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(e)}, ${JSON.stringify(t)})`)}let{sessionId:r}=t.configurable;return t.configurable.messageHistory=await this.getMessageHistory(r),t}},m={};(0,n.V)(m,{RouterRunnable:()=>l,Runnable:()=>s.YN,RunnableAssign:()=>s.B2,RunnableBinding:()=>s.fJ,RunnableBranch:()=>c,RunnableEach:()=>s.Vi,RunnableLambda:()=>s.jY,RunnableMap:()=>s.ck,RunnableParallel:()=>s.Pq,RunnablePassthrough:()=>o.k,RunnablePick:()=>s.Fm,RunnableRetry:()=>s.AO,RunnableSequence:()=>s.zZ,RunnableToolLike:()=>s.pG,RunnableWithFallbacks:()=>s.lH,RunnableWithMessageHistory:()=>f,_coerceToRunnable:()=>s.Bp,ensureConfig:()=>i.ZI,getCallbackManagerForConfig:()=>i.kJ,mergeConfigs:()=>i.SV,patchConfig:()=>i.tn,pickRunnableConfigKeys:()=>i.DY,raceWithSignal:()=>a.o})},2730:(e,t,r)=>{"use strict";r.d(t,{$o:()=>a,O3:()=>s,d4:()=>o});var n=r(76591),i=r(85560);function a(e,t){return t?.[e]||n(e)}function s(e,t){return t?.[e]||i(e)}function o(e,t,r){let n={};for(let i in e)Object.hasOwn(e,i)&&(n[t(i,r)]=e[i]);return n}},3188:(e,t,r)=>{"use strict";let n=r(22814);e.exports=(e,t)=>{let r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},4028:(e,t,r)=>{"use strict";r.d(t,{G:()=>s,WI:()=>a,eq:()=>i});var n=r(16227);let i=n.ZS.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),a=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class s extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof s))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.ZS.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)if(n.path.length>0){let r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}s.create=e=>new s(e)},4071:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,i=e.length;for(;i>0;){let a=i/2|0,s=n+a;0>=r(e[s],t)?(n=++s,i-=a+1):i=a}return n}},4397:(e,t,r)=>{"use strict";let n;r.d(t,{Az:()=>f,Ec:()=>h,Se:()=>s,_$:()=>p});var i=r(67893),a=r(49509),s={};(0,i.V)(s,{getEnv:()=>p,getEnvironmentVariable:()=>f,getRuntimeEnvironment:()=>h,isBrowser:()=>o,isDeno:()=>c,isJsDom:()=>u,isNode:()=>d,isWebWorker:()=>l});let o=()=>"undefined"!=typeof window&&void 0!==window.document,l=()=>"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name,u=()=>"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&navigator.userAgent.includes("jsdom"),c=()=>"undefined"!=typeof Deno,d=()=>void 0!==a&&void 0!==a.versions&&void 0!==a.versions.node&&!c(),p=()=>{let e;return o()?"browser":d()?"node":l()?"webworker":u()?"jsdom":c()?"deno":"other"};function h(){return void 0===n&&(n={library:"langchain-js",runtime:p()}),n}function f(e){try{if(void 0!==a)return a.env?.[e];if(c())return Deno?.env.get(e);return}catch{return}}},4556:(e,t,r)=>{"use strict";let n;r.d(t,{kY:()=>o,z:()=>l});var i,a,s,o,l={};r.r(l),r.d(l,{BRAND:()=>eD,DIRTY:()=>x,EMPTY_PATH:()=>_,INVALID:()=>k,NEVER:()=>tk,OK:()=>$,ParseStatus:()=>w,Schema:()=>C,ZodAny:()=>ed,ZodArray:()=>em,ZodBigInt:()=>ea,ZodBoolean:()=>es,ZodBranded:()=>eU,ZodCatch:()=>eL,ZodDate:()=>eo,ZodDefault:()=>eM,ZodDiscriminatedUnion:()=>eb,ZodEffects:()=>ej,ZodEnum:()=>eN,ZodError:()=>h,ZodFirstPartyTypeKind:()=>o,ZodFunction:()=>eE,ZodIntersection:()=>ek,ZodIssueCode:()=>d,ZodLazy:()=>eA,ZodLiteral:()=>eO,ZodMap:()=>eS,ZodNaN:()=>eZ,ZodNativeEnum:()=>eC,ZodNever:()=>eh,ZodNull:()=>ec,ZodNullable:()=>eR,ZodNumber:()=>ei,ZodObject:()=>ey,ZodOptional:()=>ez,ZodParsedType:()=>u,ZodPipeline:()=>eF,ZodPromise:()=>eP,ZodReadonly:()=>eB,ZodRecord:()=>e$,ZodSchema:()=>C,ZodSet:()=>eI,ZodString:()=>er,ZodSymbol:()=>el,ZodTransformer:()=>ej,ZodTuple:()=>ex,ZodType:()=>C,ZodUndefined:()=>eu,ZodUnion:()=>ev,ZodUnknown:()=>ep,ZodVoid:()=>ef,addIssueToContext:()=>b,any:()=>e4,array:()=>e5,bigint:()=>eY,boolean:()=>eX,coerce:()=>tw,custom:()=>eJ,date:()=>eQ,datetimeRegex:()=>X,defaultErrorMap:()=>f,discriminatedUnion:()=>tt,effect:()=>th,enum:()=>tc,function:()=>to,getErrorMap:()=>y,getParsedType:()=>c,instanceof:()=>eq,intersection:()=>tr,isAborted:()=>S,isAsync:()=>A,isDirty:()=>I,isValid:()=>E,late:()=>eW,lazy:()=>tl,literal:()=>tu,makeIssue:()=>v,map:()=>ta,nan:()=>eH,nativeEnum:()=>td,never:()=>e9,null:()=>e2,nullable:()=>tm,number:()=>eG,object:()=>e8,objectUtil:()=>a,oboolean:()=>tb,onumber:()=>t_,optional:()=>tf,ostring:()=>tv,pipeline:()=>ty,preprocess:()=>tg,promise:()=>tp,quotelessJson:()=>p,record:()=>ti,set:()=>ts,setErrorMap:()=>g,strictObject:()=>e7,string:()=>eK,symbol:()=>e0,transformer:()=>th,tuple:()=>tn,undefined:()=>e1,union:()=>te,unknown:()=>e6,util:()=>i,void:()=>e3}),function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(i||(i={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(a||(a={}));let u=i.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),c=e=>{switch(typeof e){case"undefined":return u.undefined;case"string":return u.string;case"number":return Number.isNaN(e)?u.nan:u.number;case"boolean":return u.boolean;case"function":return u.function;case"bigint":return u.bigint;case"symbol":return u.symbol;case"object":if(Array.isArray(e))return u.array;if(null===e)return u.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return u.promise;if("undefined"!=typeof Map&&e instanceof Map)return u.map;if("undefined"!=typeof Set&&e instanceof Set)return u.set;if("undefined"!=typeof Date&&e instanceof Date)return u.date;return u.object;default:return u.unknown}},d=i.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),p=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class h extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof h))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,i.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t=Object.create(null),r=[];for(let n of this.issues)if(n.path.length>0){let r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}h.create=e=>new h(e);let f=(e,t)=>{let r;switch(e.code){case d.invalid_type:r=e.received===u.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case d.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,i.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:r=`Unrecognized key(s) in object: ${i.joinValues(e.keys,", ")}`;break;case d.invalid_union:r="Invalid input";break;case d.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${i.joinValues(e.options)}`;break;case d.invalid_enum_value:r=`Invalid enum value. Expected ${i.joinValues(e.options)}, received '${e.received}'`;break;case d.invalid_arguments:r="Invalid function arguments";break;case d.invalid_return_type:r="Invalid function return type";break;case d.invalid_date:r="Invalid date";break;case d.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:i.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case d.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case d.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case d.custom:r="Invalid input";break;case d.invalid_intersection_types:r="Intersection results could not be merged";break;case d.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case d.not_finite:r="Number must be finite";break;default:r=t.defaultError,i.assertNever(e)}return{message:r}},m=f;function g(e){m=e}function y(){return m}let v=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],s={...i,path:a};if(void 0!==i.message)return{...i,path:a,message:i.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(s,{data:t,defaultError:o}).message;return{...i,path:a,message:o}},_=[];function b(e,t){let r=y(),n=v({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===f?void 0:f].filter(e=>!!e)});e.common.issues.push(n)}class w{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return k;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return w.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return k;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}let k=Object.freeze({status:"aborted"}),x=e=>({status:"dirty",value:e}),$=e=>({status:"valid",value:e}),S=e=>"aborted"===e.status,I=e=>"dirty"===e.status,E=e=>"valid"===e.status,A=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(s||(s={}));class O{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let T=(e,t)=>{if(E(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new h(e.common.issues);return this._error=t,this._error}}};function N(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:a}=e;return"invalid_enum_value"===t.code?{message:a??i.defaultError}:void 0===i.data?{message:a??n??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:a??r??i.defaultError}},description:i}}class C{get description(){return this._def.description}_getType(e){return c(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:c(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new w,ctx:{common:e.parent.common,data:e.data,parsedType:c(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(A(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:c(e)},n=this._parseSync({data:e,path:r.path,parent:r});return T(r,n)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:c(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return E(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>E(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:c(e)},n=this._parse({data:e,path:r.path,parent:r});return T(r,await (A(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),a=()=>n.addIssue({code:d.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(a(),!1)):!!i||(a(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new ej({schema:this,typeName:o.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ez.create(this,this._def)}nullable(){return eR.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return em.create(this)}promise(){return eP.create(this,this._def)}or(e){return ev.create([this,e],this._def)}and(e){return ek.create(this,e,this._def)}transform(e){return new ej({...N(this._def),schema:this,typeName:o.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t="function"==typeof e?e:()=>e;return new eM({...N(this._def),innerType:this,defaultValue:t,typeName:o.ZodDefault})}brand(){return new eU({typeName:o.ZodBranded,type:this,...N(this._def)})}catch(e){let t="function"==typeof e?e:()=>e;return new eL({...N(this._def),innerType:this,catchValue:t,typeName:o.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eF.create(this,e)}readonly(){return eB.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let P=/^c[^\s-]{8,}$/i,j=/^[0-9a-z]+$/,z=/^[0-9A-HJKMNP-TV-Z]{26}$/i,R=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,M=/^[a-z0-9_-]{21}$/i,L=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Z=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,D=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,U="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",F=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,B=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,V=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,J=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,W=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,q=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,K="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",G=RegExp(`^${K}$`);function H(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function Y(e){return RegExp(`^${H(e)}$`)}function X(e){let t=`${K}T${H(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}function Q(e,t){return!!(("v4"===t||!t)&&F.test(e)||("v6"===t||!t)&&V.test(e))}function ee(e,t){if(!L.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));if("object"!=typeof i||null===i||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)return!1;return!0}catch{return!1}}function et(e,t){return!!(("v4"===t||!t)&&B.test(e)||("v6"===t||!t)&&J.test(e))}class er extends C{_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==u.string){let t=this._getOrReturnCtx(e);return b(t,{code:d.invalid_type,expected:u.string,received:t.parsedType}),k}let r=new w;for(let a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(b(t=this._getOrReturnCtx(e,t),{code:d.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if("max"===a.kind)e.data.length>a.value&&(b(t=this._getOrReturnCtx(e,t),{code:d.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if("length"===a.kind){let n=e.data.length>a.value,i=e.data.length<a.value;(n||i)&&(t=this._getOrReturnCtx(e,t),n?b(t,{code:d.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):i&&b(t,{code:d.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if("email"===a.kind)D.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"email",code:d.invalid_string,message:a.message}),r.dirty());else if("emoji"===a.kind)n||(n=RegExp(U,"u")),n.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"emoji",code:d.invalid_string,message:a.message}),r.dirty());else if("uuid"===a.kind)R.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"uuid",code:d.invalid_string,message:a.message}),r.dirty());else if("nanoid"===a.kind)M.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"nanoid",code:d.invalid_string,message:a.message}),r.dirty());else if("cuid"===a.kind)P.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"cuid",code:d.invalid_string,message:a.message}),r.dirty());else if("cuid2"===a.kind)j.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"cuid2",code:d.invalid_string,message:a.message}),r.dirty());else if("ulid"===a.kind)z.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"ulid",code:d.invalid_string,message:a.message}),r.dirty());else if("url"===a.kind)try{new URL(e.data)}catch{b(t=this._getOrReturnCtx(e,t),{validation:"url",code:d.invalid_string,message:a.message}),r.dirty()}else"regex"===a.kind?(a.regex.lastIndex=0,a.regex.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"regex",code:d.invalid_string,message:a.message}),r.dirty())):"trim"===a.kind?e.data=e.data.trim():"includes"===a.kind?e.data.includes(a.value,a.position)||(b(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):"toLowerCase"===a.kind?e.data=e.data.toLowerCase():"toUpperCase"===a.kind?e.data=e.data.toUpperCase():"startsWith"===a.kind?e.data.startsWith(a.value)||(b(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):"endsWith"===a.kind?e.data.endsWith(a.value)||(b(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):"datetime"===a.kind?X(a).test(e.data)||(b(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:"datetime",message:a.message}),r.dirty()):"date"===a.kind?G.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:"date",message:a.message}),r.dirty()):"time"===a.kind?Y(a).test(e.data)||(b(t=this._getOrReturnCtx(e,t),{code:d.invalid_string,validation:"time",message:a.message}),r.dirty()):"duration"===a.kind?Z.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"duration",code:d.invalid_string,message:a.message}),r.dirty()):"ip"===a.kind?Q(e.data,a.version)||(b(t=this._getOrReturnCtx(e,t),{validation:"ip",code:d.invalid_string,message:a.message}),r.dirty()):"jwt"===a.kind?ee(e.data,a.alg)||(b(t=this._getOrReturnCtx(e,t),{validation:"jwt",code:d.invalid_string,message:a.message}),r.dirty()):"cidr"===a.kind?et(e.data,a.version)||(b(t=this._getOrReturnCtx(e,t),{validation:"cidr",code:d.invalid_string,message:a.message}),r.dirty()):"base64"===a.kind?W.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"base64",code:d.invalid_string,message:a.message}),r.dirty()):"base64url"===a.kind?q.test(e.data)||(b(t=this._getOrReturnCtx(e,t),{validation:"base64url",code:d.invalid_string,message:a.message}),r.dirty()):i.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:d.invalid_string,...s.errToObj(r)})}_addCheck(e){return new er({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...s.errToObj(e)})}url(e){return this._addCheck({kind:"url",...s.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...s.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...s.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...s.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...s.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...s.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...s.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...s.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...s.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...s.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...s.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...s.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...s.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...s.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...s.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...s.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...s.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...s.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...s.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...s.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...s.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...s.errToObj(t)})}nonempty(e){return this.min(1,s.errToObj(e))}trim(){return new er({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new er({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new er({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function en(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}er.create=e=>new er({checks:[],typeName:o.ZodString,coerce:e?.coerce??!1,...N(e)});class ei extends C{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==u.number){let t=this._getOrReturnCtx(e);return b(t,{code:d.invalid_type,expected:u.number,received:t.parsedType}),k}let r=new w;for(let n of this._def.checks)"int"===n.kind?i.isInteger(e.data)||(b(t=this._getOrReturnCtx(e,t),{code:d.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(b(t=this._getOrReturnCtx(e,t),{code:d.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(b(t=this._getOrReturnCtx(e,t),{code:d.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==en(e.data,n.value)&&(b(t=this._getOrReturnCtx(e,t),{code:d.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(b(t=this._getOrReturnCtx(e,t),{code:d.not_finite,message:n.message}),r.dirty()):i.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,s.toString(t))}gt(e,t){return this.setLimit("min",e,!1,s.toString(t))}lte(e,t){return this.setLimit("max",e,!0,s.toString(t))}lt(e,t){return this.setLimit("max",e,!1,s.toString(t))}setLimit(e,t,r,n){return new ei({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:s.toString(n)}]})}_addCheck(e){return new ei({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:s.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:s.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:s.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:s.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:s.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:s.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:s.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:s.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:s.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&i.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}ei.create=e=>new ei({checks:[],typeName:o.ZodNumber,coerce:e?.coerce||!1,...N(e)});class ea extends C{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==u.bigint)return this._getInvalidInput(e);let r=new w;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(b(t=this._getOrReturnCtx(e,t),{code:d.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(b(t=this._getOrReturnCtx(e,t),{code:d.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(b(t=this._getOrReturnCtx(e,t),{code:d.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):i.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return b(t,{code:d.invalid_type,expected:u.bigint,received:t.parsedType}),k}gte(e,t){return this.setLimit("min",e,!0,s.toString(t))}gt(e,t){return this.setLimit("min",e,!1,s.toString(t))}lte(e,t){return this.setLimit("max",e,!0,s.toString(t))}lt(e,t){return this.setLimit("max",e,!1,s.toString(t))}setLimit(e,t,r,n){return new ea({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:s.toString(n)}]})}_addCheck(e){return new ea({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:s.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:s.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:s.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:s.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:s.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ea.create=e=>new ea({checks:[],typeName:o.ZodBigInt,coerce:e?.coerce??!1,...N(e)});class es extends C{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==u.boolean){let t=this._getOrReturnCtx(e);return b(t,{code:d.invalid_type,expected:u.boolean,received:t.parsedType}),k}return $(e.data)}}es.create=e=>new es({typeName:o.ZodBoolean,coerce:e?.coerce||!1,...N(e)});class eo extends C{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==u.date){let t=this._getOrReturnCtx(e);return b(t,{code:d.invalid_type,expected:u.date,received:t.parsedType}),k}if(Number.isNaN(e.data.getTime()))return b(this._getOrReturnCtx(e),{code:d.invalid_date}),k;let r=new w;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(b(t=this._getOrReturnCtx(e,t),{code:d.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(b(t=this._getOrReturnCtx(e,t),{code:d.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):i.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new eo({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:s.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:s.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}eo.create=e=>new eo({checks:[],coerce:e?.coerce||!1,typeName:o.ZodDate,...N(e)});class el extends C{_parse(e){if(this._getType(e)!==u.symbol){let t=this._getOrReturnCtx(e);return b(t,{code:d.invalid_type,expected:u.symbol,received:t.parsedType}),k}return $(e.data)}}el.create=e=>new el({typeName:o.ZodSymbol,...N(e)});class eu extends C{_parse(e){if(this._getType(e)!==u.undefined){let t=this._getOrReturnCtx(e);return b(t,{code:d.invalid_type,expected:u.undefined,received:t.parsedType}),k}return $(e.data)}}eu.create=e=>new eu({typeName:o.ZodUndefined,...N(e)});class ec extends C{_parse(e){if(this._getType(e)!==u.null){let t=this._getOrReturnCtx(e);return b(t,{code:d.invalid_type,expected:u.null,received:t.parsedType}),k}return $(e.data)}}ec.create=e=>new ec({typeName:o.ZodNull,...N(e)});class ed extends C{constructor(){super(...arguments),this._any=!0}_parse(e){return $(e.data)}}ed.create=e=>new ed({typeName:o.ZodAny,...N(e)});class ep extends C{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $(e.data)}}ep.create=e=>new ep({typeName:o.ZodUnknown,...N(e)});class eh extends C{_parse(e){let t=this._getOrReturnCtx(e);return b(t,{code:d.invalid_type,expected:u.never,received:t.parsedType}),k}}eh.create=e=>new eh({typeName:o.ZodNever,...N(e)});class ef extends C{_parse(e){if(this._getType(e)!==u.undefined){let t=this._getOrReturnCtx(e);return b(t,{code:d.invalid_type,expected:u.void,received:t.parsedType}),k}return $(e.data)}}ef.create=e=>new ef({typeName:o.ZodVoid,...N(e)});class em extends C{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==u.array)return b(t,{code:d.invalid_type,expected:u.array,received:t.parsedType}),k;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(b(t,{code:e?d.too_big:d.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(b(t,{code:d.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(b(t,{code:d.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new O(t,e,t.path,r)))).then(e=>w.mergeArray(r,e));let i=[...t.data].map((e,r)=>n.type._parseSync(new O(t,e,t.path,r)));return w.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new em({...this._def,minLength:{value:e,message:s.toString(t)}})}max(e,t){return new em({...this._def,maxLength:{value:e,message:s.toString(t)}})}length(e,t){return new em({...this._def,exactLength:{value:e,message:s.toString(t)}})}nonempty(e){return this.min(1,e)}}function eg(e){if(e instanceof ey){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=ez.create(eg(n))}return new ey({...e._def,shape:()=>t})}if(e instanceof em)return new em({...e._def,type:eg(e.element)});if(e instanceof ez)return ez.create(eg(e.unwrap()));if(e instanceof eR)return eR.create(eg(e.unwrap()));if(e instanceof ex)return ex.create(e.items.map(e=>eg(e)));else return e}em.create=(e,t)=>new em({type:e,minLength:null,maxLength:null,exactLength:null,typeName:o.ZodArray,...N(t)});class ey extends C{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=i.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==u.object){let t=this._getOrReturnCtx(e);return b(t,{code:d.invalid_type,expected:u.object,received:t.parsedType}),k}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof eh&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||a.push(e);let s=[];for(let e of i){let t=n[e],i=r.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new O(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof eh){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of a)s.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)a.length>0&&(b(r,{code:d.unrecognized_keys,keys:a}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of a){let n=r.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new O(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of s){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>w.mergeObjectSync(t,e)):w.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return s.errToObj,new ey({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:s.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new ey({...this._def,unknownKeys:"strip"})}passthrough(){return new ey({...this._def,unknownKeys:"passthrough"})}extend(e){return new ey({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ey({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:o.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ey({...this._def,catchall:e})}pick(e){let t={};for(let r of i.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new ey({...this._def,shape:()=>t})}omit(e){let t={};for(let r of i.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new ey({...this._def,shape:()=>t})}deepPartial(){return eg(this)}partial(e){let t={};for(let r of i.objectKeys(this.shape)){let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new ey({...this._def,shape:()=>t})}required(e){let t={};for(let r of i.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof ez;)e=e._def.innerType;t[r]=e}return new ey({...this._def,shape:()=>t})}keyof(){return eT(i.objectKeys(this.shape))}}ey.create=(e,t)=>new ey({shape:()=>e,unknownKeys:"strip",catchall:eh.create(),typeName:o.ZodObject,...N(t)}),ey.strictCreate=(e,t)=>new ey({shape:()=>e,unknownKeys:"strict",catchall:eh.create(),typeName:o.ZodObject,...N(t)}),ey.lazycreate=(e,t)=>new ey({shape:e,unknownKeys:"strip",catchall:eh.create(),typeName:o.ZodObject,...N(t)});class ev extends C{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;function n(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new h(e.ctx.common.issues));return b(t,{code:d.invalid_union,unionErrors:r}),k}if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(n);{let e,n=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new h(e));return b(t,{code:d.invalid_union,unionErrors:i}),k}}get options(){return this._def.options}}ev.create=(e,t)=>new ev({options:e,typeName:o.ZodUnion,...N(t)});let e_=e=>{if(e instanceof eA)return e_(e.schema);if(e instanceof ej)return e_(e.innerType());if(e instanceof eO)return[e.value];if(e instanceof eN)return e.options;if(e instanceof eC)return i.objectValues(e.enum);else if(e instanceof eM)return e_(e._def.innerType);else if(e instanceof eu)return[void 0];else if(e instanceof ec)return[null];else if(e instanceof ez)return[void 0,...e_(e.unwrap())];else if(e instanceof eR)return[null,...e_(e.unwrap())];else if(e instanceof eU)return e_(e.unwrap());else if(e instanceof eB)return e_(e.unwrap());else if(e instanceof eL)return e_(e._def.innerType);else return[]};class eb extends C{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.object)return b(t,{code:d.invalid_type,expected:u.object,received:t.parsedType}),k;let r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(b(t,{code:d.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),k)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=e_(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new eb({typeName:o.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...N(r)})}}function ew(e,t){let r=c(e),n=c(t);if(e===t)return{valid:!0,data:e};if(r===u.object&&n===u.object){let r=i.objectKeys(t),n=i.objectKeys(e).filter(e=>-1!==r.indexOf(e)),a={...e,...t};for(let r of n){let n=ew(e[r],t[r]);if(!n.valid)return{valid:!1};a[r]=n.data}return{valid:!0,data:a}}if(r===u.array&&n===u.array){if(e.length!==t.length)return{valid:!1};let r=[];for(let n=0;n<e.length;n++){let i=ew(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}if(r===u.date&&n===u.date&&+e==+t)return{valid:!0,data:e};return{valid:!1}}class ek extends C{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(S(e)||S(n))return k;let i=ew(e.value,n.value);return i.valid?((I(e)||I(n))&&t.dirty(),{status:t.value,value:i.data}):(b(r,{code:d.invalid_intersection_types}),k)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ek.create=(e,t,r)=>new ek({left:e,right:t,typeName:o.ZodIntersection,...N(r)});class ex extends C{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.array)return b(r,{code:d.invalid_type,expected:u.array,received:r.parsedType}),k;if(r.data.length<this._def.items.length)return b(r,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),k;!this._def.rest&&r.data.length>this._def.items.length&&(b(r,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new O(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>w.mergeArray(t,e)):w.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ex({...this._def,rest:e})}}ex.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ex({items:e,typeName:o.ZodTuple,rest:null,...N(t)})};class e$ extends C{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.object)return b(r,{code:d.invalid_type,expected:u.object,received:r.parsedType}),k;let n=[],i=this._def.keyType,a=this._def.valueType;for(let e in r.data)n.push({key:i._parse(new O(r,e,r.path,e)),value:a._parse(new O(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?w.mergeObjectAsync(t,n):w.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new e$(t instanceof C?{keyType:e,valueType:t,typeName:o.ZodRecord,...N(r)}:{keyType:er.create(),valueType:e,typeName:o.ZodRecord,...N(t)})}}class eS extends C{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.map)return b(r,{code:d.invalid_type,expected:u.map,received:r.parsedType}),k;let n=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([e,t],a)=>({key:n._parse(new O(r,e,r.path,[a,"key"])),value:i._parse(new O(r,t,r.path,[a,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of a){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return k;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of a){let n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return k;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}eS.create=(e,t,r)=>new eS({valueType:t,keyType:e,typeName:o.ZodMap,...N(r)});class eI extends C{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.set)return b(r,{code:d.invalid_type,expected:u.set,received:r.parsedType}),k;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(b(r,{code:d.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(b(r,{code:d.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function a(e){let r=new Set;for(let n of e){if("aborted"===n.status)return k;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let s=[...r.data.values()].map((e,t)=>i._parse(new O(r,e,r.path,t)));return r.common.async?Promise.all(s).then(e=>a(e)):a(s)}min(e,t){return new eI({...this._def,minSize:{value:e,message:s.toString(t)}})}max(e,t){return new eI({...this._def,maxSize:{value:e,message:s.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eI.create=(e,t)=>new eI({valueType:e,minSize:null,maxSize:null,typeName:o.ZodSet,...N(t)});class eE extends C{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.function)return b(t,{code:d.invalid_type,expected:u.function,received:t.parsedType}),k;function r(e,r){return v({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,y(),f].filter(e=>!!e),issueData:{code:d.invalid_arguments,argumentsError:r}})}function n(e,r){return v({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,y(),f].filter(e=>!!e),issueData:{code:d.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof eP){let e=this;return $(async function(...t){let s=new h([]),o=await e._def.args.parseAsync(t,i).catch(e=>{throw s.addIssue(r(t,e)),s}),l=await Reflect.apply(a,this,o);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw s.addIssue(n(l,e)),s})})}{let e=this;return $(function(...t){let s=e._def.args.safeParse(t,i);if(!s.success)throw new h([r(t,s.error)]);let o=Reflect.apply(a,this,s.data),l=e._def.returns.safeParse(o,i);if(!l.success)throw new h([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eE({...this._def,args:ex.create(e).rest(ep.create())})}returns(e){return new eE({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eE({args:e||ex.create([]).rest(ep.create()),returns:t||ep.create(),typeName:o.ZodFunction,...N(r)})}}class eA extends C{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}eA.create=(e,t)=>new eA({getter:e,typeName:o.ZodLazy,...N(t)});class eO extends C{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return b(t,{received:t.data,code:d.invalid_literal,expected:this._def.value}),k}return{status:"valid",value:e.data}}get value(){return this._def.value}}function eT(e,t){return new eN({values:e,typeName:o.ZodEnum,...N(t)})}eO.create=(e,t)=>new eO({value:e,typeName:o.ZodLiteral,...N(t)});class eN extends C{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return b(t,{expected:i.joinValues(r),received:t.parsedType,code:d.invalid_type}),k}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return b(t,{received:t.data,code:d.invalid_enum_value,options:r}),k}return $(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return eN.create(e,{...this._def,...t})}exclude(e,t=this._def){return eN.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}eN.create=eT;class eC extends C{_parse(e){let t=i.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==u.string&&r.parsedType!==u.number){let e=i.objectValues(t);return b(r,{expected:i.joinValues(e),received:r.parsedType,code:d.invalid_type}),k}if(this._cache||(this._cache=new Set(i.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=i.objectValues(t);return b(r,{received:r.data,code:d.invalid_enum_value,options:e}),k}return $(e.data)}get enum(){return this._def.values}}eC.create=(e,t)=>new eC({values:e,typeName:o.ZodNativeEnum,...N(t)});class eP extends C{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==u.promise&&!1===t.common.async?(b(t,{code:d.invalid_type,expected:u.promise,received:t.parsedType}),k):$((t.parsedType===u.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}eP.create=(e,t)=>new eP({type:e,typeName:o.ZodPromise,...N(t)});class ej extends C{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===o.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:e=>{b(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===n.type){let e=n.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return k;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?k:"dirty"===n.status||"dirty"===t.value?x(n.value):n});{if("aborted"===t.value)return k;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?k:"dirty"===n.status||"dirty"===t.value?x(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?k:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?k:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>E(e)?Promise.resolve(n.transform(e.value,a)).then(e=>({status:t.value,value:e})):k);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!E(e))return k;let i=n.transform(e.value,a);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}i.assertNever(n)}}ej.create=(e,t,r)=>new ej({schema:e,typeName:o.ZodEffects,effect:t,...N(r)}),ej.createWithPreprocess=(e,t,r)=>new ej({schema:t,effect:{type:"preprocess",transform:e},typeName:o.ZodEffects,...N(r)});class ez extends C{_parse(e){return this._getType(e)===u.undefined?$(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ez.create=(e,t)=>new ez({innerType:e,typeName:o.ZodOptional,...N(t)});class eR extends C{_parse(e){return this._getType(e)===u.null?$(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eR.create=(e,t)=>new eR({innerType:e,typeName:o.ZodNullable,...N(t)});class eM extends C{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===u.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eM.create=(e,t)=>new eM({innerType:e,typeName:o.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...N(t)});class eL extends C{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return A(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new h(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new h(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eL.create=(e,t)=>new eL({innerType:e,typeName:o.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...N(t)});class eZ extends C{_parse(e){if(this._getType(e)!==u.nan){let t=this._getOrReturnCtx(e);return b(t,{code:d.invalid_type,expected:u.nan,received:t.parsedType}),k}return{status:"valid",value:e.data}}}eZ.create=e=>new eZ({typeName:o.ZodNaN,...N(e)});let eD=Symbol("zod_brand");class eU extends C{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eF extends C{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?k:"dirty"===e.status?(t.dirty(),x(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?k:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eF({in:e,out:t,typeName:o.ZodPipeline})}}class eB extends C{_parse(e){let t=this._def.innerType._parse(e),r=e=>(E(e)&&(e.value=Object.freeze(e.value)),e);return A(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eV(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function eJ(e,t={},r){return e?ed.create().superRefine((n,i)=>{let a=e(n);if(a instanceof Promise)return a.then(e=>{if(!e){let e=eV(t,n),a=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:a})}});if(!a){let e=eV(t,n),a=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:a})}}):ed.create()}eB.create=(e,t)=>new eB({innerType:e,typeName:o.ZodReadonly,...N(t)});let eW={object:ey.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(o||(o={}));let eq=(e,t={message:`Input not instance of ${e.name}`})=>eJ(t=>t instanceof e,t),eK=er.create,eG=ei.create,eH=eZ.create,eY=ea.create,eX=es.create,eQ=eo.create,e0=el.create,e1=eu.create,e2=ec.create,e4=ed.create,e6=ep.create,e9=eh.create,e3=ef.create,e5=em.create,e8=ey.create,e7=ey.strictCreate,te=ev.create,tt=eb.create,tr=ek.create,tn=ex.create,ti=e$.create,ta=eS.create,ts=eI.create,to=eE.create,tl=eA.create,tu=eO.create,tc=eN.create,td=eC.create,tp=eP.create,th=ej.create,tf=ez.create,tm=eR.create,tg=ej.createWithPreprocess,ty=eF.create,tv=()=>eK().optional(),t_=()=>eG().optional(),tb=()=>eX().optional(),tw={string:e=>er.create({...e,coerce:!0}),number:e=>ei.create({...e,coerce:!0}),boolean:e=>es.create({...e,coerce:!0}),bigint:e=>ea.create({...e,coerce:!0}),date:e=>eo.create({...e,coerce:!0})},tk=k},4929:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});var n=r(58036),i=r(44182),a=r(59305);r(913);var s=class extends a.T{static lc_name(){return"JsonOutputParser"}lc_namespace=["langchain_core","output_parsers"];lc_serializable=!0;_concatOutputChunks(e,t){return this.diff?super._concatOutputChunks(e,t):t}_diff(e,t){if(t)return e?(0,i.U)(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return(0,n.D)(e[0].text)}async parse(e){return(0,n.D)(e,JSON.parse)}getFormatInstructions(){return""}}},5168:(e,t,r)=>{"use strict";r.d(t,{s:()=>u});var n="0123456789abcdef".split(""),i=[-0x80000000,8388608,32768,128],a=[24,16,8,0],s=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],o=[];function l(e,t){t?(o[0]=o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0,this.blocks=o):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=0xc1059ed8,this.h1=0x367cd507,this.h2=0x3070dd17,this.h3=0xf70e5939,this.h4=0xffc00b31,this.h5=0x68581511,this.h6=0x64f98fa7,this.h7=0xbefa4fa4):(this.h0=0x6a09e667,this.h1=0xbb67ae85,this.h2=0x3c6ef372,this.h3=0xa54ff53a,this.h4=0x510e527f,this.h5=0x9b05688c,this.h6=0x1f83d9ab,this.h7=0x5be0cd19),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}l.prototype.update=function(e){if(!this.finalized){var t,r=typeof e;if("string"!==r){if("object"===r){if(null===e)throw Error(ERROR);else if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw Error(ERROR)}else throw Error(ERROR);t=!0}for(var n,i,s=0,o=e.length,l=this.blocks;s<o;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,this.block=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),t)for(i=this.start;s<o&&i<64;++s)l[i>>>2]|=e[s]<<a[3&i++];else for(i=this.start;s<o&&i<64;++s)(n=e.charCodeAt(s))<128?l[i>>>2]|=n<<a[3&i++]:(n<2048?l[i>>>2]|=(192|n>>>6)<<a[3&i++]:(n<55296||n>=57344?l[i>>>2]|=(224|n>>>12)<<a[3&i++]:(n=65536+((1023&n)<<10|1023&e.charCodeAt(++s)),l[i>>>2]|=(240|n>>>18)<<a[3&i++],l[i>>>2]|=(128|n>>>12&63)<<a[3&i++]),l[i>>>2]|=(128|n>>>6&63)<<a[3&i++]),l[i>>>2]|=(128|63&n)<<a[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=l[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>0xffffffff&&(this.hBytes+=this.bytes/0x100000000|0,this.bytes=this.bytes%0x100000000),this}},l.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=i[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},l.prototype.hash=function(){var e,t,r,n,i,a,o,l,u,c,d,p=this.h0,h=this.h1,f=this.h2,m=this.h3,g=this.h4,y=this.h5,v=this.h6,_=this.h7,b=this.blocks;for(e=16;e<64;++e)t=((i=b[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,r=((i=b[e-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,b[e]=b[e-16]+t+b[e-7]+r|0;for(e=0,d=h&f;e<64;e+=4)this.first?(this.is224?(l=300032,_=(i=b[0]-0x543c9a5b)-0x8f1a6c7|0,m=i+0x170e9b5|0):(l=0x2a01a605,_=(i=b[0]-0xc881298)-0x5ab00ac6|0,m=i+0x8909ae5|0),this.first=!1):(t=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),r=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),n=(l=p&h)^p&f^d,i=_+r+(o=g&y^~g&v)+s[e]+b[e],a=t+n,_=m+i|0,m=i+a|0),t=(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10),r=(_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7),n=(u=m&p)^m&h^l,i=y+r+(o=v&_^~v&g)+s[e+1]+b[e+1],a=t+n,v=f+i|0,t=((f=i+a|0)>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),r=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),n=(c=f&m)^f&p^u,i=g+r+(o=y&v^~y&_)+s[e+2]+b[e+2],a=t+n,y=h+i|0,t=((h=i+a|0)>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),r=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),n=(d=h&f)^h&m^c,i=g+r+(o=y&v^~y&_)+s[e+3]+b[e+3],a=t+n,g=p+i|0,p=i+a|0,this.chromeBugWorkAround=!0;this.h0=this.h0+p|0,this.h1=this.h1+h|0,this.h2=this.h2+f|0,this.h3=this.h3+m|0,this.h4=this.h4+g|0,this.h5=this.h5+y|0,this.h6=this.h6+v|0,this.h7=this.h7+_|0},l.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,i=this.h3,a=this.h4,s=this.h5,o=this.h6,l=this.h7,u=n[e>>>28&15]+n[e>>>24&15]+n[e>>>20&15]+n[e>>>16&15]+n[e>>>12&15]+n[e>>>8&15]+n[e>>>4&15]+n[15&e]+n[t>>>28&15]+n[t>>>24&15]+n[t>>>20&15]+n[t>>>16&15]+n[t>>>12&15]+n[t>>>8&15]+n[t>>>4&15]+n[15&t]+n[r>>>28&15]+n[r>>>24&15]+n[r>>>20&15]+n[r>>>16&15]+n[r>>>12&15]+n[r>>>8&15]+n[r>>>4&15]+n[15&r]+n[i>>>28&15]+n[i>>>24&15]+n[i>>>20&15]+n[i>>>16&15]+n[i>>>12&15]+n[i>>>8&15]+n[i>>>4&15]+n[15&i]+n[a>>>28&15]+n[a>>>24&15]+n[a>>>20&15]+n[a>>>16&15]+n[a>>>12&15]+n[a>>>8&15]+n[a>>>4&15]+n[15&a]+n[s>>>28&15]+n[s>>>24&15]+n[s>>>20&15]+n[s>>>16&15]+n[s>>>12&15]+n[s>>>8&15]+n[s>>>4&15]+n[15&s]+n[o>>>28&15]+n[o>>>24&15]+n[o>>>20&15]+n[o>>>16&15]+n[o>>>12&15]+n[o>>>8&15]+n[o>>>4&15]+n[15&o];return this.is224||(u+=n[l>>>28&15]+n[l>>>24&15]+n[l>>>20&15]+n[l>>>16&15]+n[l>>>12&15]+n[l>>>8&15]+n[l>>>4&15]+n[15&l]),u},l.prototype.toString=l.prototype.hex,l.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n,i>>>24&255,i>>>16&255,i>>>8&255,255&i,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s];return this.is224||l.push(o>>>24&255,o>>>16&255,o>>>8&255,255&o),l},l.prototype.array=l.prototype.digest,l.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e};let u=(...e)=>new l(!1,!0).update(e.join("")).hex()},5791:(e,t,r)=>{"use strict";let n=r(55463);e.exports=(e,t)=>e.sort((e,r)=>n(r,e,t))},5845:(e,t,r)=>{"use strict";r.d(t,{i:()=>o});var n,i=r(12115),a=r(52712),s=(n||(n=r.t(i,2)))[" useInsertionEffect ".trim().toString()]||a.N;function o({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){let[a,s,o]=l({defaultProp:t,onChange:r}),c=void 0!==e,d=c?e:a;{let t=i.useRef(void 0!==e);i.useEffect(()=>{let e=t.current;if(e!==c){let t=e?"controlled":"uncontrolled",r=c?"controlled":"uncontrolled";console.warn(`${n} is changing from ${t} to ${r}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=c},[c,n])}return[d,i.useCallback(t=>{if(c){let r=u(t)?t(e):t;r!==e&&o.current?.(r)}else s(t)},[c,e,s,o])]}function l({defaultProp:e,onChange:t}){let[r,n]=i.useState(e),a=i.useRef(r),o=i.useRef(t);return s(()=>{o.current=t},[t]),i.useEffect(()=>{a.current!==r&&(o.current?.(r),a.current=r)},[r,a]),[r,n,o]}function u(e){return"function"==typeof e}Symbol("RADIX:SYNC_STATE")},7356:(e,t,r)=>{"use strict";r.d(t,{g:()=>g});let n=Object.prototype.toString,i=e=>"[object Error]"===n.call(e),a=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function s(e){if(!(e&&i(e)&&"TypeError"===e.name&&"string"==typeof e.message))return!1;let{message:t,stack:r}=e;return"Load failed"===t?void 0===r||"__sentry_captured__"in e:!!t.startsWith("error sending request for url")||a.has(t)}function o(e){if("number"==typeof e){if(e<0)throw TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(e))throw TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(void 0!==e)throw TypeError("Expected `retries` to be a number or Infinity.")}function l(e,t,{min:r=0,allowInfinity:n=!1}={}){if(void 0!==t){if("number"!=typeof t||Number.isNaN(t))throw TypeError(`Expected \`${e}\` to be a number${n?" or Infinity":""}.`);if(!n&&!Number.isFinite(t))throw TypeError(`Expected \`${e}\` to be a finite number.`);if(t<r)throw TypeError(`Expected \`${e}\` to be \u2265 ${r}.`)}}class u extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function c(e,t){let r=Math.max(1,e+1),n=Math.round((t.randomize?Math.random()+1:1)*t.minTimeout*t.factor**(r-1));return Math.min(n,t.maxTimeout)}function d(e,t){return Number.isFinite(t)?t-(performance.now()-e):t}async function p({error:e,attemptNumber:t,retriesConsumed:r,startTime:n,options:i}){let a=e instanceof Error?e:TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(a instanceof u)throw a.originalError;let o=Number.isFinite(i.retries)?Math.max(0,i.retries-r):i.retries,l=i.maxRetryTime??Number.POSITIVE_INFINITY,p=Object.freeze({error:a,attemptNumber:t,retriesLeft:o,retriesConsumed:r});if(await i.onFailedAttempt(p),0>=d(n,l))throw a;let h=await i.shouldConsumeRetry(p),f=d(n,l);if(f<=0||o<=0)throw a;if(a instanceof TypeError&&!s(a)){if(h)throw a;return i.signal?.throwIfAborted(),!1}if(!await i.shouldRetry(p))throw a;if(!h)return i.signal?.throwIfAborted(),!1;let m=Math.min(c(r,i),f);return m>0&&await new Promise((e,t)=>{let r=()=>{clearTimeout(n),i.signal?.removeEventListener("abort",r),t(i.signal.reason)},n=setTimeout(()=>{i.signal?.removeEventListener("abort",r),e()},m);i.unref&&n.unref?.(),i.signal?.addEventListener("abort",r,{once:!0})}),i.signal?.throwIfAborted(),!0}async function h(e,t={}){if(o((t={...t}).retries),Object.hasOwn(t,"forever"))throw Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");t.retries??=10,t.factor??=2,t.minTimeout??=1e3,t.maxTimeout??=Number.POSITIVE_INFINITY,t.maxRetryTime??=Number.POSITIVE_INFINITY,t.randomize??=!1,t.onFailedAttempt??=()=>{},t.shouldRetry??=()=>!0,t.shouldConsumeRetry??=()=>!0,l("factor",t.factor,{min:0,allowInfinity:!1}),l("minTimeout",t.minTimeout,{min:0,allowInfinity:!1}),l("maxTimeout",t.maxTimeout,{min:0,allowInfinity:!0}),l("maxRetryTime",t.maxRetryTime,{min:0,allowInfinity:!0}),t.factor>0||(t.factor=1),t.signal?.throwIfAborted();let r=0,n=0,i=performance.now();for(;!Number.isFinite(t.retries)||n<=t.retries;){r++;try{t.signal?.throwIfAborted();let n=await e(r);return t.signal?.throwIfAborted(),n}catch(e){await p({error:e,attemptNumber:r,retriesConsumed:n,startTime:i,options:t})&&n++}}throw Error("Retry attempts exhausted without throwing an error.")}var f=r(52435);let m=[408,425,429,500,502,503,504];class g{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxQueueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.maxQueueSizeBytes=e.maxQueueSizeBytes,this.queue=new f.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e?.onFailedResponseHook}call(e,...t){return this.callWithOptions({},e,...t)}callWithOptions(e,t,...r){let n=e.sizeBytes??0;if(void 0!==this.maxQueueSizeBytes&&n>0&&this.queueSizeBytes+n>this.maxQueueSizeBytes)return Promise.reject(Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${n} bytes.`));n>0&&(this.queueSizeBytes+=n);let i=this.onFailedResponseHook,a=this.queue.add(()=>h(()=>t(...r).catch(e=>{if(e instanceof Error)throw e;throw Error(e)}),{async onFailedAttempt({error:e}){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||"TimeoutError"===e.name||e.message.startsWith("AbortError")||e?.code==="ECONNABORTED")throw e;let t=e?.response;if(i&&await i(t))return;let r=t?.status??e?.status;if(r&&!m.includes(+r))throw e},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0});return(n>0&&(a=a.finally(()=>{this.queueSizeBytes-=n})),e.signal)?Promise.race([a,new Promise((t,r)=>{e.signal?.addEventListener("abort",()=>{r(Error("AbortError"))})})]):a}}},8868:e=>{"use strict";class t{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}e.exports=t},8872:(e,t,r)=>{"use strict";r.d(t,{BA:()=>i.BA,IU:()=>i.IU,K3:()=>i.K3,PA:()=>i.PA,Pq:()=>i.Pq,QV:()=>i.QV,RA:()=>i.RA,W0:()=>i.W0,WL:()=>a,Yi:()=>i.Yi,Zu:()=>i.Zu,c9:()=>i.c9,cg:()=>i.cg,zO:()=>i.zO});var n=r(67893),i=r(34497),a={};(0,n.V)(a,{extendInteropZodObject:()=>i.W0,getInteropZodDefaultGetter:()=>i.RA,getInteropZodObjectShape:()=>i.PA,getSchemaDescription:()=>i.cg,interopParse:()=>i.Zu,interopParseAsync:()=>i.hZ,interopSafeParse:()=>i.Yi,interopSafeParseAsync:()=>i.K3,interopZodObjectMakeFieldsOptional:()=>i.zO,interopZodObjectPartial:()=>i.BA,interopZodObjectPassthrough:()=>i.qT,interopZodObjectStrict:()=>i.pE,interopZodTransformInputSchema:()=>i.EN,isInteropZodError:()=>i.BZ,isInteropZodLiteral:()=>i.Gd,isInteropZodObject:()=>i.QV,isInteropZodSchema:()=>i.c9,isShapelessZodSchema:()=>i.X2,isSimpleStringZodSchema:()=>i.yQ,isZodArrayV4:()=>i.zL,isZodLiteralV3:()=>i.yx,isZodLiteralV4:()=>i.rA,isZodNullableV4:()=>i.vf,isZodObjectV3:()=>i.IS,isZodObjectV4:()=>i.gY,isZodOptionalV4:()=>i.S8,isZodSchema:()=>i.lm,isZodSchemaV3:()=>i.IU,isZodSchemaV4:()=>i.Pq})},10999:(e,t,r)=>{"use strict";r.d(t,{C4:()=>o,Tn:()=>s,jk:()=>l});var n=r(85579),i=r(50696);function a(e){return(0,n.W)(e)?{type:e.type,mimeType:e.mime_type,url:e.url,metadata:e.metadata}:(0,n.cJ)(e)?{type:e.type,mimeType:e.mime_type??"application/octet-stream",data:e.data,metadata:e.metadata}:(0,n.oe)(e)?{type:e.type,mimeType:e.mime_type,fileId:e.id,metadata:e.metadata}:e}function s(e){return e.map(a)}function o(e){return!!((0,i.MP)(e,"image_url")&&(0,i.nD)(e.image_url)||(0,i.MP)(e,"input_audio")&&(0,i.nD)(e.input_audio)||(0,i.MP)(e,"file")&&(0,i.nD)(e.file))}function l(e){if((0,i.MP)(e,"image_url")&&(0,i.nD)(e.image_url)&&(0,i.vQ)(e.image_url.url)){let t=(0,n.Q7)({dataUrl:e.image_url.url});return t?{type:"image",mimeType:t.mime_type,data:t.data}:{type:"image",url:e.image_url.url}}if((0,i.MP)(e,"input_audio")&&(0,i.nD)(e.input_audio)&&(0,i.vQ)(e.input_audio.data)&&(0,i.vQ)(e.input_audio.format))return{type:"audio",data:e.input_audio.data,mimeType:`audio/${e.input_audio.format}`};if((0,i.MP)(e,"file")&&(0,i.nD)(e.file)&&(0,i.vQ)(e.file.data)){let t=(0,n.Q7)({dataUrl:e.file.data});if(t)return{type:"file",data:t.data,mimeType:t.mime_type};if((0,i.vQ)(e.file.file_id))return{type:"file",fileId:e.file.file_id}}return e}},11164:(e,t,r)=>{"use strict";r.d(t,{aF:()=>g,sW:()=>f,wb:()=>m});var n=r(69988);class i{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...t){let r;if(!this.hasWarned&&(0,n.QK)()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0),1===t.length&&"function"==typeof t[0]?r=t[0]:2===t.length&&"function"==typeof t[1]?r=t[1]:3===t.length&&"function"==typeof t[2]&&(r=t[2]),"function"==typeof r)return r()}}class a{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new i})}getTracer(e,t){return this.mockTracer}getActiveSpan(){}setSpan(e,t){return e}getSpan(e){}setSpanContext(e,t){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}}class s{active(){return{}}with(e,t){return t()}}let o=Symbol.for("ls:otel_trace"),l=Symbol.for("ls:otel_context"),u=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),c=new a,d=new s;class p{getTraceInstance(){return globalThis[o]??c}getContextInstance(){return globalThis[l]??d}initializeGlobalInstances(e){void 0===globalThis[o]&&(globalThis[o]=e.trace),void 0===globalThis[l]&&(globalThis[l]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[u]=e}getDefaultOTLPTracerComponents(){return globalThis[u]??void 0}}let h=new p;function f(){return h.getTraceInstance()}function m(){return h.getContextInstance()}function g(){return h.getDefaultOTLPTracerComponents()}},11275:(e,t,r)=>{"use strict";r.d(t,{X:()=>a});var n=r(12115),i=r(52712);function a(e){let[t,r]=n.useState(void 0);return(0,i.N)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,i;if(!Array.isArray(t)||!t.length)return;let a=t[0];if("borderBoxSize"in a){let e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,i=t.blockSize}else n=e.offsetWidth,i=e.offsetHeight;r({width:n,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}},14018:e=>{"use strict";e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},14654:(e,t,r)=>{"use strict";r.d(t,{CC:()=>o,mJ:()=>s,vd:()=>a});var n=r(42452),i=r(41180);r(1995);var a=class extends i.YN{parseResultWithPrompt(e,t,r){return this.parseResult(e,r)}_baseMessageToString(e){return"string"==typeof e.content?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return"string"==typeof e?this._callWithConfig(async(e,t)=>this.parseResult([{text:e}],t?.callbacks),e,{...t,runType:"parser"}):this._callWithConfig(async(e,t)=>this.parseResult([{message:e,text:this._baseMessageToString(e)}],t?.callbacks),e,{...t,runType:"parser"})}},s=class extends a{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,r){return this.parse(e,r)}_type(){throw Error("_type not implemented")}},o=class extends Error{llmOutput;observation;sendToLLM;constructor(e,t,r,i=!1){if(super(e),this.llmOutput=t,this.observation=r,this.sendToLLM=i,i&&(void 0===r||void 0===t))throw Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");(0,n.Y)(this,"OUTPUT_PARSING_FAILURE")}}},14672:(e,t,r)=>{"use strict";r.d(t,{D9:()=>p,wO:()=>s});var n=r(67893),i=r(90338),a=r(5168);r(65662);var s={};(0,n.V)(s,{BaseCache:()=>c,InMemoryCache:()=>p,defaultHashKeyEncoder:()=>o,deserializeStoredGeneration:()=>l,serializeGeneration:()=>u});let o=(...e)=>(0,a.s)(e.join("_"));function l(e){return void 0!==e.message?{text:e.text,message:(0,i.Pz)(e.message)}:{text:e.text}}function u(e){let t={text:e.text};return void 0!==e.message&&(t.message=e.message.toDict()),t}var c=class{keyEncoder=o;makeDefaultKeyEncoder(e){this.keyEncoder=e}};let d=new Map;var p=class e extends c{cache;constructor(e){super(),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(this.keyEncoder(e,t))??null)}async update(e,t,r){this.cache.set(this.keyEncoder(e,t),r)}static global(){return new e(d)}}},15764:(e,t,r)=>{"use strict";function n(e){if(!e||e.split("/").length>2||e.startsWith("/")||e.endsWith("/")||e.split(":").length>2)throw Error(`Invalid identifier format: ${e}`);let[t,r]=e.split(":"),n=r||"latest";if(t.includes("/")){let[r,i]=t.split("/",2);if(!r||!i)throw Error(`Invalid identifier format: ${e}`);return[r,i,n]}if(!t)throw Error(`Invalid identifier format: ${e}`);return["-",t,n]}r.d(t,{l:()=>n}),r(33471)},15765:(e,t,r)=>{"use strict";var n=r(74281),i=r(62531);r(44182),i.E6,n.DF,n.LH,n.YX,n.nF},16208:(e,t,r)=>{"use strict";r.d(t,{l:()=>h,y:()=>d});var n=r(67893),i=r(54808),a=r(64184),s=r(25050),o=r(23698),l=r(19839),u=r(57437),c=r(82926),d={};function p(e){let t;for(let r of e)for(let e of r)a.Od.isInstance(e.message)&&void 0!==e.message.usage_metadata&&(t=(0,i.n)(t,e.message.usage_metadata));return t}(0,n.V)(d,{LangChainTracer:()=>h});var h=class e extends s.JS{name="langchain_tracer";projectName;exampleId;client;replicas;usesRunTreeMap=!0;constructor(t={}){super(t);let{exampleId:r,projectName:n,client:i,replicas:a}=t;this.projectName=n??(0,c.q7)(),this.replicas=a,this.exampleId=r,this.client=i??(0,o.h)();let s=e.getTraceableRunTree();s&&this.updateFromRunTree(s)}async persistRun(e){}async onRunCreate(e){if(!e.extra?.lc_defers_inputs){let t=this.getRunTreeWithTracingConfig(e.id);await t?.postRun()}}async onRunUpdate(e){let t=this.getRunTreeWithTracingConfig(e.id);e.extra?.lc_defers_inputs?await t?.postRun():await t?.patchRun()}onLLMEnd(e){let t=e.outputs;if(t?.generations){let r=p(t.generations);if(void 0!==r){e.extra=e.extra??{};let t=e.extra.metadata??{};t.usage_metadata=r,e.extra.metadata=t}}}getRun(e){return this.runTreeMap.get(e)}updateFromRunTree(e){this.runTreeMap.set(e.id,e);let t=e,r=new Set;for(;t.parent_run&&!r.has(t.id)&&(r.add(t.id),t.parent_run);){;t=t.parent_run}r.clear();let n=[t];for(;n.length>0;){let e=n.shift();!(!e||r.has(e.id))&&(r.add(e.id),this.runTreeMap.set(e.id,e),e.child_runs&&n.push(...e.child_runs))}this.client=e.client??this.client,this.replicas=e.replicas??this.replicas,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(e){let t=this.runTreeMap.get(e);if(t)return new u.gk({...t,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return(0,l.vR)(!0)}catch{return}}}},16227:(e,t,r)=>{"use strict";var n,i;r.d(t,{CR:()=>s,ZS:()=>n,Zp:()=>a,o6:()=>i}),function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(n||(n={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(i||(i={}));let a=n.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),s=e=>{switch(typeof e){case"undefined":return a.undefined;case"string":return a.string;case"number":return Number.isNaN(e)?a.nan:a.number;case"boolean":return a.boolean;case"function":return a.function;case"bigint":return a.bigint;case"symbol":return a.symbol;case"object":if(Array.isArray(e))return a.array;if(null===e)return a.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return a.promise;if("undefined"!=typeof Map&&e instanceof Map)return a.map;if("undefined"!=typeof Set&&e instanceof Set)return a.set;if("undefined"!=typeof Date&&e instanceof Date)return a.date;return a.object;default:return a.unknown}}},17329:(e,t,r)=>{"use strict";let n=r(78768);e.exports=(e,t,r,i,a)=>{"string"==typeof r&&(a=i,i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i,a).version}catch(e){return null}}},17678:(e,t,r)=>{"use strict";let n=r(98566);e.exports=(e,t,r)=>n(t,e,r)},18056:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,i=function(e){return"string"==typeof e&&n.test(e)}},19106:(e,t,r)=>{"use strict";let n=r(98566);e.exports=(e,t,r)=>0>=n(e,t,r)},19839:(e,t,r)=>{"use strict";r.d(t,{vR:()=>l,GZ:()=>u});class n{getStore(){}run(e,t){return t()}}let i=Symbol.for("ls:tracing_async_local_storage"),a=new n;class s{getInstance(){return globalThis[i]??a}initializeGlobalInstance(e){void 0===globalThis[i]&&(globalThis[i]=e)}}let o=new s;function l(e=!1){let t=o.getInstance().getStore();if(!e&&void 0===t)throw Error("Could not get the current run tree.\n\nPlease make sure you are calling this method within a traceable function and that tracing is enabled.");return t}function u(e){return"function"==typeof e&&"langsmith:traceable"in e}Symbol.for("langsmith:traceable:root")},19946:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(12115);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),s=e=>{let t=a(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:c="",children:d,iconNode:p,...h}=e;return(0,n.createElement)("svg",{ref:t,...u,width:i,height:i,stroke:r,strokeWidth:s?24*Number(a)/Number(i):a,className:o("lucide",c),...!d&&!l(h)&&{"aria-hidden":"true"},...h},[...p.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let r=(0,n.forwardRef)((r,a)=>{let{className:l,...u}=r;return(0,n.createElement)(c,{ref:a,iconNode:t,className:o("lucide-".concat(i(s(e))),"lucide-".concat(e),l),...u})});return r.displayName=s(e),r}},20553:(e,t,r)=>{"use strict";r.d(t,{AD:()=>a,Y6:()=>s});var n=r(31926);r(55165);let i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e,t){if(!i.test(e))throw Error(void 0!==t?`Invalid UUID for ${t}: ${e}`:`Invalid UUID: ${e}`);return e}function s(e){let t="string"==typeof e?Date.parse(e):e;return(0,n.A)({msecs:t,seq:0})}},21232:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},21855:(e,t,r)=>{"use strict";let n=r(98566);e.exports=(e,t,r)=>n(e,t,r)>=0},22383:(e,t,r)=>{"use strict";r.d(t,{T:()=>Z});let n="gen_ai.operation.name",i="gen_ai.system",a="gen_ai.request.model",s="gen_ai.response.model",o="gen_ai.usage.input_tokens",l="gen_ai.usage.output_tokens",u="gen_ai.usage.total_tokens",c="gen_ai.request.max_tokens",d="gen_ai.request.temperature",p="gen_ai.request.top_p",h="gen_ai.request.frequency_penalty",f="gen_ai.request.presence_penalty",m="gen_ai.response.finish_reasons",g="gen_ai.prompt",y="gen_ai.completion",v="gen_ai.request.extra_query",_="gen_ai.request.extra_body",b="gen_ai.serialized.name",w="gen_ai.serialized.signature",k="gen_ai.serialized.doc",x="gen_ai.response.id",$="gen_ai.response.service_tier",S="gen_ai.response.system_fingerprint",I="gen_ai.usage.input_token_details",E="gen_ai.usage.output_token_details",A="langsmith.trace.session_id",O="langsmith.trace.session_name",T="langsmith.span.kind",N="langsmith.trace.name",C="langsmith.metadata",P="langsmith.span.tags",j="langsmith.request.streaming",z="langsmith.request.headers";var R=r(11164);let M={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function L(e){return M[e]||e}class Z{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,t){for(let r of e)try{if(!r.run)continue;if("post"===r.operation){let e=this.createSpanForRun(r,r.run,t.get(r.id));e&&!r.run.end_time&&this.spans.set(r.id,e)}else this.updateSpanForRun(r,r.run)}catch(e){console.error(`Error processing operation ${r.id}:`,e)}}createSpanForRun(e,t,r){let n=r&&(0,R.sW)().getSpan(r);if(n)try{return this.finishSpanSetup(n,t,e)}catch(t){console.error(`Failed to create span for run ${e.id}:`,t);return}}finishSpanSetup(e,t,r){return this.setSpanAttributes(e,t,r),t.error?(e.setStatus({code:2}),e.recordException(Error(t.error))):e.setStatus({code:1}),t.end_time&&e.end(new Date(t.end_time)),e}updateSpanForRun(e,t){try{let r=this.spans.get(e.id);if(!r)return void console.debug(`No span found for run ${e.id} during update`);this.setSpanAttributes(r,t,e),t.error?(r.setStatus({code:2}),r.recordException(Error(t.error))):r.setStatus({code:1});let n=t.end_time;n&&(r.end(new Date(n)),this.spans.delete(e.id))}catch(t){console.error(`Failed to update span for run ${e.id}:`,t)}}extractModelName(e){if(e.extra?.metadata){let t=e.extra.metadata;if(t.ls_model_name)return t.ls_model_name;if(t.invocation_params){let e=t.invocation_params;if(e.model)return e.model;if(e.model_name)return e.model_name}}}setSpanAttributes(e,t,r){if("run_type"in t&&t.run_type){e.setAttribute(T,t.run_type);let r=L(t.run_type||"chain");e.setAttribute(n,r)}"name"in t&&t.name&&e.setAttribute(N,t.name),"session_id"in t&&t.session_id&&e.setAttribute(A,t.session_id),"session_name"in t&&t.session_name&&e.setAttribute(O,t.session_name),this.setGenAiSystem(e,t);let i=this.extractModelName(t);for(let[r,n]of(i&&e.setAttribute(a,i),"prompt_tokens"in t&&"number"==typeof t.prompt_tokens&&e.setAttribute(o,t.prompt_tokens),"completion_tokens"in t&&"number"==typeof t.completion_tokens&&e.setAttribute(l,t.completion_tokens),"total_tokens"in t&&"number"==typeof t.total_tokens&&e.setAttribute(u,t.total_tokens),this.setInvocationParameters(e,t),Object.entries(t.extra?.metadata||{})))null!=n&&e.setAttribute(`${C}.${r}`,String(n));let s=t.tags;if(s&&Array.isArray(s)?e.setAttribute(P,s.join(", ")):s&&e.setAttribute(P,String(s)),"serialized"in t&&"object"==typeof t.serialized){let r=t.serialized;r.name&&e.setAttribute(b,String(r.name)),r.signature&&e.setAttribute(w,String(r.signature)),r.doc&&e.setAttribute(k,String(r.doc))}this.setIOAttributes(e,r)}setGenAiSystem(e,t){let r="langchain",n=this.extractModelName(t);if(n){let e=n.toLowerCase();e.includes("anthropic")||e.startsWith("claude")?r="anthropic":e.includes("bedrock")?r="aws.bedrock":e.includes("azure")&&e.includes("openai")?r="az.ai.openai":e.includes("azure")&&e.includes("inference")?r="az.ai.inference":e.includes("cohere")?r="cohere":e.includes("deepseek")?r="deepseek":e.includes("gemini")?r="gemini":e.includes("groq")?r="groq":e.includes("watson")||e.includes("ibm")?r="ibm.watsonx.ai":e.includes("mistral")?r="mistral_ai":e.includes("gpt")||e.includes("openai")?r="openai":e.includes("perplexity")||e.includes("sonar")?r="perplexity":e.includes("vertex")?r="vertex_ai":(e.includes("xai")||e.includes("grok"))&&(r="xai")}e.setAttribute(i,r)}setInvocationParameters(e,t){if(!t.extra?.metadata?.invocation_params)return;let r=t.extra.metadata.invocation_params;void 0!==r.max_tokens&&e.setAttribute(c,r.max_tokens),void 0!==r.temperature&&e.setAttribute(d,r.temperature),void 0!==r.top_p&&e.setAttribute(p,r.top_p),void 0!==r.frequency_penalty&&e.setAttribute(h,r.frequency_penalty),void 0!==r.presence_penalty&&e.setAttribute(f,r.presence_penalty)}setIOAttributes(e,t){if(t.run.inputs)try{let r=t.run.inputs;"object"==typeof r&&null!==r&&(r.model&&Array.isArray(r.messages)&&e.setAttribute(a,r.model),void 0!==r.stream&&e.setAttribute(j,r.stream),r.extra_headers&&e.setAttribute(z,JSON.stringify(r.extra_headers)),r.extra_query&&e.setAttribute(v,JSON.stringify(r.extra_query)),r.extra_body&&e.setAttribute(_,JSON.stringify(r.extra_body))),e.setAttribute(g,JSON.stringify(r))}catch(e){console.debug(`Failed to process inputs for run ${t.id}`,e)}if(t.run.outputs)try{let r=t.run.outputs,n=this.getUnifiedRunTokens(r);if(n&&(e.setAttribute(o,n[0]),e.setAttribute(l,n[1]),e.setAttribute(u,n[0]+n[1])),r&&"object"==typeof r){if(r.model&&e.setAttribute(s,String(r.model)),r.id&&e.setAttribute(x,r.id),r.choices&&Array.isArray(r.choices)){let t=r.choices.map(e=>e.finish_reason).filter(e=>e).map(String);t.length>0&&e.setAttribute(m,t.join(", "))}if(r.service_tier&&e.setAttribute($,r.service_tier),r.system_fingerprint&&e.setAttribute(S,r.system_fingerprint),r.usage_metadata&&"object"==typeof r.usage_metadata){let t=r.usage_metadata;t.input_token_details&&e.setAttribute(I,JSON.stringify(t.input_token_details)),t.output_token_details&&e.setAttribute(E,JSON.stringify(t.output_token_details))}}e.setAttribute(y,JSON.stringify(r))}catch(e){console.debug(`Failed to process outputs for run ${t.id}`,e)}}getUnifiedRunTokens(e){if(!e)return null;let t=this.extractUnifiedRunTokens(e.usage_metadata);if(t)return t;for(let r of Object.keys(e)){let n=e[r];if(n&&"object"==typeof n&&((t=this.extractUnifiedRunTokens(n.usage_metadata))||1===n.lc&&n.kwargs&&"object"==typeof n.kwargs&&(t=this.extractUnifiedRunTokens(n.kwargs.usage_metadata))))return t}let r=e.generations||[];if(!Array.isArray(r))return null;for(let e of Array.isArray(r[0])?r.flat():r)if("object"==typeof e&&e.message&&"object"==typeof e.message&&e.message.kwargs&&"object"==typeof e.message.kwargs&&(t=this.extractUnifiedRunTokens(e.message.kwargs.usage_metadata)))return t;return null}extractUnifiedRunTokens(e){return e&&"object"==typeof e&&"number"==typeof e.input_tokens&&"number"==typeof e.output_tokens?[e.input_tokens,e.output_tokens]:null}}},22475:(e,t,r)=>{"use strict";r.d(t,{UE:()=>eM,ll:()=>eN,rD:()=>eZ,UU:()=>ej,jD:()=>eR,ER:()=>eL,cY:()=>eC,BN:()=>eP,Ej:()=>ez});let n=["top","right","bottom","left"],i=Math.min,a=Math.max,s=Math.round,o=Math.floor,l=e=>({x:e,y:e}),u={left:"right",right:"left",bottom:"top",top:"bottom"},c={start:"end",end:"start"};function d(e,t,r){return a(e,i(t,r))}function p(e,t){return"function"==typeof e?e(t):e}function h(e){return e.split("-")[0]}function f(e){return e.split("-")[1]}function m(e){return"x"===e?"y":"x"}function g(e){return"y"===e?"height":"width"}function y(e){return["top","bottom"].includes(h(e))?"y":"x"}function v(e){return m(y(e))}function _(e,t,r){void 0===r&&(r=!1);let n=f(e),i=v(e),a=g(i),s="x"===i?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[a]>t.floating[a]&&(s=$(s)),[s,$(s)]}function b(e){let t=$(e);return[w(e),t,w(t)]}function w(e){return e.replace(/start|end/g,e=>c[e])}function k(e,t,r){let n=["left","right"],i=["right","left"],a=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":if(r)return t?i:n;return t?n:i;case"left":case"right":return t?a:s;default:return[]}}function x(e,t,r,n){let i=f(e),a=k(h(e),"start"===r,n);return i&&(a=a.map(e=>e+"-"+i),t&&(a=a.concat(a.map(w)))),a}function $(e){return e.replace(/left|right|bottom|top/g,e=>u[e])}function S(e){return{top:0,right:0,bottom:0,left:0,...e}}function I(e){return"number"!=typeof e?S(e):{top:e,right:e,bottom:e,left:e}}function E(e){let{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function A(e,t,r){let n,{reference:i,floating:a}=e,s=y(t),o=v(t),l=g(o),u=h(t),c="y"===s,d=i.x+i.width/2-a.width/2,p=i.y+i.height/2-a.height/2,m=i[l]/2-a[l]/2;switch(u){case"top":n={x:d,y:i.y-a.height};break;case"bottom":n={x:d,y:i.y+i.height};break;case"right":n={x:i.x+i.width,y:p};break;case"left":n={x:i.x-a.width,y:p};break;default:n={x:i.x,y:i.y}}switch(f(t)){case"start":n[o]-=m*(r&&c?-1:1);break;case"end":n[o]+=m*(r&&c?-1:1)}return n}let O=async(e,t,r)=>{let{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:s}=r,o=a.filter(Boolean),l=await (null==s.isRTL?void 0:s.isRTL(t)),u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=A(u,n,l),p=n,h={},f=0;for(let r=0;r<o.length;r++){let{name:a,fn:m}=o[r],{x:g,y:y,data:v,reset:_}=await m({x:c,y:d,initialPlacement:n,placement:p,strategy:i,middlewareData:h,rects:u,platform:s,elements:{reference:e,floating:t}});c=null!=g?g:c,d=null!=y?y:d,h={...h,[a]:{...h[a],...v}},_&&f<=50&&(f++,"object"==typeof _&&(_.placement&&(p=_.placement),_.rects&&(u=!0===_.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):_.rects),{x:c,y:d}=A(u,p,l)),r=-1)}return{x:c,y:d,placement:p,strategy:i,middlewareData:h}};async function T(e,t){var r;void 0===t&&(t={});let{x:n,y:i,platform:a,rects:s,elements:o,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=p(t,e),m=I(f),g="floating"===d?"reference":"floating",y=o[h?g:d],v=E(await a.getClippingRect({element:null==(r=await (null==a.isElement?void 0:a.isElement(y)))||r?y:y.contextElement||await (null==a.getDocumentElement?void 0:a.getDocumentElement(o.floating)),boundary:u,rootBoundary:c,strategy:l})),_="floating"===d?{x:n,y:i,width:s.floating.width,height:s.floating.height}:s.reference,b=await (null==a.getOffsetParent?void 0:a.getOffsetParent(o.floating)),w=await (null==a.isElement?void 0:a.isElement(b))&&await (null==a.getScale?void 0:a.getScale(b))||{x:1,y:1},k=E(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:b,strategy:l}):_);return{top:(v.top-k.top+m.top)/w.y,bottom:(k.bottom-v.bottom+m.bottom)/w.y,left:(v.left-k.left+m.left)/w.x,right:(k.right-v.right+m.right)/w.x}}let N=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:a,rects:s,platform:o,elements:l,middlewareData:u}=t,{element:c,padding:h=0}=p(e,t)||{};if(null==c)return{};let m=I(h),y={x:r,y:n},_=v(a),b=g(_),w=await o.getDimensions(c),k="y"===_,x=k?"top":"left",$=k?"bottom":"right",S=k?"clientHeight":"clientWidth",E=s.reference[b]+s.reference[_]-y[_]-s.floating[b],A=y[_]-s.reference[_],O=await (null==o.getOffsetParent?void 0:o.getOffsetParent(c)),T=O?O[S]:0;T&&await (null==o.isElement?void 0:o.isElement(O))||(T=l.floating[S]||s.floating[b]);let N=E/2-A/2,C=T/2-w[b]/2-1,P=i(m[x],C),j=i(m[$],C),z=P,R=T-w[b]-j,M=T/2-w[b]/2+N,L=d(z,M,R),Z=!u.arrow&&null!=f(a)&&M!==L&&s.reference[b]/2-(M<z?P:j)-w[b]/2<0,D=Z?M<z?M-z:M-R:0;return{[_]:y[_]+D,data:{[_]:L,centerOffset:M-L-D,...Z&&{alignmentOffset:D}},reset:Z}}}),C=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n,i,a,s,o;let{placement:l,middlewareData:u,rects:c,initialPlacement:d,platform:f,elements:m}=t,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:w,fallbackStrategy:k="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:I=!0,...E}=p(e,t);if(null!=(r=u.arrow)&&r.alignmentOffset)return{};let A=h(l),O=y(d),N=h(d)===d,C=await (null==f.isRTL?void 0:f.isRTL(m.floating)),P=w||(N||!I?[$(d)]:b(d)),j="none"!==S;!w&&j&&P.push(...x(d,I,S,C));let z=[d,...P],R=await T(t,E),M=[],L=(null==(n=u.flip)?void 0:n.overflows)||[];if(g&&M.push(R[A]),v){let e=_(l,c,C);M.push(R[e[0]],R[e[1]])}if(L=[...L,{placement:l,overflows:M}],!M.every(e=>e<=0)){let e=((null==(i=u.flip)?void 0:i.index)||0)+1,t=z[e];if(t){let r="alignment"===v&&O!==y(t),n=(null==(s=L[0])?void 0:s.overflows[0])>0;if(!r||n)return{data:{index:e,overflows:L},reset:{placement:t}}}let r=null==(a=L.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:a.placement;if(!r)switch(k){case"bestFit":{let e=null==(o=L.filter(e=>{if(j){let t=y(e.placement);return t===O||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:o[0];e&&(r=e);break}case"initialPlacement":r=d}if(l!==r)return{reset:{placement:r}}}return{}}}};function P(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function j(e){return n.some(t=>e[t]>=0)}let z=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:r}=t,{strategy:n="referenceHidden",...i}=p(e,t);switch(n){case"referenceHidden":{let e=P(await T(t,{...i,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:j(e)}}}case"escaped":{let e=P(await T(t,{...i,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:j(e)}}}default:return{}}}}};async function R(e,t){let{placement:r,platform:n,elements:i}=e,a=await (null==n.isRTL?void 0:n.isRTL(i.floating)),s=h(r),o=f(r),l="y"===y(r),u=["left","top"].includes(s)?-1:1,c=a&&l?-1:1,d=p(t,e),{mainAxis:m,crossAxis:g,alignmentAxis:v}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&"number"==typeof v&&(g="end"===o?-1*v:v),l?{x:g*c,y:m*u}:{x:m*u,y:g*c}}let M=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;let{x:i,y:a,placement:s,middlewareData:o}=t,l=await R(t,e);return s===(null==(r=o.offset)?void 0:r.placement)&&null!=(n=o.arrow)&&n.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:s}}}}},L=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:n,placement:i}=t,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=p(e,t),u={x:r,y:n},c=await T(t,l),f=y(h(i)),g=m(f),v=u[g],_=u[f];if(a){let e="y"===g?"top":"left",t="y"===g?"bottom":"right",r=v+c[e],n=v-c[t];v=d(r,v,n)}if(s){let e="y"===f?"top":"left",t="y"===f?"bottom":"right",r=_+c[e],n=_-c[t];_=d(r,_,n)}let b=o.fn({...t,[g]:v,[f]:_});return{...b,data:{x:b.x-r,y:b.y-n,enabled:{[g]:a,[f]:s}}}}}},Z=function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:r,y:n,placement:i,rects:a,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=p(e,t),c={x:r,y:n},d=y(i),f=m(d),g=c[f],v=c[d],_=p(o,t),b="number"==typeof _?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){let e="y"===f?"height":"width",t=a.reference[f]-a.floating[e]+b.mainAxis,r=a.reference[f]+a.reference[e]-b.mainAxis;g<t?g=t:g>r&&(g=r)}if(u){var w,k;let e="y"===f?"width":"height",t=["top","left"].includes(h(i)),r=a.reference[d]-a.floating[e]+(t&&(null==(w=s.offset)?void 0:w[d])||0)+(t?0:b.crossAxis),n=a.reference[d]+a.reference[e]+(t?0:(null==(k=s.offset)?void 0:k[d])||0)-(t?b.crossAxis:0);v<r?v=r:v>n&&(v=n)}return{[f]:g,[d]:v}}}},D=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;let s,o,{placement:l,rects:u,platform:c,elements:d}=t,{apply:m=()=>{},...g}=p(e,t),v=await T(t,g),_=h(l),b=f(l),w="y"===y(l),{width:k,height:x}=u.floating;"top"===_||"bottom"===_?(s=_,o=b===(await (null==c.isRTL?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(o=_,s="end"===b?"top":"bottom");let $=x-v.top-v.bottom,S=k-v.left-v.right,I=i(x-v[s],$),E=i(k-v[o],S),A=!t.middlewareData.shift,O=I,N=E;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(N=S),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(O=$),A&&!b){let e=a(v.left,0),t=a(v.right,0),r=a(v.top,0),n=a(v.bottom,0);w?N=k-2*(0!==e||0!==t?e+t:a(v.left,v.right)):O=x-2*(0!==r||0!==n?r+n:a(v.top,v.bottom))}await m({...t,availableWidth:N,availableHeight:O});let C=await c.getDimensions(d.floating);return k!==C.width||x!==C.height?{reset:{rects:!0}}:{}}}};function U(){return"undefined"!=typeof window}function F(e){return J(e)?(e.nodeName||"").toLowerCase():"#document"}function B(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function V(e){var t;return null==(t=(J(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function J(e){return!!U()&&(e instanceof Node||e instanceof B(e).Node)}function W(e){return!!U()&&(e instanceof Element||e instanceof B(e).Element)}function q(e){return!!U()&&(e instanceof HTMLElement||e instanceof B(e).HTMLElement)}function K(e){return!!U()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof B(e).ShadowRoot)}function G(e){let{overflow:t,overflowX:r,overflowY:n,display:i}=er(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function H(e){return["table","td","th"].includes(F(e))}function Y(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(e){return!1}})}function X(e){let t=ee(),r=W(e)?er(e):e;return["transform","translate","scale","rotate","perspective"].some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","translate","scale","rotate","perspective","filter"].some(e=>(r.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(r.contain||"").includes(e))}function Q(e){let t=ei(e);for(;q(t)&&!et(t);){if(X(t))return t;if(Y(t))break;t=ei(t)}return null}function ee(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function et(e){return["html","body","#document"].includes(F(e))}function er(e){return B(e).getComputedStyle(e)}function en(e){return W(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ei(e){if("html"===F(e))return e;let t=e.assignedSlot||e.parentNode||K(e)&&e.host||V(e);return K(t)?t.host:t}function ea(e){let t=ei(e);return et(t)?e.ownerDocument?e.ownerDocument.body:e.body:q(t)&&G(t)?t:ea(t)}function es(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);let i=ea(e),a=i===(null==(n=e.ownerDocument)?void 0:n.body),s=B(i);if(a){let e=eo(s);return t.concat(s,s.visualViewport||[],G(i)?i:[],e&&r?es(e):[])}return t.concat(i,es(i,[],r))}function eo(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function el(e){let t=er(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,i=q(e),a=i?e.offsetWidth:r,o=i?e.offsetHeight:n,l=s(r)!==a||s(n)!==o;return l&&(r=a,n=o),{width:r,height:n,$:l}}function eu(e){return W(e)?e:e.contextElement}function ec(e){let t=eu(e);if(!q(t))return l(1);let r=t.getBoundingClientRect(),{width:n,height:i,$:a}=el(t),o=(a?s(r.width):r.width)/n,u=(a?s(r.height):r.height)/i;return o&&Number.isFinite(o)||(o=1),u&&Number.isFinite(u)||(u=1),{x:o,y:u}}let ed=l(0);function ep(e){let t=B(e);return ee()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ed}function eh(e,t,r){return void 0===t&&(t=!1),!!r&&(!t||r===B(e))&&t}function ef(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);let i=e.getBoundingClientRect(),a=eu(e),s=l(1);t&&(n?W(n)&&(s=ec(n)):s=ec(e));let o=eh(a,r,n)?ep(a):l(0),u=(i.left+o.x)/s.x,c=(i.top+o.y)/s.y,d=i.width/s.x,p=i.height/s.y;if(a){let e=B(a),t=n&&W(n)?B(n):n,r=e,i=eo(r);for(;i&&n&&t!==r;){let e=ec(i),t=i.getBoundingClientRect(),n=er(i),a=t.left+(i.clientLeft+parseFloat(n.paddingLeft))*e.x,s=t.top+(i.clientTop+parseFloat(n.paddingTop))*e.y;u*=e.x,c*=e.y,d*=e.x,p*=e.y,u+=a,c+=s,i=eo(r=B(i))}}return E({width:d,height:p,x:u,y:c})}function em(e,t){let r=en(e).scrollLeft;return t?t.left+r:ef(V(e)).left+r}function eg(e,t,r){void 0===r&&(r=!1);let n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(r?0:em(e,n)),y:n.top+t.scrollTop}}function ey(e){let t=V(e),r=en(e),n=e.ownerDocument.body,i=a(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=a(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),o=-r.scrollLeft+em(e),l=-r.scrollTop;return"rtl"===er(n).direction&&(o+=a(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:l}}function ev(e,t){let r=B(e),n=V(e),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;let e=ee();(!e||e&&"fixed"===t)&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o,y:l}}function e_(e,t){let r=ef(e,!0,"fixed"===t),n=r.top+e.clientTop,i=r.left+e.clientLeft,a=q(e)?ec(e):l(1),s=e.clientWidth*a.x,o=e.clientHeight*a.y;return{width:s,height:o,x:i*a.x,y:n*a.y}}function eb(e,t,r){let n;if("viewport"===t)n=ev(e,r);else if("document"===t)n=ey(V(e));else if(W(t))n=e_(t,r);else{let r=ep(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return E(n)}function ew(e,t){let r=ei(e);return!(r===t||!W(r)||et(r))&&("fixed"===er(r).position||ew(r,t))}function ek(e,t){let r=t.get(e);if(r)return r;let n=es(e,[],!1).filter(e=>W(e)&&"body"!==F(e)),i=null,a="fixed"===er(e).position,s=a?ei(e):e;for(;W(s)&&!et(s);){let t=er(s),r=X(s);r||"fixed"!==t.position||(i=null),(a?!r&&!i:!r&&"static"===t.position&&!!i&&["absolute","fixed"].includes(i.position)||G(s)&&!r&&ew(e,s))?n=n.filter(e=>e!==s):i=t,s=ei(s)}return t.set(e,n),n}function ex(e,t,r){let n=q(t),i=V(t),a="fixed"===r,s=ef(e,!0,a,t),o={scrollLeft:0,scrollTop:0},u=l(0);function c(){u.x=em(i)}if(n||!n&&!a)if(("body"!==F(t)||G(i))&&(o=en(t)),n){let e=ef(t,!0,a,t);u.x=e.x+t.clientLeft,u.y=e.y+t.clientTop}else i&&c();a&&!n&&i&&c();let d=!i||n||a?l(0):eg(i,o);return{x:s.left+o.scrollLeft-u.x-d.x,y:s.top+o.scrollTop-u.y-d.y,width:s.width,height:s.height}}function e$(e){return"static"===er(e).position}function eS(e,t){if(!q(e)||"fixed"===er(e).position)return null;if(t)return t(e);let r=e.offsetParent;return V(e)===r&&(r=r.ownerDocument.body),r}function eI(e,t){let r=B(e);if(Y(e))return r;if(!q(e)){let t=ei(e);for(;t&&!et(t);){if(W(t)&&!e$(t))return t;t=ei(t)}return r}let n=eS(e,t);for(;n&&H(n)&&e$(n);)n=eS(n,t);return n&&et(n)&&e$(n)&&!X(n)?r:n||Q(e)||r}let eE=async function(e){let t=this.getOffsetParent||eI,r=this.getDimensions,n=await r(e.floating);return{reference:ex(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},eA={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e,a="fixed"===i,s=V(n),o=!!t&&Y(t.floating);if(n===s||o&&a)return r;let u={scrollLeft:0,scrollTop:0},c=l(1),d=l(0),p=q(n);if((p||!p&&!a)&&(("body"!==F(n)||G(s))&&(u=en(n)),q(n))){let e=ef(n);c=ec(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}let h=!s||p||a?l(0):eg(s,u,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-u.scrollLeft*c.x+d.x+h.x,y:r.y*c.y-u.scrollTop*c.y+d.y+h.y}},getDocumentElement:V,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e,o=[..."clippingAncestors"===r?Y(t)?[]:ek(t,this._c):[].concat(r),n],l=o[0],u=o.reduce((e,r)=>{let n=eb(t,r,s);return e.top=a(n.top,e.top),e.right=i(n.right,e.right),e.bottom=i(n.bottom,e.bottom),e.left=a(n.left,e.left),e},eb(t,l,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},getOffsetParent:eI,getElementRects:eE,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=el(e);return{width:t,height:r}},getScale:ec,isElement:W,isRTL:function(e){return"rtl"===er(e).direction}};function eO(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function eT(e,t){let r,n=null,s=V(e);function l(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}function u(c,d){void 0===c&&(c=!1),void 0===d&&(d=1),l();let p=e.getBoundingClientRect(),{left:h,top:f,width:m,height:g}=p;if(c||t(),!m||!g)return;let y=o(f),v=o(s.clientWidth-(h+m)),_={rootMargin:-y+"px "+-v+"px "+-o(s.clientHeight-(f+g))+"px "+-o(h)+"px",threshold:a(0,i(1,d))||1},b=!0;function w(t){let n=t[0].intersectionRatio;if(n!==d){if(!b)return u();n?u(!1,n):r=setTimeout(()=>{u(!1,1e-7)},1e3)}1!==n||eO(p,e.getBoundingClientRect())||u(),b=!1}try{n=new IntersectionObserver(w,{..._,root:s.ownerDocument})}catch(e){n=new IntersectionObserver(w,_)}n.observe(e)}return u(!0),l}function eN(e,t,r,n){let i;void 0===n&&(n={});let{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:u=!1}=n,c=eu(e),d=a||s?[...c?es(c):[],...es(t)]:[];d.forEach(e=>{a&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)});let p=c&&l?eT(c,r):null,h=-1,f=null;o&&(f=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),r()}),c&&!u&&f.observe(c),f.observe(t));let m=u?ef(e):null;function g(){let t=ef(e);m&&!eO(m,t)&&r(),m=t,i=requestAnimationFrame(g)}return u&&g(),r(),()=>{var e;d.forEach(e=>{a&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)}),null==p||p(),null==(e=f)||e.disconnect(),f=null,u&&cancelAnimationFrame(i)}}let eC=M,eP=L,ej=C,ez=D,eR=z,eM=N,eL=Z,eZ=(e,t,r)=>{let n=new Map,i={platform:eA,...r},a={...i.platform,_c:n};return O(e,t,{...i,platform:a})}},22814:(e,t,r)=>{"use strict";let n=r(78768);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},23229:(e,t,r)=>{"use strict";r.d(t,{Am:()=>o,Lx:()=>s,Yn:()=>a,qG:()=>l});var n=r(34497),i=r(41180);function a(e){return void 0!==e&&Array.isArray(e.lc_namespace)}function s(e){return void 0!==e&&i.YN.isRunnable(e)&&"lc_name"in e.constructor&&"function"==typeof e.constructor.lc_name&&"RunnableToolLike"===e.constructor.lc_name()}function o(e){return!!e&&"object"==typeof e&&"name"in e&&"schema"in e&&((0,n.c9)(e.schema)||null!=e.schema&&"object"==typeof e.schema&&"type"in e.schema&&"string"==typeof e.schema.type&&["null","boolean","object","array","number","string"].includes(e.schema.type))}function l(e){return o(e)||s(e)||a(e)}},23294:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>o,SP:()=>a,dQ:()=>i,mu:()=>s});var n=r(67893),i={};(0,n.V)(i,{ChatGenerationChunk:()=>o,GenerationChunk:()=>s,RUN_KEY:()=>a});let a="__run";var s=class e{text;generationInfo;constructor(e){this.text=e.text,this.generationInfo=e.generationInfo}concat(t){return new e({text:this.text+t.text,generationInfo:{...this.generationInfo,...t.generationInfo}})}},o=class e extends s{message;constructor(e){super(e),this.message=e.message}concat(t){return new e({text:this.text+t.text,generationInfo:{...this.generationInfo,...t.generationInfo},message:this.message.concat(t.message)})}}},23464:(e,t,r)=>{"use strict";let n,i;r.d(t,{A:()=>t0});var a={};function s(e,t){return function(){return e.apply(t,arguments)}}r.r(a),r.d(a,{hasBrowserEnv:()=>eL,hasStandardBrowserEnv:()=>eD,hasStandardBrowserWebWorkerEnv:()=>eU,navigator:()=>eZ,origin:()=>eF});var o=r(49509);let{toString:l}=Object.prototype,{getPrototypeOf:u}=Object,{iterator:c,toStringTag:d}=Symbol,p=(e=>t=>{let r=l.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),h=e=>(e=e.toLowerCase(),t=>p(t)===e),f=e=>t=>typeof t===e,{isArray:m}=Array,g=f("undefined");function y(e){return null!==e&&!g(e)&&null!==e.constructor&&!g(e.constructor)&&w(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}let v=h("ArrayBuffer");function _(e){let t;return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&v(e.buffer)}let b=f("string"),w=f("function"),k=f("number"),x=e=>null!==e&&"object"==typeof e,$=e=>!0===e||!1===e,S=e=>{if("object"!==p(e))return!1;let t=u(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(d in e)&&!(c in e)},I=e=>{if(!x(e)||y(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},E=h("Date"),A=h("File"),O=h("Blob"),T=h("FileList"),N=e=>x(e)&&w(e.pipe),C=e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||w(e.append)&&("formdata"===(t=p(e))||"object"===t&&w(e.toString)&&"[object FormData]"===e.toString()))},P=h("URLSearchParams"),[j,z,R,M]=["ReadableStream","Request","Response","Headers"].map(h),L=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Z(e,t,{allOwnKeys:r=!1}={}){let n,i;if(null!=e)if("object"!=typeof e&&(e=[e]),m(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{let i;if(y(e))return;let a=r?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;for(n=0;n<s;n++)i=a[n],t.call(null,e[i],i,e)}}function D(e,t){let r;if(y(e))return null;t=t.toLowerCase();let n=Object.keys(e),i=n.length;for(;i-- >0;)if(t===(r=n[i]).toLowerCase())return r;return null}let U="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,F=e=>!g(e)&&e!==U;function B(){let{caseless:e,skipUndefined:t}=F(this)&&this||{},r={},n=(n,i)=>{let a=e&&D(r,i)||i;S(r[a])&&S(n)?r[a]=B(r[a],n):S(n)?r[a]=B({},n):m(n)?r[a]=n.slice():t&&g(n)||(r[a]=n)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&Z(arguments[e],n);return r}let V=(e,t,r,{allOwnKeys:n}={})=>(Z(t,(t,n)=>{r&&w(t)?e[n]=s(t,r):e[n]=t},{allOwnKeys:n}),e),J=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),W=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},q=(e,t,r,n)=>{let i,a,s,o={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)s=i[a],(!n||n(s,e,t))&&!o[s]&&(t[s]=e[s],o[s]=!0);e=!1!==r&&u(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},K=(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return -1!==n&&n===r},G=e=>{if(!e)return null;if(m(e))return e;let t=e.length;if(!k(t))return null;let r=Array(t);for(;t-- >0;)r[t]=e[t];return r},H=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&u(Uint8Array)),Y=(e,t)=>{let r,n=(e&&e[c]).call(e);for(;(r=n.next())&&!r.done;){let n=r.value;t.call(e,n[0],n[1])}},X=(e,t)=>{let r,n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},Q=h("HTMLFormElement"),ee=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),et=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),er=h("RegExp"),en=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};Z(r,(r,i)=>{let a;!1!==(a=t(r,i,e))&&(n[i]=a||r)}),Object.defineProperties(e,n)},ei=e=>{en(e,(t,r)=>{if(w(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;if(w(e[r])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ea=(e,t)=>{let r={};return(e=>{e.forEach(e=>{r[e]=!0})})(m(e)?e:String(e).split(t)),r},es=()=>{},eo=(e,t)=>null!=e&&Number.isFinite(e*=1)?e:t;function el(e){return!!(e&&w(e.append)&&"FormData"===e[d]&&e[c])}let eu=e=>{let t=Array(10),r=(e,n)=>{if(x(e)){if(t.indexOf(e)>=0)return;if(y(e))return e;if(!("toJSON"in e)){t[n]=e;let i=m(e)?[]:{};return Z(e,(e,t)=>{let a=r(e,n+1);g(a)||(i[t]=a)}),t[n]=void 0,i}}return e};return r(e,0)},ec=h("AsyncFunction"),ed=e=>e&&(x(e)||w(e))&&w(e.then)&&w(e.catch),ep=(n="function"==typeof setImmediate,i=w(U.postMessage),n?setImmediate:i?((e,t)=>(U.addEventListener("message",({source:r,data:n})=>{r===U&&n===e&&t.length&&t.shift()()},!1),r=>{t.push(r),U.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e)),eh="undefined"!=typeof queueMicrotask?queueMicrotask.bind(U):void 0!==o&&o.nextTick||ep,ef=e=>null!=e&&w(e[c]),em={isArray:m,isArrayBuffer:v,isBuffer:y,isFormData:C,isArrayBufferView:_,isString:b,isNumber:k,isBoolean:$,isObject:x,isPlainObject:S,isEmptyObject:I,isReadableStream:j,isRequest:z,isResponse:R,isHeaders:M,isUndefined:g,isDate:E,isFile:A,isBlob:O,isRegExp:er,isFunction:w,isStream:N,isURLSearchParams:P,isTypedArray:H,isFileList:T,forEach:Z,merge:B,extend:V,trim:L,stripBOM:J,inherits:W,toFlatObject:q,kindOf:p,kindOfTest:h,endsWith:K,toArray:G,forEachEntry:Y,matchAll:X,isHTMLForm:Q,hasOwnProperty:et,hasOwnProp:et,reduceDescriptors:en,freezeMethods:ei,toObjectSet:ea,toCamelCase:ee,noop:es,toFiniteNumber:eo,findKey:D,global:U,isContextDefined:F,isSpecCompliantForm:el,toJSONObject:eu,isAsyncFn:ec,isThenable:ed,setImmediate:ep,asap:eh,isIterable:ef};function eg(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}em.inherits(eg,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:em.toJSONObject(this.config),code:this.code,status:this.status}}});let ey=eg.prototype,ev={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ev[e]={value:e}}),Object.defineProperties(eg,ev),Object.defineProperty(ey,"isAxiosError",{value:!0}),eg.from=(e,t,r,n,i,a)=>{let s=Object.create(ey);em.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);let o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return eg.call(s,o,l,r,n,i),e&&null==s.cause&&Object.defineProperty(s,"cause",{value:e,configurable:!0}),s.name=e&&e.name||"Error",a&&Object.assign(s,a),s};let e_=eg,eb=null;var ew=r(49641).Buffer;function ek(e){return em.isPlainObject(e)||em.isArray(e)}function ex(e){return em.endsWith(e,"[]")?e.slice(0,-2):e}function e$(e,t,r){return e?e.concat(t).map(function(e,t){return e=ex(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}function eS(e){return em.isArray(e)&&!e.some(ek)}let eI=em.toFlatObject(em,{},null,function(e){return/^is[A-Z]/.test(e)}),eE=function(e,t,r){if(!em.isObject(e))throw TypeError("target must be an object");t=t||new(eb||FormData);let n=(r=em.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!em.isUndefined(t[e])})).metaTokens,i=r.visitor||u,a=r.dots,s=r.indexes,o=(r.Blob||"undefined"!=typeof Blob&&Blob)&&em.isSpecCompliantForm(t);if(!em.isFunction(i))throw TypeError("visitor must be a function");function l(e){if(null===e)return"";if(em.isDate(e))return e.toISOString();if(em.isBoolean(e))return e.toString();if(!o&&em.isBlob(e))throw new e_("Blob is not supported. Use a Buffer instead.");return em.isArrayBuffer(e)||em.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):ew.from(e):e}function u(e,r,i){let o=e;if(e&&!i&&"object"==typeof e){if(em.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(em.isArray(e)&&eS(e)||(em.isFileList(e)||em.endsWith(r,"[]"))&&(o=em.toArray(e)))return r=ex(r),o.forEach(function(e,n){em.isUndefined(e)||null===e||t.append(!0===s?e$([r],n,a):null===s?r:r+"[]",l(e))}),!1}return!!ek(e)||(t.append(e$(i,r,a),l(e)),!1)}let c=[],d=Object.assign(eI,{defaultVisitor:u,convertValue:l,isVisitable:ek});function p(e,r){if(!em.isUndefined(e)){if(-1!==c.indexOf(e))throw Error("Circular reference detected in "+r.join("."));c.push(e),em.forEach(e,function(e,n){!0===(!(em.isUndefined(e)||null===e)&&i.call(t,e,em.isString(n)?n.trim():n,r,d))&&p(e,r?r.concat(n):[n])}),c.pop()}}if(!em.isObject(e))throw TypeError("data must be an object");return p(e),t};function eA(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function eO(e,t){this._pairs=[],e&&eE(e,this,t)}let eT=eO.prototype;eT.append=function(e,t){this._pairs.push([e,t])},eT.toString=function(e){let t=e?function(t){return e.call(this,t,eA)}:eA;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};let eN=eO;function eC(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function eP(e,t,r){let n;if(!t)return e;let i=r&&r.encode||eC;em.isFunction(r)&&(r={serialize:r});let a=r&&r.serialize;if(n=a?a(t,r):em.isURLSearchParams(t)?t.toString():new eN(t,r).toString(i)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}class ej{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){em.forEach(this.handlers,function(t){null!==t&&e(t)})}}let ez=ej,eR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eM={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:eN,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},eL="undefined"!=typeof window&&"undefined"!=typeof document,eZ="object"==typeof navigator&&navigator||void 0,eD=eL&&(!eZ||0>["ReactNative","NativeScript","NS"].indexOf(eZ.product)),eU="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,eF=eL&&window.location.href||"http://localhost",eB={...a,...eM};function eV(e,t){return eE(e,new eB.classes.URLSearchParams,{visitor:function(e,t,r,n){return eB.isNode&&em.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}function eJ(e){return em.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}function eW(e){let t,r,n={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)n[r=i[t]]=e[r];return n}let eq=function(e){function t(e,r,n,i){let a=e[i++];if("__proto__"===a)return!0;let s=Number.isFinite(+a),o=i>=e.length;return(a=!a&&em.isArray(n)?n.length:a,o)?em.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r:(n[a]&&em.isObject(n[a])||(n[a]=[]),t(e,r,n[a],i)&&em.isArray(n[a])&&(n[a]=eW(n[a]))),!s}if(em.isFormData(e)&&em.isFunction(e.entries)){let r={};return em.forEachEntry(e,(e,n)=>{t(eJ(e),n,r,0)}),r}return null};function eK(e,t,r){if(em.isString(e))try{return(t||JSON.parse)(e),em.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}let eG={transitional:eR,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let r,n=t.getContentType()||"",i=n.indexOf("application/json")>-1,a=em.isObject(e);if(a&&em.isHTMLForm(e)&&(e=new FormData(e)),em.isFormData(e))return i?JSON.stringify(eq(e)):e;if(em.isArrayBuffer(e)||em.isBuffer(e)||em.isStream(e)||em.isFile(e)||em.isBlob(e)||em.isReadableStream(e))return e;if(em.isArrayBufferView(e))return e.buffer;if(em.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return eV(e,this.formSerializer).toString();if((r=em.isFileList(e))||n.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return eE(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),eK(e)):e}],transformResponse:[function(e){let t=this.transitional||eG.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(em.isResponse(e)||em.isReadableStream(e))return e;if(e&&em.isString(e)&&(r&&!this.responseType||n)){let r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(e){if(r){if("SyntaxError"===e.name)throw e_.from(e,e_.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:eB.classes.FormData,Blob:eB.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};em.forEach(["delete","get","head","post","put","patch"],e=>{eG.headers[e]={}});let eH=eG,eY=em.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eX=e=>{let t,r,n,i={};return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),t=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!t||i[t]&&eY[t]||("set-cookie"===t?i[t]?i[t].push(r):i[t]=[r]:i[t]=i[t]?i[t]+", "+r:r)}),i},eQ=Symbol("internals");function e0(e){return e&&String(e).trim().toLowerCase()}function e1(e){return!1===e||null==e?e:em.isArray(e)?e.map(e1):String(e)}function e2(e){let t,r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=n.exec(e);)r[t[1]]=t[2];return r}let e4=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function e6(e,t,r,n,i){if(em.isFunction(n))return n.call(this,t,r);if(i&&(t=r),em.isString(t)){if(em.isString(n))return -1!==t.indexOf(n);if(em.isRegExp(n))return n.test(t)}}function e9(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function e3(e,t){let r=em.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,i){return this[n].call(this,t,e,r,i)},configurable:!0})})}class e5{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function i(e,t,r){let i=e0(t);if(!i)throw Error("header name must be a non-empty string");let a=em.findKey(n,i);a&&void 0!==n[a]&&!0!==r&&(void 0!==r||!1===n[a])||(n[a||t]=e1(e))}let a=(e,t)=>em.forEach(e,(e,r)=>i(e,r,t));if(em.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(em.isString(e)&&(e=e.trim())&&!e4(e))a(eX(e),t);else if(em.isObject(e)&&em.isIterable(e)){let r={},n,i;for(let t of e){if(!em.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[i=t[0]]=(n=r[i])?em.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}a(r,t)}else null!=e&&i(t,e,r);return this}get(e,t){if(e=e0(e)){let r=em.findKey(this,e);if(r){let e=this[r];if(!t)return e;if(!0===t)return e2(e);if(em.isFunction(t))return t.call(this,e,r);if(em.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=e0(e)){let r=em.findKey(this,e);return!!(r&&void 0!==this[r]&&(!t||e6(this,this[r],r,t)))}return!1}delete(e,t){let r=this,n=!1;function i(e){if(e=e0(e)){let i=em.findKey(r,e);i&&(!t||e6(r,r[i],i,t))&&(delete r[i],n=!0)}}return em.isArray(e)?e.forEach(i):i(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let i=t[r];(!e||e6(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){let t=this,r={};return em.forEach(this,(n,i)=>{let a=em.findKey(r,i);if(a){t[a]=e1(n),delete t[i];return}let s=e?e9(i):String(i).trim();s!==i&&delete t[i],t[s]=e1(n),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return em.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&em.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){let t=(this[eQ]=this[eQ]={accessors:{}}).accessors,r=this.prototype;function n(e){let n=e0(e);t[n]||(e3(r,e),t[n]=!0)}return em.isArray(e)?e.forEach(n):n(e),this}}e5.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),em.reduceDescriptors(e5.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),em.freezeMethods(e5);let e8=e5;function e7(e,t){let r=this||eH,n=t||r,i=e8.from(n.headers),a=n.data;return em.forEach(e,function(e){a=e.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function te(e){return!!(e&&e.__CANCEL__)}function tt(e,t,r){e_.call(this,null==e?"canceled":e,e_.ERR_CANCELED,t,r),this.name="CanceledError"}em.inherits(tt,e_,{__CANCEL__:!0});let tr=tt;function tn(e,t,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new e_("Request failed with status code "+r.status,[e_.ERR_BAD_REQUEST,e_.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function ti(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}let ta=function(e,t){let r,n=Array(e=e||10),i=Array(e),a=0,s=0;return t=void 0!==t?t:1e3,function(o){let l=Date.now(),u=i[s];r||(r=l),n[a]=o,i[a]=l;let c=s,d=0;for(;c!==a;)d+=n[c++],c%=e;if((a=(a+1)%e)===s&&(s=(s+1)%e),l-r<t)return;let p=u&&l-u;return p?Math.round(1e3*d/p):void 0}},ts=function(e,t){let r,n,i=0,a=1e3/t,s=(t,a=Date.now())=>{i=a,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{let t=Date.now(),o=t-i;o>=a?s(e,t):(r=e,n||(n=setTimeout(()=>{n=null,s(r)},a-o)))},()=>r&&s(r)]},to=(e,t,r=3)=>{let n=0,i=ta(50,250);return ts(r=>{let a=r.loaded,s=r.lengthComputable?r.total:void 0,o=a-n,l=i(o),u=a<=s;n=a,e({loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&u?(s-a)/l:void 0,event:r,lengthComputable:null!=s,[t?"download":"upload"]:!0})},r)},tl=(e,t)=>{let r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},tu=e=>(...t)=>em.asap(()=>e(...t)),tc=eB.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,eB.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(eB.origin),eB.navigator&&/(msie|trident)/i.test(eB.navigator.userAgent)):()=>!0,td=eB.hasStandardBrowserEnv?{write(e,t,r,n,i,a,s){if("undefined"==typeof document)return;let o=[`${e}=${encodeURIComponent(t)}`];em.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),em.isString(n)&&o.push(`path=${n}`),em.isString(i)&&o.push(`domain=${i}`),!0===a&&o.push("secure"),em.isString(s)&&o.push(`SameSite=${s}`),document.cookie=o.join("; ")},read(e){if("undefined"==typeof document)return null;let t=document.cookie.match(RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function tp(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function th(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function tf(e,t,r){let n=!tp(t);return e&&(n||!1==r)?th(e,t):t}let tm=e=>e instanceof e8?{...e}:e;function tg(e,t){t=t||{};let r={};function n(e,t,r,n){return em.isPlainObject(e)&&em.isPlainObject(t)?em.merge.call({caseless:n},e,t):em.isPlainObject(t)?em.merge({},t):em.isArray(t)?t.slice():t}function i(e,t,r,i){return em.isUndefined(t)?em.isUndefined(e)?void 0:n(void 0,e,r,i):n(e,t,r,i)}function a(e,t){if(!em.isUndefined(t))return n(void 0,t)}function s(e,t){return em.isUndefined(t)?em.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(r,i,a){return a in t?n(r,i):a in e?n(void 0,r):void 0}let l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t,r)=>i(tm(e),tm(t),r,!0)};return em.forEach(Object.keys({...e,...t}),function(n){let a=l[n]||i,s=a(e[n],t[n],n);em.isUndefined(s)&&a!==o||(r[n]=s)}),r}let ty=e=>{let t=tg({},e),{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:o}=t;if(t.headers=s=e8.from(s),t.url=eP(tf(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),em.isFormData(r)){if(eB.hasStandardBrowserEnv||eB.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(em.isFunction(r.getHeaders)){let e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&s.set(e,r)})}}if(eB.hasStandardBrowserEnv&&(n&&em.isFunction(n)&&(n=n(t)),n||!1!==n&&tc(t.url))){let e=i&&a&&td.read(a);e&&s.set(i,e)}return t},tv="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){let n,i,a,s,o,l=ty(e),u=l.data,c=e8.from(l.headers).normalize(),{responseType:d,onUploadProgress:p,onDownloadProgress:h}=l;function f(){s&&s(),o&&o(),l.cancelToken&&l.cancelToken.unsubscribe(n),l.signal&&l.signal.removeEventListener("abort",n)}let m=new XMLHttpRequest;function g(){if(!m)return;let n=e8.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());tn(function(e){t(e),f()},function(e){r(e),f()},{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(l.method.toUpperCase(),l.url,!0),m.timeout=l.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(r(new e_("Request aborted",e_.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){let n=new e_(t&&t.message?t.message:"Network Error",e_.ERR_NETWORK,e,m);n.event=t||null,r(n),m=null},m.ontimeout=function(){let t=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",n=l.transitional||eR;l.timeoutErrorMessage&&(t=l.timeoutErrorMessage),r(new e_(t,n.clarifyTimeoutError?e_.ETIMEDOUT:e_.ECONNABORTED,e,m)),m=null},void 0===u&&c.setContentType(null),"setRequestHeader"in m&&em.forEach(c.toJSON(),function(e,t){m.setRequestHeader(t,e)}),em.isUndefined(l.withCredentials)||(m.withCredentials=!!l.withCredentials),d&&"json"!==d&&(m.responseType=l.responseType),h&&([a,o]=to(h,!0),m.addEventListener("progress",a)),p&&m.upload&&([i,s]=to(p),m.upload.addEventListener("progress",i),m.upload.addEventListener("loadend",s)),(l.cancelToken||l.signal)&&(n=t=>{m&&(r(!t||t.type?new tr(null,e,m):t),m.abort(),m=null)},l.cancelToken&&l.cancelToken.subscribe(n),l.signal&&(l.signal.aborted?n():l.signal.addEventListener("abort",n)));let y=ti(l.url);if(y&&-1===eB.protocols.indexOf(y))return void r(new e_("Unsupported protocol "+y+":",e_.ERR_BAD_REQUEST,e));m.send(u||null)})},t_=(e,t)=>{let{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController,i=function(e){if(!r){r=!0,s();let t=e instanceof Error?e:this.reason;n.abort(t instanceof e_?t:new tr(t instanceof Error?t.message:t))}},a=t&&setTimeout(()=>{a=null,i(new e_(`timeout ${t} of ms exceeded`,e_.ETIMEDOUT))},t),s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));let{signal:o}=n;return o.unsubscribe=()=>em.asap(s),o}},tb=function*(e,t){let r,n=e.byteLength;if(!t||n<t)return void(yield e);let i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},tw=async function*(e,t){for await(let r of tk(e))yield*tb(r,t)},tk=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},tx=(e,t,r,n)=>{let i,a=tw(e,t),s=0,o=e=>{!i&&(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{let{done:t,value:n}=await a.next();if(t){o(),e.close();return}let i=n.byteLength;if(r){let e=s+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw o(e),e}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},t$=65536,{isFunction:tS}=em,tI=(({Request:e,Response:t})=>({Request:e,Response:t}))(em.global),{ReadableStream:tE,TextEncoder:tA}=em.global,tO=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},tT=e=>{let t,{fetch:r,Request:n,Response:i}=e=em.merge.call({skipUndefined:!0},tI,e),a=r?tS(r):"function"==typeof fetch,s=tS(n),o=tS(i);if(!a)return!1;let l=a&&tS(tE),u=a&&("function"==typeof tA?(t=new tA,e=>t.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer())),c=s&&l&&tO(()=>{let e=!1,t=new n(eB.origin,{body:new tE,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=o&&l&&tO(()=>em.isReadableStream(new i("").body)),p={stream:d&&(e=>e.body)};a&&(()=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{p[e]||(p[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new e_(`Response type '${e}' is not supported`,e_.ERR_NOT_SUPPORT,r)})})})();let h=async e=>{if(null==e)return 0;if(em.isBlob(e))return e.size;if(em.isSpecCompliantForm(e)){let t=new n(eB.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return em.isArrayBufferView(e)||em.isArrayBuffer(e)?e.byteLength:(em.isURLSearchParams(e)&&(e+=""),em.isString(e))?(await u(e)).byteLength:void 0},f=async(e,t)=>{let r=em.toFiniteNumber(e.getContentLength());return null==r?h(t):r};return async e=>{let t,{url:a,method:o,data:l,signal:u,cancelToken:h,timeout:m,onDownloadProgress:g,onUploadProgress:y,responseType:v,headers:_,withCredentials:b="same-origin",fetchOptions:w}=ty(e),k=r||fetch;v=v?(v+"").toLowerCase():"text";let x=t_([u,h&&h.toAbortSignal()],m),$=null,S=x&&x.unsubscribe&&(()=>{x.unsubscribe()});try{if(y&&c&&"get"!==o&&"head"!==o&&0!==(t=await f(_,l))){let e,r=new n(a,{method:"POST",body:l,duplex:"half"});if(em.isFormData(l)&&(e=r.headers.get("content-type"))&&_.setContentType(e),r.body){let[e,n]=tl(t,to(tu(y)));l=tx(r.body,t$,e,n)}}em.isString(b)||(b=b?"include":"omit");let r=s&&"credentials"in n.prototype,u={...w,signal:x,method:o.toUpperCase(),headers:_.normalize().toJSON(),body:l,duplex:"half",credentials:r?b:void 0};$=s&&new n(a,u);let h=await (s?k($,w):k(a,u)),m=d&&("stream"===v||"response"===v);if(d&&(g||m&&S)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=h[t]});let t=em.toFiniteNumber(h.headers.get("content-length")),[r,n]=g&&tl(t,to(tu(g),!0))||[];h=new i(tx(h.body,t$,r,()=>{n&&n(),S&&S()}),e)}v=v||"text";let I=await p[em.findKey(p,v)||"text"](h,e);return!m&&S&&S(),await new Promise((t,r)=>{tn(t,r,{data:I,headers:e8.from(h.headers),status:h.status,statusText:h.statusText,config:e,request:$})})}catch(t){if(S&&S(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new e_("Network Error",e_.ERR_NETWORK,e,$),{cause:t.cause||t});throw e_.from(t,t&&t.code,e,$)}}},tN=new Map,tC=e=>{let t=e&&e.env||{},{fetch:r,Request:n,Response:i}=t,a=[n,i,r],s=a.length,o,l,u=tN;for(;s--;)o=a[s],void 0===(l=u.get(o))&&u.set(o,l=s?new Map:tT(t)),u=l;return l};tC();let tP={http:eb,xhr:tv,fetch:{get:tC}};em.forEach(tP,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let tj=e=>`- ${e}`,tz=e=>em.isFunction(e)||null===e||!1===e,tR={getAdapter:function(e,t){let r,n,{length:i}=e=em.isArray(e)?e:[e],a={};for(let s=0;s<i;s++){let i;if(n=r=e[s],!tz(r)&&void 0===(n=tP[(i=String(r)).toLowerCase()]))throw new e_(`Unknown adapter '${i}'`);if(n&&(em.isFunction(n)||(n=n.get(t))))break;a[i||"#"+s]=n}if(!n){let e=Object.entries(a).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new e_("There is no suitable adapter to dispatch the request "+(i?e.length>1?"since :\n"+e.map(tj).join("\n"):" "+tj(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n}};function tM(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tr(null,e)}function tL(e){return tM(e),e.headers=e8.from(e.headers),e.data=e7.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),tR.getAdapter(e.adapter||eH.adapter,e)(e).then(function(t){return tM(e),t.data=e7.call(e,e.transformResponse,t),t.headers=e8.from(t.headers),t},function(t){return!te(t)&&(tM(e),t&&t.response&&(t.response.data=e7.call(e,e.transformResponse,t.response),t.response.headers=e8.from(t.response.headers))),Promise.reject(t)})}let tZ="1.13.2",tD={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{tD[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});let tU={};tD.transitional=function(e,t,r){function n(e,t){return"[Axios v"+tZ+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,a)=>{if(!1===e)throw new e_(n(i," has been removed"+(t?" in "+t:"")),e_.ERR_DEPRECATED);return t&&!tU[i]&&(tU[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,a)}},tD.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};let tF={assertOptions:function(e,t,r){if("object"!=typeof e)throw new e_("options must be an object",e_.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),i=n.length;for(;i-- >0;){let a=n[i],s=t[a];if(s){let t=e[a],r=void 0===t||s(t,a,e);if(!0!==r)throw new e_("option "+a+" must be "+r,e_.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new e_("Unknown option "+a,e_.ERR_BAD_OPTION)}},validators:tD},tB=tF.validators;class tV{constructor(e){this.defaults=e||{},this.interceptors={request:new ez,response:new ez}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){let r,n;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:i,paramsSerializer:a,headers:s}=t=tg(this.defaults,t);void 0!==i&&tF.assertOptions(i,{silentJSONParsing:tB.transitional(tB.boolean),forcedJSONParsing:tB.transitional(tB.boolean),clarifyTimeoutError:tB.transitional(tB.boolean)},!1),null!=a&&(em.isFunction(a)?t.paramsSerializer={serialize:a}:tF.assertOptions(a,{encode:tB.function,serialize:tB.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),tF.assertOptions(t,{baseUrl:tB.spelling("baseURL"),withXsrfToken:tB.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&em.merge(s.common,s[t.method]);s&&em.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=e8.concat(o,s);let l=[],u=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(u=u&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});let c=[];this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let d=0;if(!u){let e=[tL.bind(this),void 0];for(e.unshift(...l),e.push(...c),n=e.length,r=Promise.resolve(t);d<n;)r=r.then(e[d++],e[d++]);return r}n=l.length;let p=t;for(;d<n;){let e=l[d++],t=l[d++];try{p=e(p)}catch(e){t.call(this,e);break}}try{r=tL.call(this,p)}catch(e){return Promise.reject(e)}for(d=0,n=c.length;d<n;)r=r.then(c[d++],c[d++]);return r}getUri(e){return eP(tf((e=tg(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}em.forEach(["delete","get","head","options"],function(e){tV.prototype[e]=function(t,r){return this.request(tg(r||{},{method:e,url:t,data:(r||{}).data}))}}),em.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,i){return this.request(tg(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}tV.prototype[e]=t(),tV.prototype[e+"Form"]=t(!0)});let tJ=tV;class tW{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});let r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t,n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,i){r.reason||(r.reason=new tr(e,n,i),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason)return void e(this.reason);this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new tW(function(t){e=t}),cancel:e}}}let tq=tW;function tK(e){return function(t){return e.apply(null,t)}}function tG(e){return em.isObject(e)&&!0===e.isAxiosError}let tH={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(tH).forEach(([e,t])=>{tH[t]=e});let tY=tH;function tX(e){let t=new tJ(e),r=s(tJ.prototype.request,t);return em.extend(r,tJ.prototype,t,{allOwnKeys:!0}),em.extend(r,t,null,{allOwnKeys:!0}),r.create=function(t){return tX(tg(e,t))},r}let tQ=tX(eH);tQ.Axios=tJ,tQ.CanceledError=tr,tQ.CancelToken=tq,tQ.isCancel=te,tQ.VERSION=tZ,tQ.toFormData=eE,tQ.AxiosError=e_,tQ.Cancel=tQ.CanceledError,tQ.all=function(e){return Promise.all(e)},tQ.spread=tK,tQ.isAxiosError=tG,tQ.mergeConfig=tg,tQ.AxiosHeaders=e8,tQ.formToJSON=e=>eq(em.isHTMLForm(e)?new FormData(e):e),tQ.getAdapter=tR.getAdapter,tQ.HttpStatusCode=tY,tQ.default=tQ;let t0=tQ},23698:(e,t,r)=>{"use strict";let n;r.d(t,{h:()=>s});var i=r(4397),a=r(82926);let s=()=>{if(void 0===n){let e="false"===(0,i.Az)("LANGCHAIN_CALLBACKS_BACKGROUND")?{blockOnRootRunFinalization:!0}:{};n=new a.Kj(e)}return n}},23778:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(84598),i=r(59520);function a(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var s="6ba7b810-9dad-11d1-80b4-00c04fd430c8",o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function l(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function u(e,t){return e<<t|e>>>32-t}let c=function(e,t,r){function l(e,t,s,o){if("string"==typeof e&&(e=a(e)),"string"==typeof t&&(t=(0,i.A)(t)),(null==(l=t)?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l,u=new Uint8Array(16+e.length);if(u.set(t),u.set(e,t.length),(u=r(u))[6]=15&u[6]|80,u[8]=63&u[8]|128,s){o=o||0;for(var c=0;c<16;++c)s[o+c]=u[c];return s}return(0,n.k)(u)}try{l.name="v5"}catch(e){}return l.DNS=s,l.URL=o,l}("v5",80,function(e){var t=[0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xca62c1d6],r=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=Math.ceil((e.length/4+2)/16),s=Array(a),o=0;o<a;++o){for(var c=new Uint32Array(16),d=0;d<16;++d)c[d]=e[64*o+4*d]<<24|e[64*o+4*d+1]<<16|e[64*o+4*d+2]<<8|e[64*o+4*d+3];s[o]=c}s[a-1][14]=(e.length-1)*8/0x100000000,s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(e.length-1)*8|0;for(var p=0;p<a;++p){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=s[p][f];for(var m=16;m<80;++m)h[m]=u(h[m-3]^h[m-8]^h[m-14]^h[m-16],1);for(var g=r[0],y=r[1],v=r[2],_=r[3],b=r[4],w=0;w<80;++w){var k=Math.floor(w/20),x=u(g,5)+l(k,y,v,_)+b+t[k]+h[w]>>>0;b=_,_=v,v=u(y,30)>>>0,y=g,g=x}r[0]=r[0]+g>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+v>>>0,r[3]=r[3]+_>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})},25050:(e,t,r)=>{"use strict";r.d(t,{JS:()=>p,eY:()=>o,j7:()=>d});var n=r(67893),i=r(4397),a=r(72716),s=r(57437),o={};(0,n.V)(o,{BaseTracer:()=>p,isBaseTracer:()=>d});let l=e=>{if(e)return e.events=e.events??[],e.child_runs=e.child_runs??[],e};function u(e,t){if(e)return new s.gk({...e,start_time:e._serialized_start_time??e.start_time,parent_run:u(t),child_runs:e.child_runs.map(e=>u(e)).filter(e=>void 0!==e),extra:{...e.extra,runtime:(0,i.Ec)()},tracingEnabled:!1})}function c(e,t){return e&&!Array.isArray(e)&&"object"==typeof e?e:{[t]:e}}function d(e){return"function"==typeof e._addRunToRunMap}var p=class extends a.NK{runMap=new Map;runTreeMap=new Map;usesRunTreeMap=!1;constructor(e){super(...arguments)}copy(){return this}getRunById(e){if(void 0!==e)return this.usesRunTreeMap?l(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`

${e.stack}`:""):"string"==typeof e?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){let{dottedOrder:t,microsecondPrecisionDatestring:r}=(0,s.sh)(new Date(e.start_time).getTime(),e.id,e.execution_order),n={...e},i=this.getRunById(n.parent_run_id);if(void 0!==n.parent_run_id?i?(this._addChildRun(i,n),i.child_execution_order=Math.max(i.child_execution_order,n.child_execution_order),n.trace_id=i.trace_id,void 0!==i.dotted_order&&(n.dotted_order=[i.dotted_order,t].join("."),n._serialized_start_time=r)):n.parent_run_id=void 0:(n.trace_id=n.id,n.dotted_order=t,n._serialized_start_time=r),this.usesRunTreeMap){let e=u(n,i);void 0!==e&&this.runTreeMap.set(n.id,e)}else this.runMap.set(n.id,n);return n}async _endTrace(e){let t=void 0!==e.parent_run_id&&this.getRunById(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),await this.onRunUpdate?.(e),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){let t=void 0!==e&&this.getRunById(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,r,n,i,a,s,o){let l=this._getExecutionOrder(n),u=Date.now(),c=s?{...i,metadata:s}:i,d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:c??{},tags:a||[]};return this._addRunToRunMap(d)}async handleLLMStart(e,t,r,n,i,a,s,o){let l=this.getRunById(r)??this._createRunForLLMStart(e,t,r,n,i,a,s,o);return await this.onRunCreate?.(l),await this.onLLMStart?.(l),l}_createRunForChatModelStart(e,t,r,n,i,a,s,o){let l=this._getExecutionOrder(n),u=Date.now(),c=s?{...i,metadata:s}:i,d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:c??{},tags:a||[]};return this._addRunToRunMap(d)}async handleChatModelStart(e,t,r,n,i,a,s,o){let l=this.getRunById(r)??this._createRunForChatModelStart(e,t,r,n,i,a,s,o);return await this.onRunCreate?.(l),await this.onLLMStart?.(l),l}async handleLLMEnd(e,t,r,n,i){let a=this.getRunById(t);if(!a||a?.run_type!=="llm")throw Error("No LLM run to end.");return a.end_time=Date.now(),a.outputs=e,a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...i},await this.onLLMEnd?.(a),await this._endTrace(a),a}async handleLLMError(e,t,r,n,i){let a=this.getRunById(t);if(!a||a?.run_type!=="llm")throw Error("No LLM run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...i},await this.onLLMError?.(a),await this._endTrace(a),a}_createRunForChainStart(e,t,r,n,i,a,s,o,l){let u=this._getExecutionOrder(n),c=Date.now(),d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:t,execution_order:u,child_execution_order:u,run_type:s??"chain",child_runs:[],extra:a?{...l,metadata:a}:{...l},tags:i||[]};return this._addRunToRunMap(d)}async handleChainStart(e,t,r,n,i,a,s,o){let l=this.getRunById(r)??this._createRunForChainStart(e,t,r,n,i,a,s,o);return await this.onRunCreate?.(l),await this.onChainStart?.(l),l}async handleChainEnd(e,t,r,n,i){let a=this.getRunById(t);if(!a)throw Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=c(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),i?.inputs!==void 0&&(a.inputs=c(i.inputs,"input")),await this.onChainEnd?.(a),await this._endTrace(a),a}async handleChainError(e,t,r,n,i){let a=this.getRunById(t);if(!a)throw Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),i?.inputs!==void 0&&(a.inputs=c(i.inputs,"input")),await this.onChainError?.(a),await this._endTrace(a),a}_createRunForToolStart(e,t,r,n,i,a,s){let o=this._getExecutionOrder(n),l=Date.now(),u={id:r,name:s??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(u)}async handleToolStart(e,t,r,n,i,a,s){let o=this.getRunById(r)??this._createRunForToolStart(e,t,r,n,i,a,s);return await this.onRunCreate?.(o),await this.onToolStart?.(o),o}async handleToolEnd(e,t){let r=this.getRunById(t);if(!r||r?.run_type!=="tool")throw Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await this.onToolEnd?.(r),await this._endTrace(r),r}async handleToolError(e,t){let r=this.getRunById(t);if(!r||r?.run_type!=="tool")throw Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await this.onToolError?.(r),await this._endTrace(r),r}async handleAgentAction(e,t){let r=this.getRunById(t);if(!r||r?.run_type!=="chain")return;let n=r;n.actions=n.actions||[],n.actions.push(e),n.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentAction?.(r)}async handleAgentEnd(e,t){let r=this.getRunById(t);r&&r?.run_type==="chain"&&(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentEnd?.(r))}_createRunForRetrieverStart(e,t,r,n,i,a,s){let o=this._getExecutionOrder(n),l=Date.now(),u={id:r,name:s??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:t},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(u)}async handleRetrieverStart(e,t,r,n,i,a,s){let o=this.getRunById(r)??this._createRunForRetrieverStart(e,t,r,n,i,a,s);return await this.onRunCreate?.(o),await this.onRetrieverStart?.(o),o}async handleRetrieverEnd(e,t){let r=this.getRunById(t);if(!r||r?.run_type!=="retriever")throw Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await this.onRetrieverEnd?.(r),await this._endTrace(r),r}async handleRetrieverError(e,t){let r=this.getRunById(t);if(!r||r?.run_type!=="retriever")throw Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await this.onRetrieverError?.(r),await this._endTrace(r),r}async handleText(e,t){let r=this.getRunById(t);r&&r?.run_type==="chain"&&(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await this.onText?.(r))}async handleLLMNewToken(e,t,r,n,i,a){let s=this.getRunById(r);if(!s||s?.run_type!=="llm")throw Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:t,chunk:a?.chunk}}),await this.onLLMNewToken?.(s,e,{chunk:a?.chunk}),s}}},25720:(e,t,r)=>{"use strict";let n;r.d(t,{Dr:()=>eu.Dr,Po:()=>ec,PF:()=>ed,y0:()=>ep});var i=r(67893),a=r(34497);let s=Symbol("Let zodToJsonSchema decide on which parser to use"),o={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},l=e=>"string"==typeof e?{...o,name:e}:{...o,...e},u=e=>{let t=l(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}},c=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function d(e){if("openAi"!==e.target)return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?c(t,e.currentPath):t.join("/")}}function p(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function h(e,t,r,n,i){e[t]=r,p(e,t,n,i)}var f=r(4556);function m(e,t){let r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==f.kY.ZodAny&&(r.items=ei(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&h(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&h(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(h(r,"minItems",e.exactLength.value,e.exactLength.message,t),h(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function g(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"min":"jsonSchema7"===t.target?n.inclusive?h(r,"minimum",n.value,n.message,t):h(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),h(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?h(r,"maximum",n.value,n.message,t):h(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),h(r,"maximum",n.value,n.message,t));break;case"multipleOf":h(r,"multipleOf",n.value,n.message,t)}return r}function y(){return{type:"boolean"}}function v(e,t){return ei(e.type._def,t)}let _=(e,t)=>ei(e.innerType._def,t);function b(e,t,r){let n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map(r=>b(e,t,r))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return w(e,t)}}let w=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let n of e.checks)switch(n.kind){case"min":h(r,"minimum",n.value,n.message,t);break;case"max":h(r,"maximum",n.value,n.message,t)}return r};function k(e,t){return{...ei(e.innerType._def,t),default:e.defaultValue()}}function x(e,t){return"input"===t.effectStrategy?ei(e.schema._def,t):d(t)}function $(e){return{type:"string",enum:Array.from(e.values)}}let S=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e;function I(e,t){let r=[ei(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),ei(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),n="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(e=>{if(S(e))i.push(...e.allOf),void 0===e.unevaluatedProperties&&(n=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...n}=e;t=n}else n=void 0;i.push(t)}}),i.length?{allOf:i,...n}:void 0}function E(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}let A={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===n&&(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function O(e,t){let r={type:"string"};if(e.checks)for(let n of e.checks)switch(n.kind){case"min":h(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":h(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":P(r,"email",n.message,t);break;case"format:idn-email":P(r,"idn-email",n.message,t);break;case"pattern:zod":j(r,A.email,n.message,t)}break;case"url":P(r,"uri",n.message,t);break;case"uuid":P(r,"uuid",n.message,t);break;case"regex":j(r,n.regex,n.message,t);break;case"cuid":j(r,A.cuid,n.message,t);break;case"cuid2":j(r,A.cuid2,n.message,t);break;case"startsWith":j(r,RegExp(`^${T(n.value,t)}`),n.message,t);break;case"endsWith":j(r,RegExp(`${T(n.value,t)}$`),n.message,t);break;case"datetime":P(r,"date-time",n.message,t);break;case"date":P(r,"date",n.message,t);break;case"time":P(r,"time",n.message,t);break;case"duration":P(r,"duration",n.message,t);break;case"length":h(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t),h(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":j(r,RegExp(T(n.value,t)),n.message,t);break;case"ip":"v6"!==n.version&&P(r,"ipv4",n.message,t),"v4"!==n.version&&P(r,"ipv6",n.message,t);break;case"base64url":j(r,A.base64url,n.message,t);break;case"jwt":j(r,A.jwt,n.message,t);break;case"cidr":"v6"!==n.version&&j(r,A.ipv4Cidr,n.message,t),"v4"!==n.version&&j(r,A.ipv6Cidr,n.message,t);break;case"emoji":j(r,A.emoji(),n.message,t);break;case"ulid":j(r,A.ulid,n.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":P(r,"binary",n.message,t);break;case"contentEncoding:base64":h(r,"contentEncoding","base64",n.message,t);break;case"pattern:zod":j(r,A.base64,n.message,t)}break;case"nanoid":j(r,A.nanoid,n.message,t);break;case"toLowerCase":case"toUpperCase":case"trim":break;default:(e=>{})(0)}return r}function T(e,t){return"escape"===t.patternStrategy?C(e):e}let N=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function C(e){let t="";for(let r=0;r<e.length;r++)N.has(e[r])||(t+="\\"),t+=e[r];return t}function P(e,t,r,n){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):h(e,"format",t,r,n)}function j(e,t,r,n){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:z(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):h(e,"pattern",z(t,n),r,n)}function z(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source,i="",a=!1,s=!1,o=!1;for(let e=0;e<n.length;e++){if(a){i+=n[e],a=!1;continue}if(r.i){if(s){if(n[e].match(/[a-z]/)){o?(i+=n[e],i+=`${n[e-2]}-${n[e]}`.toUpperCase(),o=!1):"-"===n[e+1]&&n[e+2]?.match(/[a-z]/)?(i+=n[e],o=!0):i+=`${n[e]}${n[e].toUpperCase()}`;continue}}else if(n[e].match(/[a-z]/)){i+=`[${n[e]}${n[e].toUpperCase()}]`;continue}}if(r.m){if("^"===n[e]){i+=`(^|(?<=[\r
]))`;continue}else if("$"===n[e]){i+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===n[e]){i+=s?`${n[e]}\r
`:`[${n[e]}\r
]`;continue}i+=n[e],"\\"===n[e]?a=!0:s&&"]"===n[e]?s=!1:s||"["!==n[e]||(s=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function R(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===f.kY.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:ei(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??d(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:ei(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===f.kY.ZodString&&e.keyType._def.checks?.length){let{type:n,...i}=O(e.keyType._def,t);return{...r,propertyNames:i}}if(e.keyType?._def.typeName===f.kY.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===f.kY.ZodBranded&&e.keyType._def.type._def.typeName===f.kY.ZodString&&e.keyType._def.type._def.checks?.length){let{type:n,...i}=v(e.keyType._def,t);return{...r,propertyNames:i}}return r}function M(e,t){return"record"===t.mapStrategy?R(e,t):{type:"array",maxItems:125,items:{type:"array",items:[ei(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||d(t),ei(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||d(t)],minItems:2,maxItems:2}}}function L(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}function Z(e){return"openAi"===e.target?void 0:{not:d({...e,currentPath:[...e.currentPath,"not"]})}}function D(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}let U={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function F(e,t){if("openApi3"===t.target)return B(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in U&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=U[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];return e;default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return B(e,t)}let B=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>ei(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0};function V(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:U[e.innerType._def.typeName],nullable:!0}:{type:[U[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=ei(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=ei(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function J(e,t){let r={type:"number"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"int":r.type="integer",p(r,"type",n.message,t);break;case"min":"jsonSchema7"===t.target?n.inclusive?h(r,"minimum",n.value,n.message,t):h(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),h(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?h(r,"maximum",n.value,n.message,t):h(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),h(r,"maximum",n.value,n.message,t));break;case"multipleOf":h(r,"multipleOf",n.value,n.message,t)}return r}function W(e,t){let r="openAi"===t.target,n={type:"object",properties:{}},i=[],a=e.shape();for(let e in a){let s=a[e];if(void 0===s||void 0===s._def)continue;let o=K(s);o&&r&&("ZodOptional"===s._def.typeName&&(s=s._def.innerType),s.isNullable()||(s=s.nullable()),o=!1);let l=ei(s._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==l&&(n.properties[e]=l,o||i.push(e))}i.length&&(n.required=i);let s=q(e,t);return void 0!==s&&(n.additionalProperties=s),n}function q(e,t){if("ZodNever"!==e.catchall._def.typeName)return ei(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function K(e){try{return e.isOptional()}catch{return!0}}let G=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return ei(e.innerType._def,t);let r=ei(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:d(t)},r]}:d(t)},H=(e,t)=>{if("input"===t.pipeStrategy)return ei(e.in._def,t);if("output"===t.pipeStrategy)return ei(e.out._def,t);let r=ei(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=ei(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(e=>void 0!==e)}};function Y(e,t){return ei(e.type._def,t)}function X(e,t){let r={type:"array",uniqueItems:!0,items:ei(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&h(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&h(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Q(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>ei(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:ei(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>ei(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}function ee(e){return{not:d(e)}}function et(e){return d(e)}let er=(e,t)=>ei(e.innerType._def,t),en=(e,t,r)=>{switch(t){case f.kY.ZodString:return O(e,r);case f.kY.ZodNumber:return J(e,r);case f.kY.ZodObject:return W(e,r);case f.kY.ZodBigInt:return g(e,r);case f.kY.ZodBoolean:return y();case f.kY.ZodDate:return b(e,r);case f.kY.ZodUndefined:return ee(r);case f.kY.ZodNull:return D(r);case f.kY.ZodArray:return m(e,r);case f.kY.ZodUnion:case f.kY.ZodDiscriminatedUnion:return F(e,r);case f.kY.ZodIntersection:return I(e,r);case f.kY.ZodTuple:return Q(e,r);case f.kY.ZodRecord:return R(e,r);case f.kY.ZodLiteral:return E(e,r);case f.kY.ZodEnum:return $(e);case f.kY.ZodNativeEnum:return L(e);case f.kY.ZodNullable:return V(e,r);case f.kY.ZodOptional:return G(e,r);case f.kY.ZodMap:return M(e,r);case f.kY.ZodSet:return X(e,r);case f.kY.ZodLazy:return()=>e.getter()._def;case f.kY.ZodPromise:return Y(e,r);case f.kY.ZodNaN:case f.kY.ZodNever:return Z(r);case f.kY.ZodEffects:return x(e,r);case f.kY.ZodAny:return d(r);case f.kY.ZodUnknown:return et(r);case f.kY.ZodDefault:return k(e,r);case f.kY.ZodBranded:return v(e,r);case f.kY.ZodReadonly:return er(e,r);case f.kY.ZodCatch:return _(e,r);case f.kY.ZodPipeline:return H(e,r);case f.kY.ZodFunction:case f.kY.ZodVoid:case f.kY.ZodSymbol:return;default:let n;return void(n=0)}};function ei(e,t,r=!1){let n=t.seen.get(e);if(t.override){let i=t.override?.(e,t,n,r);if(i!==s)return i}if(n&&!r){let e=ea(n,t);if(void 0!==e)return e}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let a=en(e,e.typeName,t),o="function"==typeof a?ei(a(),t):a;if(o&&es(e,t,o),t.postProcess){let r=t.postProcess(o,e,t);return i.jsonSchema=o,r}return i.jsonSchema=o,o}let ea=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:c(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),d(t);return"seen"===t.$refStrategy?d(t):void 0}},es=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),eo=(e,t)=>{let r=u(t),n="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,n])=>({...e,[t]:ei(n._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??d(r)}),{}):void 0,i="string"==typeof t?t:t?.nameStrategy==="title"?void 0:t?.name,a=ei(e._def,void 0===i?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1)??d(r),s="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==s&&(a.title=s),r.flags.hasReferencedOpenAiAnyType&&(n||(n={}),n[r.openAiAnyTypeName]||(n[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===r.$refStrategy?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));let o=void 0===i?n?{...a,[r.definitionPath]:n}:a:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...n,[i]:a}};return"jsonSchema7"===r.target?o.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===r.target||"openAi"===r.target)&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var el=r(47075),eu=r(70014),ec={};function ed(e,t){if((0,a.Pq)(e)){let r=(0,a.EN)(e,!0);if(!(0,a.gY)(r))return(0,el.toJSONSchema)(e,t);{let e=(0,a.pE)(r,!0);return(0,el.toJSONSchema)(e,t)}}return(0,a.IU)(e)?eo(e):e}function ep(e){if(!e||"object"!=typeof e||0===Object.keys(e).length||Array.isArray(e))return!1;if("type"in e)return"string"==typeof e.type?"string"===e.type:!!Array.isArray(e.type)&&e.type.every(e=>"string"===e);if("enum"in e)return Array.isArray(e.enum)&&e.enum.length>0&&e.enum.every(e=>"string"==typeof e);if("const"in e)return"string"==typeof e.const;if("allOf"in e&&Array.isArray(e.allOf))return e.allOf.some(e=>ep(e));if("anyOf"in e&&Array.isArray(e.anyOf)||"oneOf"in e&&Array.isArray(e.oneOf)){let t="anyOf"in e?e.anyOf:e.oneOf;return t.length>0&&t.every(e=>ep(e))}if("not"in e)return!1;if("$ref"in e&&"string"==typeof e.$ref){let t=e.$ref,r=(0,eu.DS)(e);if(r[t])return ep(r[t])}return!1}(0,i.V)(ec,{Validator:()=>eu.Dr,deepCompareStrict:()=>eu.rA,toJsonSchema:()=>ed,validatesOnlyStrings:()=>ep})},25785:(e,t,r)=>{"use strict";let n=r(27681);e.exports=(e,t)=>new n(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},25822:(e,t,r)=>{"use strict";r.d(t,{Yx:()=>o,rO:()=>s});var n=r(69988);let i=(...e)=>fetch(...e),a=Symbol.for("ls:fetch_implementation"),s=()=>{let e=globalThis[a];return!!e&&"function"==typeof e&&"Headers"in e&&"Request"in e&&"Response"in e},o=e=>async(...t)=>{if(e||"true"===(0,n.Jz)("DEBUG")){let[e,r]=t;console.log(` ${r?.method||"GET"} ${e}`)}let r=await (globalThis[a]??i)(...t);return(e||"true"===(0,n.Jz)("DEBUG"))&&console.log(` ${r.status} ${r.statusText} ${r.url}`),r}},27123:(e,t,r)=>{"use strict";r.d(t,{k:()=>s});var n=r(92173),i=r(87150),a=r(41180),s=class extends a.YN{static lc_name(){return"RunnablePassthrough"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;func;constructor(e){super(e),e&&(this.func=e.func)}async invoke(e,t){let r=(0,n.ZI)(t);return this.func&&await this.func(e,r),this._callWithConfig(e=>Promise.resolve(e),e,r)}async *transform(e,t){let r,a=(0,n.ZI)(t),s=!0;for await(let t of this._transformStreamWithConfig(e,e=>e,a))if(yield t,s)if(void 0===r)r=t;else try{r=(0,i.xW)(r,t)}catch{r=void 0,s=!1}this.func&&void 0!==r&&await this.func(r,a)}static assign(e){return new a.B2(new a.ck({steps:e}))}}},27231:(e,t,r)=>{"use strict";r.d(t,{Nv:()=>a,P:()=>d,dr:()=>l,fK:()=>s,p1:()=>u,uf:()=>o,wk:()=>c});var n=r(67893),i=r(79271),a={};function s(e){return null!=e&&"object"==typeof e&&"lc_direct_tool_output"in e&&!0===e.lc_direct_tool_output}(0,n.V)(a,{ToolMessage:()=>o,ToolMessageChunk:()=>l,defaultToolCallParser:()=>u,isDirectToolOutput:()=>s,isToolMessage:()=>c,isToolMessageChunk:()=>d});var o=class extends i.XQ{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}lc_direct_tool_output=!0;type="tool";status;tool_call_id;metadata;artifact;constructor(e,t,r){let n="string"==typeof e||Array.isArray(e)?{content:e,name:r,tool_call_id:t}:e;super(n),this.tool_call_id=n.tool_call_id,this.artifact=n.artifact,this.status=n.status,this.metadata=n.metadata}static isInstance(e){return super.isInstance(e)&&"tool"===e.type}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}},l=class extends i.gj{type="tool";tool_call_id;status;artifact;constructor(e){super(e),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}concat(e){return new this.constructor({content:(0,i._I)(this.content,e.content),additional_kwargs:(0,i.ns)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,i.ns)(this.response_metadata,e.response_metadata),artifact:(0,i.F7)(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:(0,i.Iv)(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function u(e){let t=[],r=[];for(let n of e)if(!n.function)continue;else{let e=n.function.name;try{let r=JSON.parse(n.function.arguments);t.push({name:e||"",args:r||{},id:n.id})}catch{r.push({name:e,args:n.function.arguments,id:n.id,error:"Malformed args."})}}return[t,r]}function c(e){return"object"==typeof e&&null!==e&&"getType"in e&&"function"==typeof e.getType&&"tool"===e.getType()}function d(e){return"tool"===e._getType()}},27681:(e,t,r)=>{"use strict";let n=/\s+/g;class i{constructor(e,t){if(t=s(t),e instanceof i)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else return new i(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!y(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(let e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+e,r=a.get(t);if(r)return r;let n=this.options.loose,i=n?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];l("hyphen replace",e=e.replace(i,T(this.options.includePrerelease))),l("comparator trim",e=e.replace(c[d.COMPARATORTRIM],p)),l("tilde trim",e=e.replace(c[d.TILDETRIM],h)),l("caret trim",e=e.replace(c[d.CARETTRIM],f));let s=e.split(" ").map(e=>b(e,this.options)).join(" ").split(/\s+/).map(e=>O(e,this.options));n&&(s=s.filter(e=>(l("loose invalid filter",e,this.options),!!e.match(c[d.COMPARATORLOOSE])))),l("range list",s);let u=new Map;for(let e of s.map(e=>new o(e,this.options))){if(y(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");let v=[...u.values()];return a.set(t,v),v}intersects(e,t){if(!(e instanceof i))throw TypeError("a Range is required");return this.set.some(r=>_(r,t)&&e.set.some(e=>_(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(N(this.set[t],e,this.options))return!0;return!1}}e.exports=i;let a=new(r(8868)),s=r(66435),o=r(64056),l=r(52412),u=r(78768),{safeRe:c,t:d,comparatorTrimReplace:p,tildeTrimReplace:h,caretTrimReplace:f}=r(77956),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=r(14018),y=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,_=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(e=>i.intersects(e,t)),i=n.pop();return r},b=(e,t)=>(l("comp",e=e.replace(c[d.BUILD],""),t),l("caret",e=$(e,t)),l("tildes",e=k(e,t)),l("xrange",e=I(e,t)),l("stars",e=A(e,t)),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,k=(e,t)=>e.trim().split(/\s+/).map(e=>x(e,t)).join(" "),x=(e,t)=>{let r=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(r,(t,r,n,i,a)=>{let s;return l("tilde",e,t,r,n,i,a),w(r)?s="":w(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:w(i)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:a?(l("replaceTilde pr",a),s=`>=${r}.${n}.${i}-${a} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,l("tilde return",s),s})},$=(e,t)=>e.trim().split(/\s+/).map(e=>S(e,t)).join(" "),S=(e,t)=>{l("caret",e,t);let r=t.loose?c[d.CARETLOOSE]:c[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,i,a,s)=>{let o;return l("caret",e,t,r,i,a,s),w(r)?o="":w(i)?o=`>=${r}.0.0${n} <${+r+1}.0.0-0`:w(a)?o="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:s?(l("replaceCaret pr",s),o="0"===r?"0"===i?`>=${r}.${i}.${a}-${s} <${r}.${i}.${+a+1}-0`:`>=${r}.${i}.${a}-${s} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${a}-${s} <${+r+1}.0.0-0`):(l("no pr"),o="0"===r?"0"===i?`>=${r}.${i}.${a}${n} <${r}.${i}.${+a+1}-0`:`>=${r}.${i}.${a}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${a} <${+r+1}.0.0-0`),l("caret return",o),o})},I=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map(e=>E(e,t)).join(" ")),E=(e,t)=>{e=e.trim();let r=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(r,(r,n,i,a,s,o)=>{l("xRange",e,r,n,i,a,s,o);let u=w(i),c=u||w(a),d=c||w(s),p=d;return"="===n&&p&&(n=""),o=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(a=0),s=0,">"===n?(n=">=",c?(i=+i+1,a=0):a=+a+1,s=0):"<="===n&&(n="<",c?i=+i+1:a=+a+1),"<"===n&&(o="-0"),r=`${n+i}.${a}.${s}${o}`):c?r=`>=${i}.0.0${o} <${+i+1}.0.0-0`:d&&(r=`>=${i}.${a}.0${o} <${i}.${+a+1}.0-0`),l("xRange return",r),r})},A=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),O=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),T=e=>(t,r,n,i,a,s,o,l,u,c,d,p)=>(r=w(n)?"":w(i)?`>=${n}.0.0${e?"-0":""}`:w(a)?`>=${n}.${i}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`,l=w(u)?"":w(c)?`<${+u+1}.0.0-0`:w(d)?`<${u}.${+c+1}.0-0`:p?`<=${u}.${c}.${d}-${p}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`,`${r} ${l}`.trim()),N=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==o.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},28483:(e,t,r)=>{"use strict";let n=r(78768),i=r(64056),{ANY:a}=i,s=r(27681),o=r(90008),l=r(332),u=r(66235),c=r(19106),d=r(21855);e.exports=(e,t,r,p)=>{let h,f,m,g,y;switch(e=new n(e,p),t=new s(t,p),r){case">":h=l,f=c,m=u,g=">",y=">=";break;case"<":h=u,f=d,m=l,g="<",y="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(o(e,t,p))return!1;for(let r=0;r<t.set.length;++r){let n=t.set[r],s=null,o=null;if(n.forEach(e=>{e.semver===a&&(e=new i(">=0.0.0")),s=s||e,o=o||e,h(e.semver,s.semver,p)?s=e:m(e.semver,o.semver,p)&&(o=e)}),s.operator===g||s.operator===y||(!o.operator||o.operator===g)&&f(e,o.semver)||o.operator===y&&m(e,o.semver))return!1}return!0}},28809:(e,t,r)=>{"use strict";function n(e){return!!(e&&"object"==typeof e&&"type"in e&&"tool_call"===e.type)}function i(e){return!!(e&&"object"==typeof e&&"toolCall"in e&&null!=e.toolCall&&"object"==typeof e.toolCall&&"id"in e.toolCall&&"string"==typeof e.toolCall.id)}r.d(t,{Ky:()=>n,hR:()=>i,qe:()=>a});var a=class extends Error{output;constructor(e,t){super(e),this.output=t}}},28905:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var n=r(12115),i=r(6101),a=r(52712);function s(e,t){return n.useReducer((e,r)=>{let n=t[e][r];return null!=n?n:e},e)}var o=e=>{let{present:t,children:r}=e,a=l(t),s="function"==typeof r?r({present:a.isPresent}):n.Children.only(r),o=(0,i.s)(a.ref,c(s));return"function"==typeof r||a.isPresent?n.cloneElement(s,{ref:o}):null};function l(e){let[t,r]=n.useState(),i=n.useRef(null),o=n.useRef(e),l=n.useRef("none"),[c,d]=s(e?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return n.useEffect(()=>{let e=u(i.current);l.current="mounted"===c?e:"none"},[c]),(0,a.N)(()=>{let t=i.current,r=o.current;if(r!==e){let n=l.current,i=u(t);if(e)d("MOUNT");else if("none"===i||(null==t?void 0:t.display)==="none")d("UNMOUNT");else{let e=n!==i;r&&e?d("ANIMATION_OUT"):d("UNMOUNT")}o.current=e}},[e,d]),(0,a.N)(()=>{if(t){var e;let r,n=null!=(e=t.ownerDocument.defaultView)?e:window,a=e=>{let a=u(i.current).includes(CSS.escape(e.animationName));if(e.target===t&&a&&(d("ANIMATION_END"),!o.current)){let e=t.style.animationFillMode;t.style.animationFillMode="forwards",r=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=e)})}},s=e=>{e.target===t&&(l.current=u(i.current))};return t.addEventListener("animationstart",s),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{n.clearTimeout(r),t.removeEventListener("animationstart",s),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:n.useCallback(e=>{i.current=e?getComputedStyle(e):null,r(e)},[])}}function u(e){return(null==e?void 0:e.animationName)||"none"}function c(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(i=(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get)&&"isReactWarning"in n&&n.isReactWarning)?e.props.ref:e.props.ref||e.ref}o.displayName="Presence"},29338:(e,t,r)=>{"use strict";let n=r(27681);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},29352:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeBase=void 0;class NodeBase{state;constructor(e){this.state=e}parseExpression(expression){let regex=/{{(.*?)}}/g,matches=expression.match(regex);return matches&&matches.forEach(match=>{let key=match.replace("{{","").replace("}}",""),value=eval(key);"object"==typeof value&&(value=JSON.stringify(value)),expression=expression.replace(match,value)}),expression}getConfig(){throw Error("Method not implemented")}execute(e){throw Error("Method not implemented")}}exports.NodeBase=NodeBase},31465:(e,t,r)=>{"use strict";r.d(t,{F:()=>d,T:()=>o});var n=r(50696),i=r(10999);function a(e){let t=[];for(let r of("string"==typeof e.content?t.push({type:"text",text:e.content}):t.push(...o(e.content)),e.tool_calls??[]))t.push({type:"tool_call",id:r.id,name:r.name,args:r.args});return t}function s(e){let t=[];for(let r of("string"==typeof e.content?t.push({type:"text",text:e.content}):t.push(...o(e.content)),e.tool_calls??[]))t.push({type:"tool_call",id:r.id,name:r.name,args:r.args});return t}function o(e){let t=[];for(let r of e)(0,i.C4)(r)?t.push((0,i.jk)(r)):t.push(r);return t}function l(e){if("url_citation"===e.type){let{url:t,title:r,start_index:n,end_index:i}=e;return{type:"citation",url:t,title:r,startIndex:n,endIndex:i}}if("file_citation"===e.type){let{file_id:t,filename:r,index:n}=e;return{type:"citation",title:r,startIndex:n,endIndex:n,fileId:t}}return e}function u(e){return Array.from(function*(){if((0,n.nD)(e.additional_kwargs?.reasoning)&&(0,n.V3)(e.additional_kwargs.reasoning.summary)){let t=e.additional_kwargs.reasoning.summary.reduce((e,t)=>(0,n.nD)(t)&&(0,n.vQ)(t.text)?`${e}${t.text}`:e,"");yield{type:"reasoning",reasoning:t}}for(let t of"string"==typeof e.content?[{type:"text",text:e.content}]:e.content)if((0,n.MP)(t,"text")){let{text:e,annotations:r,...n}=t;Array.isArray(r)?yield{...n,type:"text",text:String(e),annotations:r.map(l)}:yield{...n,type:"text",text:String(e)}}for(let t of e.tool_calls??[])yield{type:"tool_call",id:t.id,name:t.name,args:t.args};if((0,n.nD)(e.additional_kwargs)&&(0,n.V3)(e.additional_kwargs.tool_outputs))for(let t of e.additional_kwargs.tool_outputs){if((0,n.MP)(t,"web_search_call")){yield{id:t.id,type:"server_tool_call",name:"web_search",args:{query:t.query}};continue}if((0,n.MP)(t,"file_search_call")){yield{id:t.id,type:"server_tool_call",name:"file_search",args:{query:t.query}};continue}if((0,n.MP)(t,"computer_call")){yield{type:"non_standard",value:t};continue}else if((0,n.MP)(t,"code_interpreter_call")){if((0,n.vQ)(t.code)&&(yield{id:t.id,type:"server_tool_call",name:"code_interpreter",args:{code:t.code}}),(0,n.V3)(t.outputs)){let e=(0,n.iD)(()=>{if("in_progress"!==t.status){if("completed"===t.status)return 0;if("incomplete"===t.status)return 127;if("interpreting"!==t.status&&"failed"===t.status)return 1}});for(let r of t.outputs)if((0,n.MP)(r,"logs")){yield{type:"server_tool_call_result",toolCallId:t.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:e??0,stderr:[0,void 0].includes(e)?void 0:String(r.logs),stdout:[0,void 0].includes(e)?String(r.logs):void 0}};continue}}continue}else if((0,n.MP)(t,"mcp_call")){yield{id:t.id,type:"server_tool_call",name:"mcp_call",args:t.input};continue}else if((0,n.MP)(t,"mcp_list_tools")){yield{id:t.id,type:"server_tool_call",name:"mcp_list_tools",args:t.input};continue}else if((0,n.MP)(t,"mcp_approval_request")){yield{type:"non_standard",value:t};continue}else if((0,n.MP)(t,"image_generation_call")){yield{type:"non_standard",value:t};continue}(0,n.nD)(t)&&(yield{type:"non_standard",value:t})}}())}function c(e){return Array.from(function*(){for(let t of(yield*u(e),e.tool_call_chunks??[]))yield{type:"tool_call_chunk",id:t.id,name:t.name,args:t.args}}())}let d={translateContent:e=>"string"==typeof e.content?a(e):u(e),translateContentChunk:e=>"string"==typeof e.content?s(e):c(e)}},31926:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(40510),i=r(84598),a=null,s=null,o=0;let l=function(e,t,r){e=e||{};var l=t&&r||0,u=t||new Uint8Array(16),c=e.random||(e.rng||n.A)(),d=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.seq?e.seq:null,h=s,f=a;return d>o&&void 0===e.msecs&&(o=d,null!==p&&(h=null,f=null)),null!==p&&(p>0x7fffffff&&(p=0x7fffffff),h=p>>>19&4095,f=524287&p),(null===h||null===f)&&(h=(h=127&c[6])<<8|c[7],f=(f=(f=63&c[8])<<8|c[9])<<5|c[10]>>>3),d+1e4>o&&null===p?++f>524287&&(f=0,++h>4095&&(h=0,o++)):o=d,s=h,a=f,u[l++]=o/0x10000000000&255,u[l++]=o/0x100000000&255,u[l++]=o/0x1000000&255,u[l++]=o/65536&255,u[l++]=o/256&255,u[l++]=255&o,u[l++]=h>>>4&15|112,u[l++]=255&h,u[l++]=f>>>13&63|128,u[l++]=f>>>5&255,u[l++]=f<<3&255|7&c[10],u[l++]=c[11],u[l++]=c[12],u[l++]=c[13],u[l++]=c[14],u[l++]=c[15],t||(0,i.k)(u)}},32197:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var i=r(40510),a=r(84598);let s=function(e,t,r){if(n.randomUUID&&!t&&!e)return n.randomUUID();var s=(e=e||{}).random||(e.rng||i.A)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=s[o];return t}return(0,a.k)(s)}},33471:(e,t,r)=>{"use strict";let n=r(77956),i=r(14018),a=r(78768),s=r(219),o=r(22814),l=r(86039),u=r(3188),c=r(17329),d=r(96688),p=r(91160),h=r(76980),f=r(61375),m=r(38673),g=r(98566),y=r(17678),v=r(89249),_=r(55463),b=r(73015),w=r(5791),k=r(332),x=r(66235),$=r(51389),S=r(51017),I=r(21855),E=r(19106),A=r(95841),O=r(86874),T=r(64056),N=r(27681),C=r(90008),P=r(25785),j=r(59754),z=r(61928),R=r(33533),M=r(83446),L=r(28483),Z=r(33847),D=r(86650),U=r(29338);e.exports={parse:o,valid:l,clean:u,inc:c,diff:d,major:p,minor:h,patch:f,prerelease:m,compare:g,rcompare:y,compareLoose:v,compareBuild:_,sort:b,rsort:w,gt:k,lt:x,eq:$,neq:S,gte:I,lte:E,cmp:A,coerce:O,Comparator:T,Range:N,satisfies:C,toComparators:P,maxSatisfying:j,minSatisfying:z,minVersion:R,validRange:M,outside:L,gtr:Z,ltr:D,intersects:U,simplifyRange:r(71331),subset:r(84450),SemVer:a,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},33533:(e,t,r)=>{"use strict";let n=r(78768),i=r(27681),a=r(332);e.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r)||(r=new n("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let i=e.set[t],s=null;i.forEach(e=>{let t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!s||a(t,s))&&(s=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),s&&(!r||a(r,s))&&(r=s)}return r&&e.test(r)?r:null}},33847:(e,t,r)=>{"use strict";let n=r(28483);e.exports=(e,t,r)=>n(e,t,">",r)},34497:(e,t,r)=>{"use strict";r.d(t,{BA:()=>I,BZ:()=>z,EN:()=>P,Gd:()=>c,IS:()=>v,IU:()=>a,K3:()=>d,PA:()=>$,Pq:()=>i,QV:()=>x,RA:()=>O,S8:()=>w,W0:()=>S,X2:()=>g,Yi:()=>h,Zu:()=>f,c9:()=>o,cg:()=>m,gY:()=>_,hZ:()=>p,lm:()=>s,pE:()=>E,qT:()=>A,rA:()=>u,vf:()=>k,yQ:()=>y,yx:()=>l,zL:()=>b,zO:()=>j});var n=r(47075);function i(e){if("object"!=typeof e||null===e)return!1;let t=e;if(!("_zod"in t))return!1;let r=t._zod;return"object"==typeof r&&null!==r&&"def"in r}function a(e){if("object"!=typeof e||null===e)return!1;let t=e;if(!("_def"in t)||"_zod"in t)return!1;let r=t._def;return"object"==typeof r&&null!=r&&"typeName"in r}function s(e){return i(e)&&console.warn("[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior."),a(e)}function o(e){return!(!e||"object"!=typeof e||Array.isArray(e))&&!!(i(e)||a(e))}function l(e){return"object"==typeof e&&null!==e&&"_def"in e&&"object"==typeof e._def&&null!==e._def&&"typeName"in e._def&&"ZodLiteral"===e._def.typeName||!1}function u(e){return!!i(e)&&("object"==typeof e&&null!==e&&"_zod"in e&&"object"==typeof e._zod&&null!==e._zod&&"def"in e._zod&&"object"==typeof e._zod.def&&null!==e._zod.def&&"type"in e._zod.def&&"literal"===e._zod.def.type||!1)}function c(e){return!!(l(e)||u(e))}async function d(e,t){if(i(e))try{let r=await (0,n.parseAsync)(e,t);return{success:!0,data:r}}catch(e){return{success:!1,error:e}}if(a(e))return await e.safeParseAsync(t);throw Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function p(e,t){if(i(e))return await (0,n.parseAsync)(e,t);if(a(e))return await e.parseAsync(t);throw Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function h(e,t){if(i(e))try{let r=(0,n.parse)(e,t);return{success:!0,data:r}}catch(e){return{success:!1,error:e}}if(a(e))return e.safeParse(t);throw Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function f(e,t){if(i(e))return(0,n.parse)(e,t);if(a(e))return e.parse(t);throw Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function m(e){return i(e)?n.globalRegistry.get(e)?.description:a(e)||"description"in e&&"string"==typeof e.description?e.description:void 0}function g(e){if(!o(e))return!1;if(a(e)){let t=e._def;if("ZodObject"===t.typeName){let t=e;return!t.shape||0===Object.keys(t.shape).length}if("ZodRecord"===t.typeName)return!0}if(i(e)){let t=e._zod.def;if("object"===t.type){let t=e;return!t.shape||0===Object.keys(t.shape).length}if("record"===t.type)return!0}return"object"==typeof e&&null!==e&&!("shape"in e)}function y(e){return!!o(e)&&(a(e)?"ZodString"===e._def.typeName:!!i(e)&&"string"===e._zod.def.type)}function v(e){return"object"==typeof e&&null!==e&&"_def"in e&&"object"==typeof e._def&&null!==e._def&&"typeName"in e._def&&"ZodObject"===e._def.typeName||!1}function _(e){return!!i(e)&&("object"==typeof e&&null!==e&&"_zod"in e&&"object"==typeof e._zod&&null!==e._zod&&"def"in e._zod&&"object"==typeof e._zod.def&&null!==e._zod.def&&"type"in e._zod.def&&"object"===e._zod.def.type||!1)}function b(e){return!!i(e)&&("object"==typeof e&&null!==e&&"_zod"in e&&"object"==typeof e._zod&&null!==e._zod&&"def"in e._zod&&"object"==typeof e._zod.def&&null!==e._zod.def&&"type"in e._zod.def&&"array"===e._zod.def.type||!1)}function w(e){return!!i(e)&&("object"==typeof e&&null!==e&&"_zod"in e&&"object"==typeof e._zod&&null!==e._zod&&"def"in e._zod&&"object"==typeof e._zod.def&&null!==e._zod.def&&"type"in e._zod.def&&"optional"===e._zod.def.type||!1)}function k(e){return!!i(e)&&("object"==typeof e&&null!==e&&"_zod"in e&&"object"==typeof e._zod&&null!==e._zod&&"def"in e._zod&&"object"==typeof e._zod.def&&null!==e._zod.def&&"type"in e._zod.def&&"nullable"===e._zod.def.type||!1)}function x(e){return!!(v(e)||_(e))}function $(e){if(a(e))return e.shape;if(i(e))return e._zod.def.shape;throw Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function S(e,t){if(a(e))return e.extend(t);if(i(e))return n.util.extend(e,t);throw Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function I(e){if(a(e))return e.partial();if(i(e))return n.util.partial(n.$ZodOptional,e,void 0);throw Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function E(e,t=!1){if(a(e))return e.strict();if(_(e)){let r=e._zod.def.shape;if(t)for(let[i,a]of Object.entries(e._zod.def.shape)){if(_(a)){let e=E(a,t);r[i]=e}else if(b(a)){let e=a._zod.def.element;_(e)&&(e=E(e,t)),r[i]=(0,n.clone)(a,{...a._zod.def,element:e})}else r[i]=a;let e=n.globalRegistry.get(a);e&&n.globalRegistry.add(r[i],e)}let i=(0,n.clone)(e,{...e._zod.def,shape:r,catchall:(0,n._never)(n.$ZodNever)}),a=n.globalRegistry.get(e);return a&&n.globalRegistry.add(i,a),i}throw Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function A(e,t=!1){if(v(e))return e.passthrough();if(_(e)){let r=e._zod.def.shape;if(t)for(let[i,a]of Object.entries(e._zod.def.shape)){if(_(a)){let e=A(a,t);r[i]=e}else if(b(a)){let e=a._zod.def.element;_(e)&&(e=A(e,t)),r[i]=(0,n.clone)(a,{...a._zod.def,element:e})}else r[i]=a;let e=n.globalRegistry.get(a);e&&n.globalRegistry.add(r[i],e)}let i=(0,n.clone)(e,{...e._zod.def,shape:r,catchall:(0,n._unknown)(n.$ZodUnknown)}),a=n.globalRegistry.get(e);return a&&n.globalRegistry.add(i,a),i}throw Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function O(e){if(a(e))try{let t=e.parse(void 0);return()=>t}catch{return}if(i(e))try{let t=(0,n.parse)(e,void 0);return()=>t}catch{}}function T(e){return a(e)&&"typeName"in e._def&&"ZodEffects"===e._def.typeName}function N(e){return i(e)&&"pipe"===e._zod.def.type}function C(e,t,r){let s=r.get(e);if(void 0!==s)return s;if(a(e))return T(e)?C(e._def.schema,t,r):e;if(i(e)){let i=e;if(N(e)&&(i=C(e._zod.def.in,t,r)),t){if(_(i)){let e={};for(let[n,a]of Object.entries(i._zod.def.shape))e[n]=C(a,t,r);i=(0,n.clone)(i,{...i._zod.def,shape:e})}else if(b(i)){let e=C(i._zod.def.element,t,r);i=(0,n.clone)(i,{...i._zod.def,element:e})}else if(w(i)){let e=C(i._zod.def.innerType,t,r);i=(0,n.clone)(i,{...i._zod.def,innerType:e})}else if(k(i)){let e=C(i._zod.def.innerType,t,r);i=(0,n.clone)(i,{...i._zod.def,innerType:e})}}let a=n.globalRegistry.get(e);return a&&n.globalRegistry.add(i,a),r.set(e,i),i}throw Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function P(e,t=!1){return C(e,t,new WeakMap)}function j(e,t){if(a(e)){let r=$(e),n={};for(let[e,i]of Object.entries(r))t(e,i)?n[e]=i.optional():n[e]=i;return e.extend(n)}if(i(e)){let r=$(e),i={...e._zod.def.shape};for(let[e,a]of Object.entries(r))t(e,a)&&(i[e]=new n.$ZodOptional({type:"optional",innerType:a}));let a=(0,n.clone)(e,{...e._zod.def,shape:i}),s=n.globalRegistry.get(e);return s&&n.globalRegistry.add(a,s),a}throw Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function z(e){return e instanceof Error&&("ZodError"===e.constructor.name||"$ZodError"===e.constructor.name)}},36984:(e,t,r)=>{"use strict";r.d(t,{xV:()=>k,su:()=>b});var n=r(67893),i=r(85579),a=r(79271),s=r(90338),o=r(64184),l=r(4397),u=r(72716),c=r(55452),d=r(87150),p=r(23294),h=r(34497),f=r(25720),m=r(41180);r(67286);var g=r(61115),y=r(27123);let v=e=>e();function _(e){return new e.constructor({...e,content:e.contentBlocks,response_metadata:{...e.response_metadata,output_version:"v1"}})}var b={};function w(e){let t=[];for(let r of e){let e=r;if(Array.isArray(r.content))for(let t=0;t<r.content.length;t++){let n=r.content[t];((0,i.W)(n)||(0,i.cJ)(n))&&e===r&&(e=new r.constructor({...e,content:[...r.content.slice(0,t),(0,i.Vi)(n),...r.content.slice(t+1)]}))}t.push(e)}return t}(0,n.V)(b,{BaseChatModel:()=>k,SimpleChatModel:()=>x});var k=class e extends g.j_{lc_namespace=["langchain","chat_models",this._llmType()];disableStreaming=!1;outputVersion;get callKeys(){return[...super.callKeys,"outputVersion"]}constructor(e){super(e),this.outputVersion=v(()=>{let t=e.outputVersion??(0,l.Az)("LC_OUTPUT_VERSION");return t&&["v0","v1"].includes(t)?t:"v0"})}_separateRunnableConfigFromCallOptionsCompat(e){let[t,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=t.signal,[t,r]}async invoke(t,r){let n=e._convertInputToPromptValue(t);return(await this.generatePrompt([n],r,r?.callbacks)).generations[0][0].message}async *_streamResponseChunks(e,t,r){throw Error("Not implemented.")}async *_streamIterator(t,r){if(this._streamResponseChunks===e.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(t,r);else{let n,i,a=e._convertInputToPromptValue(t).toChatMessages(),[s,l]=this._separateRunnableConfigFromCallOptionsCompat(r),u={...s.metadata,...this.getLsParams(l)},d=await c.Td.configure(s.callbacks,this.callbacks,s.tags,this.tags,u,this.metadata,{verbose:this.verbose}),p={options:l,invocation_params:this?.invocationParams(l),batch_size:1},h=l.outputVersion??this.outputVersion,f=await d?.handleChatModelStart(this.toJSON(),[w(a)],s.runId,void 0,p,void 0,void 0,s.runName);try{for await(let e of this._streamResponseChunks(a,l,f?.[0])){if(null==e.message.id){let t=f?.at(0)?.runId;null!=t&&e.message._updateId(`run-${t}`)}e.message.response_metadata={...e.generationInfo,...e.message.response_metadata},"v1"===h?yield _(e.message):yield e.message,n=n?n.concat(e):e,(0,o.jm)(e.message)&&void 0!==e.message.usage_metadata&&(i={tokenUsage:{promptTokens:e.message.usage_metadata.input_tokens,completionTokens:e.message.usage_metadata.output_tokens,totalTokens:e.message.usage_metadata.total_tokens}})}}catch(e){throw await Promise.all((f??[]).map(t=>t?.handleLLMError(e))),e}await Promise.all((f??[]).map(e=>e?.handleLLMEnd({generations:[[n]],llmOutput:i})))}}getLsParams(e){let t=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:t}}async _generateUncached(t,r,n,i){let a,l=t.map(e=>e.map(s.K0));if(void 0!==i&&i.length===l.length)a=i;else{let e={...n.metadata,...this.getLsParams(r)},t=await c.Td.configure(n.callbacks,this.callbacks,n.tags,this.tags,e,this.metadata,{verbose:this.verbose}),i={options:r,invocation_params:this?.invocationParams(r),batch_size:1};a=await t?.handleChatModelStart(this.toJSON(),l.map(w),n.runId,void 0,i,void 0,void 0,n.runName)}let h=r.outputVersion??this.outputVersion,f=[],m=[];if(a?.[0].handlers.find(u.xL)&&!this.disableStreaming&&1===l.length&&this._streamResponseChunks!==e.prototype._streamResponseChunks)try{let e,t;for await(let n of(await this._streamResponseChunks(l[0],r,a?.[0]))){if(null==n.message.id){let e=a?.at(0)?.runId;null!=e&&n.message._updateId(`run-${e}`)}e=void 0===e?n:(0,d.xW)(e,n),(0,o.jm)(n.message)&&void 0!==n.message.usage_metadata&&(t={tokenUsage:{promptTokens:n.message.usage_metadata.input_tokens,completionTokens:n.message.usage_metadata.output_tokens,totalTokens:n.message.usage_metadata.total_tokens}})}if(void 0===e)throw Error("Received empty response from chat model call.");f.push([e]),await a?.[0].handleLLMEnd({generations:f,llmOutput:t})}catch(e){throw await a?.[0].handleLLMError(e),e}else{let e=await Promise.allSettled(l.map(async(e,t)=>{let n=await this._generate(e,{...r,promptIndex:t},a?.[t]);if("v1"===h)for(let e of n.generations)e.message=_(e.message);return n}));await Promise.all(e.map(async(e,t)=>{if("fulfilled"!==e.status)return await a?.[t]?.handleLLMError(e.reason),Promise.reject(e.reason);{let r=e.value;for(let e of r.generations){if(null==e.message.id){let t=a?.at(0)?.runId;null!=t&&e.message._updateId(`run-${t}`)}e.message.response_metadata={...e.generationInfo,...e.message.response_metadata}}return 1===r.generations.length&&(r.generations[0].message.response_metadata={...r.llmOutput,...r.generations[0].message.response_metadata}),f[t]=r.generations,m[t]=r.llmOutput,a?.[t]?.handleLLMEnd({generations:[r.generations],llmOutput:r.llmOutput})}}))}let g={generations:f,llmOutput:m.length?this._combineLLMOutput?.(...m):void 0};return Object.defineProperty(g,p.SP,{value:a?{runIds:a?.map(e=>e.runId)}:void 0,configurable:!0}),g}async _generateCached({messages:t,cache:r,llmStringKey:n,parsedOptions:i,handledOptions:l}){let u=t.map(e=>e.map(s.K0)),d={...l.metadata,...this.getLsParams(i)},h=await c.Td.configure(l.callbacks,this.callbacks,l.tags,this.tags,d,this.metadata,{verbose:this.verbose}),f={options:i,invocation_params:this?.invocationParams(i),batch_size:1},m=await h?.handleChatModelStart(this.toJSON(),u.map(w),l.runId,void 0,f,void 0,void 0,l.runName),g=[],y=(await Promise.allSettled(u.map(async(t,i)=>{let a=e._convertInputToPromptValue(t).toString(),s=await r.lookup(a,n);return null==s&&g.push(i),s}))).map((e,t)=>({result:e,runManager:m?.[t]})).filter(({result:e})=>"fulfilled"===e.status&&null!=e.value||"rejected"===e.status),v=i.outputVersion??this.outputVersion,b=[];await Promise.all(y.map(async({result:e,runManager:t},r)=>{if("fulfilled"!==e.status)return await t?.handleLLMError(e.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(e.reason);{let n=e.value;return b[r]=n.map(e=>("message"in e&&(0,a.ny)(e.message)&&(0,o.KX)(e.message)&&(e.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},"v1"===v&&(e.message=_(e.message))),e.generationInfo={...e.generationInfo,tokenUsage:{}},e)),n.length&&await t?.handleLLMNewToken(n[0].text),t?.handleLLMEnd({generations:[n]},void 0,void 0,void 0,{cached:!0})}}));let k={generations:b,missingPromptIndices:g,startedRunManagers:m};return Object.defineProperty(k,p.SP,{value:m?{runIds:m?.map(e=>e.runId)}:void 0,configurable:!0}),k}async generate(t,r,n){let i;i=Array.isArray(r)?{stop:r}:r;let a=t.map(e=>e.map(s.K0)),[o,l]=this._separateRunnableConfigFromCallOptionsCompat(i);if(o.callbacks=o.callbacks??n,!this.cache)return this._generateUncached(a,l,o);let{cache:u}=this,c=this._getSerializedCacheKeyParametersForCall(l),{generations:d,missingPromptIndices:p,startedRunManagers:h}=await this._generateCached({messages:a,cache:u,llmStringKey:c,parsedOptions:l,handledOptions:o}),f={};if(p.length>0){let t=await this._generateUncached(p.map(e=>a[e]),l,o,void 0!==h?p.map(e=>h?.[e]):void 0);await Promise.all(t.generations.map(async(t,r)=>{let n=p[r];d[n]=t;let i=e._convertInputToPromptValue(a[n]).toString();return u.update(i,c,t)})),f=t.llmOutput??{}}return{generations:d,llmOutput:f}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}async generatePrompt(e,t,r){let n=e.map(e=>e.toChatMessages());return this.generate(n,t,r)}withStructuredOutput(e,t){let r;if("function"!=typeof this.bindTools)throw Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(t?.strict)throw Error('"strict" mode is not supported for this model by default.');let n=e,i=t?.name,a=(0,h.cg)(n)??"A function available to call.",s=t?.method,l=t?.includeRaw;if("jsonMode"===s)throw Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let u=i??"extract";(0,h.c9)(n)?r=[{type:"function",function:{name:u,description:a,parameters:(0,f.PF)(n)}}]:("name"in n&&(u=n.name),r=[{type:"function",function:{name:u,description:a,parameters:n}}]);let c=this.bindTools(r),d=m.jY.from(e=>{if(!o.H.isInstance(e))throw Error("Input is not an AIMessageChunk.");if(!e.tool_calls||0===e.tool_calls.length)throw Error("No tool calls found in the response.");let t=e.tool_calls.find(e=>e.name===u);if(!t)throw Error(`No tool call found with name ${u}.`);return t.args});if(!l)return c.pipe(d).withConfig({runName:"StructuredOutput"});let p=y.k.assign({parsed:(e,t)=>d.invoke(e.raw,t)}),g=y.k.assign({parsed:()=>null}),v=p.withFallbacks({fallbacks:[g]});return m.zZ.from([{raw:c},v]).withConfig({runName:"StructuredOutputRunnable"})}},x=class extends k{async _generate(e,t,r){let n=await this._call(e,t,r),i=new o.Od(n);if("string"!=typeof i.content)throw Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:i.content,message:i}]}}}},38168:(e,t,r)=>{"use strict";r.d(t,{Eq:()=>d});var n=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},i=new WeakMap,a=new WeakMap,s={},o=0,l=function(e){return e&&(e.host||l(e.parentNode))},u=function(e,t){return t.map(function(t){if(e.contains(t))return t;var r=l(t);return r&&e.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return!!e})},c=function(e,t,r,n){var l=u(t,Array.isArray(e)?e:[e]);s[r]||(s[r]=new WeakMap);var c=s[r],d=[],p=new Set,h=new Set(l),f=function(e){!e||p.has(e)||(p.add(e),f(e.parentNode))};l.forEach(f);var m=function(e){!e||h.has(e)||Array.prototype.forEach.call(e.children,function(e){if(p.has(e))m(e);else try{var t=e.getAttribute(n),s=null!==t&&"false"!==t,o=(i.get(e)||0)+1,l=(c.get(e)||0)+1;i.set(e,o),c.set(e,l),d.push(e),1===o&&s&&a.set(e,!0),1===l&&e.setAttribute(r,"true"),s||e.setAttribute(n,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return m(t),p.clear(),o++,function(){d.forEach(function(e){var t=i.get(e)-1,s=c.get(e)-1;i.set(e,t),c.set(e,s),t||(a.has(e)||e.removeAttribute(n),a.delete(e)),s||e.removeAttribute(r)}),--o||(i=new WeakMap,i=new WeakMap,a=new WeakMap,s={})}},d=function(e,t,r){void 0===r&&(r="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),a=t||n(e);return a?(i.push.apply(i,Array.from(a.querySelectorAll("[aria-live]"))),c(i,a,r,"aria-hidden")):function(){return null}}},38673:(e,t,r)=>{"use strict";let n=r(22814);e.exports=(e,t)=>{let r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},38805:(e,t,r)=>{"use strict";function n(e){return"function"==typeof e?._getType}function i(e){let t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}r.d(t,{$:()=>n,T:()=>i})},39033:(e,t,r)=>{"use strict";r.d(t,{c:()=>i});var n=r(12115);function i(e){let t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...e)=>t.current?.(...e),[])}},39921:(e,t,r)=>{"use strict";r.d(t,{J:()=>h});let n=Object.prototype.toString,i=e=>"[object Error]"===n.call(e),a=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function s(e){if(!(e&&i(e)&&"TypeError"===e.name&&"string"==typeof e.message))return!1;let{message:t,stack:r}=e;return"Load failed"===t?void 0===r||"__sentry_captured__"in e:!!t.startsWith("error sending request for url")||a.has(t)}function o(e){if("number"==typeof e){if(e<0)throw TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(e))throw TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(void 0!==e)throw TypeError("Expected `retries` to be a number or Infinity.")}function l(e,t,{min:r=0,allowInfinity:n=!1}={}){if(void 0!==t){if("number"!=typeof t||Number.isNaN(t))throw TypeError(`Expected \`${e}\` to be a number${n?" or Infinity":""}.`);if(!n&&!Number.isFinite(t))throw TypeError(`Expected \`${e}\` to be a finite number.`);if(t<r)throw TypeError(`Expected \`${e}\` to be \u2265 ${r}.`)}}var u=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function c(e,t){let r=Math.max(1,e+1),n=Math.round((t.randomize?Math.random()+1:1)*t.minTimeout*t.factor**(r-1));return Math.min(n,t.maxTimeout)}function d(e,t){return Number.isFinite(t)?t-(performance.now()-e):t}async function p({error:e,attemptNumber:t,retriesConsumed:r,startTime:n,options:i}){let a=e instanceof Error?e:TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(a instanceof u)throw a.originalError;let o=Number.isFinite(i.retries)?Math.max(0,i.retries-r):i.retries,l=i.maxRetryTime??Number.POSITIVE_INFINITY,p=Object.freeze({error:a,attemptNumber:t,retriesLeft:o,retriesConsumed:r});if(await i.onFailedAttempt(p),0>=d(n,l))throw a;let h=await i.shouldConsumeRetry(p),f=d(n,l);if(f<=0||o<=0)throw a;if(a instanceof TypeError&&!s(a)){if(h)throw a;return i.signal?.throwIfAborted(),!1}if(!await i.shouldRetry(p))throw a;if(!h)return i.signal?.throwIfAborted(),!1;let m=Math.min(c(r,i),f);return m>0&&await new Promise((e,t)=>{let r=()=>{clearTimeout(n),i.signal?.removeEventListener("abort",r),t(i.signal.reason)},n=setTimeout(()=>{i.signal?.removeEventListener("abort",r),e()},m);i.unref&&n.unref?.(),i.signal?.addEventListener("abort",r,{once:!0})}),i.signal?.throwIfAborted(),!0}async function h(e,t={}){if(o((t={...t}).retries),Object.hasOwn(t,"forever"))throw Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");t.retries??=10,t.factor??=2,t.minTimeout??=1e3,t.maxTimeout??=Number.POSITIVE_INFINITY,t.maxRetryTime??=Number.POSITIVE_INFINITY,t.randomize??=!1,t.onFailedAttempt??=()=>{},t.shouldRetry??=()=>!0,t.shouldConsumeRetry??=()=>!0,l("factor",t.factor,{min:0,allowInfinity:!1}),l("minTimeout",t.minTimeout,{min:0,allowInfinity:!1}),l("maxTimeout",t.maxTimeout,{min:0,allowInfinity:!0}),l("maxRetryTime",t.maxRetryTime,{min:0,allowInfinity:!0}),t.factor>0||(t.factor=1),t.signal?.throwIfAborted();let r=0,n=0,i=performance.now();for(;!Number.isFinite(t.retries)||n<=t.retries;){r++;try{t.signal?.throwIfAborted();let n=await e(r);return t.signal?.throwIfAborted(),n}catch(e){await p({error:e,attemptNumber:r,retriesConsumed:n,startTime:i,options:t})&&n++}}throw Error("Retry attempts exhausted without throwing an error.")}},40510:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n,i=new Uint8Array(16);function a(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}},40762:(e,t,r)=>{"use strict";r.d(t,{a:()=>tr});var n=r(75207),i=r(49641).Buffer,a=class extends Error{};function s(e){let t=Object.getPrototypeOf(e);do{for(let r of Object.getOwnPropertyNames(t))"function"==typeof e[r]&&"constructor"!==r&&(e[r]=e[r].bind(e));t=Object.getPrototypeOf(t)}while(t!==Object.prototype)}var o=class{constructor(e){this.faker=e,s(this)}},l=class extends o{constructor(e){super(e),this.faker=e}},u=(e=>(e.Narrowbody="narrowbody",e.Regional="regional",e.Widebody="widebody",e))(u||{}),c=["0","1","2","3","4","5","6","7","8","9"],d=["0","O","1","I","L"],p={regional:20,narrowbody:35,widebody:60},h={regional:["A","B","C","D"],narrowbody:["A","B","C","D","E","F"],widebody:["A","B","C","D","E","F","G","H","J","K"]},f=class extends l{airport(){return this.faker.helpers.arrayElement(this.faker.definitions.airline.airport)}airline(){return this.faker.helpers.arrayElement(this.faker.definitions.airline.airline)}airplane(){return this.faker.helpers.arrayElement(this.faker.definitions.airline.airplane)}recordLocator(e={}){let{allowNumerics:t=!1,allowVisuallySimilarCharacters:r=!1}=e,n=[];return t||n.push(...c),r||n.push(...d),this.faker.string.alphanumeric({length:6,casing:"upper",exclude:n})}seat(e={}){let{aircraftType:t="narrowbody"}=e,r=p[t],n=h[t],i=this.faker.number.int({min:1,max:r}),a=this.faker.helpers.arrayElement(n);return`${i}${a}`}aircraftType(){return this.faker.helpers.enumValue(u)}flightNumber(e={}){let{length:t={min:1,max:4},addLeadingZeros:r=!1}=e,n=this.faker.string.numeric({length:t,allowLeadingZeros:!1});return r?n.padStart(4,"0"):n}},m=(e=>(e.SRGB="sRGB",e.DisplayP3="display-p3",e.REC2020="rec2020",e.A98RGB="a98-rgb",e.ProphotoRGB="prophoto-rgb",e))(m||{}),g=(e=>(e.RGB="rgb",e.RGBA="rgba",e.HSL="hsl",e.HSLA="hsla",e.HWB="hwb",e.CMYK="cmyk",e.LAB="lab",e.LCH="lch",e.COLOR="color",e))(g||{});function y(e,t){let{prefix:r,casing:n}=t;switch(n){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return r&&(e=r+e),e}function v(e){return e.map(e=>{if(e%1!=0){let t=new ArrayBuffer(4);return new DataView(t).setFloat32(0,e),v([...new Uint8Array(t)]).replaceAll(" ","")}return(e>>>0).toString(2).padStart(8,"0")}).join(" ")}function _(e){return Math.round(100*e)}function b(e,t="rgb",r="sRGB"){switch(t){case"rgba":return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`;case"color":return`color(${r} ${e[0]} ${e[1]} ${e[2]})`;case"cmyk":return`cmyk(${_(e[0])}%, ${_(e[1])}%, ${_(e[2])}%, ${_(e[3])}%)`;case"hsl":return`hsl(${e[0]}deg ${_(e[1])}% ${_(e[2])}%)`;case"hsla":return`hsl(${e[0]}deg ${_(e[1])}% ${_(e[2])}% / ${_(e[3])})`;case"hwb":return`hwb(${e[0]} ${_(e[1])}% ${_(e[2])}%)`;case"lab":return`lab(${_(e[0])}% ${e[1]} ${e[2]})`;case"lch":return`lch(${_(e[0])}% ${e[1]} ${e[2]})`;case"rgb":return`rgb(${e[0]}, ${e[1]}, ${e[2]})`}}function w(e,t,r="rgb",n="sRGB"){switch(t){case"css":return b(e,r,n);case"binary":return v(e);case"decimal":return e}}var k=class extends l{human(){return this.faker.helpers.arrayElement(this.faker.definitions.color.human)}space(){return this.faker.helpers.arrayElement(this.faker.definitions.color.space)}cssSupportedFunction(){return this.faker.helpers.enumValue(g)}cssSupportedSpace(){return this.faker.helpers.enumValue(m)}rgb(e={}){let{format:t="hex",includeAlpha:r=!1,prefix:n="#",casing:i="lower"}=e,a,s="rgb";return"hex"===t?a=y(a=this.faker.string.hexadecimal({length:r?8:6,prefix:""}),{prefix:n,casing:i}):(a=Array.from({length:3},()=>this.faker.number.int(255)),r&&(a.push(this.faker.number.float({multipleOf:.01})),s="rgba"),w(a,t,s))}cmyk(e={}){let{format:t="decimal"}=e;return w(Array.from({length:4},()=>this.faker.number.float({multipleOf:.01})),t,"cmyk")}hsl(e={}){let{format:t="decimal",includeAlpha:r=!1}=e,n=[this.faker.number.int(360)];for(let t=0;t<(e?.includeAlpha?3:2);t++)n.push(this.faker.number.float({multipleOf:.01}));return w(n,t,r?"hsla":"hsl")}hwb(e={}){let{format:t="decimal"}=e,r=[this.faker.number.int(360)];for(let e=0;e<2;e++)r.push(this.faker.number.float({multipleOf:.01}));return w(r,t,"hwb")}lab(e={}){let{format:t="decimal"}=e,r=[this.faker.number.float({multipleOf:1e-6})];for(let e=0;e<2;e++)r.push(this.faker.number.float({min:-100,max:100,multipleOf:1e-4}));return w(r,t,"lab")}lch(e={}){let{format:t="decimal"}=e,r=[this.faker.number.float({multipleOf:1e-6})];for(let e=0;e<2;e++)r.push(this.faker.number.float({max:230,multipleOf:.1}));return w(r,t,"lch")}colorByCSSColorSpace(e={}){let{format:t="decimal",space:r="sRGB"}=e;return w(Array.from({length:3},()=>this.faker.number.float({multipleOf:1e-4})),t,"color",r)}},x=(e=>(e.Legacy="legacy",e.Segwit="segwit",e.Bech32="bech32",e.Taproot="taproot",e))(x||{}),$=(e=>(e.Mainnet="mainnet",e.Testnet="testnet",e))($||{}),S={legacy:{prefix:{mainnet:"1",testnet:"m"},length:{min:26,max:34},casing:"mixed",exclude:"0OIl"},segwit:{prefix:{mainnet:"3",testnet:"2"},length:{min:26,max:34},casing:"mixed",exclude:"0OIl"},bech32:{prefix:{mainnet:"bc1",testnet:"tb1"},length:{min:42,max:42},casing:"lower",exclude:"1bBiIoO"},taproot:{prefix:{mainnet:"bc1p",testnet:"tb1p"},length:{min:62,max:62},casing:"lower",exclude:"1bBiIoO"}},I=typeof i>"u"||!A("base64")?e=>btoa(Array.from(new TextEncoder().encode(e),e=>String.fromCodePoint(e)).join("")):e=>i.from(e).toString("base64"),E=typeof i>"u"||!A("base64url")?e=>I(e).replaceAll("+","-").replaceAll("/","_").replaceAll(/=+$/g,""):e=>i.from(e).toString("base64url");function A(e){try{return"string"==typeof i.from("test").toString(e)}catch{return!1}}var O=Object.fromEntries([["","A"],["","a"],["","B"],["","b"],["","V"],["","v"],["","G"],["","g"],["","D"],["","d"],["","ye"],["","Ye"],["","yE"],["","YE"],["","E"],["","e"],["","Yo"],["","yo"],["","Zh"],["","zh"],["","Z"],["","z"],["","I"],["","i"],["","iy"],["","Iy"],["","IY"],["","iY"],["","Y"],["","y"],["","K"],["","k"],["","L"],["","l"],["","M"],["","m"],["","N"],["","n"],["","O"],["","o"],["","P"],["","p"],["","R"],["","r"],["","S"],["","s"],["","T"],["","t"],["","U"],["","u"],["","F"],["","f"],["","Kh"],["","kh"],["","Ts"],["","ts"],["","Ch"],["","ch"],["","Sh"],["","sh"],["","Sch"],["","sch"],["",""],["",""],["","Y"],["","y"],["",""],["",""],["","E"],["","e"],["","Yu"],["","yu"],["","Ya"],["","ya"]]),T=Object.fromEntries([["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","o"],["","y"],["","i"],["","o"],["","s"],["","i"],["","y"],["","y"],["","i"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","A"],["","E"],["","I"],["","O"],["","Y"],["","I"],["","O"],["","I"],["","Y"]]),N=Object.fromEntries([["","e"],["","a"],["","a"],["","w"],["","i"],["","y"],["","a"],["","b"],["","t"],["","t"],["","th"],["","j"],["","h"],["","kh"],["","d"],["","dh"],["","r"],["","z"],["","s"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","e"],["","gh"],["","_"],["","f"],["","q"],["","k"],["","l"],["","m"],["","n"],["","h"],["","w"],["","a"],["","y"],["","a"],["","u"],["","i"]]),C=Object.fromEntries([["","a"],["","A"],["","b"],["","B"],["","g"],["","G"],["","d"],["","D"],["","ye"],["","Ye"],["","z"],["","Z"],["","e"],["","E"],["","y"],["","Y"],["","t"],["","T"],["","zh"],["","Zh"],["","i"],["","I"],["","l"],["","L"],["","kh"],["","Kh"],["","ts"],["","Ts"],["","k"],["","K"],["","h"],["","H"],["","dz"],["","Dz"],["","gh"],["","Gh"],["","tch"],["","Tch"],["","m"],["","M"],["","y"],["","Y"],["","n"],["","N"],["","sh"],["","Sh"],["","vo"],["","Vo"],["","ch"],["","Ch"],["","p"],["","P"],["","j"],["","J"],["","r"],["","R"],["","s"],["","S"],["","v"],["","V"],["","t"],["","T"],["","r"],["","R"],["","c"],["","C"],["","u"],["","U"],["","U"],["","p"],["","P"],["","q"],["","Q"],["","o"],["","O"],["","f"],["","F"],["","yev"]]),P=Object.fromEntries([["","ch"],["","k"],["","g"],["","p"],["","zh"],["","y"]]),j=Object.fromEntries([["","a"],["","b"],["","g"],["","d"],["","h"],["","v"],["","z"],["","ch"],["","t"],["","y"],["","k"],["","kh"],["","l"],["","m"],["","m"],["","n"],["","n"],["","s"],["","a"],["","f"],["","ph"],["","ts"],["","ts"],["","k"],["","r"],["","sh"],["","t"],["","v"]]),z={...O,...T,...N,...P,...C,...j},R=(e=>(e.Any="any",e.Loopback="loopback",e.PrivateA="private-a",e.PrivateB="private-b",e.PrivateC="private-c",e.TestNet1="test-net-1",e.TestNet2="test-net-2",e.TestNet3="test-net-3",e.LinkLocal="link-local",e.Multicast="multicast",e))(R||{}),M={any:"0.0.0.0/0",loopback:"127.0.0.0/8","private-a":"10.0.0.0/8","private-b":"172.16.0.0/12","private-c":"192.168.0.0/16","test-net-1":"192.0.2.0/24","test-net-2":"198.51.100.0/24","test-net-3":"203.0.113.0/24","link-local":"169.254.0.0/16",multicast:"224.0.0.0/4"};function L(e){return null!==/^[a-z][a-z-]*[a-z]$/i.exec(e)}function Z(e,t){let r=e.helpers.slugify(t);if(L(r))return r;let n=e.helpers.slugify(e.lorem.word());return L(n)?n:e.string.alpha({casing:"lower",length:e.number.int({min:4,max:8})})}var D=class extends l{email(e={}){let{firstName:t,lastName:r,provider:n=this.faker.helpers.arrayElement(this.faker.definitions.internet.free_email),allowSpecialCharacters:i=!1}=e,a=this.username({firstName:t,lastName:r});if(a=(a=a.replaceAll(/[^A-Za-z0-9._+-]+/g,"")).substring(0,50),i){let e=[..."._-"],t=[...".!#$%&'*+-/=?^_`{|}~"];a=a.replace(this.faker.helpers.arrayElement(e),this.faker.helpers.arrayElement(t))}return a=(a=(a=a.replaceAll(/\.{2,}/g,".")).replace(/^\./,"")).replace(/\.$/,""),`${a}@${n}`}exampleEmail(e={}){let{firstName:t,lastName:r,allowSpecialCharacters:n=!1}=e,i=this.faker.helpers.arrayElement(this.faker.definitions.internet.example_email);return this.email({firstName:t,lastName:r,provider:i,allowSpecialCharacters:n})}username(e={}){let{firstName:t=this.faker.person.firstName(),lastName:r=this.faker.person.lastName(),lastName:n}=e,i=this.faker.helpers.arrayElement([".","_"]),a=this.faker.number.int(99),s=[()=>`${t}${i}${r}${a}`,()=>`${t}${i}${r}`];n||s.push(()=>`${t}${a}`);let o=this.faker.helpers.arrayElement(s)();return(o=(o=[...o=o.normalize("NFKD").replaceAll(/[\u0300-\u036F]/g,"")].map(e=>{if(z[e])return z[e];let t=e.codePointAt(0)??Number.NaN;return t<128?e:t.toString(36)}).join("")).replaceAll("'","")).replaceAll(" ","")}displayName(e={}){let{firstName:t=this.faker.person.firstName(),lastName:r=this.faker.person.lastName()}=e,n=this.faker.helpers.arrayElement([".","_"]),i=this.faker.number.int(99),a=[()=>`${t}${i}`,()=>`${t}${n}${r}`,()=>`${t}${n}${r}${i}`],s=this.faker.helpers.arrayElement(a)();return(s=s.replaceAll("'","")).replaceAll(" ","")}protocol(){let e=["http","https"];return this.faker.helpers.arrayElement(e)}httpMethod(){let e=["GET","POST","PUT","DELETE","PATCH"];return this.faker.helpers.arrayElement(e)}httpStatusCode(e={}){let{types:t=Object.keys(this.faker.definitions.internet.http_status_code)}=e,r=this.faker.helpers.arrayElement(t);return this.faker.helpers.arrayElement(this.faker.definitions.internet.http_status_code[r])}url(e={}){let{appendSlash:t=this.faker.datatype.boolean(),protocol:r="https"}=e;return`${r}://${this.domainName()}${t?"/":""}`}domainName(){return`${this.domainWord()}.${this.domainSuffix()}`}domainSuffix(){return this.faker.helpers.arrayElement(this.faker.definitions.internet.domain_suffix)}domainWord(){let e=Z(this.faker,this.faker.word.adjective()),t=Z(this.faker,this.faker.word.noun());return`${e}-${t}`.toLowerCase()}ip(){return this.faker.datatype.boolean()?this.ipv4():this.ipv6()}ipv4(e={}){let{network:t="any",cidrBlock:r=M[t]}=e;if(!/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\/\d{1,2}$/.test(r))throw new a(`Invalid CIDR block provided: ${r}. Must be in the format x.x.x.x/y.`);let[n,i]=r.split("/"),s=0xffffffff>>>Number.parseInt(i),[o,l,u,c]=n.split(".").map(Number),d=(o<<24|l<<16|u<<8|c)&~s|this.faker.number.int(s);return[d>>>24&255,d>>>16&255,d>>>8&255,255&d].join(".")}ipv6(){return Array.from({length:8},()=>this.faker.string.hexadecimal({length:4,casing:"lower",prefix:""})).join(":")}port(){return this.faker.number.int(65535)}userAgent(){return this.faker.helpers.fake(this.faker.definitions.internet.user_agent_pattern)}mac(e={}){"string"==typeof e&&(e={separator:e});let{separator:t=":"}=e,r,n="";for([":","-",""].includes(t)||(t=":"),r=0;r<12;r++)n+=this.faker.number.hex(15),r%2==1&&11!==r&&(n+=t);return n}password(e={}){let t=/[aeiouAEIOU]$/,r=/[bcdfghjklmnpqrstvwxyzBCDFGHJKLMNPQRSTVWXYZ]$/,n=(e,i,a,s)=>{if(s.length>=e)return s;i&&(a=r.test(s)?t:r);let o=String.fromCodePoint(this.faker.number.int(94)+33);return i&&(o=o.toLowerCase()),a.test(o)?n(e,i,a,s+o):n(e,i,a,s)},{length:i=15,memorable:a=!1,pattern:s=/\w/,prefix:o=""}=e;return n(i,a,s,o)}emoji(e={}){let{types:t=Object.keys(this.faker.definitions.internet.emoji)}=e,r=this.faker.helpers.arrayElement(t);return this.faker.helpers.arrayElement(this.faker.definitions.internet.emoji[r])}jwtAlgorithm(){return this.faker.helpers.arrayElement(this.faker.definitions.internet.jwt_algorithm)}jwt(e={}){let{refDate:t=this.faker.defaultRefDate()}=e,r=this.faker.date.recent({refDate:t}),{header:n={alg:this.jwtAlgorithm(),typ:"JWT"},payload:i={iat:Math.round(r.valueOf()/1e3),exp:Math.round(this.faker.date.soon({refDate:r}).valueOf()/1e3),nbf:Math.round(this.faker.date.anytime({refDate:t}).valueOf()/1e3),iss:this.faker.company.name(),sub:this.faker.string.uuid(),aud:this.faker.string.uuid(),jti:this.faker.string.uuid()}}=e,a=E(JSON.stringify(n)),s=E(JSON.stringify(i)),o=this.faker.string.alphanumeric(64);return`${a}.${s}.${o}`}},U=(e=>(e.Female="female",e.Male="male",e))(U||{});function F(e,t,r){let{generic:n,female:i,male:a}=r;switch(t){case"female":return i??n;case"male":return a??n;default:return n??e.helpers.arrayElement([i,a])??[]}}var B=class extends l{firstName(e){return this.faker.helpers.arrayElement(F(this.faker,e,this.faker.definitions.person.first_name))}lastName(e){if(this.faker.rawDefinitions.person?.last_name_pattern!=null){let t=this.faker.helpers.weightedArrayElement(F(this.faker,e,this.faker.rawDefinitions.person.last_name_pattern));return this.faker.helpers.fake(t)}return this.faker.helpers.arrayElement(F(this.faker,e,this.faker.definitions.person.last_name))}middleName(e){return this.faker.helpers.arrayElement(F(this.faker,e,this.faker.definitions.person.middle_name))}fullName(e={}){let{sex:t=this.faker.helpers.arrayElement(["female","male"]),firstName:r=this.firstName(t),lastName:n=this.lastName(t)}=e,i=this.faker.helpers.weightedArrayElement(this.faker.definitions.person.name);return this.faker.helpers.mustache(i,{"person.prefix":()=>this.prefix(t),"person.firstName":()=>r,"person.middleName":()=>this.middleName(t),"person.lastName":()=>n,"person.suffix":()=>this.suffix()})}gender(){return this.faker.helpers.arrayElement(this.faker.definitions.person.gender)}sex(){return this.faker.helpers.arrayElement(this.faker.definitions.person.sex)}sexType(){return this.faker.helpers.enumValue(U)}bio(){let{bio_pattern:e}=this.faker.definitions.person;return this.faker.helpers.fake(e)}prefix(e){return this.faker.helpers.arrayElement(F(this.faker,e,this.faker.definitions.person.prefix))}suffix(){return this.faker.helpers.arrayElement(this.faker.definitions.person.suffix)}jobTitle(){return this.faker.helpers.fake(this.faker.definitions.person.job_title_pattern)}jobDescriptor(){return this.faker.helpers.arrayElement(this.faker.definitions.person.job_descriptor)}jobArea(){return this.faker.helpers.arrayElement(this.faker.definitions.person.job_area)}jobType(){return this.faker.helpers.arrayElement(this.faker.definitions.person.job_type)}zodiacSign(){return this.faker.helpers.arrayElement(this.faker.definitions.person.western_zodiac_sign)}},V=23283064365386963e-26,J=1/0x20000000000000,{imul:W,trunc:q}=Math;function K(e){return"number"==typeof e?G(e):H(e)}function G(e){let t=Array.from({length:624});t[0]=e;for(let e=1;624!==e;++e){let r=t[e-1]^t[e-1]>>>30;t[e]=q(W(0x6c078965,r)+e)}return t}function H(e){let t=G(0x12bd6aa),r=1,n=0;for(let i=Math.max(624,e.length);0!==i;--i){let i=t[r-1]^t[r-1]>>>30;t[r]=q((t[r]^W(i,1664525))+e[n]+n),r++,n++,r>=624&&(t[0]=t[623],r=1),n>=e.length&&(n=0)}for(let e=623;0!==e;e--)t[r]=q((t[r]^W(t[r-1]^t[r-1]>>>30,0x5d588b65))-r),++r>=624&&(t[0]=t[623],r=1);return t[0]=0x80000000,t}function Y(e){for(let t=0;227!==t;++t){let r=(0x80000000&e[t])+(0x7fffffff&e[t+1]);e[t]=e[t+397]^r>>>1^0x9908b0df&-(1&r)}for(let t=227;623!==t;++t){let r=(0x80000000&e[t])+(0x7fffffff&e[t+1]);e[t]=e[t+397-624]^r>>>1^0x9908b0df&-(1&r)}let t=(0x80000000&e[623])+(0x7fffffff&e[0]);return e[623]=e[396]^t>>>1^0x9908b0df&-(1&t),e}var X=class{constructor(e=Math.random()*Number.MAX_SAFE_INTEGER,t=Y(K(e)),r=0){this.states=t,this.index=r}nextU32(){let e=this.states[this.index];return e^=this.states[this.index]>>>11,e^=e<<7&0x9d2c5680,e^=e<<15&0xefc60000,e^=e>>>18,++this.index>=624&&(this.states=Y(this.states),this.index=0),e>>>0}nextF32(){return this.nextU32()*V}nextU53(){return 0x4000000*(this.nextU32()>>>5)+(this.nextU32()>>>6)}nextF53(){return this.nextU53()*J}seed(e){this.states=Y(K(e)),this.index=0}};function Q(){return Math.ceil(Math.random()*Number.MAX_SAFE_INTEGER)}function ee(e=Q()){let t=new X(e);return{next:()=>t.nextF53(),seed(e){t.seed(e)}}}var et=class extends o{boolean(e={}){"number"==typeof e&&(e={probability:e});let{probability:t=.5}=e;return!(t<=0)&&(t>=1||this.faker.number.float()<t)}};function er(e,t="refDate"){let r=new Date(e);if(Number.isNaN(r.valueOf()))throw new a(`Invalid ${t} date: ${e.toString()}`);return r}var en=()=>{throw new a("You cannot edit the locale data on the faker instance")};function ei(e){let t={};return new Proxy(e,{has:()=>!0,get:(e,r)=>"symbol"==typeof r||"nodeType"===r?e[r]:r in t?t[r]:t[r]=es(r,e[r]),set:en,deleteProperty:en})}function ea(e,...t){if(null===e)throw new a(`The locale data for '${t.join(".")}' aren't applicable to this locale.
  If you think this is a bug, please report it at: https://github.com/faker-js/faker`);if(void 0===e)throw new a(`The locale data for '${t.join(".")}' are missing in this locale.
  If this is a custom Faker instance, please make sure all required locales are used e.g. '[de_AT, de, en, base]'.
  Please contribute the missing data to the project or use a locale/Faker instance that has these data.
  For more information see https://fakerjs.dev/guide/localization.html`)}function es(e,t={}){return new Proxy(t,{has:(e,t)=>null!=e[t],get(t,r){let n=t[r];return"symbol"==typeof r||"nodeType"===r||ea(n,e,r.toString()),n},set:en,deleteProperty:en})}var eo=class extends o{anytime(e={}){let{refDate:t=this.faker.defaultRefDate()}=e,r=er(t).getTime();return this.between({from:r-31536e6,to:r+31536e6})}past(e={}){let{years:t=1,refDate:r=this.faker.defaultRefDate()}=e;if(t<=0)throw new a("Years must be greater than 0.");let n=er(r).getTime();return this.between({from:n-365*t*864e5,to:n-1e3})}future(e={}){let{years:t=1,refDate:r=this.faker.defaultRefDate()}=e;if(t<=0)throw new a("Years must be greater than 0.");let n=er(r).getTime();return this.between({from:n+1e3,to:n+365*t*864e5})}between(e){let{from:t,to:r}=e,n=er(t,"from").getTime(),i=er(r,"to").getTime();if(n>i)throw new a("`from` date must be before `to` date.");return new Date(this.faker.number.int({min:n,max:i}))}betweens(e){let{from:t,to:r,count:n=3}=e;return this.faker.helpers.multiple(()=>this.between({from:t,to:r}),{count:n}).sort((e,t)=>e.getTime()-t.getTime())}recent(e={}){let{days:t=1,refDate:r=this.faker.defaultRefDate()}=e;if(t<=0)throw new a("Days must be greater than 0.");let n=er(r).getTime();return this.between({from:n-24*t*36e5,to:n-1e3})}soon(e={}){let{days:t=1,refDate:r=this.faker.defaultRefDate()}=e;if(t<=0)throw new a("Days must be greater than 0.");let n=er(r).getTime();return this.between({from:n+1e3,to:n+24*t*36e5})}birthdate(e={}){let{mode:t="age",min:r=18,max:n=80,refDate:i=this.faker.defaultRefDate()}=e,s=er(i),o=s.getUTCFullYear();switch(t){case"age":{let e=new Date(s).setUTCFullYear(o-n-1)+864e5,t=new Date(s).setUTCFullYear(o-r);if(e>t)throw new a(`Max age ${n} should be greater than or equal to min age ${r}.`);return this.between({from:e,to:t})}case"year":{let e=new Date(Date.UTC(0,0,2)).setUTCFullYear(r),t=new Date(Date.UTC(0,11,30)).setUTCFullYear(n);if(e>t)throw new a(`Max year ${n} should be greater than or equal to min year ${r}.`);return this.between({from:e,to:t})}}}},el=class extends eo{constructor(e){super(e),this.faker=e}month(e={}){let{abbreviated:t=!1,context:r=!1}=e,n=this.faker.definitions.date.month,i;i=t?r&&null!=n.abbr_context?"abbr_context":"abbr":r&&null!=n.wide_context?"wide_context":"wide";let a=n[i];return ea(a,"date.month",i),this.faker.helpers.arrayElement(a)}weekday(e={}){let{abbreviated:t=!1,context:r=!1}=e,n=this.faker.definitions.date.weekday,i;i=t?r&&null!=n.abbr_context?"abbr_context":"abbr":r&&null!=n.wide_context?"wide_context":"wide";let a=n[i];return ea(a,"date.weekday",i),this.faker.helpers.arrayElement(a)}timeZone(){return this.faker.helpers.arrayElement(this.faker.definitions.date.time_zone)}},eu=/\.|\(/;function ec(e,t,r=[t,t.rawDefinitions]){if(0===e.length)throw new a("Eval expression cannot be empty.");if(0===r.length)throw new a("Eval entrypoints cannot be empty.");let n=r,i=e;do{let e;i.startsWith("(")?[e,n]=ed(i,n):[e,n]=eh(i,n),i=i.substring(e),n=n.filter(e=>null!=e).map(e=>Array.isArray(e)?t.helpers.arrayElement(e):e)}while(i.length>0&&n.length>0);if(0===n.length)throw new a(`Cannot resolve expression '${e}'`);let s=n[0];return"function"==typeof s?s():s}function ed(e,t){let[r,n]=ep(e),i=e[r+1];switch(i){case".":case"(":case void 0:break;default:throw new a(`Expected dot ('.'), open parenthesis ('('), or nothing after function call but got '${i}'`)}return[r+("."===i?2:1),t.map(e=>"function"==typeof e?e(...n):void 0)]}function ep(e){let t=e.indexOf(")",1);if(-1===t)throw new a(`Missing closing parenthesis in '${e}'`);for(;-1!==t;){let r=e.substring(1,t);try{return[t,JSON.parse(`[${r}]`)]}catch{if(!r.includes("'")&&!r.includes('"'))try{return[t,JSON.parse(`["${r}"]`)]}catch{}}t=e.indexOf(")",t+1)}t=e.lastIndexOf(")");let r=e.substring(1,t);return[t,[r]]}function eh(e,t){let r=eu.exec(e),n=(r?.[0]??"")===".",i=r?.index??e.length,s=e.substring(0,i);if(0===s.length)throw new a(`Expression parts cannot be empty in '${e}'`);let o=e[i+1];if(n&&(null==o||"."===o||"("===o))throw new a(`Found dot without property name in '${e}'`);return[i+ +!!n,t.map(e=>ef(e,s))]}function ef(e,t){switch(typeof e){case"function":try{e=e()}catch{return}return e?.[t];case"object":return e?.[t];default:return}}function em(e){let t=eg(e.replace(/L?$/,"0"));return 0===t?0:10-t}function eg(e){e=e.replaceAll(/[\s-]/g,"");let t=0,r=!1;for(let n=e.length-1;n>=0;n--){let i=Number.parseInt(e[n]);r&&(i*=2)>9&&(i=i%10+1),t+=i,r=!r}return t%10}function ey(e,t,r,n){let i=1;if(t)switch(t){case"?":i=+!e.datatype.boolean();break;case"*":{let t=1;for(;e.datatype.boolean();)t*=2;i=e.number.int({min:0,max:t});break}case"+":{let t=1;for(;e.datatype.boolean();)t*=2;i=e.number.int({min:1,max:t});break}default:throw new a("Unknown quantifier symbol provided.")}else null!=r&&null!=n?i=e.number.int({min:Number.parseInt(r),max:Number.parseInt(n)}):null!=r&&null==n&&(i=Number.parseInt(r));return i}function ev(e,t=""){let r=/(.)\{(\d+),(\d+)\}/,n=/(.)\{(\d+)\}/,i=/\[(\d+)-(\d+)\]/,a,s,o,l,u=r.exec(t);for(;null!=u;)(a=Number.parseInt(u[2]))>(s=Number.parseInt(u[3]))&&(o=s,s=a,a=o),l=e.number.int({min:a,max:s}),u=r.exec(t=t.slice(0,u.index)+u[1].repeat(l)+t.slice(u.index+u[0].length));for(u=n.exec(t);null!=u;)l=Number.parseInt(u[2]),u=n.exec(t=t.slice(0,u.index)+u[1].repeat(l)+t.slice(u.index+u[0].length));for(u=i.exec(t);null!=u;)(a=Number.parseInt(u[1]))>(s=Number.parseInt(u[2]))&&(o=s,s=a,a=o),u=i.exec(t=t.slice(0,u.index)+e.number.int({min:a,max:s}).toString()+t.slice(u.index+u[0].length));return t}function e_(e,t="",r="#"){let n="";for(let i=0;i<t.length;i++)t.charAt(i)===r?n+=e.number.int(9):"!"===t.charAt(i)?n+=e.number.int({min:2,max:9}):n+=t.charAt(i);return n}var eb=class extends o{slugify(e=""){return e.normalize("NFKD").replaceAll(/[\u0300-\u036F]/g,"").replaceAll(" ","-").replaceAll(/[^\w.-]+/g,"")}replaceSymbols(e=""){let t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r="";for(let n=0;n<e.length;n++)"#"===e.charAt(n)?r+=this.faker.number.int(9):"?"===e.charAt(n)?r+=this.arrayElement(t):"*"===e.charAt(n)?r+=this.faker.datatype.boolean()?this.arrayElement(t):this.faker.number.int(9):r+=e.charAt(n);return r}replaceCreditCardSymbols(e="6453-####-####-####-###L",t="#"){e=ev(this.faker,e);let r=em(e=e_(this.faker,e,t));return e.replace("L",String(r))}fromRegExp(e){let t=!1;e instanceof RegExp&&(t=e.flags.includes("i"),e=e.toString(),e=/\/(.+?)\//.exec(e)?.[1]??"");let r,n,i,s=/([.A-Za-z0-9])(?:\{(\d+)(?:,(\d+)|)\}|(\?|\*|\+))(?![^[]*]|[^{]*})/,o=s.exec(e);for(;null!=o;){let r,n=o[2],a=o[3],l=o[4];i=ey(this.faker,l,n,a),r="."===o[1]?this.faker.string.alphanumeric(i):t?this.faker.string.fromCharacters([o[1].toLowerCase(),o[1].toUpperCase()],i):o[1].repeat(i),e=e.slice(0,o.index)+r+e.slice(o.index+o[0].length),o=s.exec(e)}let l=/(\d-\d|\w-\w|\d|\w|[-!@#$&()`.+,/"])/,u=/\[(\^|)(-|)(.+?)\](?:\{(\d+)(?:,(\d+)|)\}|(\?|\*|\+)|)/;for(o=u.exec(e);null!=o;){let s="^"===o[1],c="-"===o[2],d=o[4],p=o[5],h=o[6],f=[],m=o[3],g=l.exec(m);for(c&&f.push(45);null!=g;){if(g[0].includes("-")){let e=g[0].split("-").map(e=>e.codePointAt(0)??Number.NaN);if((r=e[0])>(n=e[1]))throw new a("Character range provided is out of order.");for(let e=r;e<=n;e++)if(t&&Number.isNaN(Number(String.fromCodePoint(e)))){let t=String.fromCodePoint(e);f.push(t.toUpperCase().codePointAt(0)??Number.NaN,t.toLowerCase().codePointAt(0)??Number.NaN)}else f.push(e)}else t&&Number.isNaN(Number(g[0]))?f.push(g[0].toUpperCase().codePointAt(0)??Number.NaN,g[0].toLowerCase().codePointAt(0)??Number.NaN):f.push(g[0].codePointAt(0)??Number.NaN);m=m.substring(g[0].length),g=l.exec(m)}if(i=ey(this.faker,h,d,p),s){let e=-1;for(let t=48;t<=57;t++){if((e=f.indexOf(t))>-1){f.splice(e,1);continue}f.push(t)}for(let t=65;t<=90;t++){if((e=f.indexOf(t))>-1){f.splice(e,1);continue}f.push(t)}for(let t=97;t<=122;t++){if((e=f.indexOf(t))>-1){f.splice(e,1);continue}f.push(t)}}let y=this.multiple(()=>String.fromCodePoint(this.arrayElement(f)),{count:i}).join("");e=e.slice(0,o.index)+y+e.slice(o.index+o[0].length),o=u.exec(e)}let c=/(.)\{(\d+),(\d+)\}/;for(o=c.exec(e);null!=o;){if((r=Number.parseInt(o[2]))>(n=Number.parseInt(o[3])))throw new a("Numbers out of order in {} quantifier.");i=this.faker.number.int({min:r,max:n}),e=e.slice(0,o.index)+o[1].repeat(i)+e.slice(o.index+o[0].length),o=c.exec(e)}let d=/(.)\{(\d+)\}/;for(o=d.exec(e);null!=o;)i=Number.parseInt(o[2]),o=d.exec(e=e.slice(0,o.index)+o[1].repeat(i)+e.slice(o.index+o[0].length));return e}shuffle(e,t={}){let{inplace:r=!1}=t;r||(e=[...e]);for(let t=e.length-1;t>0;--t){let r=this.faker.number.int(t);[e[t],e[r]]=[e[r],e[t]]}return e}uniqueArray(e,t){if(Array.isArray(e)){let r=[...new Set(e)];return this.shuffle(r).splice(0,t)}let r=new Set;try{if("function"==typeof e){let n=1e3*t,i=0;for(;r.size<t&&i<n;)r.add(e()),i++}}catch{}return[...r]}mustache(e,t){if(null==e)return"";for(let r in t){let n=RegExp(`{{${r}}}`,"g"),i=t[r];"string"==typeof i&&(i=i.replaceAll("$","$$$$")),e=e.replace(n,i)}return e}maybe(e,t={}){if(this.faker.datatype.boolean(t))return e()}objectKey(e){let t=Object.keys(e);return this.arrayElement(t)}objectValue(e){let t=this.faker.helpers.objectKey(e);return e[t]}objectEntry(e){let t=this.faker.helpers.objectKey(e);return[t,e[t]]}arrayElement(e){if(0===e.length)throw new a("Cannot get value from empty dataset.");let t=e.length>1?this.faker.number.int({max:e.length-1}):0;return e[t]}weightedArrayElement(e){if(0===e.length)throw new a("weightedArrayElement expects an array with at least one element");if(!e.every(e=>e.weight>0))throw new a("weightedArrayElement expects an array of { weight, value } objects where weight is a positive number");let t=e.reduce((e,{weight:t})=>e+t,0),r=this.faker.number.float({min:0,max:t}),n=0;for(let{weight:t,value:i}of e)if(r<(n+=t))return i;return e.at(-1).value}arrayElements(e,t){if(0===e.length)return[];let r=this.rangeToNumber(t??{min:1,max:e.length});if(r>=e.length)return this.shuffle(e);if(r<=0)return[];let n=[...e],i=e.length,a=i-r,s,o;for(;i-- >a;)s=n[o=this.faker.number.int(i)],n[o]=n[i],n[i]=s;return n.slice(a)}enumValue(e){let t=Object.keys(e).filter(e=>Number.isNaN(Number(e)));return e[this.arrayElement(t)]}rangeToNumber(e){return"number"==typeof e?e:this.faker.number.int(e)}multiple(e,t={}){let r=this.rangeToNumber(t.count??3);return r<=0?[]:Array.from({length:r},e)}},ew=class extends eb{constructor(e){super(e),this.faker=e}fake(e){let t=(e="string"==typeof e?e:this.arrayElement(e)).search(/{{[a-z]/),r=e.indexOf("}}",t);if(-1===t||-1===r)return e;let n=String(ec(e.substring(t+2,r+2).replace("}}","").replace("{{",""),this.faker)),i=e.substring(0,t)+n+e.substring(r+2);return this.fake(i)}},ek=class extends o{latitude(e={}){let{max:t=90,min:r=-90,precision:n=4}=e;return this.faker.number.float({min:r,max:t,fractionDigits:n})}longitude(e={}){let{max:t=180,min:r=-180,precision:n=4}=e;return this.faker.number.float({max:t,min:r,fractionDigits:n})}nearbyGPSCoordinate(e={}){let{origin:t,radius:r=10,isMetric:n=!1}=e;if(null==t)return[this.latitude(),this.longitude()];let i=this.faker.number.float({max:2*Math.PI,fractionDigits:5}),a=n?r:1.60934*r,s=.995*this.faker.number.float({max:a,fractionDigits:3})/(4e4/360),o=[t[0]+Math.sin(i)*s,t[1]+Math.cos(i)*s];return o[0]=o[0]%180,(o[0]<-90||o[0]>90)&&(o[0]=180*Math.sign(o[0])-o[0],o[1]+=180),o[1]=(o[1]%360+540)%360-180,[o[0],o[1]]}},ex=class extends ek{constructor(e){super(e),this.faker=e}zipCode(e={}){"string"==typeof e&&(e={format:e});let{state:t}=e;if(null!=t){let e=this.faker.definitions.location.postcode_by_state[t];if(null==e)throw new a(`No zip code definition found for state "${t}"`);return this.faker.helpers.fake(e)}let{format:r=this.faker.definitions.location.postcode}=e;return"string"==typeof r&&(r=[r]),r=this.faker.helpers.arrayElement(r),this.faker.helpers.replaceSymbols(r)}city(){return this.faker.helpers.fake(this.faker.definitions.location.city_pattern)}buildingNumber(){return this.faker.helpers.arrayElement(this.faker.definitions.location.building_number).replaceAll(/#+/g,e=>this.faker.string.numeric({length:e.length,allowLeadingZeros:!1}))}street(){return this.faker.helpers.fake(this.faker.definitions.location.street_pattern)}streetAddress(e={}){"boolean"==typeof e&&(e={useFullAddress:e});let{useFullAddress:t}=e,r=this.faker.definitions.location.street_address[t?"full":"normal"];return this.faker.helpers.fake(r)}secondaryAddress(){return this.faker.helpers.fake(this.faker.definitions.location.secondary_address).replaceAll(/#+/g,e=>this.faker.string.numeric({length:e.length,allowLeadingZeros:!1}))}county(){return this.faker.helpers.arrayElement(this.faker.definitions.location.county)}country(){return this.faker.helpers.arrayElement(this.faker.definitions.location.country)}continent(){return this.faker.helpers.arrayElement(this.faker.definitions.location.continent)}countryCode(e={}){"string"==typeof e&&(e={variant:e});let{variant:t="alpha-2"}=e,r=(()=>{switch(t){case"numeric":return"numeric";case"alpha-3":return"alpha3";case"alpha-2":return"alpha2"}})();return this.faker.helpers.arrayElement(this.faker.definitions.location.country_code)[r]}state(e={}){let{abbreviated:t=!1}=e,r=t?this.faker.definitions.location.state_abbr:this.faker.definitions.location.state;return this.faker.helpers.arrayElement(r)}direction(e={}){let{abbreviated:t=!1}=e;return t?this.faker.helpers.arrayElement([...this.faker.definitions.location.direction.cardinal_abbr,...this.faker.definitions.location.direction.ordinal_abbr]):this.faker.helpers.arrayElement([...this.faker.definitions.location.direction.cardinal,...this.faker.definitions.location.direction.ordinal])}cardinalDirection(e={}){let{abbreviated:t=!1}=e;return t?this.faker.helpers.arrayElement(this.faker.definitions.location.direction.cardinal_abbr):this.faker.helpers.arrayElement(this.faker.definitions.location.direction.cardinal)}ordinalDirection(e={}){let{abbreviated:t=!1}=e;return t?this.faker.helpers.arrayElement(this.faker.definitions.location.direction.ordinal_abbr):this.faker.helpers.arrayElement(this.faker.definitions.location.direction.ordinal)}timeZone(){return this.faker.helpers.arrayElement(this.faker.definitions.location.time_zone)}language(){return this.faker.helpers.arrayElement(this.faker.definitions.location.language)}},e$=class extends o{int(e={}){"number"==typeof e&&(e={max:e});let{min:t=0,max:r=Number.MAX_SAFE_INTEGER,multipleOf:n=1}=e;if(!Number.isInteger(n))throw new a("multipleOf should be an integer.");if(n<=0)throw new a("multipleOf should be greater than 0.");let i=Math.ceil(t/n),s=Math.floor(r/n);if(i===s)return i*n;if(s<i)throw new a(r>=t?`No suitable integer value between ${t} and ${r} found.`:`Max ${r} should be greater than min ${t}.`);return Math.floor(this.faker._randomizer.next()*(s-i+1)+i)*n}float(e={}){"number"==typeof e&&(e={max:e});let{min:t=0,max:r=1,fractionDigits:n,multipleOf:i,multipleOf:s=null==n?void 0:10**-n}=e;if(r<t)throw new a(`Max ${r} should be greater than min ${t}.`);if(null!=n){if(null!=i)throw new a("multipleOf and fractionDigits cannot be set at the same time.");if(!Number.isInteger(n))throw new a("fractionDigits should be an integer.");if(n<0)throw new a("fractionDigits should be greater than or equal to 0.")}if(null!=s){if(s<=0)throw new a("multipleOf should be greater than 0.");let e=Math.log10(s),n=s<1&&Number.isInteger(e)?10**-e:1/s;return this.int({min:t*n,max:r*n})/n}return this.faker._randomizer.next()*(r-t)+t}binary(e={}){"number"==typeof e&&(e={max:e});let{min:t=0,max:r=1}=e;return this.int({max:r,min:t}).toString(2)}octal(e={}){"number"==typeof e&&(e={max:e});let{min:t=0,max:r=7}=e;return this.int({max:r,min:t}).toString(8)}hex(e={}){"number"==typeof e&&(e={max:e});let{min:t=0,max:r=15}=e;return this.int({max:r,min:t}).toString(16)}bigInt(e={}){("bigint"==typeof e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e)&&(e={max:e});let t=BigInt(e.min??0),r=BigInt(e.max??t+BigInt(0x38d7ea4c67fff)),n=BigInt(e.multipleOf??1);if(r<t)throw new a(`Max ${r} should be larger than min ${t}.`);if(n<=BigInt(0))throw new a("multipleOf should be greater than 0.");let i=t/n+(t%n>0n?1n:0n),s=r/n-(r%n<0n?1n:0n);if(i===s)return i*n;if(s<i)throw new a(`No suitable bigint value between ${t} and ${r} found.`);let o=s-i+1n;return(i+BigInt(this.faker.string.numeric({length:o.toString(10).length,allowLeadingZeros:!0}))%o)*n}romanNumeral(e={}){"number"==typeof e&&(e={max:e});let{min:t=1,max:r=3999}=e;if(t<1)throw new a(`Min value ${t} should be 1 or greater.`);if(r>3999)throw new a(`Max value ${r} should be 3999 or less.`);let n=this.int({min:t,max:r}),i="";for(let[e,t]of[["M",1e3],["CM",900],["D",500],["CD",400],["C",100],["XC",90],["L",50],["XL",40],["X",10],["IX",9],["V",5],["IV",4],["I",1]])i+=e.repeat(Math.floor(n/t)),n%=t;return i}},eS="0123456789ABCDEFGHJKMNPQRSTVWXYZ";function eI(e){let t=e.valueOf(),r="";for(let e=10;e>0;e--){let e=t%32;r=eS[e]+r,t=(t-e)/32}return r}var eE=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ"],eA=[..."abcdefghijklmnopqrstuvwxyz"],eO=[..."0123456789"],eT=class extends o{fromCharacters(e,t=1){if((t=this.faker.helpers.rangeToNumber(t))<=0)return"";if("string"==typeof e&&(e=[...e]),0===e.length)throw new a("Unable to generate string: No characters to select from.");return this.faker.helpers.multiple(()=>this.faker.helpers.arrayElement(e),{count:t}).join("")}alpha(e={}){let t;"number"==typeof e&&(e={length:e});let r=this.faker.helpers.rangeToNumber(e.length??1);if(r<=0)return"";let{casing:n="mixed"}=e,{exclude:i=[]}=e;switch("string"==typeof i&&(i=[...i]),n){case"upper":t=[...eE];break;case"lower":t=[...eA];break;case"mixed":t=[...eA,...eE]}return t=t.filter(e=>!i.includes(e)),this.fromCharacters(t,r)}alphanumeric(e={}){"number"==typeof e&&(e={length:e});let t=this.faker.helpers.rangeToNumber(e.length??1);if(t<=0)return"";let{casing:r="mixed"}=e,{exclude:n=[]}=e;"string"==typeof n&&(n=[...n]);let i=[...eO];switch(r){case"upper":i.push(...eE);break;case"lower":i.push(...eA);break;case"mixed":i.push(...eA,...eE)}return i=i.filter(e=>!n.includes(e)),this.fromCharacters(i,t)}binary(e={}){let{prefix:t="0b"}=e;return t+this.fromCharacters(["0","1"],e.length??1)}octal(e={}){let{prefix:t="0o"}=e;return t+this.fromCharacters(["0","1","2","3","4","5","6","7"],e.length??1)}hexadecimal(e={}){let{casing:t="mixed",prefix:r="0x"}=e,n=this.faker.helpers.rangeToNumber(e.length??1);if(n<=0)return r;let i=this.fromCharacters(["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"],n);return"upper"===t?i=i.toUpperCase():"lower"===t&&(i=i.toLowerCase()),`${r}${i}`}numeric(e={}){"number"==typeof e&&(e={length:e});let t=this.faker.helpers.rangeToNumber(e.length??1);if(t<=0)return"";let{allowLeadingZeros:r=!0}=e,{exclude:n=[]}=e;"string"==typeof n&&(n=[...n]);let i=eO.filter(e=>!n.includes(e));if(0===i.length||1===i.length&&!r&&"0"===i[0])throw new a("Unable to generate numeric string, because all possible digits are excluded.");let s="";return r||n.includes("0")||(s+=this.faker.helpers.arrayElement(i.filter(e=>"0"!==e))),s+=this.fromCharacters(i,t-s.length)}sample(e=10){e=this.faker.helpers.rangeToNumber(e);let t={min:33,max:125},r="";for(;r.length<e;)r+=String.fromCodePoint(this.faker.number.int(t));return r}uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replaceAll("x",()=>this.faker.number.hex({min:0,max:15})).replaceAll("y",()=>this.faker.number.hex({min:8,max:11}))}ulid(e={}){let{refDate:t=this.faker.defaultRefDate()}=e;return eI(er(t))+this.fromCharacters(eS,16)}nanoid(e=21){if((e=this.faker.helpers.rangeToNumber(e))<=0)return"";let t=[{value:()=>this.alphanumeric(1),weight:62},{value:()=>this.faker.helpers.arrayElement(["_","-"]),weight:2}],r="";for(;r.length<e;)r+=this.faker.helpers.weightedArrayElement(t)();return r}symbol(e=1){return this.fromCharacters(["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~"],e)}},eN=class{_defaultRefDate=()=>new Date;get defaultRefDate(){return this._defaultRefDate}setDefaultRefDate(e=()=>new Date){"function"==typeof e?this._defaultRefDate=e:this._defaultRefDate=()=>new Date(e)}_randomizer;datatype=new et(this);date=new eo(this);helpers=new eb(this);location=new ek(this);number=new e$(this);string=new eT(this);constructor(e={}){let{randomizer:t,seed:r}=e;null!=t&&null!=r&&t.seed(r),this._randomizer=t??ee(r)}seed(e=Q()){return this._randomizer.seed(e),e}};function eC(e){let t={};for(let r of e)for(let e in r){let n=r[e];void 0===t[e]?t[e]={...n}:t[e]={...n,...t[e]}}return t}new eN;var eP=class extends l{dog(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.dog)}cat(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.cat)}snake(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.snake)}bear(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.bear)}lion(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.lion)}cetacean(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.cetacean)}horse(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.horse)}bird(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.bird)}cow(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.cow)}fish(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.fish)}crocodilia(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.crocodilia)}insect(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.insect)}rabbit(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.rabbit)}rodent(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.rodent)}type(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.type)}petName(){return this.faker.helpers.arrayElement(this.faker.definitions.animal.pet_name)}},ej=class extends l{author(){return this.faker.helpers.arrayElement(this.faker.definitions.book.author)}format(){return this.faker.helpers.arrayElement(this.faker.definitions.book.format)}genre(){return this.faker.helpers.arrayElement(this.faker.definitions.book.genre)}publisher(){return this.faker.helpers.arrayElement(this.faker.definitions.book.publisher)}series(){return this.faker.helpers.arrayElement(this.faker.definitions.book.series)}title(){return this.faker.helpers.arrayElement(this.faker.definitions.book.title)}},ez={0:[[1999999,2],[2279999,3],[2289999,4],[3689999,3],[3699999,4],[6389999,3],[6397999,4],[6399999,7],[6449999,3],[6459999,7],[6479999,3],[6489999,7],[6549999,3],[6559999,4],[6999999,3],[8499999,4],[8999999,5],[9499999,6],[9999999,7]],1:[[99999,3],[299999,2],[349999,3],[399999,4],[499999,3],[699999,2],[999999,4],[3979999,3],[5499999,4],[6499999,5],[6799999,4],[6859999,5],[7139999,4],[7169999,3],[7319999,4],[7399999,7],[7749999,5],[7753999,7],[7763999,5],[7764999,7],[7769999,5],[7782999,7],[7899999,5],[7999999,4],[8004999,5],[8049999,5],[8379999,5],[8384999,7],[8671999,5],[8675999,4],[8697999,5],[9159999,6],[9165059,7],[9168699,6],[9169079,7],[9195999,6],[9196549,7],[9729999,6],[9877999,4],[9911499,6],[9911999,7],[9989899,6],[9999999,7]]},eR=class extends l{department(){return this.faker.helpers.arrayElement(this.faker.definitions.commerce.department)}productName(){return`${this.productAdjective()} ${this.productMaterial()} ${this.product()}`}price(e={}){let{dec:t=2,max:r=1e3,min:n=1,symbol:i=""}=e;if(n<0||r<0)return`${i}0`;if(n===r)return`${i}${n.toFixed(t)}`;let a=this.faker.number.float({min:n,max:r,fractionDigits:t});if(0===t)return`${i}${a.toFixed(t)}`;let s=a*10**t%10,o=this.faker.helpers.weightedArrayElement([{weight:5,value:9},{weight:3,value:5},{weight:1,value:0},{weight:1,value:this.faker.number.int({min:0,max:9})}]),l=.1**t,u=a-s*l+o*l;return n<=u&&u<=r?`${i}${u.toFixed(t)}`:`${i}${a.toFixed(t)}`}productAdjective(){return this.faker.helpers.arrayElement(this.faker.definitions.commerce.product_name.adjective)}productMaterial(){return this.faker.helpers.arrayElement(this.faker.definitions.commerce.product_name.material)}product(){return this.faker.helpers.arrayElement(this.faker.definitions.commerce.product_name.product)}productDescription(){return this.faker.helpers.fake(this.faker.definitions.commerce.product_description)}isbn(e={}){"number"==typeof e&&(e={variant:e});let{variant:t=13,separator:r="-"}=e,n="978",[i,s]=this.faker.helpers.objectEntry(ez),o=this.faker.string.numeric(8),l=Number.parseInt(o.slice(0,-1)),u=s.find(([e])=>l<=e)?.[1];if(!u)throw new a(`Unable to find a registrant length for the group ${i}`);let c=[n,i,o.slice(0,u),o.slice(u)];10===t&&c.shift();let d=c.join(""),p=0;for(let e=0;e<t-1;e++)p+=(10===t?e+1:e%2?3:1)*Number.parseInt(d[e]);return c.push(10==(p=10===t?p%11:(10-p%10)%10)?"X":p.toString()),c.join(r)}},eM=class extends l{name(){return this.faker.helpers.fake(this.faker.definitions.company.name_pattern)}catchPhrase(){return[this.catchPhraseAdjective(),this.catchPhraseDescriptor(),this.catchPhraseNoun()].join(" ")}buzzPhrase(){return[this.buzzVerb(),this.buzzAdjective(),this.buzzNoun()].join(" ")}catchPhraseAdjective(){return this.faker.helpers.arrayElement(this.faker.definitions.company.adjective)}catchPhraseDescriptor(){return this.faker.helpers.arrayElement(this.faker.definitions.company.descriptor)}catchPhraseNoun(){return this.faker.helpers.arrayElement(this.faker.definitions.company.noun)}buzzAdjective(){return this.faker.helpers.arrayElement(this.faker.definitions.company.buzz_adjective)}buzzVerb(){return this.faker.helpers.arrayElement(this.faker.definitions.company.buzz_verb)}buzzNoun(){return this.faker.helpers.arrayElement(this.faker.definitions.company.buzz_noun)}},eL=class extends l{column(){return this.faker.helpers.arrayElement(this.faker.definitions.database.column)}type(){return this.faker.helpers.arrayElement(this.faker.definitions.database.type)}collation(){return this.faker.helpers.arrayElement(this.faker.definitions.database.collation)}engine(){return this.faker.helpers.arrayElement(this.faker.definitions.database.engine)}mongodbObjectId(){return this.faker.string.hexadecimal({length:24,casing:"lower",prefix:""})}},eZ={alpha:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],formats:[{country:"AL",total:28,bban:[{type:"n",count:8},{type:"c",count:16}],format:"ALkk bbbs sssx cccc cccc cccc cccc"},{country:"AD",total:24,bban:[{type:"n",count:8},{type:"c",count:12}],format:"ADkk bbbb ssss cccc cccc cccc"},{country:"AT",total:20,bban:[{type:"n",count:5},{type:"n",count:11}],format:"ATkk bbbb bccc cccc cccc"},{country:"AZ",total:28,bban:[{type:"a",count:4},{type:"n",count:20}],format:"AZkk bbbb cccc cccc cccc cccc cccc"},{country:"BH",total:22,bban:[{type:"a",count:4},{type:"c",count:14}],format:"BHkk bbbb cccc cccc cccc cc"},{country:"BE",total:16,bban:[{type:"n",count:3},{type:"n",count:9}],format:"BEkk bbbc cccc ccxx"},{country:"BA",total:20,bban:[{type:"n",count:6},{type:"n",count:10}],format:"BAkk bbbs sscc cccc ccxx"},{country:"BR",total:29,bban:[{type:"n",count:13},{type:"n",count:10},{type:"a",count:1},{type:"c",count:1}],format:"BRkk bbbb bbbb ssss sccc cccc ccct n"},{country:"BG",total:22,bban:[{type:"a",count:4},{type:"n",count:6},{type:"c",count:8}],format:"BGkk bbbb ssss ddcc cccc cc"},{country:"CR",total:22,bban:[{type:"n",count:1},{type:"n",count:3},{type:"n",count:14}],format:"CRkk xbbb cccc cccc cccc cc"},{country:"HR",total:21,bban:[{type:"n",count:7},{type:"n",count:10}],format:"HRkk bbbb bbbc cccc cccc c"},{country:"CY",total:28,bban:[{type:"n",count:8},{type:"c",count:16}],format:"CYkk bbbs ssss cccc cccc cccc cccc"},{country:"CZ",total:24,bban:[{type:"n",count:10},{type:"n",count:10}],format:"CZkk bbbb ssss sscc cccc cccc"},{country:"DK",total:18,bban:[{type:"n",count:4},{type:"n",count:10}],format:"DKkk bbbb cccc cccc cc"},{country:"DO",total:28,bban:[{type:"a",count:4},{type:"n",count:20}],format:"DOkk bbbb cccc cccc cccc cccc cccc"},{country:"TL",total:23,bban:[{type:"n",count:3},{type:"n",count:16}],format:"TLkk bbbc cccc cccc cccc cxx"},{country:"EE",total:20,bban:[{type:"n",count:4},{type:"n",count:12}],format:"EEkk bbss cccc cccc cccx"},{country:"FO",total:18,bban:[{type:"n",count:4},{type:"n",count:10}],format:"FOkk bbbb cccc cccc cx"},{country:"FI",total:18,bban:[{type:"n",count:6},{type:"n",count:8}],format:"FIkk bbbb bbcc cccc cx"},{country:"FR",total:27,bban:[{type:"n",count:10},{type:"c",count:11},{type:"n",count:2}],format:"FRkk bbbb bggg ggcc cccc cccc cxx"},{country:"GE",total:22,bban:[{type:"a",count:2},{type:"n",count:16}],format:"GEkk bbcc cccc cccc cccc cc"},{country:"DE",total:22,bban:[{type:"n",count:8},{type:"n",count:10}],format:"DEkk bbbb bbbb cccc cccc cc"},{country:"GI",total:23,bban:[{type:"a",count:4},{type:"c",count:15}],format:"GIkk bbbb cccc cccc cccc ccc"},{country:"GR",total:27,bban:[{type:"n",count:7},{type:"c",count:16}],format:"GRkk bbbs sssc cccc cccc cccc ccc"},{country:"GL",total:18,bban:[{type:"n",count:4},{type:"n",count:10}],format:"GLkk bbbb cccc cccc cc"},{country:"GT",total:28,bban:[{type:"c",count:4},{type:"c",count:4},{type:"c",count:16}],format:"GTkk bbbb mmtt cccc cccc cccc cccc"},{country:"HU",total:28,bban:[{type:"n",count:8},{type:"n",count:16}],format:"HUkk bbbs sssk cccc cccc cccc cccx"},{country:"IS",total:26,bban:[{type:"n",count:6},{type:"n",count:16}],format:"ISkk bbbb sscc cccc iiii iiii ii"},{country:"IE",total:22,bban:[{type:"a",count:4},{type:"n",count:6},{type:"n",count:8}],format:"IEkk aaaa bbbb bbcc cccc cc"},{country:"IL",total:23,bban:[{type:"n",count:6},{type:"n",count:13}],format:"ILkk bbbn nncc cccc cccc ccc"},{country:"IT",total:27,bban:[{type:"a",count:1},{type:"n",count:10},{type:"c",count:12}],format:"ITkk xaaa aabb bbbc cccc cccc ccc"},{country:"JO",total:30,bban:[{type:"a",count:4},{type:"n",count:4},{type:"n",count:18}],format:"JOkk bbbb nnnn cccc cccc cccc cccc cc"},{country:"KZ",total:20,bban:[{type:"n",count:3},{type:"c",count:13}],format:"KZkk bbbc cccc cccc cccc"},{country:"XK",total:20,bban:[{type:"n",count:4},{type:"n",count:12}],format:"XKkk bbbb cccc cccc cccc"},{country:"KW",total:30,bban:[{type:"a",count:4},{type:"c",count:22}],format:"KWkk bbbb cccc cccc cccc cccc cccc cc"},{country:"LV",total:21,bban:[{type:"a",count:4},{type:"c",count:13}],format:"LVkk bbbb cccc cccc cccc c"},{country:"LB",total:28,bban:[{type:"n",count:4},{type:"c",count:20}],format:"LBkk bbbb cccc cccc cccc cccc cccc"},{country:"LI",total:21,bban:[{type:"n",count:5},{type:"c",count:12}],format:"LIkk bbbb bccc cccc cccc c"},{country:"LT",total:20,bban:[{type:"n",count:5},{type:"n",count:11}],format:"LTkk bbbb bccc cccc cccc"},{country:"LU",total:20,bban:[{type:"n",count:3},{type:"c",count:13}],format:"LUkk bbbc cccc cccc cccc"},{country:"MK",total:19,bban:[{type:"n",count:3},{type:"c",count:10},{type:"n",count:2}],format:"MKkk bbbc cccc cccc cxx"},{country:"MT",total:31,bban:[{type:"a",count:4},{type:"n",count:5},{type:"c",count:18}],format:"MTkk bbbb ssss sccc cccc cccc cccc ccc"},{country:"MR",total:27,bban:[{type:"n",count:10},{type:"n",count:13}],format:"MRkk bbbb bsss sscc cccc cccc cxx"},{country:"MU",total:30,bban:[{type:"a",count:4},{type:"n",count:4},{type:"n",count:15},{type:"a",count:3}],format:"MUkk bbbb bbss cccc cccc cccc 000d dd"},{country:"MC",total:27,bban:[{type:"n",count:10},{type:"c",count:11},{type:"n",count:2}],format:"MCkk bbbb bsss sscc cccc cccc cxx"},{country:"MD",total:24,bban:[{type:"c",count:2},{type:"c",count:18}],format:"MDkk bbcc cccc cccc cccc cccc"},{country:"ME",total:22,bban:[{type:"n",count:3},{type:"n",count:15}],format:"MEkk bbbc cccc cccc cccc xx"},{country:"NL",total:18,bban:[{type:"a",count:4},{type:"n",count:10}],format:"NLkk bbbb cccc cccc cc"},{country:"NO",total:15,bban:[{type:"n",count:4},{type:"n",count:7}],format:"NOkk bbbb cccc ccx"},{country:"PK",total:24,bban:[{type:"a",count:4},{type:"n",count:16}],format:"PKkk bbbb cccc cccc cccc cccc"},{country:"PS",total:29,bban:[{type:"a",count:4},{type:"n",count:9},{type:"n",count:12}],format:"PSkk bbbb xxxx xxxx xccc cccc cccc c"},{country:"PL",total:28,bban:[{type:"n",count:8},{type:"n",count:16}],format:"PLkk bbbs sssx cccc cccc cccc cccc"},{country:"PT",total:25,bban:[{type:"n",count:8},{type:"n",count:13}],format:"PTkk bbbb ssss cccc cccc cccx x"},{country:"QA",total:29,bban:[{type:"a",count:4},{type:"c",count:21}],format:"QAkk bbbb cccc cccc cccc cccc cccc c"},{country:"RO",total:24,bban:[{type:"a",count:4},{type:"c",count:16}],format:"ROkk bbbb cccc cccc cccc cccc"},{country:"SM",total:27,bban:[{type:"a",count:1},{type:"n",count:10},{type:"c",count:12}],format:"SMkk xaaa aabb bbbc cccc cccc ccc"},{country:"SA",total:24,bban:[{type:"n",count:2},{type:"c",count:18}],format:"SAkk bbcc cccc cccc cccc cccc"},{country:"RS",total:22,bban:[{type:"n",count:3},{type:"n",count:15}],format:"RSkk bbbc cccc cccc cccc xx"},{country:"SK",total:24,bban:[{type:"n",count:10},{type:"n",count:10}],format:"SKkk bbbb ssss sscc cccc cccc"},{country:"SI",total:19,bban:[{type:"n",count:5},{type:"n",count:10}],format:"SIkk bbss sccc cccc cxx"},{country:"ES",total:24,bban:[{type:"n",count:10},{type:"n",count:10}],format:"ESkk bbbb gggg xxcc cccc cccc"},{country:"SE",total:24,bban:[{type:"n",count:3},{type:"n",count:17}],format:"SEkk bbbc cccc cccc cccc cccc"},{country:"CH",total:21,bban:[{type:"n",count:5},{type:"c",count:12}],format:"CHkk bbbb bccc cccc cccc c"},{country:"TN",total:24,bban:[{type:"n",count:5},{type:"n",count:15}],format:"TNkk bbss sccc cccc cccc cccc"},{country:"TR",total:26,bban:[{type:"n",count:5},{type:"n",count:1},{type:"n",count:16}],format:"TRkk bbbb bxcc cccc cccc cccc cc"},{country:"AE",total:23,bban:[{type:"n",count:3},{type:"n",count:16}],format:"AEkk bbbc cccc cccc cccc ccc"},{country:"GB",total:22,bban:[{type:"a",count:4},{type:"n",count:6},{type:"n",count:8}],format:"GBkk bbbb ssss sscc cccc cc"},{country:"VG",total:24,bban:[{type:"a",count:4},{type:"n",count:16}],format:"VGkk bbbb cccc cccc cccc cccc"}],iso3166:["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","XK","YE","YT","ZA","ZM","ZW"],mod97:e=>{let t=0;for(let r of e)t=(10*t+ +r)%97;return t},pattern10:["01","02","03","04","05","06","07","08","09"],pattern100:["001","002","003","004","005","006","007","008","009"],toDigitString:e=>e.replaceAll(/[A-Z]/gi,e=>String((e.toUpperCase().codePointAt(0)??Number.NaN)-55))};function eD(e){let t="";for(let r=0;r<e.length;r+=4)t+=`${e.substring(r,r+4)} `;return t.trimEnd()}var eU=class extends l{accountNumber(e={}){"number"==typeof e&&(e={length:e});let{length:t=8}=e;return this.faker.string.numeric({length:t,allowLeadingZeros:!0})}accountName(){return[this.faker.helpers.arrayElement(this.faker.definitions.finance.account_type),"Account"].join(" ")}routingNumber(){let e=this.faker.string.numeric({length:8,allowLeadingZeros:!0}),t=0;for(let r=0;r<e.length;r+=3)t+=3*Number(e[r]),t+=7*Number(e[r+1]),t+=Number(e[r+2])||0;return`${e}${10*Math.ceil(t/10)-t}`}amount(e={}){let{autoFormat:t=!1,dec:r=2,max:n=1e3,min:i=0,symbol:a=""}=e,s=this.faker.number.float({max:n,min:i,fractionDigits:r});return a+(t?s.toLocaleString(void 0,{minimumFractionDigits:r}):s.toFixed(r))}transactionType(){return this.faker.helpers.arrayElement(this.faker.definitions.finance.transaction_type)}currency(){return this.faker.helpers.arrayElement(this.faker.definitions.finance.currency)}currencyCode(){return this.currency().code}currencyName(){return this.currency().name}currencySymbol(){let e;do e=this.currency().symbol;while(0===e.length);return e}currencyNumericCode(){return this.currency().numericCode}bitcoinAddress(e={}){let{type:t=this.faker.helpers.enumValue(x),network:r="mainnet"}=e,n=S[t],i=n.prefix[r],a=this.faker.number.int(n.length),s=this.faker.string.alphanumeric({length:a-i.length,casing:n.casing,exclude:n.exclude});return i+s}litecoinAddress(){let e=this.faker.number.int({min:26,max:33});return this.faker.string.fromCharacters("LM3")+this.faker.string.fromCharacters("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",e-1)}creditCardNumber(e={}){"string"==typeof e&&(e={issuer:e});let{issuer:t=""}=e,r,n=this.faker.definitions.finance.credit_card,i=t.toLowerCase();if(i in n)r=this.faker.helpers.arrayElement(n[i]);else if(t.includes("#"))r=t;else{let e=this.faker.helpers.objectValue(n);r=this.faker.helpers.arrayElement(e)}return r=r.replaceAll("/",""),this.faker.helpers.replaceCreditCardSymbols(r)}creditCardCVV(){return this.faker.string.numeric({length:3,allowLeadingZeros:!0})}creditCardIssuer(){return this.faker.helpers.objectKey(this.faker.definitions.finance.credit_card)}pin(e={}){"number"==typeof e&&(e={length:e});let{length:t=4}=e;if(t<1)throw new a("minimum length is 1");return this.faker.string.numeric({length:t,allowLeadingZeros:!0})}ethereumAddress(){return this.faker.string.hexadecimal({length:40,casing:"lower"})}iban(e={}){let{countryCode:t,formatted:r=!1}=e,n=t?eZ.formats.find(e=>e.country===t):this.faker.helpers.arrayElement(eZ.formats);if(!n)throw new a(`Country code ${t} not supported.`);let i="",s=0;for(let e of n.bban){let t=e.count;for(s+=e.count;t>0;)"a"===e.type?i+=this.faker.helpers.arrayElement(eZ.alpha):"c"===e.type?this.faker.datatype.boolean(.8)?i+=this.faker.number.int(9):i+=this.faker.helpers.arrayElement(eZ.alpha):t>=3&&this.faker.datatype.boolean(.3)?this.faker.datatype.boolean()?(i+=this.faker.helpers.arrayElement(eZ.pattern100),t-=2):(i+=this.faker.helpers.arrayElement(eZ.pattern10),t--):i+=this.faker.number.int(9),t--;i=i.substring(0,s)}let o=98-eZ.mod97(eZ.toDigitString(`${i}${n.country}00`));o<10&&(o=`0${o}`);let l=`${n.country}${o}${i}`;return r?eD(l):l}bic(e={}){let{includeBranchCode:t=this.faker.datatype.boolean()}=e,r=this.faker.string.alpha({length:4,casing:"upper"}),n=this.faker.helpers.arrayElement(eZ.iso3166),i=this.faker.string.alphanumeric({length:2,casing:"upper"}),a=t?this.faker.datatype.boolean()?this.faker.string.alphanumeric({length:3,casing:"upper"}):"XXX":"";return`${r}${n}${i}${a}`}transactionDescription(){return this.faker.helpers.fake(this.faker.definitions.finance.transaction_description_pattern)}};function eF(e){return e.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}var eB=class extends l{adjective(){return this.faker.helpers.arrayElement(this.faker.definitions.food.adjective)}description(){return this.faker.helpers.fake(this.faker.definitions.food.description_pattern)}dish(){return this.faker.datatype.boolean()?eF(this.faker.helpers.fake(this.faker.definitions.food.dish_pattern)):eF(this.faker.helpers.arrayElement(this.faker.definitions.food.dish))}ethnicCategory(){return this.faker.helpers.arrayElement(this.faker.definitions.food.ethnic_category)}fruit(){return this.faker.helpers.arrayElement(this.faker.definitions.food.fruit)}ingredient(){return this.faker.helpers.arrayElement(this.faker.definitions.food.ingredient)}meat(){return this.faker.helpers.arrayElement(this.faker.definitions.food.meat)}spice(){return this.faker.helpers.arrayElement(this.faker.definitions.food.spice)}vegetable(){return this.faker.helpers.arrayElement(this.faker.definitions.food.vegetable)}},eV="\xa0",eJ=class extends l{branch(){let e=this.faker.hacker.noun().replace(" ","-"),t=this.faker.hacker.verb().replace(" ","-");return`${e}-${t}`}commitEntry(e={}){let{merge:t=this.faker.datatype.boolean({probability:.2}),eol:r="CRLF",refDate:n}=e,i=[`commit ${this.faker.git.commitSha()}`];t&&i.push(`Merge: ${this.commitSha({length:7})} ${this.commitSha({length:7})}`);let a=this.faker.person.firstName(),s=this.faker.person.lastName(),o=this.faker.person.fullName({firstName:a,lastName:s}),l=this.faker.internet.username({firstName:a,lastName:s}),u=this.faker.helpers.arrayElement([o,l]),c=this.faker.internet.email({firstName:a,lastName:s});return u=u.replaceAll(/^[.,:;"\\']|[<>\n]|[.,:;"\\']$/g,""),i.push(`Author: ${u} <${c}>`,`Date: ${this.commitDate({refDate:n})}`,"",`${eV.repeat(4)}${this.commitMessage()}`,""),i.join("CRLF"===r?`\r
`:`
`)}commitMessage(){return`${this.faker.hacker.verb()} ${this.faker.hacker.adjective()} ${this.faker.hacker.noun()}`}commitDate(e={}){let{refDate:t=this.faker.defaultRefDate()}=e,r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=this.faker.date.recent({days:1,refDate:t}),a=r[i.getUTCDay()],s=n[i.getUTCMonth()],o=i.getUTCDate(),l=i.getUTCHours().toString().padStart(2,"0"),u=i.getUTCMinutes().toString().padStart(2,"0"),c=i.getUTCSeconds().toString().padStart(2,"0"),d=i.getUTCFullYear(),p=this.faker.number.int({min:-11,max:12}),h=Math.abs(p).toString().padStart(2,"0"),f="00",m=p>=0?"+":"-";return`${a} ${s} ${o} ${l}:${u}:${c} ${d} ${m}${h}${f}`}commitSha(e={}){let{length:t=40}=e;return this.faker.string.hexadecimal({length:t,casing:"lower",prefix:""})}},eW=class extends l{abbreviation(){return this.faker.helpers.arrayElement(this.faker.definitions.hacker.abbreviation)}adjective(){return this.faker.helpers.arrayElement(this.faker.definitions.hacker.adjective)}noun(){return this.faker.helpers.arrayElement(this.faker.definitions.hacker.noun)}verb(){return this.faker.helpers.arrayElement(this.faker.definitions.hacker.verb)}ingverb(){return this.faker.helpers.arrayElement(this.faker.definitions.hacker.ingverb)}phrase(){let e={abbreviation:this.abbreviation,adjective:this.adjective,ingverb:this.ingverb,noun:this.noun,verb:this.verb},t=this.faker.helpers.arrayElement(this.faker.definitions.hacker.phrase);return this.faker.helpers.mustache(t,e)}};function eq(e){let{deprecated:t,since:r,until:n,proposed:i}=e,a=`[@faker-js/faker]: ${t} is deprecated`;r&&(a+=` since v${r}`),n&&(a+=` and will be removed in v${n}`),i&&(a+=`. Please use ${i} instead`),console.warn(`${a}.`)}var eK=class extends l{avatar(){return this.faker.helpers.arrayElement([this.personPortrait,this.avatarGitHub])()}avatarGitHub(){return`https://avatars.githubusercontent.com/u/${this.faker.number.int(1e8)}`}personPortrait(e={}){let{sex:t=this.faker.person.sexType(),size:r=512}=e;return`https://cdn.jsdelivr.net/gh/faker-js/assets-person-portrait/${t}/${r}/${this.faker.number.int({min:0,max:99})}.jpg`}url(e={}){let{width:t=this.faker.number.int({min:1,max:3999}),height:r=this.faker.number.int({min:1,max:3999})}=e;return this.faker.helpers.arrayElement([({width:e,height:t})=>this.urlPicsumPhotos({width:e,height:t,grayscale:!1,blur:0})])({width:t,height:r})}urlLoremFlickr(e={}){eq({deprecated:"faker.image.urlLoremFlickr()",proposed:"faker.image.url()",since:"10.1.0",until:"11.0.0"});let{width:t=this.faker.number.int({min:1,max:3999}),height:r=this.faker.number.int({min:1,max:3999}),category:n}=e;return`https://loremflickr.com/${t}/${r}${null==n?"":`/${n}`}?lock=${this.faker.number.int()}`}urlPicsumPhotos(e={}){let{width:t=this.faker.number.int({min:1,max:3999}),height:r=this.faker.number.int({min:1,max:3999}),grayscale:n=this.faker.datatype.boolean(),blur:i=this.faker.number.int({max:10})}=e,a=`https://picsum.photos/seed/${this.faker.string.alphanumeric({length:{min:5,max:10}})}/${t}/${r}`,s="number"==typeof i&&i>=1&&i<=10;return(n||s)&&(a+="?",n&&(a+="grayscale"),n&&s&&(a+="&"),s&&(a+=`blur=${i}`)),a}dataUri(e={}){let{width:t=this.faker.number.int({min:1,max:3999}),height:r=this.faker.number.int({min:1,max:3999}),color:n=this.faker.color.rgb(),type:i=this.faker.helpers.arrayElement(["svg-uri","svg-base64"])}=e,a=`<svg xmlns="http://www.w3.org/2000/svg" version="1.1" baseProfile="full" width="${t}" height="${r}"><rect width="100%" height="100%" fill="${n}"/><text x="${t/2}" y="${r/2}" font-size="20" alignment-baseline="middle" text-anchor="middle" fill="white">${t}x${r}</text></svg>`;return"svg-uri"===i?`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(a)}`:`data:image/svg+xml;base64,${I(a)}`}};function eG(e,t,r=e=>e){let n={};for(let i of e){let e=t(i);void 0===n[e]&&(n[e]=[]),n[e].push(r(i))}return n}var eH={fail:()=>{throw new a("No words found that match the given length.")},closest:(e,t)=>{let r=Object.keys(eG(e,e=>e.length)).map(Number),n=Math.min(...r),i=Math.max(...r),a=Math.min(t.min-n,i-t.max);return e.filter(e=>e.length===t.min-a||e.length===t.max+a)},shortest:e=>{let t=Math.min(...e.map(e=>e.length));return e.filter(e=>e.length===t)},longest:e=>{let t=Math.max(...e.map(e=>e.length));return e.filter(e=>e.length===t)},"any-length":e=>[...e]};function eY(e){let{wordList:t,length:r,strategy:n="fail"}=e;if(null!=r){let e="number"==typeof r?e=>e.length===r:e=>e.length>=r.min&&e.length<=r.max,i=t.filter(e);return i.length>0?i:"number"==typeof r?eH[n](t,{min:r,max:r}):eH[n](t,r)}return"shortest"===n||"longest"===n?eH[n](t):[...t]}var eX=class extends l{word(e={}){return"number"==typeof e&&(e={length:e}),this.faker.helpers.arrayElement(eY({...e,wordList:this.faker.definitions.lorem.word}))}words(e=3){return this.faker.helpers.multiple(()=>this.word(),{count:e}).join(" ")}sentence(e={min:3,max:10}){let t=this.words(e);return`${t.charAt(0).toUpperCase()+t.substring(1)}.`}slug(e=3){let t=this.words(e);return this.faker.helpers.slugify(t)}sentences(e={min:2,max:6},t=" "){return this.faker.helpers.multiple(()=>this.sentence(),{count:e}).join(t)}paragraph(e=3){return this.sentences(e)}paragraphs(e=3,t=`
`){return this.faker.helpers.multiple(()=>this.paragraph(),{count:e}).join(t)}text(){let e=["sentence","sentences","paragraph","paragraphs","lines"];return this[this.faker.helpers.arrayElement(e)]()}lines(e={min:1,max:5}){return this.sentences(e,`
`)}},eQ=class extends l{album(){return this.faker.helpers.arrayElement(this.faker.definitions.music.album)}artist(){return this.faker.helpers.arrayElement(this.faker.definitions.music.artist)}genre(){return this.faker.helpers.arrayElement(this.faker.definitions.music.genre)}songName(){return this.faker.helpers.arrayElement(this.faker.definitions.music.song_name)}},e0=class extends l{number(e={}){let{style:t="human"}=e,r=this.faker.definitions.phone_number.format[t];if(!r)throw Error(`No definitions for ${t} in this locale`);let n=this.faker.helpers.arrayElement(r);return e_(this.faker,n)}imei(){return this.faker.helpers.replaceCreditCardSymbols("##-######-######-L","#")}},e1=class extends l{chemicalElement(){return this.faker.helpers.arrayElement(this.faker.definitions.science.chemical_element)}unit(){return this.faker.helpers.arrayElement(this.faker.definitions.science.unit)}},e2=["video","audio","image","text","application"],e4=["application/pdf","audio/mpeg","audio/wav","image/png","image/jpeg","image/gif","video/mp4","video/mpeg","text/html"],e6=["en","wl","ww"],e9={index:"o",slot:"s",mac:"x",pci:"p"},e3=["SUN","MON","TUE","WED","THU","FRI","SAT"],e5=class extends l{fileName(e={}){let{extensionCount:t=1}=e,r=this.faker.word.words().toLowerCase().replaceAll(/\W/g,"_"),n=this.faker.helpers.multiple(()=>this.fileExt(),{count:t}).join(".");return 0===n.length?r:`${r}.${n}`}commonFileName(e){return`${this.fileName({extensionCount:0})}.${e||this.commonFileExt()}`}mimeType(){let e=Object.keys(this.faker.definitions.system.mime_type);return this.faker.helpers.arrayElement(e)}commonFileType(){return this.faker.helpers.arrayElement(e2)}commonFileExt(){return this.fileExt(this.faker.helpers.arrayElement(e4))}fileType(){let e=new Set(Object.keys(this.faker.definitions.system.mime_type).map(e=>e.split("/")[0]));return this.faker.helpers.arrayElement([...e])}fileExt(e){let t=this.faker.definitions.system.mime_type;if("string"==typeof e)return this.faker.helpers.arrayElement(t[e].extensions);let r=new Set(Object.values(t).flatMap(({extensions:e})=>e));return this.faker.helpers.arrayElement([...r])}directoryPath(){let e=this.faker.definitions.system.directory_path;return this.faker.helpers.arrayElement(e)}filePath(){return`${this.directoryPath()}/${this.fileName()}`}semver(){return[this.faker.number.int(9),this.faker.number.int(20),this.faker.number.int(20)].join(".")}networkInterface(e={}){let{interfaceType:t=this.faker.helpers.arrayElement(e6),interfaceSchema:r=this.faker.helpers.objectKey(e9)}=e,n,i="";switch(r){case"index":n=this.faker.string.numeric();break;case"slot":n=`${this.faker.string.numeric()}${this.faker.helpers.maybe(()=>`f${this.faker.string.numeric()}`)??""}${this.faker.helpers.maybe(()=>`d${this.faker.string.numeric()}`)??""}`;break;case"mac":n=this.faker.internet.mac("");break;case"pci":i=this.faker.helpers.maybe(()=>`P${this.faker.string.numeric()}`)??"",n=`${this.faker.string.numeric()}s${this.faker.string.numeric()}${this.faker.helpers.maybe(()=>`f${this.faker.string.numeric()}`)??""}${this.faker.helpers.maybe(()=>`d${this.faker.string.numeric()}`)??""}`}return`${i}${t}${e9[r]}${n}`}cron(e={}){let{includeYear:t=!1,includeNonStandard:r=!1}=e,n=[this.faker.number.int(59),"*"],i=[this.faker.number.int(23),"*"],a=[this.faker.number.int({min:1,max:31}),"*","?"],s=[this.faker.number.int({min:1,max:12}),"*"],o=[this.faker.number.int(6),this.faker.helpers.arrayElement(e3),"*","?"],l=[this.faker.number.int({min:1970,max:2099}),"*"],u=this.faker.helpers.arrayElement(n),c=this.faker.helpers.arrayElement(i),d=this.faker.helpers.arrayElement(a),p=this.faker.helpers.arrayElement(s),h=this.faker.helpers.arrayElement(o),f=this.faker.helpers.arrayElement(l),m=`${u} ${c} ${d} ${p} ${h}`;t&&(m+=` ${f}`);let g=["@annually","@daily","@hourly","@monthly","@reboot","@weekly","@yearly"];return!r||this.faker.datatype.boolean()?m:this.faker.helpers.arrayElement(g)}},e8=class extends l{vehicle(){return`${this.manufacturer()} ${this.model()}`}manufacturer(){return this.faker.helpers.arrayElement(this.faker.definitions.vehicle.manufacturer)}model(){return this.faker.helpers.arrayElement(this.faker.definitions.vehicle.model)}type(){return this.faker.helpers.arrayElement(this.faker.definitions.vehicle.type)}fuel(){return this.faker.helpers.arrayElement(this.faker.definitions.vehicle.fuel)}vin(){let e=["o","i","q","O","I","Q"];return`${this.faker.string.alphanumeric({length:10,casing:"upper",exclude:e})}${this.faker.string.alpha({length:1,casing:"upper",exclude:e})}${this.faker.string.alphanumeric({length:1,casing:"upper",exclude:e})}${this.faker.string.numeric({length:5,allowLeadingZeros:!0})}`}color(){return this.faker.color.human()}vrm(){return`${this.faker.string.alpha({length:2,casing:"upper"})}${this.faker.string.numeric({length:2,allowLeadingZeros:!0})}${this.faker.string.alpha({length:3,casing:"upper"})}`}bicycle(){return this.faker.helpers.arrayElement(this.faker.definitions.vehicle.bicycle_type)}},e7=class extends l{adjective(e={}){return"number"==typeof e&&(e={length:e}),this.faker.helpers.arrayElement(eY({...e,wordList:this.faker.definitions.word.adjective}))}adverb(e={}){return"number"==typeof e&&(e={length:e}),this.faker.helpers.arrayElement(eY({...e,wordList:this.faker.definitions.word.adverb}))}conjunction(e={}){return"number"==typeof e&&(e={length:e}),this.faker.helpers.arrayElement(eY({...e,wordList:this.faker.definitions.word.conjunction}))}interjection(e={}){return"number"==typeof e&&(e={length:e}),this.faker.helpers.arrayElement(eY({...e,wordList:this.faker.definitions.word.interjection}))}noun(e={}){return"number"==typeof e&&(e={length:e}),this.faker.helpers.arrayElement(eY({...e,wordList:this.faker.definitions.word.noun}))}preposition(e={}){return"number"==typeof e&&(e={length:e}),this.faker.helpers.arrayElement(eY({...e,wordList:this.faker.definitions.word.preposition}))}verb(e={}){return"number"==typeof e&&(e={length:e}),this.faker.helpers.arrayElement(eY({...e,wordList:this.faker.definitions.word.verb}))}sample(e={}){for(let t of this.faker.helpers.shuffle([this.adjective,this.adverb,this.conjunction,this.interjection,this.noun,this.preposition,this.verb]))try{return t(e)}catch{continue}throw new a("No matching word data available for the current locale")}words(e={}){"number"==typeof e&&(e={count:e});let{count:t={min:1,max:3}}=e;return this.faker.helpers.multiple(()=>this.sample(),{count:t}).join(" ")}},te=["Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmara","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Bissau","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Tripoli","Africa/Tunis","Africa/Windhoek","America/Adak","America/Anchorage","America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Atikokan","America/Bahia","America/Bahia_Banderas","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Cambridge_Bay","America/Campo_Grande","America/Cancun","America/Caracas","America/Cayenne","America/Cayman","America/Chicago","America/Chihuahua","America/Ciudad_Juarez","America/Costa_Rica","America/Creston","America/Cuiaba","America/Curacao","America/Danmarkshavn","America/Dawson","America/Dawson_Creek","America/Denver","America/Detroit","America/Dominica","America/Edmonton","America/Eirunepe","America/El_Salvador","America/Fort_Nelson","America/Fortaleza","America/Glace_Bay","America/Goose_Bay","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Halifax","America/Havana","America/Hermosillo","America/Indiana/Indianapolis","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Inuvik","America/Iqaluit","America/Jamaica","America/Juneau","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Kralendijk","America/La_Paz","America/Lima","America/Los_Angeles","America/Lower_Princes","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Matamoros","America/Mazatlan","America/Menominee","America/Merida","America/Metlakatla","America/Mexico_City","America/Miquelon","America/Moncton","America/Monterrey","America/Montevideo","America/Montserrat","America/Nassau","America/New_York","America/Nome","America/Noronha","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Nuuk","America/Ojinaga","America/Panama","America/Paramaribo","America/Phoenix","America/Port-au-Prince","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Punta_Arenas","America/Rankin_Inlet","America/Recife","America/Regina","America/Resolute","America/Rio_Branco","America/Santarem","America/Santiago","America/Santo_Domingo","America/Sao_Paulo","America/Scoresbysund","America/Sitka","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Swift_Current","America/Tegucigalpa","America/Thule","America/Tijuana","America/Toronto","America/Tortola","America/Vancouver","America/Whitehorse","America/Winnipeg","America/Yakutat","America/Yellowknife","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/Syowa","Antarctica/Troll","Antarctica/Vostok","Arctic/Longyearbyen","Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Atyrau","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Barnaul","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Chita","Asia/Choibalsan","Asia/Colombo","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Famagusta","Asia/Gaza","Asia/Hebron","Asia/Ho_Chi_Minh","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Kathmandu","Asia/Khandyga","Asia/Kolkata","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qostanay","Asia/Qyzylorda","Asia/Riyadh","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Srednekolymsk","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Thimphu","Asia/Tokyo","Asia/Tomsk","Asia/Ulaanbaatar","Asia/Urumqi","Asia/Ust-Nera","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yangon","Asia/Yekaterinburg","Asia/Yerevan","Atlantic/Azores","Atlantic/Bermuda","Atlantic/Canary","Atlantic/Cape_Verde","Atlantic/Faroe","Atlantic/Madeira","Atlantic/Reykjavik","Atlantic/South_Georgia","Atlantic/St_Helena","Atlantic/Stanley","Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/Perth","Australia/Sydney","Europe/Amsterdam","Europe/Andorra","Europe/Astrakhan","Europe/Athens","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Busingen","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kirov","Europe/Kyiv","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Saratov","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Ulyanovsk","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zurich","Indian/Antananarivo","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion","Pacific/Apia","Pacific/Auckland","Pacific/Bougainville","Pacific/Chatham","Pacific/Chuuk","Pacific/Easter","Pacific/Efate","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Galapagos","Pacific/Gambier","Pacific/Guadalcanal","Pacific/Guam","Pacific/Honolulu","Pacific/Kanton","Pacific/Kiritimati","Pacific/Kosrae","Pacific/Kwajalein","Pacific/Majuro","Pacific/Marquesas","Pacific/Midway","Pacific/Nauru","Pacific/Niue","Pacific/Norfolk","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Palau","Pacific/Pitcairn","Pacific/Pohnpei","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Saipan","Pacific/Tahiti","Pacific/Tarawa","Pacific/Tongatapu","Pacific/Wake","Pacific/Wallis"],tt={color:{space:["Academy Color Encoding System (ACES)","Adobe RGB","Adobe Wide Gamut RGB","British Standard Colour (BS)","CIE 1931 XYZ","CIELAB","CIELUV","CIEUVW","CMY","CMYK","DCI-P3","Display-P3","Federal Standard 595C","HKS","HSL","HSLA","HSLuv","HSV","HWB","LCh","LMS","Munsell Color System","Natural Color System (NSC)","Pantone Matching System (PMS)","ProPhoto RGB Color Space","RAL","RG","RGBA","RGK","Rec. 2020","Rec. 2100","Rec. 601","Rec. 709","Uniform Color Spaces (UCSs)","YDbDr","YIQ","YPbPr","sRGB","sYCC","scRGB","xvYCC"]},database:{collation:["ascii_bin","ascii_general_ci","cp1250_bin","cp1250_general_ci","utf8_bin","utf8_general_ci","utf8_unicode_ci"],engine:["ARCHIVE","BLACKHOLE","CSV","InnoDB","MEMORY","MyISAM"],type:["bigint","binary","bit","blob","boolean","date","datetime","decimal","double","enum","float","geometry","int","mediumint","point","real","serial","set","smallint","text","time","timestamp","tinyint","varchar"]},date:{time_zone:te},hacker:{abbreviation:["ADP","AGP","AI","API","ASCII","CLI","COM","CSS","DNS","DRAM","EXE","FTP","GB","HDD","HEX","HTTP","IB","IP","JBOD","JSON","OCR","PCI","PNG","RAM","RSS","SAS","SCSI","SDD","SMS","SMTP","SQL","SSD","SSL","TCP","THX","TLS","UDP","USB","UTF8","VGA","XML","XSS"]},internet:{emoji:{smiley:["","","","","","\uD83D\uDD25","\uD83E\uDE79","\uD83D\uDC41\uD83D\uDDE8","\uD83D\uDC79","\uD83D\uDC7A","\uD83D\uDC7B","\uD83D\uDC7D","\uD83D\uDC7E","\uD83D\uDC7F","\uD83D\uDC80","\uD83D\uDC8B","\uD83D\uDC8C","\uD83D\uDC93","\uD83D\uDC94","\uD83D\uDC95","\uD83D\uDC96","\uD83D\uDC97","\uD83D\uDC98","\uD83D\uDC99","\uD83D\uDC9A","\uD83D\uDC9B","\uD83D\uDC9C","\uD83D\uDC9D","\uD83D\uDC9E","\uD83D\uDC9F","\uD83D\uDCA2","\uD83D\uDCA3","\uD83D\uDCA4","\uD83D\uDCA5","\uD83D\uDCA6","\uD83D\uDCA8","\uD83D\uDCA9","\uD83D\uDCAB","\uD83D\uDCAC","\uD83D\uDCAD","\uD83D\uDCAF","\uD83D\uDD73","\uD83D\uDDA4","\uD83D\uDDE8","\uD83D\uDDEF","\uD83D\uDE00","\uD83D\uDE01","\uD83D\uDE02","\uD83D\uDE03","\uD83D\uDE04","\uD83D\uDE05","\uD83D\uDE06","\uD83D\uDE07","\uD83D\uDE08","\uD83D\uDE09","\uD83D\uDE0A","\uD83D\uDE0B","\uD83D\uDE0C","\uD83D\uDE0D","\uD83D\uDE0E","\uD83D\uDE0F","\uD83D\uDE10","\uD83D\uDE11","\uD83D\uDE12","\uD83D\uDE13","\uD83D\uDE14","\uD83D\uDE15","\uD83D\uDE16","\uD83D\uDE17","\uD83D\uDE18","\uD83D\uDE19","\uD83D\uDE1A","\uD83D\uDE1B","\uD83D\uDE1C","\uD83D\uDE1D","\uD83D\uDE1E","\uD83D\uDE1F","\uD83D\uDE20","\uD83D\uDE21","\uD83D\uDE22","\uD83D\uDE23","\uD83D\uDE24","\uD83D\uDE25","\uD83D\uDE26","\uD83D\uDE27","\uD83D\uDE28","\uD83D\uDE29","\uD83D\uDE2A","\uD83D\uDE2B","\uD83D\uDE2C","\uD83D\uDE2D","\uD83D\uDE2E","\uD83D\uDE2E\uD83D\uDCA8","\uD83D\uDE2F","\uD83D\uDE30","\uD83D\uDE31","\uD83D\uDE32","\uD83D\uDE33","\uD83D\uDE34","\uD83D\uDE35","\uD83D\uDE35\uD83D\uDCAB","\uD83D\uDE36","\uD83D\uDE36\uD83C\uDF2B","\uD83D\uDE37","\uD83D\uDE38","\uD83D\uDE39","\uD83D\uDE3A","\uD83D\uDE3B","\uD83D\uDE3C","\uD83D\uDE3D","\uD83D\uDE3E","\uD83D\uDE3F","\uD83D\uDE40","\uD83D\uDE41","\uD83D\uDE42","\uD83D\uDE43","\uD83D\uDE44","\uD83D\uDE48","\uD83D\uDE49","\uD83D\uDE4A","\uD83E\uDD0D","\uD83E\uDD0E","\uD83E\uDD10","\uD83E\uDD11","\uD83E\uDD12","\uD83E\uDD13","\uD83E\uDD14","\uD83E\uDD15","\uD83E\uDD16","\uD83E\uDD17","\uD83E\uDD20","\uD83E\uDD21","\uD83E\uDD22","\uD83E\uDD23","\uD83E\uDD24","\uD83E\uDD25","\uD83E\uDD27","\uD83E\uDD28","\uD83E\uDD29","\uD83E\uDD2A","\uD83E\uDD2B","\uD83E\uDD2C","\uD83E\uDD2D","\uD83E\uDD2E","\uD83E\uDD2F","\uD83E\uDD70","\uD83E\uDD71","\uD83E\uDD72","\uD83E\uDD73","\uD83E\uDD74","\uD83E\uDD75","\uD83E\uDD76","\uD83E\uDD78","\uD83E\uDD7A","\uD83E\uDDD0","\uD83E\uDDE1"],body:["\uD83C\uDFFB","\uD83C\uDFFC","\uD83C\uDFFD","\uD83C\uDFFE","\uD83C\uDFFF","","","\uD83C\uDFFB","\uD83C\uDFFC","\uD83C\uDFFD","\uD83C\uDFFE","\uD83C\uDFFF","","\uD83C\uDFFB","\uD83C\uDFFC","\uD83C\uDFFD","\uD83C\uDFFE","\uD83C\uDFFF","\uD83C\uDFFB","\uD83C\uDFFC","\uD83C\uDFFD","\uD83C\uDFFE","\uD83C\uDFFF","","\uD83C\uDFFB","\uD83C\uDFFC","\uD83C\uDFFD","\uD83C\uDFFE","\uD83C\uDFFF","","\uD83D\uDC40","\uD83D\uDC41","\uD83D\uDC42","\uD83D\uDC42\uD83C\uDFFB","\uD83D\uDC42\uD83C\uDFFC","\uD83D\uDC42\uD83C\uDFFD","\uD83D\uDC42\uD83C\uDFFE","\uD83D\uDC42\uD83C\uDFFF","\uD83D\uDC43","\uD83D\uDC43\uD83C\uDFFB","\uD83D\uDC43\uD83C\uDFFC","\uD83D\uDC43\uD83C\uDFFD","\uD83D\uDC43\uD83C\uDFFE","\uD83D\uDC43\uD83C\uDFFF","\uD83D\uDC44","\uD83D\uDC45","\uD83D\uDC46","\uD83D\uDC46\uD83C\uDFFB","\uD83D\uDC46\uD83C\uDFFC","\uD83D\uDC46\uD83C\uDFFD","\uD83D\uDC46\uD83C\uDFFE","\uD83D\uDC46\uD83C\uDFFF","\uD83D\uDC47","\uD83D\uDC47\uD83C\uDFFB","\uD83D\uDC47\uD83C\uDFFC","\uD83D\uDC47\uD83C\uDFFD","\uD83D\uDC47\uD83C\uDFFE","\uD83D\uDC47\uD83C\uDFFF","\uD83D\uDC48","\uD83D\uDC48\uD83C\uDFFB","\uD83D\uDC48\uD83C\uDFFC","\uD83D\uDC48\uD83C\uDFFD","\uD83D\uDC48\uD83C\uDFFE","\uD83D\uDC48\uD83C\uDFFF","\uD83D\uDC49","\uD83D\uDC49\uD83C\uDFFB","\uD83D\uDC49\uD83C\uDFFC","\uD83D\uDC49\uD83C\uDFFD","\uD83D\uDC49\uD83C\uDFFE","\uD83D\uDC49\uD83C\uDFFF","\uD83D\uDC4A","\uD83D\uDC4A\uD83C\uDFFB","\uD83D\uDC4A\uD83C\uDFFC","\uD83D\uDC4A\uD83C\uDFFD","\uD83D\uDC4A\uD83C\uDFFE","\uD83D\uDC4A\uD83C\uDFFF","\uD83D\uDC4B","\uD83D\uDC4B\uD83C\uDFFB","\uD83D\uDC4B\uD83C\uDFFC","\uD83D\uDC4B\uD83C\uDFFD","\uD83D\uDC4B\uD83C\uDFFE","\uD83D\uDC4B\uD83C\uDFFF","\uD83D\uDC4C","\uD83D\uDC4C\uD83C\uDFFB","\uD83D\uDC4C\uD83C\uDFFC","\uD83D\uDC4C\uD83C\uDFFD","\uD83D\uDC4C\uD83C\uDFFE","\uD83D\uDC4C\uD83C\uDFFF","\uD83D\uDC4D","\uD83D\uDC4D\uD83C\uDFFB","\uD83D\uDC4D\uD83C\uDFFC","\uD83D\uDC4D\uD83C\uDFFD","\uD83D\uDC4D\uD83C\uDFFE","\uD83D\uDC4D\uD83C\uDFFF","\uD83D\uDC4E","\uD83D\uDC4E\uD83C\uDFFB","\uD83D\uDC4E\uD83C\uDFFC","\uD83D\uDC4E\uD83C\uDFFD","\uD83D\uDC4E\uD83C\uDFFE","\uD83D\uDC4E\uD83C\uDFFF","\uD83D\uDC4F","\uD83D\uDC4F\uD83C\uDFFB","\uD83D\uDC4F\uD83C\uDFFC","\uD83D\uDC4F\uD83C\uDFFD","\uD83D\uDC4F\uD83C\uDFFE","\uD83D\uDC4F\uD83C\uDFFF","\uD83D\uDC50","\uD83D\uDC50\uD83C\uDFFB","\uD83D\uDC50\uD83C\uDFFC","\uD83D\uDC50\uD83C\uDFFD","\uD83D\uDC50\uD83C\uDFFE","\uD83D\uDC50\uD83C\uDFFF","\uD83D\uDC85","\uD83D\uDC85\uD83C\uDFFB","\uD83D\uDC85\uD83C\uDFFC","\uD83D\uDC85\uD83C\uDFFD","\uD83D\uDC85\uD83C\uDFFE","\uD83D\uDC85\uD83C\uDFFF","\uD83D\uDCAA","\uD83D\uDCAA\uD83C\uDFFB","\uD83D\uDCAA\uD83C\uDFFC","\uD83D\uDCAA\uD83C\uDFFD","\uD83D\uDCAA\uD83C\uDFFE","\uD83D\uDCAA\uD83C\uDFFF","\uD83D\uDD90\uD83C\uDFFB","\uD83D\uDD90\uD83C\uDFFC","\uD83D\uDD90\uD83C\uDFFD","\uD83D\uDD90\uD83C\uDFFE","\uD83D\uDD90\uD83C\uDFFF","\uD83D\uDD90","\uD83D\uDD95","\uD83D\uDD95\uD83C\uDFFB","\uD83D\uDD95\uD83C\uDFFC","\uD83D\uDD95\uD83C\uDFFD","\uD83D\uDD95\uD83C\uDFFE","\uD83D\uDD95\uD83C\uDFFF","\uD83D\uDD96","\uD83D\uDD96\uD83C\uDFFB","\uD83D\uDD96\uD83C\uDFFC","\uD83D\uDD96\uD83C\uDFFD","\uD83D\uDD96\uD83C\uDFFE","\uD83D\uDD96\uD83C\uDFFF","\uD83D\uDE4C","\uD83D\uDE4C\uD83C\uDFFB","\uD83D\uDE4C\uD83C\uDFFC","\uD83D\uDE4C\uD83C\uDFFD","\uD83D\uDE4C\uD83C\uDFFE","\uD83D\uDE4C\uD83C\uDFFF","\uD83D\uDE4F","\uD83D\uDE4F\uD83C\uDFFB","\uD83D\uDE4F\uD83C\uDFFC","\uD83D\uDE4F\uD83C\uDFFD","\uD83D\uDE4F\uD83C\uDFFE","\uD83D\uDE4F\uD83C\uDFFF","\uD83E\uDD0C","\uD83E\uDD0C\uD83C\uDFFB","\uD83E\uDD0C\uD83C\uDFFC","\uD83E\uDD0C\uD83C\uDFFD","\uD83E\uDD0C\uD83C\uDFFE","\uD83E\uDD0C\uD83C\uDFFF","\uD83E\uDD0F","\uD83E\uDD0F\uD83C\uDFFB","\uD83E\uDD0F\uD83C\uDFFC","\uD83E\uDD0F\uD83C\uDFFD","\uD83E\uDD0F\uD83C\uDFFE","\uD83E\uDD0F\uD83C\uDFFF","\uD83E\uDD18","\uD83E\uDD18\uD83C\uDFFB","\uD83E\uDD18\uD83C\uDFFC","\uD83E\uDD18\uD83C\uDFFD","\uD83E\uDD18\uD83C\uDFFE","\uD83E\uDD18\uD83C\uDFFF","\uD83E\uDD19","\uD83E\uDD19\uD83C\uDFFB","\uD83E\uDD19\uD83C\uDFFC","\uD83E\uDD19\uD83C\uDFFD","\uD83E\uDD19\uD83C\uDFFE","\uD83E\uDD19\uD83C\uDFFF","\uD83E\uDD1A","\uD83E\uDD1A\uD83C\uDFFB","\uD83E\uDD1A\uD83C\uDFFC","\uD83E\uDD1A\uD83C\uDFFD","\uD83E\uDD1A\uD83C\uDFFE","\uD83E\uDD1A\uD83C\uDFFF","\uD83E\uDD1B","\uD83E\uDD1B\uD83C\uDFFB","\uD83E\uDD1B\uD83C\uDFFC","\uD83E\uDD1B\uD83C\uDFFD","\uD83E\uDD1B\uD83C\uDFFE","\uD83E\uDD1B\uD83C\uDFFF","\uD83E\uDD1C","\uD83E\uDD1C\uD83C\uDFFB","\uD83E\uDD1C\uD83C\uDFFC","\uD83E\uDD1C\uD83C\uDFFD","\uD83E\uDD1C\uD83C\uDFFE","\uD83E\uDD1C\uD83C\uDFFF","\uD83E\uDD1D","\uD83E\uDD1E","\uD83E\uDD1E\uD83C\uDFFB","\uD83E\uDD1E\uD83C\uDFFC","\uD83E\uDD1E\uD83C\uDFFD","\uD83E\uDD1E\uD83C\uDFFE","\uD83E\uDD1E\uD83C\uDFFF","\uD83E\uDD1F","\uD83E\uDD1F\uD83C\uDFFB","\uD83E\uDD1F\uD83C\uDFFC","\uD83E\uDD1F\uD83C\uDFFD","\uD83E\uDD1F\uD83C\uDFFE","\uD83E\uDD1F\uD83C\uDFFF","\uD83E\uDD32","\uD83E\uDD32\uD83C\uDFFB","\uD83E\uDD32\uD83C\uDFFC","\uD83E\uDD32\uD83C\uDFFD","\uD83E\uDD32\uD83C\uDFFE","\uD83E\uDD32\uD83C\uDFFF","\uD83E\uDD33","\uD83E\uDD33\uD83C\uDFFB","\uD83E\uDD33\uD83C\uDFFC","\uD83E\uDD33\uD83C\uDFFD","\uD83E\uDD33\uD83C\uDFFE","\uD83E\uDD33\uD83C\uDFFF","\uD83E\uDDB4","\uD83E\uDDB5","\uD83E\uDDB5\uD83C\uDFFB","\uD83E\uDDB5\uD83C\uDFFC","\uD83E\uDDB5\uD83C\uDFFD","\uD83E\uDDB5\uD83C\uDFFE","\uD83E\uDDB5\uD83C\uDFFF","\uD83E\uDDB6","\uD83E\uDDB6\uD83C\uDFFB","\uD83E\uDDB6\uD83C\uDFFC","\uD83E\uDDB6\uD83C\uDFFD","\uD83E\uDDB6\uD83C\uDFFE","\uD83E\uDDB6\uD83C\uDFFF","\uD83E\uDDB7","\uD83E\uDDBB","\uD83E\uDDBB\uD83C\uDFFB","\uD83E\uDDBB\uD83C\uDFFC","\uD83E\uDDBB\uD83C\uDFFD","\uD83E\uDDBB\uD83C\uDFFE","\uD83E\uDDBB\uD83C\uDFFF","\uD83E\uDDBE","\uD83E\uDDBF","\uD83E\uDDE0","\uD83E\uDEC0","\uD83E\uDEC1"],person:["\uD83C\uDF85","\uD83C\uDF85\uD83C\uDFFB","\uD83C\uDF85\uD83C\uDFFC","\uD83C\uDF85\uD83C\uDFFD","\uD83C\uDF85\uD83C\uDFFE","\uD83C\uDF85\uD83C\uDFFF","\uD83D\uDC66","\uD83D\uDC66\uD83C\uDFFB","\uD83D\uDC66\uD83C\uDFFC","\uD83D\uDC66\uD83C\uDFFD","\uD83D\uDC66\uD83C\uDFFE","\uD83D\uDC66\uD83C\uDFFF","\uD83D\uDC67","\uD83D\uDC67\uD83C\uDFFB","\uD83D\uDC67\uD83C\uDFFC","\uD83D\uDC67\uD83C\uDFFD","\uD83D\uDC67\uD83C\uDFFE","\uD83D\uDC67\uD83C\uDFFF","\uD83D\uDC68","\uD83D\uDC68","\uD83D\uDC68","\uD83D\uDC68","\uD83D\uDC68\uD83C\uDF3E","\uD83D\uDC68\uD83C\uDF73","\uD83D\uDC68\uD83C\uDF7C","\uD83D\uDC68\uD83C\uDF93","\uD83D\uDC68\uD83C\uDFA4","\uD83D\uDC68\uD83C\uDFA8","\uD83D\uDC68\uD83C\uDFEB","\uD83D\uDC68\uD83C\uDFED","\uD83D\uDC68\uD83D\uDCBB","\uD83D\uDC68\uD83D\uDCBC","\uD83D\uDC68\uD83D\uDD27","\uD83D\uDC68\uD83D\uDD2C","\uD83D\uDC68\uD83D\uDE80","\uD83D\uDC68\uD83D\uDE92","\uD83D\uDC68\uD83E\uDDB0","\uD83D\uDC68\uD83E\uDDB1","\uD83D\uDC68\uD83E\uDDB2","\uD83D\uDC68\uD83E\uDDB3","\uD83D\uDC68\uD83C\uDFFB","\uD83D\uDC68\uD83C\uDFFB","\uD83D\uDC68\uD83C\uDFFB","\uD83D\uDC68\uD83C\uDFFB","\uD83D\uDC68\uD83C\uDFFB\uD83C\uDF3E","\uD83D\uDC68\uD83C\uDFFB\uD83C\uDF73","\uD83D\uDC68\uD83C\uDFFB\uD83C\uDF7C","\uD83D\uDC68\uD83C\uDFFB\uD83C\uDF93","\uD83D\uDC68\uD83C\uDFFB\uD83C\uDFA4","\uD83D\uDC68\uD83C\uDFFB\uD83C\uDFA8","\uD83D\uDC68\uD83C\uDFFB\uD83C\uDFEB","\uD83D\uDC68\uD83C\uDFFB\uD83C\uDFED","\uD83D\uDC68\uD83C\uDFFB\uD83D\uDCBB","\uD83D\uDC68\uD83C\uDFFB\uD83D\uDCBC","\uD83D\uDC68\uD83C\uDFFB\uD83D\uDD27","\uD83D\uDC68\uD83C\uDFFB\uD83D\uDD2C","\uD83D\uDC68\uD83C\uDFFB\uD83D\uDE80","\uD83D\uDC68\uD83C\uDFFB\uD83D\uDE92","\uD83D\uDC68\uD83C\uDFFB\uD83E\uDDB0","\uD83D\uDC68\uD83C\uDFFB\uD83E\uDDB1","\uD83D\uDC68\uD83C\uDFFB\uD83E\uDDB2","\uD83D\uDC68\uD83C\uDFFB\uD83E\uDDB3","\uD83D\uDC68\uD83C\uDFFC","\uD83D\uDC68\uD83C\uDFFC","\uD83D\uDC68\uD83C\uDFFC","\uD83D\uDC68\uD83C\uDFFC","\uD83D\uDC68\uD83C\uDFFC\uD83C\uDF3E","\uD83D\uDC68\uD83C\uDFFC\uD83C\uDF73","\uD83D\uDC68\uD83C\uDFFC\uD83C\uDF7C","\uD83D\uDC68\uD83C\uDFFC\uD83C\uDF93","\uD83D\uDC68\uD83C\uDFFC\uD83C\uDFA4","\uD83D\uDC68\uD83C\uDFFC\uD83C\uDFA8","\uD83D\uDC68\uD83C\uDFFC\uD83C\uDFEB","\uD83D\uDC68\uD83C\uDFFC\uD83C\uDFED","\uD83D\uDC68\uD83C\uDFFC\uD83D\uDCBB","\uD83D\uDC68\uD83C\uDFFC\uD83D\uDCBC","\uD83D\uDC68\uD83C\uDFFC\uD83D\uDD27","\uD83D\uDC68\uD83C\uDFFC\uD83D\uDD2C","\uD83D\uDC68\uD83C\uDFFC\uD83D\uDE80","\uD83D\uDC68\uD83C\uDFFC\uD83D\uDE92","\uD83D\uDC68\uD83C\uDFFC\uD83E\uDDB0","\uD83D\uDC68\uD83C\uDFFC\uD83E\uDDB1","\uD83D\uDC68\uD83C\uDFFC\uD83E\uDDB2","\uD83D\uDC68\uD83C\uDFFC\uD83E\uDDB3","\uD83D\uDC68\uD83C\uDFFD","\uD83D\uDC68\uD83C\uDFFD","\uD83D\uDC68\uD83C\uDFFD","\uD83D\uDC68\uD83C\uDFFD","\uD83D\uDC68\uD83C\uDFFD\uD83C\uDF3E","\uD83D\uDC68\uD83C\uDFFD\uD83C\uDF73","\uD83D\uDC68\uD83C\uDFFD\uD83C\uDF7C","\uD83D\uDC68\uD83C\uDFFD\uD83C\uDF93","\uD83D\uDC68\uD83C\uDFFD\uD83C\uDFA4","\uD83D\uDC68\uD83C\uDFFD\uD83C\uDFA8","\uD83D\uDC68\uD83C\uDFFD\uD83C\uDFEB","\uD83D\uDC68\uD83C\uDFFD\uD83C\uDFED","\uD83D\uDC68\uD83C\uDFFD\uD83D\uDCBB","\uD83D\uDC68\uD83C\uDFFD\uD83D\uDCBC","\uD83D\uDC68\uD83C\uDFFD\uD83D\uDD27","\uD83D\uDC68\uD83C\uDFFD\uD83D\uDD2C","\uD83D\uDC68\uD83C\uDFFD\uD83D\uDE80","\uD83D\uDC68\uD83C\uDFFD\uD83D\uDE92","\uD83D\uDC68\uD83C\uDFFD\uD83E\uDDB0","\uD83D\uDC68\uD83C\uDFFD\uD83E\uDDB1","\uD83D\uDC68\uD83C\uDFFD\uD83E\uDDB2","\uD83D\uDC68\uD83C\uDFFD\uD83E\uDDB3","\uD83D\uDC68\uD83C\uDFFE","\uD83D\uDC68\uD83C\uDFFE","\uD83D\uDC68\uD83C\uDFFE","\uD83D\uDC68\uD83C\uDFFE","\uD83D\uDC68\uD83C\uDFFE\uD83C\uDF3E","\uD83D\uDC68\uD83C\uDFFE\uD83C\uDF73","\uD83D\uDC68\uD83C\uDFFE\uD83C\uDF7C","\uD83D\uDC68\uD83C\uDFFE\uD83C\uDF93","\uD83D\uDC68\uD83C\uDFFE\uD83C\uDFA4","\uD83D\uDC68\uD83C\uDFFE\uD83C\uDFA8","\uD83D\uDC68\uD83C\uDFFE\uD83C\uDFEB","\uD83D\uDC68\uD83C\uDFFE\uD83C\uDFED","\uD83D\uDC68\uD83C\uDFFE\uD83D\uDCBB","\uD83D\uDC68\uD83C\uDFFE\uD83D\uDCBC","\uD83D\uDC68\uD83C\uDFFE\uD83D\uDD27","\uD83D\uDC68\uD83C\uDFFE\uD83D\uDD2C","\uD83D\uDC68\uD83C\uDFFE\uD83D\uDE80","\uD83D\uDC68\uD83C\uDFFE\uD83D\uDE92","\uD83D\uDC68\uD83C\uDFFE\uD83E\uDDB0","\uD83D\uDC68\uD83C\uDFFE\uD83E\uDDB1","\uD83D\uDC68\uD83C\uDFFE\uD83E\uDDB2","\uD83D\uDC68\uD83C\uDFFE\uD83E\uDDB3","\uD83D\uDC68\uD83C\uDFFF","\uD83D\uDC68\uD83C\uDFFF","\uD83D\uDC68\uD83C\uDFFF","\uD83D\uDC68\uD83C\uDFFF","\uD83D\uDC68\uD83C\uDFFF\uD83C\uDF3E","\uD83D\uDC68\uD83C\uDFFF\uD83C\uDF73","\uD83D\uDC68\uD83C\uDFFF\uD83C\uDF7C","\uD83D\uDC68\uD83C\uDFFF\uD83C\uDF93","\uD83D\uDC68\uD83C\uDFFF\uD83C\uDFA4","\uD83D\uDC68\uD83C\uDFFF\uD83C\uDFA8","\uD83D\uDC68\uD83C\uDFFF\uD83C\uDFEB","\uD83D\uDC68\uD83C\uDFFF\uD83C\uDFED","\uD83D\uDC68\uD83C\uDFFF\uD83D\uDCBB","\uD83D\uDC68\uD83C\uDFFF\uD83D\uDCBC","\uD83D\uDC68\uD83C\uDFFF\uD83D\uDD27","\uD83D\uDC68\uD83C\uDFFF\uD83D\uDD2C","\uD83D\uDC68\uD83C\uDFFF\uD83D\uDE80","\uD83D\uDC68\uD83C\uDFFF\uD83D\uDE92","\uD83D\uDC68\uD83C\uDFFF\uD83E\uDDB0","\uD83D\uDC68\uD83C\uDFFF\uD83E\uDDB1","\uD83D\uDC68\uD83C\uDFFF\uD83E\uDDB2","\uD83D\uDC68\uD83C\uDFFF\uD83E\uDDB3","\uD83D\uDC69","\uD83D\uDC69","\uD83D\uDC69","\uD83D\uDC69","\uD83D\uDC69\uD83C\uDF3E","\uD83D\uDC69\uD83C\uDF73","\uD83D\uDC69\uD83C\uDF7C","\uD83D\uDC69\uD83C\uDF93","\uD83D\uDC69\uD83C\uDFA4","\uD83D\uDC69\uD83C\uDFA8","\uD83D\uDC69\uD83C\uDFEB","\uD83D\uDC69\uD83C\uDFED","\uD83D\uDC69\uD83D\uDCBB","\uD83D\uDC69\uD83D\uDCBC","\uD83D\uDC69\uD83D\uDD27","\uD83D\uDC69\uD83D\uDD2C","\uD83D\uDC69\uD83D\uDE80","\uD83D\uDC69\uD83D\uDE92","\uD83D\uDC69\uD83E\uDDB0","\uD83D\uDC69\uD83E\uDDB1","\uD83D\uDC69\uD83E\uDDB2","\uD83D\uDC69\uD83E\uDDB3","\uD83D\uDC69\uD83C\uDFFB","\uD83D\uDC69\uD83C\uDFFB","\uD83D\uDC69\uD83C\uDFFB","\uD83D\uDC69\uD83C\uDFFB","\uD83D\uDC69\uD83C\uDFFB\uD83C\uDF3E","\uD83D\uDC69\uD83C\uDFFB\uD83C\uDF73","\uD83D\uDC69\uD83C\uDFFB\uD83C\uDF7C","\uD83D\uDC69\uD83C\uDFFB\uD83C\uDF93","\uD83D\uDC69\uD83C\uDFFB\uD83C\uDFA4","\uD83D\uDC69\uD83C\uDFFB\uD83C\uDFA8","\uD83D\uDC69\uD83C\uDFFB\uD83C\uDFEB","\uD83D\uDC69\uD83C\uDFFB\uD83C\uDFED","\uD83D\uDC69\uD83C\uDFFB\uD83D\uDCBB","\uD83D\uDC69\uD83C\uDFFB\uD83D\uDCBC","\uD83D\uDC69\uD83C\uDFFB\uD83D\uDD27","\uD83D\uDC69\uD83C\uDFFB\uD83D\uDD2C","\uD83D\uDC69\uD83C\uDFFB\uD83D\uDE80","\uD83D\uDC69\uD83C\uDFFB\uD83D\uDE92","\uD83D\uDC69\uD83C\uDFFB\uD83E\uDDB0","\uD83D\uDC69\uD83C\uDFFB\uD83E\uDDB1","\uD83D\uDC69\uD83C\uDFFB\uD83E\uDDB2","\uD83D\uDC69\uD83C\uDFFB\uD83E\uDDB3","\uD83D\uDC69\uD83C\uDFFC","\uD83D\uDC69\uD83C\uDFFC","\uD83D\uDC69\uD83C\uDFFC","\uD83D\uDC69\uD83C\uDFFC","\uD83D\uDC69\uD83C\uDFFC\uD83C\uDF3E","\uD83D\uDC69\uD83C\uDFFC\uD83C\uDF73","\uD83D\uDC69\uD83C\uDFFC\uD83C\uDF7C","\uD83D\uDC69\uD83C\uDFFC\uD83C\uDF93","\uD83D\uDC69\uD83C\uDFFC\uD83C\uDFA4","\uD83D\uDC69\uD83C\uDFFC\uD83C\uDFA8","\uD83D\uDC69\uD83C\uDFFC\uD83C\uDFEB","\uD83D\uDC69\uD83C\uDFFC\uD83C\uDFED","\uD83D\uDC69\uD83C\uDFFC\uD83D\uDCBB","\uD83D\uDC69\uD83C\uDFFC\uD83D\uDCBC","\uD83D\uDC69\uD83C\uDFFC\uD83D\uDD27","\uD83D\uDC69\uD83C\uDFFC\uD83D\uDD2C","\uD83D\uDC69\uD83C\uDFFC\uD83D\uDE80","\uD83D\uDC69\uD83C\uDFFC\uD83D\uDE92","\uD83D\uDC69\uD83C\uDFFC\uD83E\uDDB0","\uD83D\uDC69\uD83C\uDFFC\uD83E\uDDB1","\uD83D\uDC69\uD83C\uDFFC\uD83E\uDDB2","\uD83D\uDC69\uD83C\uDFFC\uD83E\uDDB3","\uD83D\uDC69\uD83C\uDFFD","\uD83D\uDC69\uD83C\uDFFD","\uD83D\uDC69\uD83C\uDFFD","\uD83D\uDC69\uD83C\uDFFD","\uD83D\uDC69\uD83C\uDFFD\uD83C\uDF3E","\uD83D\uDC69\uD83C\uDFFD\uD83C\uDF73","\uD83D\uDC69\uD83C\uDFFD\uD83C\uDF7C","\uD83D\uDC69\uD83C\uDFFD\uD83C\uDF93","\uD83D\uDC69\uD83C\uDFFD\uD83C\uDFA4","\uD83D\uDC69\uD83C\uDFFD\uD83C\uDFA8","\uD83D\uDC69\uD83C\uDFFD\uD83C\uDFEB","\uD83D\uDC69\uD83C\uDFFD\uD83C\uDFED","\uD83D\uDC69\uD83C\uDFFD\uD83D\uDCBB","\uD83D\uDC69\uD83C\uDFFD\uD83D\uDCBC","\uD83D\uDC69\uD83C\uDFFD\uD83D\uDD27","\uD83D\uDC69\uD83C\uDFFD\uD83D\uDD2C","\uD83D\uDC69\uD83C\uDFFD\uD83D\uDE80","\uD83D\uDC69\uD83C\uDFFD\uD83D\uDE92","\uD83D\uDC69\uD83C\uDFFD\uD83E\uDDB0","\uD83D\uDC69\uD83C\uDFFD\uD83E\uDDB1","\uD83D\uDC69\uD83C\uDFFD\uD83E\uDDB2","\uD83D\uDC69\uD83C\uDFFD\uD83E\uDDB3","\uD83D\uDC69\uD83C\uDFFE","\uD83D\uDC69\uD83C\uDFFE","\uD83D\uDC69\uD83C\uDFFE","\uD83D\uDC69\uD83C\uDFFE","\uD83D\uDC69\uD83C\uDFFE\uD83C\uDF3E","\uD83D\uDC69\uD83C\uDFFE\uD83C\uDF73","\uD83D\uDC69\uD83C\uDFFE\uD83C\uDF7C","\uD83D\uDC69\uD83C\uDFFE\uD83C\uDF93","\uD83D\uDC69\uD83C\uDFFE\uD83C\uDFA4","\uD83D\uDC69\uD83C\uDFFE\uD83C\uDFA8","\uD83D\uDC69\uD83C\uDFFE\uD83C\uDFEB","\uD83D\uDC69\uD83C\uDFFE\uD83C\uDFED","\uD83D\uDC69\uD83C\uDFFE\uD83D\uDCBB","\uD83D\uDC69\uD83C\uDFFE\uD83D\uDCBC","\uD83D\uDC69\uD83C\uDFFE\uD83D\uDD27","\uD83D\uDC69\uD83C\uDFFE\uD83D\uDD2C","\uD83D\uDC69\uD83C\uDFFE\uD83D\uDE80","\uD83D\uDC69\uD83C\uDFFE\uD83D\uDE92","\uD83D\uDC69\uD83C\uDFFE\uD83E\uDDB0","\uD83D\uDC69\uD83C\uDFFE\uD83E\uDDB1","\uD83D\uDC69\uD83C\uDFFE\uD83E\uDDB2","\uD83D\uDC69\uD83C\uDFFE\uD83E\uDDB3","\uD83D\uDC69\uD83C\uDFFF","\uD83D\uDC69\uD83C\uDFFF","\uD83D\uDC69\uD83C\uDFFF","\uD83D\uDC69\uD83C\uDFFF","\uD83D\uDC69\uD83C\uDFFF\uD83C\uDF3E","\uD83D\uDC69\uD83C\uDFFF\uD83C\uDF73","\uD83D\uDC69\uD83C\uDFFF\uD83C\uDF7C","\uD83D\uDC69\uD83C\uDFFF\uD83C\uDF93","\uD83D\uDC69\uD83C\uDFFF\uD83C\uDFA4","\uD83D\uDC69\uD83C\uDFFF\uD83C\uDFA8","\uD83D\uDC69\uD83C\uDFFF\uD83C\uDFEB","\uD83D\uDC69\uD83C\uDFFF\uD83C\uDFED","\uD83D\uDC69\uD83C\uDFFF\uD83D\uDCBB","\uD83D\uDC69\uD83C\uDFFF\uD83D\uDCBC","\uD83D\uDC69\uD83C\uDFFF\uD83D\uDD27","\uD83D\uDC69\uD83C\uDFFF\uD83D\uDD2C","\uD83D\uDC69\uD83C\uDFFF\uD83D\uDE80","\uD83D\uDC69\uD83C\uDFFF\uD83D\uDE92","\uD83D\uDC69\uD83C\uDFFF\uD83E\uDDB0","\uD83D\uDC69\uD83C\uDFFF\uD83E\uDDB1","\uD83D\uDC69\uD83C\uDFFF\uD83E\uDDB2","\uD83D\uDC69\uD83C\uDFFF\uD83E\uDDB3","\uD83D\uDC6E","\uD83D\uDC6E","\uD83D\uDC6E","\uD83D\uDC6E\uD83C\uDFFB","\uD83D\uDC6E\uD83C\uDFFB","\uD83D\uDC6E\uD83C\uDFFB","\uD83D\uDC6E\uD83C\uDFFC","\uD83D\uDC6E\uD83C\uDFFC","\uD83D\uDC6E\uD83C\uDFFC","\uD83D\uDC6E\uD83C\uDFFD","\uD83D\uDC6E\uD83C\uDFFD","\uD83D\uDC6E\uD83C\uDFFD","\uD83D\uDC6E\uD83C\uDFFE","\uD83D\uDC6E\uD83C\uDFFE","\uD83D\uDC6E\uD83C\uDFFE","\uD83D\uDC6E\uD83C\uDFFF","\uD83D\uDC6E\uD83C\uDFFF","\uD83D\uDC6E\uD83C\uDFFF","\uD83D\uDC70","\uD83D\uDC70","\uD83D\uDC70","\uD83D\uDC70\uD83C\uDFFB","\uD83D\uDC70\uD83C\uDFFB","\uD83D\uDC70\uD83C\uDFFB","\uD83D\uDC70\uD83C\uDFFC","\uD83D\uDC70\uD83C\uDFFC","\uD83D\uDC70\uD83C\uDFFC","\uD83D\uDC70\uD83C\uDFFD","\uD83D\uDC70\uD83C\uDFFD","\uD83D\uDC70\uD83C\uDFFD","\uD83D\uDC70\uD83C\uDFFE","\uD83D\uDC70\uD83C\uDFFE","\uD83D\uDC70\uD83C\uDFFE","\uD83D\uDC70\uD83C\uDFFF","\uD83D\uDC70\uD83C\uDFFF","\uD83D\uDC70\uD83C\uDFFF","\uD83D\uDC71","\uD83D\uDC71","\uD83D\uDC71","\uD83D\uDC71\uD83C\uDFFB","\uD83D\uDC71\uD83C\uDFFB","\uD83D\uDC71\uD83C\uDFFB","\uD83D\uDC71\uD83C\uDFFC","\uD83D\uDC71\uD83C\uDFFC","\uD83D\uDC71\uD83C\uDFFC","\uD83D\uDC71\uD83C\uDFFD","\uD83D\uDC71\uD83C\uDFFD","\uD83D\uDC71\uD83C\uDFFD","\uD83D\uDC71\uD83C\uDFFE","\uD83D\uDC71\uD83C\uDFFE","\uD83D\uDC71\uD83C\uDFFE","\uD83D\uDC71\uD83C\uDFFF","\uD83D\uDC71\uD83C\uDFFF","\uD83D\uDC71\uD83C\uDFFF","\uD83D\uDC72","\uD83D\uDC72\uD83C\uDFFB","\uD83D\uDC72\uD83C\uDFFC","\uD83D\uDC72\uD83C\uDFFD","\uD83D\uDC72\uD83C\uDFFE","\uD83D\uDC72\uD83C\uDFFF","\uD83D\uDC73","\uD83D\uDC73","\uD83D\uDC73","\uD83D\uDC73\uD83C\uDFFB","\uD83D\uDC73\uD83C\uDFFB","\uD83D\uDC73\uD83C\uDFFB","\uD83D\uDC73\uD83C\uDFFC","\uD83D\uDC73\uD83C\uDFFC","\uD83D\uDC73\uD83C\uDFFC","\uD83D\uDC73\uD83C\uDFFD","\uD83D\uDC73\uD83C\uDFFD","\uD83D\uDC73\uD83C\uDFFD","\uD83D\uDC73\uD83C\uDFFE","\uD83D\uDC73\uD83C\uDFFE","\uD83D\uDC73\uD83C\uDFFE","\uD83D\uDC73\uD83C\uDFFF","\uD83D\uDC73\uD83C\uDFFF","\uD83D\uDC73\uD83C\uDFFF","\uD83D\uDC74","\uD83D\uDC74\uD83C\uDFFB","\uD83D\uDC74\uD83C\uDFFC","\uD83D\uDC74\uD83C\uDFFD","\uD83D\uDC74\uD83C\uDFFE","\uD83D\uDC74\uD83C\uDFFF","\uD83D\uDC75","\uD83D\uDC75\uD83C\uDFFB","\uD83D\uDC75\uD83C\uDFFC","\uD83D\uDC75\uD83C\uDFFD","\uD83D\uDC75\uD83C\uDFFE","\uD83D\uDC75\uD83C\uDFFF","\uD83D\uDC76","\uD83D\uDC76\uD83C\uDFFB","\uD83D\uDC76\uD83C\uDFFC","\uD83D\uDC76\uD83C\uDFFD","\uD83D\uDC76\uD83C\uDFFE","\uD83D\uDC76\uD83C\uDFFF","\uD83D\uDC77","\uD83D\uDC77","\uD83D\uDC77","\uD83D\uDC77\uD83C\uDFFB","\uD83D\uDC77\uD83C\uDFFB","\uD83D\uDC77\uD83C\uDFFB","\uD83D\uDC77\uD83C\uDFFC","\uD83D\uDC77\uD83C\uDFFC","\uD83D\uDC77\uD83C\uDFFC","\uD83D\uDC77\uD83C\uDFFD","\uD83D\uDC77\uD83C\uDFFD","\uD83D\uDC77\uD83C\uDFFD","\uD83D\uDC77\uD83C\uDFFE","\uD83D\uDC77\uD83C\uDFFE","\uD83D\uDC77\uD83C\uDFFE","\uD83D\uDC77\uD83C\uDFFF","\uD83D\uDC77\uD83C\uDFFF","\uD83D\uDC77\uD83C\uDFFF","\uD83D\uDC78","\uD83D\uDC78\uD83C\uDFFB","\uD83D\uDC78\uD83C\uDFFC","\uD83D\uDC78\uD83C\uDFFD","\uD83D\uDC78\uD83C\uDFFE","\uD83D\uDC78\uD83C\uDFFF","\uD83D\uDC7C","\uD83D\uDC7C\uD83C\uDFFB","\uD83D\uDC7C\uD83C\uDFFC","\uD83D\uDC7C\uD83C\uDFFD","\uD83D\uDC7C\uD83C\uDFFE","\uD83D\uDC7C\uD83C\uDFFF","\uD83D\uDC81","\uD83D\uDC81","\uD83D\uDC81","\uD83D\uDC81\uD83C\uDFFB","\uD83D\uDC81\uD83C\uDFFB","\uD83D\uDC81\uD83C\uDFFB","\uD83D\uDC81\uD83C\uDFFC","\uD83D\uDC81\uD83C\uDFFC","\uD83D\uDC81\uD83C\uDFFC","\uD83D\uDC81\uD83C\uDFFD","\uD83D\uDC81\uD83C\uDFFD","\uD83D\uDC81\uD83C\uDFFD","\uD83D\uDC81\uD83C\uDFFE","\uD83D\uDC81\uD83C\uDFFE","\uD83D\uDC81\uD83C\uDFFE","\uD83D\uDC81\uD83C\uDFFF","\uD83D\uDC81\uD83C\uDFFF","\uD83D\uDC81\uD83C\uDFFF","\uD83D\uDC82","\uD83D\uDC82","\uD83D\uDC82","\uD83D\uDC82\uD83C\uDFFB","\uD83D\uDC82\uD83C\uDFFB","\uD83D\uDC82\uD83C\uDFFB","\uD83D\uDC82\uD83C\uDFFC","\uD83D\uDC82\uD83C\uDFFC","\uD83D\uDC82\uD83C\uDFFC","\uD83D\uDC82\uD83C\uDFFD","\uD83D\uDC82\uD83C\uDFFD","\uD83D\uDC82\uD83C\uDFFD","\uD83D\uDC82\uD83C\uDFFE","\uD83D\uDC82\uD83C\uDFFE","\uD83D\uDC82\uD83C\uDFFE","\uD83D\uDC82\uD83C\uDFFF","\uD83D\uDC82\uD83C\uDFFF","\uD83D\uDC82\uD83C\uDFFF","\uD83D\uDC86","\uD83D\uDC86","\uD83D\uDC86","\uD83D\uDC86\uD83C\uDFFB","\uD83D\uDC86\uD83C\uDFFB","\uD83D\uDC86\uD83C\uDFFB","\uD83D\uDC86\uD83C\uDFFC","\uD83D\uDC86\uD83C\uDFFC","\uD83D\uDC86\uD83C\uDFFC","\uD83D\uDC86\uD83C\uDFFD","\uD83D\uDC86\uD83C\uDFFD","\uD83D\uDC86\uD83C\uDFFD","\uD83D\uDC86\uD83C\uDFFE","\uD83D\uDC86\uD83C\uDFFE","\uD83D\uDC86\uD83C\uDFFE","\uD83D\uDC86\uD83C\uDFFF","\uD83D\uDC86\uD83C\uDFFF","\uD83D\uDC86\uD83C\uDFFF","\uD83D\uDC87","\uD83D\uDC87\uD83C\uDFFB","\uD83D\uDC87\uD83C\uDFFC","\uD83D\uDC87\uD83C\uDFFD","\uD83D\uDD75\uD83C\uDFFB","\uD83D\uDD75\uD83C\uDFFB","\uD83D\uDD75\uD83C\uDFFB","\uD83D\uDD75\uD83C\uDFFC","\uD83D\uDD75\uD83C\uDFFC","\uD83D\uDD75\uD83C\uDFFC","\uD83D\uDD75\uD83C\uDFFD","\uD83D\uDD75\uD83C\uDFFD","\uD83D\uDD75\uD83C\uDFFD","\uD83D\uDD75\uD83C\uDFFE","\uD83D\uDD75\uD83C\uDFFE","\uD83D\uDD75\uD83C\uDFFE","\uD83D\uDD75\uD83C\uDFFF","\uD83D\uDD75\uD83C\uDFFF","\uD83D\uDD75\uD83C\uDFFF","\uD83D\uDD75","\uD83D\uDD75","\uD83D\uDD75","\uD83D\uDE45","\uD83D\uDE45","\uD83D\uDE45","\uD83D\uDE45\uD83C\uDFFB","\uD83D\uDE45\uD83C\uDFFB","\uD83D\uDE45\uD83C\uDFFB","\uD83D\uDE45\uD83C\uDFFC","\uD83D\uDE45\uD83C\uDFFC","\uD83D\uDE45\uD83C\uDFFC","\uD83D\uDE45\uD83C\uDFFD","\uD83D\uDE45\uD83C\uDFFD","\uD83D\uDE45\uD83C\uDFFD","\uD83D\uDE45\uD83C\uDFFE","\uD83D\uDE45\uD83C\uDFFE","\uD83D\uDE45\uD83C\uDFFE","\uD83D\uDE45\uD83C\uDFFF","\uD83D\uDE45\uD83C\uDFFF","\uD83D\uDE45\uD83C\uDFFF","\uD83D\uDE46","\uD83D\uDE46","\uD83D\uDE46","\uD83D\uDE46\uD83C\uDFFB","\uD83D\uDE46\uD83C\uDFFB","\uD83D\uDE46\uD83C\uDFFB","\uD83D\uDE46\uD83C\uDFFC","\uD83D\uDE46\uD83C\uDFFC","\uD83D\uDE46\uD83C\uDFFC","\uD83D\uDE46\uD83C\uDFFD","\uD83D\uDE46\uD83C\uDFFD","\uD83D\uDE46\uD83C\uDFFD","\uD83D\uDE46\uD83C\uDFFE","\uD83D\uDE46\uD83C\uDFFE","\uD83D\uDE46\uD83C\uDFFE","\uD83D\uDE46\uD83C\uDFFF","\uD83D\uDE46\uD83C\uDFFF","\uD83D\uDE46\uD83C\uDFFF","\uD83D\uDE47","\uD83D\uDE47","\uD83D\uDE47","\uD83D\uDE47\uD83C\uDFFB","\uD83D\uDE47\uD83C\uDFFB","\uD83D\uDE47\uD83C\uDFFB","\uD83D\uDE47\uD83C\uDFFC","\uD83D\uDE47\uD83C\uDFFC","\uD83D\uDE47\uD83C\uDFFC","\uD83D\uDE47\uD83C\uDFFD","\uD83D\uDE47\uD83C\uDFFD","\uD83D\uDE47\uD83C\uDFFD","\uD83D\uDE47\uD83C\uDFFE","\uD83D\uDE47\uD83C\uDFFE","\uD83D\uDE47\uD83C\uDFFE","\uD83D\uDE47\uD83C\uDFFF","\uD83D\uDE47\uD83C\uDFFF","\uD83D\uDE47\uD83C\uDFFF","\uD83D\uDE4B","\uD83D\uDE4B","\uD83D\uDE4B","\uD83D\uDE4B\uD83C\uDFFB","\uD83D\uDE4B\uD83C\uDFFB","\uD83D\uDE4B\uD83C\uDFFB","\uD83D\uDE4B\uD83C\uDFFC","\uD83D\uDE4B\uD83C\uDFFC","\uD83D\uDE4B\uD83C\uDFFC","\uD83D\uDE4B\uD83C\uDFFD","\uD83D\uDE4B\uD83C\uDFFD","\uD83D\uDE4B\uD83C\uDFFD","\uD83D\uDE4B\uD83C\uDFFE","\uD83D\uDE4B\uD83C\uDFFE","\uD83D\uDE4B\uD83C\uDFFE","\uD83D\uDE4B\uD83C\uDFFF","\uD83D\uDE4B\uD83C\uDFFF","\uD83D\uDE4B\uD83C\uDFFF","\uD83D\uDE4D","\uD83D\uDE4D","\uD83D\uDE4D","\uD83D\uDE4D\uD83C\uDFFB","\uD83D\uDE4D\uD83C\uDFFB","\uD83D\uDE4D\uD83C\uDFFB","\uD83D\uDE4D\uD83C\uDFFC","\uD83D\uDE4D\uD83C\uDFFC","\uD83D\uDE4D\uD83C\uDFFC","\uD83D\uDE4D\uD83C\uDFFD","\uD83D\uDE4D\uD83C\uDFFD","\uD83D\uDE4D\uD83C\uDFFD","\uD83D\uDE4D\uD83C\uDFFE","\uD83D\uDE4D\uD83C\uDFFE","\uD83D\uDE4D\uD83C\uDFFE","\uD83D\uDE4D\uD83C\uDFFF","\uD83D\uDE4D\uD83C\uDFFF","\uD83D\uDE4D\uD83C\uDFFF","\uD83D\uDE4E","\uD83D\uDE4E","\uD83D\uDE4E","\uD83D\uDE4E\uD83C\uDFFB","\uD83D\uDE4E\uD83C\uDFFB","\uD83D\uDE4E\uD83C\uDFFB","\uD83D\uDE4E\uD83C\uDFFC","\uD83D\uDE4E\uD83C\uDFFC","\uD83D\uDE4E\uD83C\uDFFC","\uD83D\uDE4E\uD83C\uDFFD","\uD83D\uDE4E\uD83C\uDFFD","\uD83D\uDE4E\uD83C\uDFFD","\uD83D\uDE4E\uD83C\uDFFE","\uD83D\uDE4E\uD83C\uDFFE","\uD83D\uDE4E\uD83C\uDFFE","\uD83D\uDE4E\uD83C\uDFFF","\uD83D\uDE4E\uD83C\uDFFF","\uD83D\uDE4E\uD83C\uDFFF","\uD83E\uDD26","\uD83E\uDD26","\uD83E\uDD26","\uD83E\uDD26\uD83C\uDFFB","\uD83E\uDD26\uD83C\uDFFB","\uD83E\uDD26\uD83C\uDFFB","\uD83E\uDD26\uD83C\uDFFC","\uD83E\uDD26\uD83C\uDFFC","\uD83E\uDD26\uD83C\uDFFC","\uD83E\uDD26\uD83C\uDFFD","\uD83E\uDD26\uD83C\uDFFD","\uD83E\uDD26\uD83C\uDFFD","\uD83E\uDD26\uD83C\uDFFE","\uD83E\uDD26\uD83C\uDFFE","\uD83E\uDD26\uD83C\uDFFE","\uD83E\uDD26\uD83C\uDFFF","\uD83E\uDD26\uD83C\uDFFF","\uD83E\uDD26\uD83C\uDFFF","\uD83E\uDD30","\uD83E\uDD30\uD83C\uDFFB","\uD83E\uDD30\uD83C\uDFFC","\uD83E\uDD30\uD83C\uDFFD","\uD83E\uDD30\uD83C\uDFFE","\uD83E\uDD30\uD83C\uDFFF","\uD83E\uDD31","\uD83E\uDD31\uD83C\uDFFB","\uD83E\uDD31\uD83C\uDFFC","\uD83E\uDD31\uD83C\uDFFD","\uD83E\uDD31\uD83C\uDFFE","\uD83E\uDD31\uD83C\uDFFF","\uD83E\uDD34","\uD83E\uDD34\uD83C\uDFFB","\uD83E\uDD34\uD83C\uDFFC","\uD83E\uDD34\uD83C\uDFFD","\uD83E\uDD34\uD83C\uDFFE","\uD83E\uDD34\uD83C\uDFFF","\uD83E\uDD35","\uD83E\uDD35","\uD83E\uDD35","\uD83E\uDD35\uD83C\uDFFB","\uD83E\uDD35\uD83C\uDFFB","\uD83E\uDD35\uD83C\uDFFB","\uD83E\uDD35\uD83C\uDFFC","\uD83E\uDD35\uD83C\uDFFC","\uD83E\uDD35\uD83C\uDFFC","\uD83E\uDD35\uD83C\uDFFD","\uD83E\uDD35\uD83C\uDFFD","\uD83E\uDD35\uD83C\uDFFD","\uD83E\uDD35\uD83C\uDFFE","\uD83E\uDD35\uD83C\uDFFE","\uD83E\uDD35\uD83C\uDFFE","\uD83E\uDD35\uD83C\uDFFF","\uD83E\uDD35\uD83C\uDFFF","\uD83E\uDD35\uD83C\uDFFF","\uD83E\uDD36","\uD83E\uDD36\uD83C\uDFFB","\uD83E\uDD36\uD83C\uDFFC","\uD83E\uDD36\uD83C\uDFFD","\uD83E\uDD36\uD83C\uDFFE","\uD83E\uDD36\uD83C\uDFFF","\uD83E\uDD37","\uD83E\uDD37","\uD83E\uDD37","\uD83E\uDD37\uD83C\uDFFB","\uD83E\uDD37\uD83C\uDFFB","\uD83E\uDD37\uD83C\uDFFB","\uD83E\uDD37\uD83C\uDFFC","\uD83E\uDD37\uD83C\uDFFC","\uD83E\uDD37\uD83C\uDFFC","\uD83E\uDD37\uD83C\uDFFD","\uD83E\uDD37\uD83C\uDFFD","\uD83E\uDD37\uD83C\uDFFD","\uD83E\uDD37\uD83C\uDFFE","\uD83E\uDD37\uD83C\uDFFE","\uD83E\uDD37\uD83C\uDFFE","\uD83E\uDD37\uD83C\uDFFF","\uD83E\uDD37\uD83C\uDFFF","\uD83E\uDD37\uD83C\uDFFF","\uD83E\uDD77","\uD83E\uDD77\uD83C\uDFFB","\uD83E\uDD77\uD83C\uDFFC","\uD83E\uDD77\uD83C\uDFFD","\uD83E\uDD77\uD83C\uDFFE","\uD83E\uDD77\uD83C\uDFFF","\uD83E\uDDB8","\uD83E\uDDB8","\uD83E\uDDB8","\uD83E\uDDB8\uD83C\uDFFB","\uD83E\uDDB8\uD83C\uDFFB","\uD83E\uDDB8\uD83C\uDFFB","\uD83E\uDDB8\uD83C\uDFFC","\uD83E\uDDB8\uD83C\uDFFC","\uD83E\uDDB8\uD83C\uDFFC","\uD83E\uDDB8\uD83C\uDFFD","\uD83E\uDDB8\uD83C\uDFFD","\uD83E\uDDB8\uD83C\uDFFD","\uD83E\uDDB8\uD83C\uDFFE","\uD83E\uDDB8\uD83C\uDFFE","\uD83E\uDDB8\uD83C\uDFFE","\uD83E\uDDB8\uD83C\uDFFF","\uD83E\uDDB8\uD83C\uDFFF","\uD83E\uDDB8\uD83C\uDFFF","\uD83E\uDDB9","\uD83E\uDDB9","\uD83E\uDDB9","\uD83E\uDDB9\uD83C\uDFFB","\uD83E\uDDB9\uD83C\uDFFB","\uD83E\uDDB9\uD83C\uDFFB","\uD83E\uDDB9\uD83C\uDFFC","\uD83E\uDDB9\uD83C\uDFFC","\uD83E\uDDB9\uD83C\uDFFC","\uD83E\uDDB9\uD83C\uDFFD","\uD83E\uDDB9\uD83C\uDFFD","\uD83E\uDDB9\uD83C\uDFFD","\uD83E\uDDB9\uD83C\uDFFE","\uD83E\uDDB9\uD83C\uDFFE","\uD83E\uDDB9\uD83C\uDFFE","\uD83E\uDDB9\uD83C\uDFFF","\uD83E\uDDB9\uD83C\uDFFF","\uD83E\uDDB9\uD83C\uDFFF","\uD83E\uDDCF","\uD83E\uDDCF","\uD83E\uDDCF","\uD83E\uDDCF\uD83C\uDFFB","\uD83E\uDDCF\uD83C\uDFFB","\uD83E\uDDCF\uD83C\uDFFB","\uD83E\uDDCF\uD83C\uDFFC","\uD83E\uDDCF\uD83C\uDFFC","\uD83E\uDDCF\uD83C\uDFFC","\uD83E\uDDCF\uD83C\uDFFD","\uD83E\uDDCF\uD83C\uDFFD","\uD83E\uDDCF\uD83C\uDFFD","\uD83E\uDDCF\uD83C\uDFFE","\uD83E\uDDCF\uD83C\uDFFE","\uD83E\uDDCF\uD83C\uDFFE","\uD83E\uDDCF\uD83C\uDFFF","\uD83E\uDDCF\uD83C\uDFFF","\uD83E\uDDCF\uD83C\uDFFF","\uD83E\uDDD1","\uD83E\uDDD1","\uD83E\uDDD1","\uD83E\uDDD1","\uD83E\uDDD1\uD83C\uDF3E","\uD83E\uDDD1\uD83C\uDF73","\uD83E\uDDD1\uD83C\uDF7C","\uD83E\uDDD1\uD83C\uDF84","\uD83E\uDDD1\uD83C\uDF93","\uD83E\uDDD1\uD83C\uDFA4","\uD83E\uDDD1\uD83C\uDFA8","\uD83E\uDDD1\uD83C\uDFEB","\uD83E\uDDD1\uD83C\uDFED","\uD83E\uDDD1\uD83D\uDCBB","\uD83E\uDDD1\uD83D\uDCBC","\uD83E\uDDD1\uD83D\uDD27","\uD83E\uDDD1\uD83D\uDD2C","\uD83E\uDDD1\uD83D\uDE80","\uD83E\uDDD1\uD83D\uDE92","\uD83E\uDDD1\uD83E\uDDB0","\uD83E\uDDD1\uD83E\uDDB1","\uD83E\uDDD1\uD83E\uDDB2","\uD83E\uDDD1\uD83E\uDDB3","\uD83E\uDDD1\uD83C\uDFFB","\uD83E\uDDD1\uD83C\uDFFB","\uD83E\uDDD1\uD83C\uDFFB","\uD83E\uDDD1\uD83C\uDFFB","\uD83E\uDDD1\uD83C\uDFFB\uD83C\uDF3E","\uD83E\uDDD1\uD83C\uDFFB\uD83C\uDF73","\uD83E\uDDD1\uD83C\uDFFB\uD83C\uDF7C","\uD83E\uDDD1\uD83C\uDFFB\uD83C\uDF84","\uD83E\uDDD1\uD83C\uDFFB\uD83C\uDF93","\uD83E\uDDD1\uD83C\uDFFB\uD83C\uDFA4","\uD83E\uDDD1\uD83C\uDFFB\uD83C\uDFA8","\uD83E\uDDD1\uD83C\uDFFB\uD83C\uDFEB","\uD83E\uDDD1\uD83C\uDFFB\uD83C\uDFED","\uD83E\uDDD1\uD83C\uDFFB\uD83D\uDCBB","\uD83E\uDDD1\uD83C\uDFFB\uD83D\uDCBC","\uD83E\uDDD1\uD83C\uDFFB\uD83D\uDD27","\uD83E\uDDD1\uD83C\uDFFB\uD83D\uDD2C","\uD83E\uDDD1\uD83C\uDFFB\uD83D\uDE80","\uD83E\uDDD1\uD83C\uDFFB\uD83D\uDE92","\uD83E\uDDD1\uD83C\uDFFB\uD83E\uDDB0","\uD83E\uDDD1\uD83C\uDFFB\uD83E\uDDB1","\uD83E\uDDD1\uD83C\uDFFB\uD83E\uDDB2","\uD83E\uDDD1\uD83C\uDFFB\uD83E\uDDB3","\uD83E\uDDD1\uD83C\uDFFC","\uD83E\uDDD1\uD83C\uDFFC","\uD83E\uDDD1\uD83C\uDFFC","\uD83E\uDDD1\uD83C\uDFFC","\uD83E\uDDD1\uD83C\uDFFC\uD83C\uDF3E","\uD83E\uDDD1\uD83C\uDFFC\uD83C\uDF73","\uD83E\uDDD1\uD83C\uDFFC\uD83C\uDF7C","\uD83E\uDDD1\uD83C\uDFFC\uD83C\uDF84","\uD83E\uDDD1\uD83C\uDFFC\uD83C\uDF93","\uD83E\uDDD1\uD83C\uDFFC\uD83C\uDFA4","\uD83E\uDDD1\uD83C\uDFFC\uD83C\uDFA8","\uD83E\uDDD1\uD83C\uDFFC\uD83C\uDFEB","\uD83E\uDDD1\uD83C\uDFFC\uD83C\uDFED","\uD83E\uDDD1\uD83C\uDFFC\uD83D\uDCBB","\uD83E\uDDD1\uD83C\uDFFC\uD83D\uDCBC","\uD83E\uDDD1\uD83C\uDFFC\uD83D\uDD27","\uD83E\uDDD1\uD83C\uDFFC\uD83D\uDD2C","\uD83E\uDDD1\uD83C\uDFFC\uD83D\uDE80","\uD83E\uDDD1\uD83C\uDFFC\uD83D\uDE92","\uD83E\uDDD1\uD83C\uDFFC\uD83E\uDDB0","\uD83E\uDDD1\uD83C\uDFFC\uD83E\uDDB1","\uD83E\uDDD1\uD83C\uDFFC\uD83E\uDDB2","\uD83E\uDDD1\uD83C\uDFFC\uD83E\uDDB3","\uD83E\uDDD1\uD83C\uDFFD","\uD83E\uDDD1\uD83C\uDFFD","\uD83E\uDDD1\uD83C\uDFFD","\uD83E\uDDD1\uD83C\uDFFD","\uD83E\uDDD1\uD83C\uDFFD\uD83C\uDF3E","\uD83E\uDDD1\uD83C\uDFFD\uD83C\uDF73","\uD83E\uDDD1\uD83C\uDFFD\uD83C\uDF7C","\uD83E\uDDD1\uD83C\uDFFD\uD83C\uDF84","\uD83E\uDDD1\uD83C\uDFFD\uD83C\uDF93","\uD83E\uDDD1\uD83C\uDFFD\uD83C\uDFA4","\uD83E\uDDD1\uD83C\uDFFD\uD83C\uDFA8","\uD83E\uDDD1\uD83C\uDFFD\uD83C\uDFEB","\uD83E\uDDD1\uD83C\uDFFD\uD83C\uDFED","\uD83E\uDDD1\uD83C\uDFFD\uD83D\uDCBB","\uD83E\uDDD1\uD83C\uDFFD\uD83D\uDCBC","\uD83E\uDDD1\uD83C\uDFFD\uD83D\uDD27","\uD83E\uDDD1\uD83C\uDFFD\uD83D\uDD2C","\uD83E\uDDD1\uD83C\uDFFD\uD83D\uDE80","\uD83E\uDDD1\uD83C\uDFFD\uD83D\uDE92","\uD83E\uDDD1\uD83C\uDFFD\uD83E\uDDB0","\uD83E\uDDD1\uD83C\uDFFD\uD83E\uDDB1","\uD83E\uDDD1\uD83C\uDFFD\uD83E\uDDB2","\uD83E\uDDD1\uD83C\uDFFD\uD83E\uDDB3","\uD83E\uDDD1\uD83C\uDFFE","\uD83E\uDDD1\uD83C\uDFFE","\uD83E\uDDD1\uD83C\uDFFE","\uD83E\uDDD1\uD83C\uDFFE","\uD83E\uDDD1\uD83C\uDFFE\uD83C\uDF3E","\uD83E\uDDD1\uD83C\uDFFE\uD83C\uDF73","\uD83E\uDDD1\uD83C\uDFFE\uD83C\uDF7C","\uD83E\uDDD1\uD83C\uDFFE\uD83C\uDF84","\uD83E\uDDD1\uD83C\uDFFE\uD83C\uDF93","\uD83E\uDDD1\uD83C\uDFFE\uD83C\uDFA4","\uD83E\uDDD1\uD83C\uDFFE\uD83C\uDFA8","\uD83E\uDDD1\uD83C\uDFFE\uD83C\uDFEB","\uD83E\uDDD1\uD83C\uDFFE\uD83C\uDFED","\uD83E\uDDD1\uD83C\uDFFE\uD83D\uDCBB","\uD83E\uDDD1\uD83C\uDFFE\uD83D\uDCBC","\uD83E\uDDD1\uD83C\uDFFE\uD83D\uDD27","\uD83E\uDDD1\uD83C\uDFFE\uD83D\uDD2C","\uD83E\uDDD1\uD83C\uDFFE\uD83D\uDE80","\uD83E\uDDD1\uD83C\uDFFE\uD83D\uDE92","\uD83E\uDDD1\uD83C\uDFFE\uD83E\uDDB0","\uD83E\uDDD1\uD83C\uDFFE\uD83E\uDDB1","\uD83E\uDDD1\uD83C\uDFFE\uD83E\uDDB2","\uD83E\uDDD1\uD83C\uDFFE\uD83E\uDDB3","\uD83E\uDDD1\uD83C\uDFFF","\uD83E\uDDD1\uD83C\uDFFF","\uD83E\uDDD1\uD83C\uDFFF","\uD83E\uDDD1\uD83C\uDFFF","\uD83E\uDDD1\uD83C\uDFFF\uD83C\uDF3E","\uD83E\uDDD1\uD83C\uDFFF\uD83C\uDF73","\uD83E\uDDD1\uD83C\uDFFF\uD83C\uDF7C","\uD83E\uDDD1\uD83C\uDFFF\uD83C\uDF84","\uD83E\uDDD1\uD83C\uDFFF\uD83C\uDF93","\uD83E\uDDD1\uD83C\uDFFF\uD83C\uDFA4","\uD83E\uDDD1\uD83C\uDFFF\uD83C\uDFA8","\uD83E\uDDD1\uD83C\uDFFF\uD83C\uDFEB","\uD83E\uDDD1\uD83C\uDFFF\uD83C\uDFED","\uD83E\uDDD1\uD83C\uDFFF\uD83D\uDCBB","\uD83E\uDDD1\uD83C\uDFFF\uD83D\uDCBC","\uD83E\uDDD1\uD83C\uDFFF\uD83D\uDD27","\uD83E\uDDD1\uD83C\uDFFF\uD83D\uDD2C","\uD83E\uDDD1\uD83C\uDFFF\uD83D\uDE80","\uD83E\uDDD1\uD83C\uDFFF\uD83D\uDE92","\uD83E\uDDD1\uD83C\uDFFF\uD83E\uDDB0","\uD83E\uDDD1\uD83C\uDFFF\uD83E\uDDB1","\uD83E\uDDD1\uD83C\uDFFF\uD83E\uDDB2","\uD83E\uDDD1\uD83C\uDFFF\uD83E\uDDB3","\uD83E\uDDD2","\uD83E\uDDD2\uD83C\uDFFB","\uD83E\uDDD2\uD83C\uDFFC","\uD83E\uDDD2\uD83C\uDFFD","\uD83E\uDDD2\uD83C\uDFFE","\uD83E\uDDD2\uD83C\uDFFF","\uD83E\uDDD3","\uD83E\uDDD3\uD83C\uDFFB","\uD83E\uDDD3\uD83C\uDFFC","\uD83E\uDDD3\uD83C\uDFFD","\uD83E\uDDD3\uD83C\uDFFE","\uD83E\uDDD3\uD83C\uDFFF","\uD83E\uDDD4","\uD83E\uDDD4","\uD83E\uDDD4","\uD83E\uDDD4\uD83C\uDFFB","\uD83E\uDDD4\uD83C\uDFFB","\uD83E\uDDD4\uD83C\uDFFB","\uD83E\uDDD4\uD83C\uDFFC","\uD83E\uDDD4\uD83C\uDFFC","\uD83E\uDDD4\uD83C\uDFFC","\uD83E\uDDD4\uD83C\uDFFD","\uD83E\uDDD4\uD83C\uDFFD","\uD83E\uDDD4\uD83C\uDFFD","\uD83E\uDDD4\uD83C\uDFFE","\uD83E\uDDD4\uD83C\uDFFE","\uD83E\uDDD4\uD83C\uDFFE","\uD83E\uDDD4\uD83C\uDFFF","\uD83E\uDDD4\uD83C\uDFFF","\uD83E\uDDD4\uD83C\uDFFF","\uD83E\uDDD5","\uD83E\uDDD5\uD83C\uDFFB","\uD83E\uDDD5\uD83C\uDFFC","\uD83E\uDDD5\uD83C\uDFFD","\uD83E\uDDD5\uD83C\uDFFE","\uD83E\uDDD5\uD83C\uDFFF","\uD83E\uDDD9","\uD83E\uDDD9","\uD83E\uDDD9","\uD83E\uDDD9\uD83C\uDFFB","\uD83E\uDDD9\uD83C\uDFFB","\uD83E\uDDD9\uD83C\uDFFB","\uD83E\uDDD9\uD83C\uDFFC","\uD83E\uDDD9\uD83C\uDFFC","\uD83E\uDDD9\uD83C\uDFFC","\uD83E\uDDD9\uD83C\uDFFD","\uD83E\uDDD9\uD83C\uDFFD","\uD83E\uDDD9\uD83C\uDFFD","\uD83E\uDDD9\uD83C\uDFFE","\uD83E\uDDD9\uD83C\uDFFE","\uD83E\uDDD9\uD83C\uDFFE","\uD83E\uDDD9\uD83C\uDFFF","\uD83E\uDDD9\uD83C\uDFFF","\uD83E\uDDD9\uD83C\uDFFF","\uD83E\uDDDA","\uD83E\uDDDA","\uD83E\uDDDA","\uD83E\uDDDA\uD83C\uDFFB","\uD83E\uDDDA\uD83C\uDFFB","\uD83E\uDDDA\uD83C\uDFFB","\uD83E\uDDDA\uD83C\uDFFC","\uD83E\uDDDA\uD83C\uDFFC","\uD83E\uDDDA\uD83C\uDFFC","\uD83E\uDDDA\uD83C\uDFFD","\uD83E\uDDDA\uD83C\uDFFD","\uD83E\uDDDA\uD83C\uDFFD","\uD83E\uDDDA\uD83C\uDFFE","\uD83E\uDDDA\uD83C\uDFFE","\uD83E\uDDDA\uD83C\uDFFE","\uD83E\uDDDA\uD83C\uDFFF","\uD83E\uDDDA\uD83C\uDFFF","\uD83E\uDDDA\uD83C\uDFFF","\uD83E\uDDDB","\uD83E\uDDDB","\uD83E\uDDDB","\uD83E\uDDDB\uD83C\uDFFB","\uD83E\uDDDB\uD83C\uDFFB","\uD83E\uDDDB\uD83C\uDFFB","\uD83E\uDDDB\uD83C\uDFFC","\uD83E\uDDDB\uD83C\uDFFC","\uD83E\uDDDB\uD83C\uDFFC","\uD83E\uDDDB\uD83C\uDFFD","\uD83E\uDDDB\uD83C\uDFFD","\uD83E\uDDDB\uD83C\uDFFD","\uD83E\uDDDB\uD83C\uDFFE","\uD83E\uDDDB\uD83C\uDFFE","\uD83E\uDDDB\uD83C\uDFFE","\uD83E\uDDDB\uD83C\uDFFF","\uD83E\uDDDB\uD83C\uDFFF","\uD83E\uDDDB\uD83C\uDFFF","\uD83E\uDDDC","\uD83E\uDDDC","\uD83E\uDDDC","\uD83E\uDDDC\uD83C\uDFFB","\uD83E\uDDDC\uD83C\uDFFB","\uD83E\uDDDC\uD83C\uDFFB","\uD83E\uDDDC\uD83C\uDFFC","\uD83E\uDDDC\uD83C\uDFFC","\uD83E\uDDDC\uD83C\uDFFC","\uD83E\uDDDC\uD83C\uDFFD","\uD83E\uDDDC\uD83C\uDFFD","\uD83E\uDDDC\uD83C\uDFFD","\uD83E\uDDDC\uD83C\uDFFE","\uD83E\uDDDC\uD83C\uDFFE","\uD83E\uDDDC\uD83C\uDFFE","\uD83E\uDDDC\uD83C\uDFFF","\uD83E\uDDDC\uD83C\uDFFF","\uD83E\uDDDC\uD83C\uDFFF","\uD83E\uDDDD","\uD83E\uDDDD","\uD83E\uDDDD","\uD83E\uDDDD\uD83C\uDFFB","\uD83E\uDDDD\uD83C\uDFFB","\uD83E\uDDDD\uD83C\uDFFB","\uD83E\uDDDD\uD83C\uDFFC","\uD83E\uDDDD\uD83C\uDFFC","\uD83E\uDDDD\uD83C\uDFFC","\uD83E\uDDDD\uD83C\uDFFD","\uD83E\uDDDD\uD83C\uDFFD","\uD83E\uDDDD\uD83C\uDFFD","\uD83E\uDDDD\uD83C\uDFFE","\uD83E\uDDDD\uD83C\uDFFE","\uD83E\uDDDD\uD83C\uDFFE","\uD83E\uDDDD\uD83C\uDFFF","\uD83E\uDDDD\uD83C\uDFFF","\uD83E\uDDDD\uD83C\uDFFF","\uD83E\uDDDE","\uD83E\uDDDE","\uD83E\uDDDE","\uD83E\uDDDF","\uD83E\uDDDF","\uD83E\uDDDF"],nature:["","\uD83C\uDF31","\uD83C\uDF32","\uD83C\uDF33","\uD83C\uDF34","\uD83C\uDF35","\uD83C\uDF37","\uD83C\uDF38","\uD83C\uDF39","\uD83C\uDF3A","\uD83C\uDF3B","\uD83C\uDF3C","\uD83C\uDF3E","\uD83C\uDF3F","\uD83C\uDF40","\uD83C\uDF41","\uD83C\uDF42","\uD83C\uDF43","\uD83C\uDFF5","\uD83D\uDC00","\uD83D\uDC01","\uD83D\uDC02","\uD83D\uDC03","\uD83D\uDC04","\uD83D\uDC05","\uD83D\uDC06","\uD83D\uDC07","\uD83D\uDC08","\uD83D\uDC08","\uD83D\uDC09","\uD83D\uDC0A","\uD83D\uDC0B","\uD83D\uDC0C","\uD83D\uDC0D","\uD83D\uDC0E","\uD83D\uDC0F","\uD83D\uDC10","\uD83D\uDC11","\uD83D\uDC12","\uD83D\uDC13","\uD83D\uDC14","\uD83D\uDC15","\uD83D\uDC15\uD83E\uDDBA","\uD83D\uDC16","\uD83D\uDC17","\uD83D\uDC18","\uD83D\uDC19","\uD83D\uDC1A","\uD83D\uDC1B","\uD83D\uDC1C","\uD83D\uDC1D","\uD83D\uDC1E","\uD83D\uDC1F","\uD83D\uDC20","\uD83D\uDC21","\uD83D\uDC22","\uD83D\uDC23","\uD83D\uDC24","\uD83D\uDC25","\uD83D\uDC26","\uD83D\uDC27","\uD83D\uDC28","\uD83D\uDC29","\uD83D\uDC2A","\uD83D\uDC2B","\uD83D\uDC2C","\uD83D\uDC2D","\uD83D\uDC2E","\uD83D\uDC2F","\uD83D\uDC30","\uD83D\uDC31","\uD83D\uDC32","\uD83D\uDC33","\uD83D\uDC34","\uD83D\uDC35","\uD83D\uDC36","\uD83D\uDC37","\uD83D\uDC38","\uD83D\uDC39","\uD83D\uDC3A","\uD83D\uDC3B","\uD83D\uDC3B","\uD83D\uDC3C","\uD83D\uDC3D","\uD83D\uDC3E","\uD83D\uDC3F","\uD83D\uDC90","\uD83D\uDCAE","\uD83D\uDD4A","\uD83D\uDD77","\uD83D\uDD78","\uD83E\uDD40","\uD83E\uDD81","\uD83E\uDD82","\uD83E\uDD83","\uD83E\uDD84","\uD83E\uDD85","\uD83E\uDD86","\uD83E\uDD87","\uD83E\uDD88","\uD83E\uDD89","\uD83E\uDD8A","\uD83E\uDD8B","\uD83E\uDD8C","\uD83E\uDD8D","\uD83E\uDD8E","\uD83E\uDD8F","\uD83E\uDD92","\uD83E\uDD93","\uD83E\uDD94","\uD83E\uDD95","\uD83E\uDD96","\uD83E\uDD97","\uD83E\uDD98","\uD83E\uDD99","\uD83E\uDD9A","\uD83E\uDD9B","\uD83E\uDD9C","\uD83E\uDD9D","\uD83E\uDD9F","\uD83E\uDDA0","\uD83E\uDDA1","\uD83E\uDDA2","\uD83E\uDDA3","\uD83E\uDDA4","\uD83E\uDDA5","\uD83E\uDDA6","\uD83E\uDDA7","\uD83E\uDDA8","\uD83E\uDDA9","\uD83E\uDDAB","\uD83E\uDDAC","\uD83E\uDDAD","\uD83E\uDDAE","\uD83E\uDEB0","\uD83E\uDEB1","\uD83E\uDEB2","\uD83E\uDEB3","\uD83E\uDEB4","\uD83E\uDEB6"],food:["","\uD83C\uDF2D","\uD83C\uDF2E","\uD83C\uDF2F","\uD83C\uDF30","\uD83C\uDF36","\uD83C\uDF3D","\uD83C\uDF44","\uD83C\uDF45","\uD83C\uDF46","\uD83C\uDF47","\uD83C\uDF48","\uD83C\uDF49","\uD83C\uDF4A","\uD83C\uDF4B","\uD83C\uDF4C","\uD83C\uDF4D","\uD83C\uDF4E","\uD83C\uDF4F","\uD83C\uDF50","\uD83C\uDF51","\uD83C\uDF52","\uD83C\uDF53","\uD83C\uDF54","\uD83C\uDF55","\uD83C\uDF56","\uD83C\uDF57","\uD83C\uDF58","\uD83C\uDF59","\uD83C\uDF5A","\uD83C\uDF5B","\uD83C\uDF5C","\uD83C\uDF5D","\uD83C\uDF5E","\uD83C\uDF5F","\uD83C\uDF60","\uD83C\uDF61","\uD83C\uDF62","\uD83C\uDF63","\uD83C\uDF64","\uD83C\uDF65","\uD83C\uDF66","\uD83C\uDF67","\uD83C\uDF68","\uD83C\uDF69","\uD83C\uDF6A","\uD83C\uDF6B","\uD83C\uDF6C","\uD83C\uDF6D","\uD83C\uDF6E","\uD83C\uDF6F","\uD83C\uDF70","\uD83C\uDF71","\uD83C\uDF72","\uD83C\uDF73","\uD83C\uDF74","\uD83C\uDF75","\uD83C\uDF76","\uD83C\uDF77","\uD83C\uDF78","\uD83C\uDF79","\uD83C\uDF7A","\uD83C\uDF7B","\uD83C\uDF7C","\uD83C\uDF7D","\uD83C\uDF7E","\uD83C\uDF7F","\uD83C\uDF82","\uD83C\uDFFA","\uD83D\uDD2A","\uD83E\uDD42","\uD83E\uDD43","\uD83E\uDD44","\uD83E\uDD50","\uD83E\uDD51","\uD83E\uDD52","\uD83E\uDD53","\uD83E\uDD54","\uD83E\uDD55","\uD83E\uDD56","\uD83E\uDD57","\uD83E\uDD58","\uD83E\uDD59","\uD83E\uDD5A","\uD83E\uDD5B","\uD83E\uDD5C","\uD83E\uDD5D","\uD83E\uDD5E","\uD83E\uDD5F","\uD83E\uDD60","\uD83E\uDD61","\uD83E\uDD62","\uD83E\uDD63","\uD83E\uDD64","\uD83E\uDD65","\uD83E\uDD66","\uD83E\uDD67","\uD83E\uDD68","\uD83E\uDD69","\uD83E\uDD6A","\uD83E\uDD6B","\uD83E\uDD6C","\uD83E\uDD6D","\uD83E\uDD6E","\uD83E\uDD6F","\uD83E\uDD80","\uD83E\uDD90","\uD83E\uDD91","\uD83E\uDD9E","\uD83E\uDDAA","\uD83E\uDDC0","\uD83E\uDDC1","\uD83E\uDDC2","\uD83E\uDDC3","\uD83E\uDDC4","\uD83E\uDDC5","\uD83E\uDDC6","\uD83E\uDDC7","\uD83E\uDDC8","\uD83E\uDDC9","\uD83E\uDDCA","\uD83E\uDDCB","\uD83E\uDED0","\uD83E\uDED1","\uD83E\uDED2","\uD83E\uDED3","\uD83E\uDED4","\uD83E\uDED5","\uD83E\uDED6"],travel:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\uD83C\uDF00","\uD83C\uDF01","\uD83C\uDF02","\uD83C\uDF03","\uD83C\uDF04","\uD83C\uDF05","\uD83C\uDF06","\uD83C\uDF07","\uD83C\uDF08","\uD83C\uDF09","\uD83C\uDF0A","\uD83C\uDF0B","\uD83C\uDF0C","\uD83C\uDF0D","\uD83C\uDF0E","\uD83C\uDF0F","\uD83C\uDF10","\uD83C\uDF11","\uD83C\uDF12","\uD83C\uDF13","\uD83C\uDF14","\uD83C\uDF15","\uD83C\uDF16","\uD83C\uDF17","\uD83C\uDF18","\uD83C\uDF19","\uD83C\uDF1A","\uD83C\uDF1B","\uD83C\uDF1C","\uD83C\uDF1D","\uD83C\uDF1E","\uD83C\uDF1F","\uD83C\uDF20","\uD83C\uDF21","\uD83C\uDF24","\uD83C\uDF25","\uD83C\uDF26","\uD83C\uDF27","\uD83C\uDF28","\uD83C\uDF29","\uD83C\uDF2A","\uD83C\uDF2B","\uD83C\uDF2C","\uD83C\uDFA0","\uD83C\uDFA1","\uD83C\uDFA2","\uD83C\uDFAA","\uD83C\uDFCD","\uD83C\uDFCE","\uD83C\uDFD4","\uD83C\uDFD5","\uD83C\uDFD6","\uD83C\uDFD7","\uD83C\uDFD8","\uD83C\uDFD9","\uD83C\uDFDA","\uD83C\uDFDB","\uD83C\uDFDC","\uD83C\uDFDD","\uD83C\uDFDE","\uD83C\uDFDF","\uD83C\uDFE0","\uD83C\uDFE1","\uD83C\uDFE2","\uD83C\uDFE3","\uD83C\uDFE4","\uD83C\uDFE5","\uD83C\uDFE6","\uD83C\uDFE8","\uD83C\uDFE9","\uD83C\uDFEA","\uD83C\uDFEB","\uD83C\uDFEC","\uD83C\uDFED","\uD83C\uDFEF","\uD83C\uDFF0","\uD83D\uDC88","\uD83D\uDC92","\uD83D\uDCA7","\uD83D\uDCBA","\uD83D\uDD25","\uD83D\uDD4B","\uD83D\uDD4C","\uD83D\uDD4D","\uD83D\uDD50","\uD83D\uDD51","\uD83D\uDD52","\uD83D\uDD53","\uD83D\uDD54","\uD83D\uDD55","\uD83D\uDD56","\uD83D\uDD57","\uD83D\uDD58","\uD83D\uDD59","\uD83D\uDD5A","\uD83D\uDD5B","\uD83D\uDD5C","\uD83D\uDD5D","\uD83D\uDD5E","\uD83D\uDD5F","\uD83D\uDD60","\uD83D\uDD61","\uD83D\uDD62","\uD83D\uDD63","\uD83D\uDD64","\uD83D\uDD65","\uD83D\uDD66","\uD83D\uDD67","\uD83D\uDD70","\uD83D\uDDFA","\uD83D\uDDFB","\uD83D\uDDFC","\uD83D\uDDFD","\uD83D\uDDFE","\uD83D\uDE80","\uD83D\uDE81","\uD83D\uDE82","\uD83D\uDE83","\uD83D\uDE84","\uD83D\uDE85","\uD83D\uDE86","\uD83D\uDE87","\uD83D\uDE88","\uD83D\uDE89","\uD83D\uDE8A","\uD83D\uDE8B","\uD83D\uDE8C","\uD83D\uDE8D","\uD83D\uDE8E","\uD83D\uDE8F","\uD83D\uDE90","\uD83D\uDE91","\uD83D\uDE92","\uD83D\uDE93","\uD83D\uDE94","\uD83D\uDE95","\uD83D\uDE96","\uD83D\uDE97","\uD83D\uDE98","\uD83D\uDE99","\uD83D\uDE9A","\uD83D\uDE9B","\uD83D\uDE9C","\uD83D\uDE9D","\uD83D\uDE9E","\uD83D\uDE9F","\uD83D\uDEA0","\uD83D\uDEA1","\uD83D\uDEA2","\uD83D\uDEA4","\uD83D\uDEA5","\uD83D\uDEA6","\uD83D\uDEA7","\uD83D\uDEA8","\uD83D\uDEB2","\uD83D\uDECE","\uD83D\uDED1","\uD83D\uDED5","\uD83D\uDED6","\uD83D\uDEE2","\uD83D\uDEE3","\uD83D\uDEE4","\uD83D\uDEE5","\uD83D\uDEE9","\uD83D\uDEEB","\uD83D\uDEEC","\uD83D\uDEF0","\uD83D\uDEF3","\uD83D\uDEF4","\uD83D\uDEF5","\uD83D\uDEF6","\uD83D\uDEF8","\uD83D\uDEF9","\uD83D\uDEFA","\uD83D\uDEFB","\uD83D\uDEFC","\uD83E\uDDBC","\uD83E\uDDBD","\uD83E\uDDED","\uD83E\uDDF1","\uD83E\uDDF3","\uD83E\uDE82","\uD83E\uDE90","\uD83E\uDEA8","\uD83E\uDEB5"],activity:["","","","","","","","","","","\uD83C\uDC04","\uD83C\uDCCF","\uD83C\uDF80","\uD83C\uDF81","\uD83C\uDF83","\uD83C\uDF84","\uD83C\uDF86","\uD83C\uDF87","\uD83C\uDF88","\uD83C\uDF89","\uD83C\uDF8A","\uD83C\uDF8B","\uD83C\uDF8D","\uD83C\uDF8E","\uD83C\uDF8F","\uD83C\uDF90","\uD83C\uDF91","\uD83C\uDF96","\uD83C\uDF97","\uD83C\uDF9F","\uD83C\uDFA3","\uD83C\uDFA8","\uD83C\uDFAB","\uD83C\uDFAD","\uD83C\uDFAE","\uD83C\uDFAF","\uD83C\uDFB0","\uD83C\uDFB1","\uD83C\uDFB2","\uD83C\uDFB3","\uD83C\uDFB4","\uD83C\uDFBD","\uD83C\uDFBE","\uD83C\uDFBF","\uD83C\uDFC0","\uD83C\uDFC5","\uD83C\uDFC6","\uD83C\uDFC8","\uD83C\uDFC9","\uD83C\uDFCF","\uD83C\uDFD0","\uD83C\uDFD1","\uD83C\uDFD2","\uD83C\uDFD3","\uD83C\uDFF8","\uD83D\uDD2E","\uD83D\uDD79","\uD83D\uDDBC","\uD83D\uDEF7","\uD83E\uDD3F","\uD83E\uDD45","\uD83E\uDD47","\uD83E\uDD48","\uD83E\uDD49","\uD83E\uDD4A","\uD83E\uDD4B","\uD83E\uDD4C","\uD83E\uDD4D","\uD83E\uDD4E","\uD83E\uDD4F","\uD83E\uDDE7","\uD83E\uDDE8","\uD83E\uDDE9","\uD83E\uDDF5","\uD83E\uDDF6","\uD83E\uDDF8","\uD83E\uDDFF","\uD83E\uDE80","\uD83E\uDE81","\uD83E\uDE84","\uD83E\uDE85","\uD83E\uDE86","\uD83E\uDEA1","\uD83E\uDEA2"],object:["","","","","","","","","","","","","","","","","\uD83C\uDF92","\uD83C\uDF93","\uD83C\uDF99","\uD83C\uDF9A","\uD83C\uDF9B","\uD83C\uDF9E","\uD83C\uDFA4","\uD83C\uDFA5","\uD83C\uDFA7","\uD83C\uDFA9","\uD83C\uDFAC","\uD83C\uDFB5","\uD83C\uDFB6","\uD83C\uDFB7","\uD83C\uDFB8","\uD83C\uDFB9","\uD83C\uDFBA","\uD83C\uDFBB","\uD83C\uDFBC","\uD83C\uDFEE","\uD83C\uDFF7","\uD83C\uDFF9","\uD83D\uDC51","\uD83D\uDC52","\uD83D\uDC53","\uD83D\uDC54","\uD83D\uDC55","\uD83D\uDC56","\uD83D\uDC57","\uD83D\uDC58","\uD83D\uDC59","\uD83D\uDC5A","\uD83D\uDC5B","\uD83D\uDC5C","\uD83D\uDC5D","\uD83D\uDC5E","\uD83D\uDC5F","\uD83D\uDC60","\uD83D\uDC61","\uD83D\uDC62","\uD83D\uDC84","\uD83D\uDC89","\uD83D\uDC8A","\uD83D\uDC8D","\uD83D\uDC8E","\uD83D\uDCA1","\uD83D\uDCB0","\uD83D\uDCB3","\uD83D\uDCB4","\uD83D\uDCB5","\uD83D\uDCB6","\uD83D\uDCB7","\uD83D\uDCB8","\uD83D\uDCB9","\uD83D\uDCBB","\uD83D\uDCBC","\uD83D\uDCBD","\uD83D\uDCBE","\uD83D\uDCBF","\uD83D\uDCC0","\uD83D\uDCC1","\uD83D\uDCC2","\uD83D\uDCC3","\uD83D\uDCC4","\uD83D\uDCC5","\uD83D\uDCC6","\uD83D\uDCC7","\uD83D\uDCC8","\uD83D\uDCC9","\uD83D\uDCCA","\uD83D\uDCCB","\uD83D\uDCCC","\uD83D\uDCCD","\uD83D\uDCCE","\uD83D\uDCCF","\uD83D\uDCD0","\uD83D\uDCD1","\uD83D\uDCD2","\uD83D\uDCD3","\uD83D\uDCD4","\uD83D\uDCD5","\uD83D\uDCD6","\uD83D\uDCD7","\uD83D\uDCD8","\uD83D\uDCD9","\uD83D\uDCDA","\uD83D\uDCDC","\uD83D\uDCDD","\uD83D\uDCDE","\uD83D\uDCDF","\uD83D\uDCE0","\uD83D\uDCE1","\uD83D\uDCE2","\uD83D\uDCE3","\uD83D\uDCE4","\uD83D\uDCE5","\uD83D\uDCE6","\uD83D\uDCE7","\uD83D\uDCE8","\uD83D\uDCE9","\uD83D\uDCEA","\uD83D\uDCEB","\uD83D\uDCEC","\uD83D\uDCED","\uD83D\uDCEE","\uD83D\uDCEF","\uD83D\uDCF0","\uD83D\uDCF1","\uD83D\uDCF2","\uD83D\uDCF7","\uD83D\uDCF8","\uD83D\uDCF9","\uD83D\uDCFA","\uD83D\uDCFB","\uD83D\uDCFC","\uD83D\uDCFD","\uD83D\uDCFF","\uD83D\uDD07","\uD83D\uDD08","\uD83D\uDD09","\uD83D\uDD0A","\uD83D\uDD0B","\uD83D\uDD0C","\uD83D\uDD0D","\uD83D\uDD0E","\uD83D\uDD0F","\uD83D\uDD10","\uD83D\uDD11","\uD83D\uDD12","\uD83D\uDD13","\uD83D\uDD14","\uD83D\uDD15","\uD83D\uDD16","\uD83D\uDD17","\uD83D\uDD26","\uD83D\uDD27","\uD83D\uDD28","\uD83D\uDD29","\uD83D\uDD2B","\uD83D\uDD2C","\uD83D\uDD2D","\uD83D\uDD6F","\uD83D\uDD76","\uD83D\uDD87","\uD83D\uDD8A","\uD83D\uDD8B","\uD83D\uDD8C","\uD83D\uDD8D","\uD83D\uDDA5","\uD83D\uDDA8","\uD83D\uDDB1","\uD83D\uDDB2","\uD83D\uDDC2","\uD83D\uDDC3","\uD83D\uDDC4","\uD83D\uDDD1","\uD83D\uDDD2","\uD83D\uDDD3","\uD83D\uDDDC","\uD83D\uDDDD","\uD83D\uDDDE","\uD83D\uDDE1","\uD83D\uDDF3","\uD83D\uDDFF","\uD83D\uDEAA","\uD83D\uDEAC","\uD83D\uDEBD","\uD83D\uDEBF","\uD83D\uDEC1","\uD83D\uDECB","\uD83D\uDECD","\uD83D\uDECF","\uD83D\uDED2","\uD83D\uDED7","\uD83D\uDEE0","\uD83D\uDEE1","\uD83E\uDD41","\uD83E\uDD7B","\uD83E\uDD7C","\uD83E\uDD7D","\uD83E\uDD7E","\uD83E\uDD7F","\uD83E\uDDAF","\uD83E\uDDBA","\uD83E\uDDE2","\uD83E\uDDE3","\uD83E\uDDE4","\uD83E\uDDE5","\uD83E\uDDE6","\uD83E\uDDEA","\uD83E\uDDEB","\uD83E\uDDEC","\uD83E\uDDEE","\uD83E\uDDEF","\uD83E\uDDF0","\uD83E\uDDF2","\uD83E\uDDF4","\uD83E\uDDF7","\uD83E\uDDF9","\uD83E\uDDFA","\uD83E\uDDFB","\uD83E\uDDFC","\uD83E\uDDFD","\uD83E\uDDFE","\uD83E\uDE70","\uD83E\uDE71","\uD83E\uDE72","\uD83E\uDE73","\uD83E\uDE74","\uD83E\uDE78","\uD83E\uDE79","\uD83E\uDE7A","\uD83E\uDE83","\uD83E\uDE91","\uD83E\uDE92","\uD83E\uDE93","\uD83E\uDE94","\uD83E\uDE95","\uD83E\uDE96","\uD83E\uDE97","\uD83E\uDE98","\uD83E\uDE99","\uD83E\uDE9A","\uD83E\uDE9B","\uD83E\uDE9C","\uD83E\uDE9D","\uD83E\uDE9E","\uD83E\uDE9F","\uD83E\uDEA0","\uD83E\uDEA3","\uD83E\uDEA4","\uD83E\uDEA5","\uD83E\uDEA6","\uD83E\uDEA7"],symbol:["#","*","0","1","2","3","4","5","6","7","8","9","\xa9","\xae","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\uD83C\uDD70","\uD83C\uDD71","\uD83C\uDD7E","\uD83C\uDD7F","\uD83C\uDD8E","\uD83C\uDD91","\uD83C\uDD92","\uD83C\uDD93","\uD83C\uDD94","\uD83C\uDD95","\uD83C\uDD96","\uD83C\uDD97","\uD83C\uDD98","\uD83C\uDD99","\uD83C\uDD9A","\uD83C\uDE01","\uD83C\uDE02","\uD83C\uDE1A","\uD83C\uDE2F","\uD83C\uDE32","\uD83C\uDE33","\uD83C\uDE34","\uD83C\uDE35","\uD83C\uDE36","\uD83C\uDE37","\uD83C\uDE38","\uD83C\uDE39","\uD83C\uDE3A","\uD83C\uDE50","\uD83C\uDE51","\uD83C\uDFA6","\uD83C\uDFE7","\uD83D\uDCA0","\uD83D\uDCB1","\uD83D\uDCB2","\uD83D\uDCDB","\uD83D\uDCF3","\uD83D\uDCF4","\uD83D\uDCF5","\uD83D\uDCF6","\uD83D\uDD00","\uD83D\uDD01","\uD83D\uDD02","\uD83D\uDD03","\uD83D\uDD04","\uD83D\uDD05","\uD83D\uDD06","\uD83D\uDD18","\uD83D\uDD19","\uD83D\uDD1A","\uD83D\uDD1B","\uD83D\uDD1C","\uD83D\uDD1D","\uD83D\uDD1E","\uD83D\uDD1F","\uD83D\uDD20","\uD83D\uDD21","\uD83D\uDD22","\uD83D\uDD23","\uD83D\uDD24","\uD83D\uDD2F","\uD83D\uDD30","\uD83D\uDD31","\uD83D\uDD32","\uD83D\uDD33","\uD83D\uDD34","\uD83D\uDD35","\uD83D\uDD36","\uD83D\uDD37","\uD83D\uDD38","\uD83D\uDD39","\uD83D\uDD3A","\uD83D\uDD3B","\uD83D\uDD3C","\uD83D\uDD3D","\uD83D\uDD49","\uD83D\uDD4E","\uD83D\uDEAB","\uD83D\uDEAD","\uD83D\uDEAE","\uD83D\uDEAF","\uD83D\uDEB0","\uD83D\uDEB1","\uD83D\uDEB3","\uD83D\uDEB7","\uD83D\uDEB8","\uD83D\uDEB9","\uD83D\uDEBA","\uD83D\uDEBB","\uD83D\uDEBC","\uD83D\uDEBE","\uD83D\uDEC2","\uD83D\uDEC3","\uD83D\uDEC4","\uD83D\uDEC5","\uD83D\uDED0","\uD83D\uDFE0","\uD83D\uDFE1","\uD83D\uDFE2","\uD83D\uDFE3","\uD83D\uDFE4","\uD83D\uDFE5","\uD83D\uDFE6","\uD83D\uDFE7","\uD83D\uDFE8","\uD83D\uDFE9","\uD83D\uDFEA","\uD83D\uDFEB"],flag:["\uD83C\uDDE6\uD83C\uDDE8","\uD83C\uDDE6\uD83C\uDDE9","\uD83C\uDDE6\uD83C\uDDEA","\uD83C\uDDE6\uD83C\uDDEB","\uD83C\uDDE6\uD83C\uDDEC","\uD83C\uDDE6\uD83C\uDDEE","\uD83C\uDDE6\uD83C\uDDF1","\uD83C\uDDE6\uD83C\uDDF2","\uD83C\uDDE6\uD83C\uDDF4","\uD83C\uDDE6\uD83C\uDDF6","\uD83C\uDDE6\uD83C\uDDF7","\uD83C\uDDE6\uD83C\uDDF8","\uD83C\uDDE6\uD83C\uDDF9","\uD83C\uDDE6\uD83C\uDDFA","\uD83C\uDDE6\uD83C\uDDFC","\uD83C\uDDE6\uD83C\uDDFD","\uD83C\uDDE6\uD83C\uDDFF","\uD83C\uDDE7\uD83C\uDDE6","\uD83C\uDDE7\uD83C\uDDE7","\uD83C\uDDE7\uD83C\uDDE9","\uD83C\uDDE7\uD83C\uDDEA","\uD83C\uDDE7\uD83C\uDDEB","\uD83C\uDDE7\uD83C\uDDEC","\uD83C\uDDE7\uD83C\uDDED","\uD83C\uDDE7\uD83C\uDDEE","\uD83C\uDDE7\uD83C\uDDEF","\uD83C\uDDE7\uD83C\uDDF1","\uD83C\uDDE7\uD83C\uDDF2","\uD83C\uDDE7\uD83C\uDDF3","\uD83C\uDDE7\uD83C\uDDF4","\uD83C\uDDE7\uD83C\uDDF6","\uD83C\uDDE7\uD83C\uDDF7","\uD83C\uDDE7\uD83C\uDDF8","\uD83C\uDDE7\uD83C\uDDF9","\uD83C\uDDE7\uD83C\uDDFB","\uD83C\uDDE7\uD83C\uDDFC","\uD83C\uDDE7\uD83C\uDDFE","\uD83C\uDDE7\uD83C\uDDFF","\uD83C\uDDE8\uD83C\uDDE6","\uD83C\uDDE8\uD83C\uDDE8","\uD83C\uDDE8\uD83C\uDDE9","\uD83C\uDDE8\uD83C\uDDEB","\uD83C\uDDE8\uD83C\uDDEC","\uD83C\uDDE8\uD83C\uDDED","\uD83C\uDDE8\uD83C\uDDEE","\uD83C\uDDE8\uD83C\uDDF0","\uD83C\uDDE8\uD83C\uDDF1","\uD83C\uDDE8\uD83C\uDDF2","\uD83C\uDDE8\uD83C\uDDF3","\uD83C\uDDE8\uD83C\uDDF4","\uD83C\uDDE8\uD83C\uDDF5","\uD83C\uDDE8\uD83C\uDDF7","\uD83C\uDDE8\uD83C\uDDFA","\uD83C\uDDE8\uD83C\uDDFB","\uD83C\uDDE8\uD83C\uDDFC","\uD83C\uDDE8\uD83C\uDDFD","\uD83C\uDDE8\uD83C\uDDFE","\uD83C\uDDE8\uD83C\uDDFF","\uD83C\uDDE9\uD83C\uDDEA","\uD83C\uDDE9\uD83C\uDDEC","\uD83C\uDDE9\uD83C\uDDEF","\uD83C\uDDE9\uD83C\uDDF0","\uD83C\uDDE9\uD83C\uDDF2","\uD83C\uDDE9\uD83C\uDDF4","\uD83C\uDDE9\uD83C\uDDFF","\uD83C\uDDEA\uD83C\uDDE6","\uD83C\uDDEA\uD83C\uDDE8","\uD83C\uDDEA\uD83C\uDDEA","\uD83C\uDDEA\uD83C\uDDEC","\uD83C\uDDEA\uD83C\uDDED","\uD83C\uDDEA\uD83C\uDDF7","\uD83C\uDDEA\uD83C\uDDF8","\uD83C\uDDEA\uD83C\uDDF9","\uD83C\uDDEA\uD83C\uDDFA","\uD83C\uDDEB\uD83C\uDDEE","\uD83C\uDDEB\uD83C\uDDEF","\uD83C\uDDEB\uD83C\uDDF0","\uD83C\uDDEB\uD83C\uDDF2","\uD83C\uDDEB\uD83C\uDDF4","\uD83C\uDDEB\uD83C\uDDF7","\uD83C\uDDEC\uD83C\uDDE6","\uD83C\uDDEC\uD83C\uDDE7","\uD83C\uDDEC\uD83C\uDDE9","\uD83C\uDDEC\uD83C\uDDEA","\uD83C\uDDEC\uD83C\uDDEB","\uD83C\uDDEC\uD83C\uDDEC","\uD83C\uDDEC\uD83C\uDDED","\uD83C\uDDEC\uD83C\uDDEE","\uD83C\uDDEC\uD83C\uDDF1","\uD83C\uDDEC\uD83C\uDDF2","\uD83C\uDDEC\uD83C\uDDF3","\uD83C\uDDEC\uD83C\uDDF5","\uD83C\uDDEC\uD83C\uDDF6","\uD83C\uDDEC\uD83C\uDDF7","\uD83C\uDDEC\uD83C\uDDF8","\uD83C\uDDEC\uD83C\uDDF9","\uD83C\uDDEC\uD83C\uDDFA","\uD83C\uDDEC\uD83C\uDDFC","\uD83C\uDDEC\uD83C\uDDFE","\uD83C\uDDED\uD83C\uDDF0","\uD83C\uDDED\uD83C\uDDF2","\uD83C\uDDED\uD83C\uDDF3","\uD83C\uDDED\uD83C\uDDF7","\uD83C\uDDED\uD83C\uDDF9","\uD83C\uDDED\uD83C\uDDFA","\uD83C\uDDEE\uD83C\uDDE8","\uD83C\uDDEE\uD83C\uDDE9","\uD83C\uDDEE\uD83C\uDDEA","\uD83C\uDDEE\uD83C\uDDF1","\uD83C\uDDEE\uD83C\uDDF2","\uD83C\uDDEE\uD83C\uDDF3","\uD83C\uDDEE\uD83C\uDDF4","\uD83C\uDDEE\uD83C\uDDF6","\uD83C\uDDEE\uD83C\uDDF7","\uD83C\uDDEE\uD83C\uDDF8","\uD83C\uDDEE\uD83C\uDDF9","\uD83C\uDDEF\uD83C\uDDEA","\uD83C\uDDEF\uD83C\uDDF2","\uD83C\uDDEF\uD83C\uDDF4","\uD83C\uDDEF\uD83C\uDDF5","\uD83C\uDDF0\uD83C\uDDEA","\uD83C\uDDF0\uD83C\uDDEC","\uD83C\uDDF0\uD83C\uDDED","\uD83C\uDDF0\uD83C\uDDEE","\uD83C\uDDF0\uD83C\uDDF2","\uD83C\uDDF0\uD83C\uDDF3","\uD83C\uDDF0\uD83C\uDDF5","\uD83C\uDDF0\uD83C\uDDF7","\uD83C\uDDF0\uD83C\uDDFC","\uD83C\uDDF0\uD83C\uDDFE","\uD83C\uDDF0\uD83C\uDDFF","\uD83C\uDDF1\uD83C\uDDE6","\uD83C\uDDF1\uD83C\uDDE7","\uD83C\uDDF1\uD83C\uDDE8","\uD83C\uDDF1\uD83C\uDDEE","\uD83C\uDDF1\uD83C\uDDF0","\uD83C\uDDF1\uD83C\uDDF7","\uD83C\uDDF1\uD83C\uDDF8","\uD83C\uDDF1\uD83C\uDDF9","\uD83C\uDDF1\uD83C\uDDFA","\uD83C\uDDF1\uD83C\uDDFB","\uD83C\uDDF1\uD83C\uDDFE","\uD83C\uDDF2\uD83C\uDDE6","\uD83C\uDDF2\uD83C\uDDE8","\uD83C\uDDF2\uD83C\uDDE9","\uD83C\uDDF2\uD83C\uDDEA","\uD83C\uDDF2\uD83C\uDDEB","\uD83C\uDDF2\uD83C\uDDEC","\uD83C\uDDF2\uD83C\uDDED","\uD83C\uDDF2\uD83C\uDDF0","\uD83C\uDDF2\uD83C\uDDF1","\uD83C\uDDF2\uD83C\uDDF2","\uD83C\uDDF2\uD83C\uDDF3","\uD83C\uDDF2\uD83C\uDDF4","\uD83C\uDDF2\uD83C\uDDF5","\uD83C\uDDF2\uD83C\uDDF6","\uD83C\uDDF2\uD83C\uDDF7","\uD83C\uDDF2\uD83C\uDDF8","\uD83C\uDDF2\uD83C\uDDF9","\uD83C\uDDF2\uD83C\uDDFA","\uD83C\uDDF2\uD83C\uDDFB","\uD83C\uDDF2\uD83C\uDDFC","\uD83C\uDDF2\uD83C\uDDFD","\uD83C\uDDF2\uD83C\uDDFE","\uD83C\uDDF2\uD83C\uDDFF","\uD83C\uDDF3\uD83C\uDDE6","\uD83C\uDDF3\uD83C\uDDE8","\uD83C\uDDF3\uD83C\uDDEA","\uD83C\uDDF3\uD83C\uDDEB","\uD83C\uDDF3\uD83C\uDDEC","\uD83C\uDDF3\uD83C\uDDEE","\uD83C\uDDF3\uD83C\uDDF1","\uD83C\uDDF3\uD83C\uDDF4","\uD83C\uDDF3\uD83C\uDDF5","\uD83C\uDDF3\uD83C\uDDF7","\uD83C\uDDF3\uD83C\uDDFA","\uD83C\uDDF3\uD83C\uDDFF","\uD83C\uDDF4\uD83C\uDDF2","\uD83C\uDDF5\uD83C\uDDE6","\uD83C\uDDF5\uD83C\uDDEA","\uD83C\uDDF5\uD83C\uDDEB","\uD83C\uDDF5\uD83C\uDDEC","\uD83C\uDDF5\uD83C\uDDED","\uD83C\uDDF5\uD83C\uDDF0","\uD83C\uDDF5\uD83C\uDDF1","\uD83C\uDDF5\uD83C\uDDF2","\uD83C\uDDF5\uD83C\uDDF3","\uD83C\uDDF5\uD83C\uDDF7","\uD83C\uDDF5\uD83C\uDDF8","\uD83C\uDDF5\uD83C\uDDF9","\uD83C\uDDF5\uD83C\uDDFC","\uD83C\uDDF5\uD83C\uDDFE","\uD83C\uDDF6\uD83C\uDDE6","\uD83C\uDDF7\uD83C\uDDEA","\uD83C\uDDF7\uD83C\uDDF4","\uD83C\uDDF7\uD83C\uDDF8","\uD83C\uDDF7\uD83C\uDDFA","\uD83C\uDDF7\uD83C\uDDFC","\uD83C\uDDF8\uD83C\uDDE6","\uD83C\uDDF8\uD83C\uDDE7","\uD83C\uDDF8\uD83C\uDDE8","\uD83C\uDDF8\uD83C\uDDE9","\uD83C\uDDF8\uD83C\uDDEA","\uD83C\uDDF8\uD83C\uDDEC","\uD83C\uDDF8\uD83C\uDDED","\uD83C\uDDF8\uD83C\uDDEE","\uD83C\uDDF8\uD83C\uDDEF","\uD83C\uDDF8\uD83C\uDDF0","\uD83C\uDDF8\uD83C\uDDF1","\uD83C\uDDF8\uD83C\uDDF2","\uD83C\uDDF8\uD83C\uDDF3","\uD83C\uDDF8\uD83C\uDDF4","\uD83C\uDDF8\uD83C\uDDF7","\uD83C\uDDF8\uD83C\uDDF8","\uD83C\uDDF8\uD83C\uDDF9","\uD83C\uDDF8\uD83C\uDDFB","\uD83C\uDDF8\uD83C\uDDFD","\uD83C\uDDF8\uD83C\uDDFE","\uD83C\uDDF8\uD83C\uDDFF","\uD83C\uDDF9\uD83C\uDDE6","\uD83C\uDDF9\uD83C\uDDE8","\uD83C\uDDF9\uD83C\uDDE9","\uD83C\uDDF9\uD83C\uDDEB","\uD83C\uDDF9\uD83C\uDDEC","\uD83C\uDDF9\uD83C\uDDED","\uD83C\uDDF9\uD83C\uDDEF","\uD83C\uDDF9\uD83C\uDDF0","\uD83C\uDDF9\uD83C\uDDF1","\uD83C\uDDF9\uD83C\uDDF2","\uD83C\uDDF9\uD83C\uDDF3","\uD83C\uDDF9\uD83C\uDDF4","\uD83C\uDDF9\uD83C\uDDF7","\uD83C\uDDF9\uD83C\uDDF9","\uD83C\uDDF9\uD83C\uDDFB","\uD83C\uDDF9\uD83C\uDDFC","\uD83C\uDDF9\uD83C\uDDFF","\uD83C\uDDFA\uD83C\uDDE6","\uD83C\uDDFA\uD83C\uDDEC","\uD83C\uDDFA\uD83C\uDDF2","\uD83C\uDDFA\uD83C\uDDF3","\uD83C\uDDFA\uD83C\uDDF8","\uD83C\uDDFA\uD83C\uDDFE","\uD83C\uDDFA\uD83C\uDDFF","\uD83C\uDDFB\uD83C\uDDE6","\uD83C\uDDFB\uD83C\uDDE8","\uD83C\uDDFB\uD83C\uDDEA","\uD83C\uDDFB\uD83C\uDDEC","\uD83C\uDDFB\uD83C\uDDEE","\uD83C\uDDFB\uD83C\uDDF3","\uD83C\uDDFB\uD83C\uDDFA","\uD83C\uDDFC\uD83C\uDDEB","\uD83C\uDDFC\uD83C\uDDF8","\uD83C\uDDFD\uD83C\uDDF0","\uD83C\uDDFE\uD83C\uDDEA","\uD83C\uDDFE\uD83C\uDDF9","\uD83C\uDDFF\uD83C\uDDE6","\uD83C\uDDFF\uD83C\uDDF2","\uD83C\uDDFF\uD83C\uDDFC","\uD83C\uDF8C","\uD83C\uDFC1","\uD83C\uDFF3","\uD83C\uDFF3","\uD83C\uDFF3\uD83C\uDF08","\uD83C\uDFF4","\uD83C\uDFF4","\uD83D\uDEA9"]},http_status_code:{informational:[100,101,102,103],success:[200,201,202,203,204,205,206,207,208,226],redirection:[300,301,302,303,304,305,306,307,308],clientError:[400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,421,422,423,424,425,426,428,429,431,451],serverError:[500,501,502,503,504,505,506,507,508,510,511]},jwt_algorithm:["ES256","ES384","ES512","HS256","HS384","HS512","PS256","PS384","PS512","RS256","RS384","RS512","none"],user_agent_pattern:["FakerBot/{{system.semver}}","Googlebot/2.1 (+http://www.google.com/bot.html)",'Mozilla/5.0 (Linux; Android {{number.int({"min":5,"max":13})}}; {{helpers.arrayElement(["SM-G998U","SM-G998B","SM-G998N","SM-G998P","SM-T800"])}}) AppleWebKit/{{number.int({"min":536,"max":605})}}.{{number.int({"min":0,"max":99})}} (KHTML, like Gecko) Chrome/{{number.int({"min":55,"max":131})}}.{{system.semver}} Mobile Safari/{{number.int({"min":536,"max":605})}}.{{number.int({"min":0,"max":99})}}','Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:{{number.int({"min":75, "max":133})}}.0) Gecko/20100101 Firefox/{{number.int({"min":75, "max":133})}}.0','Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/{{number.int({"min":536,"max":605})}}.{{number.int({"min":0,"max":99})}}.{{number.int({"min":0,"max":99})}} (KHTML, like Gecko) Version/16.1 Safari/{{number.int({"min":536,"max":605})}}.{{number.int({"min":0,"max":99})}}.{{number.int({"min":0,"max":99})}}','Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_15_7) AppleWebKit/{{number.int({"min":536,"max":605})}}.{{number.int({"min":0,"max":99})}}.{{number.int({"min":0,"max":99})}} (KHTML, like Gecko) Chrome/{{number.int({"min":55,"max":131})}}.{{system.semver}} Safari/{{number.int({"min":536,"max":605})}}.{{number.int({"min":0,"max":99})}}.{{number.int({"min":0,"max":99})}}','Mozilla/5.0 (Windows NT {{helpers.arrayElement(["5.1","5.2","6.0","6.1","6.2","6.3","10.0"])}}; Win64; x64) AppleWebKit/{{number.int({"min":536,"max":605})}}.{{number.int({"min":0,"max":99})}} (KHTML, like Gecko) Chrome/{{number.int({"min":55,"max":131})}}.{{system.semver}} Safari/{{number.int({"min":536,"max":605})}}.{{number.int({"min":0,"max":99})}} Edg/{{number.int({"min":110,"max":131})}}.{{system.semver}}','Mozilla/5.0 (X11; Linux x86_64; rv:{{number.int({"min":75,"max":133})}}.0) Gecko/20100101 Firefox/{{number.int({"min":75,"max":133})}}.0','Mozilla/5.0 (compatible; MSIE {{number.int({"min":6,"max":10})}}.0; Windows NT {{helpers.arrayElement(["5.1","5.2","6.0","6.1","6.2","6.3","10.0"])}}; Trident/{{number.int({"min":4,"max":7})}}.0)','Mozilla/5.0 (iPhone; CPU iPhone OS {{number.int({"min":10,"max":18})}}_{{number.int({"min":0,"max":4})}} like Mac OS X) AppleWebKit/{{number.int({"min":536,"max":605})}}.{{number.int({"min":0,"max":99})}}.{{number.int({"min":0,"max":99})}} (KHTML, like Gecko) Version/{{number.int({"min":10,"max":18})}}_{{number.int({"min":0,"max":4})}} Mobile/15E148 Safari/{{number.int({"min":536,"max":605})}}.{{number.int({"min":0,"max":99})}}']},location:{country_code:[{alpha2:"AD",alpha3:"AND",numeric:"020"},{alpha2:"AE",alpha3:"ARE",numeric:"784"},{alpha2:"AF",alpha3:"AFG",numeric:"004"},{alpha2:"AG",alpha3:"ATG",numeric:"028"},{alpha2:"AI",alpha3:"AIA",numeric:"660"},{alpha2:"AL",alpha3:"ALB",numeric:"008"},{alpha2:"AM",alpha3:"ARM",numeric:"051"},{alpha2:"AO",alpha3:"AGO",numeric:"024"},{alpha2:"AQ",alpha3:"ATA",numeric:"010"},{alpha2:"AR",alpha3:"ARG",numeric:"032"},{alpha2:"AS",alpha3:"ASM",numeric:"016"},{alpha2:"AT",alpha3:"AUT",numeric:"040"},{alpha2:"AU",alpha3:"AUS",numeric:"036"},{alpha2:"AW",alpha3:"ABW",numeric:"533"},{alpha2:"AX",alpha3:"ALA",numeric:"248"},{alpha2:"AZ",alpha3:"AZE",numeric:"031"},{alpha2:"BA",alpha3:"BIH",numeric:"070"},{alpha2:"BB",alpha3:"BRB",numeric:"052"},{alpha2:"BD",alpha3:"BGD",numeric:"050"},{alpha2:"BE",alpha3:"BEL",numeric:"056"},{alpha2:"BF",alpha3:"BFA",numeric:"854"},{alpha2:"BG",alpha3:"BGR",numeric:"100"},{alpha2:"BH",alpha3:"BHR",numeric:"048"},{alpha2:"BI",alpha3:"BDI",numeric:"108"},{alpha2:"BJ",alpha3:"BEN",numeric:"204"},{alpha2:"BL",alpha3:"BLM",numeric:"652"},{alpha2:"BM",alpha3:"BMU",numeric:"060"},{alpha2:"BN",alpha3:"BRN",numeric:"096"},{alpha2:"BO",alpha3:"BOL",numeric:"068"},{alpha2:"BQ",alpha3:"BES",numeric:"535"},{alpha2:"BR",alpha3:"BRA",numeric:"076"},{alpha2:"BS",alpha3:"BHS",numeric:"044"},{alpha2:"BT",alpha3:"BTN",numeric:"064"},{alpha2:"BV",alpha3:"BVT",numeric:"074"},{alpha2:"BW",alpha3:"BWA",numeric:"072"},{alpha2:"BY",alpha3:"BLR",numeric:"112"},{alpha2:"BZ",alpha3:"BLZ",numeric:"084"},{alpha2:"CA",alpha3:"CAN",numeric:"124"},{alpha2:"CC",alpha3:"CCK",numeric:"166"},{alpha2:"CD",alpha3:"COD",numeric:"180"},{alpha2:"CF",alpha3:"CAF",numeric:"140"},{alpha2:"CG",alpha3:"COG",numeric:"178"},{alpha2:"CH",alpha3:"CHE",numeric:"756"},{alpha2:"CI",alpha3:"CIV",numeric:"384"},{alpha2:"CK",alpha3:"COK",numeric:"184"},{alpha2:"CL",alpha3:"CHL",numeric:"152"},{alpha2:"CM",alpha3:"CMR",numeric:"120"},{alpha2:"CN",alpha3:"CHN",numeric:"156"},{alpha2:"CO",alpha3:"COL",numeric:"170"},{alpha2:"CR",alpha3:"CRI",numeric:"188"},{alpha2:"CU",alpha3:"CUB",numeric:"192"},{alpha2:"CV",alpha3:"CPV",numeric:"132"},{alpha2:"CW",alpha3:"CUW",numeric:"531"},{alpha2:"CX",alpha3:"CXR",numeric:"162"},{alpha2:"CY",alpha3:"CYP",numeric:"196"},{alpha2:"CZ",alpha3:"CZE",numeric:"203"},{alpha2:"DE",alpha3:"DEU",numeric:"276"},{alpha2:"DJ",alpha3:"DJI",numeric:"262"},{alpha2:"DK",alpha3:"DNK",numeric:"208"},{alpha2:"DM",alpha3:"DMA",numeric:"212"},{alpha2:"DO",alpha3:"DOM",numeric:"214"},{alpha2:"DZ",alpha3:"DZA",numeric:"012"},{alpha2:"EC",alpha3:"ECU",numeric:"218"},{alpha2:"EE",alpha3:"EST",numeric:"233"},{alpha2:"EG",alpha3:"EGY",numeric:"818"},{alpha2:"EH",alpha3:"ESH",numeric:"732"},{alpha2:"ER",alpha3:"ERI",numeric:"232"},{alpha2:"ES",alpha3:"ESP",numeric:"724"},{alpha2:"ET",alpha3:"ETH",numeric:"231"},{alpha2:"FI",alpha3:"FIN",numeric:"246"},{alpha2:"FJ",alpha3:"FJI",numeric:"242"},{alpha2:"FK",alpha3:"FLK",numeric:"238"},{alpha2:"FM",alpha3:"FSM",numeric:"583"},{alpha2:"FO",alpha3:"FRO",numeric:"234"},{alpha2:"FR",alpha3:"FRA",numeric:"250"},{alpha2:"GA",alpha3:"GAB",numeric:"266"},{alpha2:"GB",alpha3:"GBR",numeric:"826"},{alpha2:"GD",alpha3:"GRD",numeric:"308"},{alpha2:"GE",alpha3:"GEO",numeric:"268"},{alpha2:"GF",alpha3:"GUF",numeric:"254"},{alpha2:"GG",alpha3:"GGY",numeric:"831"},{alpha2:"GH",alpha3:"GHA",numeric:"288"},{alpha2:"GI",alpha3:"GIB",numeric:"292"},{alpha2:"GL",alpha3:"GRL",numeric:"304"},{alpha2:"GM",alpha3:"GMB",numeric:"270"},{alpha2:"GN",alpha3:"GIN",numeric:"324"},{alpha2:"GP",alpha3:"GLP",numeric:"312"},{alpha2:"GQ",alpha3:"GNQ",numeric:"226"},{alpha2:"GR",alpha3:"GRC",numeric:"300"},{alpha2:"GS",alpha3:"SGS",numeric:"239"},{alpha2:"GT",alpha3:"GTM",numeric:"320"},{alpha2:"GU",alpha3:"GUM",numeric:"316"},{alpha2:"GW",alpha3:"GNB",numeric:"624"},{alpha2:"GY",alpha3:"GUY",numeric:"328"},{alpha2:"HK",alpha3:"HKG",numeric:"344"},{alpha2:"HM",alpha3:"HMD",numeric:"334"},{alpha2:"HN",alpha3:"HND",numeric:"340"},{alpha2:"HR",alpha3:"HRV",numeric:"191"},{alpha2:"HT",alpha3:"HTI",numeric:"332"},{alpha2:"HU",alpha3:"HUN",numeric:"348"},{alpha2:"ID",alpha3:"IDN",numeric:"360"},{alpha2:"IE",alpha3:"IRL",numeric:"372"},{alpha2:"IL",alpha3:"ISR",numeric:"376"},{alpha2:"IM",alpha3:"IMN",numeric:"833"},{alpha2:"IN",alpha3:"IND",numeric:"356"},{alpha2:"IO",alpha3:"IOT",numeric:"086"},{alpha2:"IQ",alpha3:"IRQ",numeric:"368"},{alpha2:"IR",alpha3:"IRN",numeric:"364"},{alpha2:"IS",alpha3:"ISL",numeric:"352"},{alpha2:"IT",alpha3:"ITA",numeric:"380"},{alpha2:"JE",alpha3:"JEY",numeric:"832"},{alpha2:"JM",alpha3:"JAM",numeric:"388"},{alpha2:"JO",alpha3:"JOR",numeric:"400"},{alpha2:"JP",alpha3:"JPN",numeric:"392"},{alpha2:"KE",alpha3:"KEN",numeric:"404"},{alpha2:"KG",alpha3:"KGZ",numeric:"417"},{alpha2:"KH",alpha3:"KHM",numeric:"116"},{alpha2:"KI",alpha3:"KIR",numeric:"296"},{alpha2:"KM",alpha3:"COM",numeric:"174"},{alpha2:"KN",alpha3:"KNA",numeric:"659"},{alpha2:"KP",alpha3:"PRK",numeric:"408"},{alpha2:"KR",alpha3:"KOR",numeric:"410"},{alpha2:"KW",alpha3:"KWT",numeric:"414"},{alpha2:"KY",alpha3:"CYM",numeric:"136"},{alpha2:"KZ",alpha3:"KAZ",numeric:"398"},{alpha2:"LA",alpha3:"LAO",numeric:"418"},{alpha2:"LB",alpha3:"LBN",numeric:"422"},{alpha2:"LC",alpha3:"LCA",numeric:"662"},{alpha2:"LI",alpha3:"LIE",numeric:"438"},{alpha2:"LK",alpha3:"LKA",numeric:"144"},{alpha2:"LR",alpha3:"LBR",numeric:"430"},{alpha2:"LS",alpha3:"LSO",numeric:"426"},{alpha2:"LT",alpha3:"LTU",numeric:"440"},{alpha2:"LU",alpha3:"LUX",numeric:"442"},{alpha2:"LV",alpha3:"LVA",numeric:"428"},{alpha2:"LY",alpha3:"LBY",numeric:"434"},{alpha2:"MA",alpha3:"MAR",numeric:"504"},{alpha2:"MC",alpha3:"MCO",numeric:"492"},{alpha2:"MD",alpha3:"MDA",numeric:"498"},{alpha2:"ME",alpha3:"MNE",numeric:"499"},{alpha2:"MF",alpha3:"MAF",numeric:"663"},{alpha2:"MG",alpha3:"MDG",numeric:"450"},{alpha2:"MH",alpha3:"MHL",numeric:"584"},{alpha2:"MK",alpha3:"MKD",numeric:"807"},{alpha2:"ML",alpha3:"MLI",numeric:"466"},{alpha2:"MM",alpha3:"MMR",numeric:"104"},{alpha2:"MN",alpha3:"MNG",numeric:"496"},{alpha2:"MO",alpha3:"MAC",numeric:"446"},{alpha2:"MP",alpha3:"MNP",numeric:"580"},{alpha2:"MQ",alpha3:"MTQ",numeric:"474"},{alpha2:"MR",alpha3:"MRT",numeric:"478"},{alpha2:"MS",alpha3:"MSR",numeric:"500"},{alpha2:"MT",alpha3:"MLT",numeric:"470"},{alpha2:"MU",alpha3:"MUS",numeric:"480"},{alpha2:"MV",alpha3:"MDV",numeric:"462"},{alpha2:"MW",alpha3:"MWI",numeric:"454"},{alpha2:"MX",alpha3:"MEX",numeric:"484"},{alpha2:"MY",alpha3:"MYS",numeric:"458"},{alpha2:"MZ",alpha3:"MOZ",numeric:"508"},{alpha2:"NA",alpha3:"NAM",numeric:"516"},{alpha2:"NC",alpha3:"NCL",numeric:"540"},{alpha2:"NE",alpha3:"NER",numeric:"562"},{alpha2:"NF",alpha3:"NFK",numeric:"574"},{alpha2:"NG",alpha3:"NGA",numeric:"566"},{alpha2:"NI",alpha3:"NIC",numeric:"558"},{alpha2:"NL",alpha3:"NLD",numeric:"528"},{alpha2:"NO",alpha3:"NOR",numeric:"578"},{alpha2:"NP",alpha3:"NPL",numeric:"524"},{alpha2:"NR",alpha3:"NRU",numeric:"520"},{alpha2:"NU",alpha3:"NIU",numeric:"570"},{alpha2:"NZ",alpha3:"NZL",numeric:"554"},{alpha2:"OM",alpha3:"OMN",numeric:"512"},{alpha2:"PA",alpha3:"PAN",numeric:"591"},{alpha2:"PE",alpha3:"PER",numeric:"604"},{alpha2:"PF",alpha3:"PYF",numeric:"258"},{alpha2:"PG",alpha3:"PNG",numeric:"598"},{alpha2:"PH",alpha3:"PHL",numeric:"608"},{alpha2:"PK",alpha3:"PAK",numeric:"586"},{alpha2:"PL",alpha3:"POL",numeric:"616"},{alpha2:"PM",alpha3:"SPM",numeric:"666"},{alpha2:"PN",alpha3:"PCN",numeric:"612"},{alpha2:"PR",alpha3:"PRI",numeric:"630"},{alpha2:"PS",alpha3:"PSE",numeric:"275"},{alpha2:"PT",alpha3:"PRT",numeric:"620"},{alpha2:"PW",alpha3:"PLW",numeric:"585"},{alpha2:"PY",alpha3:"PRY",numeric:"600"},{alpha2:"QA",alpha3:"QAT",numeric:"634"},{alpha2:"RE",alpha3:"REU",numeric:"638"},{alpha2:"RO",alpha3:"ROU",numeric:"642"},{alpha2:"RS",alpha3:"SRB",numeric:"688"},{alpha2:"RU",alpha3:"RUS",numeric:"643"},{alpha2:"RW",alpha3:"RWA",numeric:"646"},{alpha2:"SA",alpha3:"SAU",numeric:"682"},{alpha2:"SB",alpha3:"SLB",numeric:"090"},{alpha2:"SC",alpha3:"SYC",numeric:"690"},{alpha2:"SD",alpha3:"SDN",numeric:"729"},{alpha2:"SE",alpha3:"SWE",numeric:"752"},{alpha2:"SG",alpha3:"SGP",numeric:"702"},{alpha2:"SH",alpha3:"SHN",numeric:"654"},{alpha2:"SI",alpha3:"SVN",numeric:"705"},{alpha2:"SJ",alpha3:"SJM",numeric:"744"},{alpha2:"SK",alpha3:"SVK",numeric:"703"},{alpha2:"SL",alpha3:"SLE",numeric:"694"},{alpha2:"SM",alpha3:"SMR",numeric:"674"},{alpha2:"SN",alpha3:"SEN",numeric:"686"},{alpha2:"SO",alpha3:"SOM",numeric:"706"},{alpha2:"SR",alpha3:"SUR",numeric:"740"},{alpha2:"SS",alpha3:"SSD",numeric:"728"},{alpha2:"ST",alpha3:"STP",numeric:"678"},{alpha2:"SV",alpha3:"SLV",numeric:"222"},{alpha2:"SX",alpha3:"SXM",numeric:"534"},{alpha2:"SY",alpha3:"SYR",numeric:"760"},{alpha2:"SZ",alpha3:"SWZ",numeric:"748"},{alpha2:"TC",alpha3:"TCA",numeric:"796"},{alpha2:"TD",alpha3:"TCD",numeric:"148"},{alpha2:"TF",alpha3:"ATF",numeric:"260"},{alpha2:"TG",alpha3:"TGO",numeric:"768"},{alpha2:"TH",alpha3:"THA",numeric:"764"},{alpha2:"TJ",alpha3:"TJK",numeric:"762"},{alpha2:"TK",alpha3:"TKL",numeric:"772"},{alpha2:"TL",alpha3:"TLS",numeric:"626"},{alpha2:"TM",alpha3:"TKM",numeric:"795"},{alpha2:"TN",alpha3:"TUN",numeric:"788"},{alpha2:"TO",alpha3:"TON",numeric:"776"},{alpha2:"TR",alpha3:"TUR",numeric:"792"},{alpha2:"TT",alpha3:"TTO",numeric:"780"},{alpha2:"TV",alpha3:"TUV",numeric:"798"},{alpha2:"TW",alpha3:"TWN",numeric:"158"},{alpha2:"TZ",alpha3:"TZA",numeric:"834"},{alpha2:"UA",alpha3:"UKR",numeric:"804"},{alpha2:"UG",alpha3:"UGA",numeric:"800"},{alpha2:"UM",alpha3:"UMI",numeric:"581"},{alpha2:"US",alpha3:"USA",numeric:"840"},{alpha2:"UY",alpha3:"URY",numeric:"858"},{alpha2:"UZ",alpha3:"UZB",numeric:"860"},{alpha2:"VA",alpha3:"VAT",numeric:"336"},{alpha2:"VC",alpha3:"VCT",numeric:"670"},{alpha2:"VE",alpha3:"VEN",numeric:"862"},{alpha2:"VG",alpha3:"VGB",numeric:"092"},{alpha2:"VI",alpha3:"VIR",numeric:"850"},{alpha2:"VN",alpha3:"VNM",numeric:"704"},{alpha2:"VU",alpha3:"VUT",numeric:"548"},{alpha2:"WF",alpha3:"WLF",numeric:"876"},{alpha2:"WS",alpha3:"WSM",numeric:"882"},{alpha2:"YE",alpha3:"YEM",numeric:"887"},{alpha2:"YT",alpha3:"MYT",numeric:"175"},{alpha2:"ZA",alpha3:"ZAF",numeric:"710"},{alpha2:"ZM",alpha3:"ZMB",numeric:"894"},{alpha2:"ZW",alpha3:"ZWE",numeric:"716"}],time_zone:te},metadata:{title:"Base",code:"base"},system:{directory_path:["/Applications","/bin","/boot","/boot/defaults","/dev","/etc","/etc/defaults","/etc/mail","/etc/namedb","/etc/periodic","/etc/ppp","/home","/home/user","/home/user/dir","/lib","/Library","/lost+found","/media","/mnt","/net","/Network","/opt","/opt/bin","/opt/include","/opt/lib","/opt/sbin","/opt/share","/private","/private/tmp","/private/var","/proc","/rescue","/root","/sbin","/selinux","/srv","/sys","/System","/tmp","/Users","/usr","/usr/X11R6","/usr/bin","/usr/include","/usr/lib","/usr/libdata","/usr/libexec","/usr/local/bin","/usr/local/src","/usr/obj","/usr/ports","/usr/sbin","/usr/share","/usr/src","/var","/var/log","/var/mail","/var/spool","/var/tmp","/var/yp"],mime_type:{"application/epub+zip":{extensions:["epub"]},"application/gzip":{extensions:["gz"]},"application/java-archive":{extensions:["jar","war","ear"]},"application/json":{extensions:["json","map"]},"application/ld+json":{extensions:["jsonld"]},"application/msword":{extensions:["doc","dot"]},"application/octet-stream":{extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/ogg":{extensions:["ogx"]},"application/pdf":{extensions:["pdf"]},"application/rtf":{extensions:["rtf"]},"application/vnd.amazon.ebook":{extensions:["azw"]},"application/vnd.apple.installer+xml":{extensions:["mpkg"]},"application/vnd.mozilla.xul+xml":{extensions:["xul"]},"application/vnd.ms-excel":{extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-fontobject":{extensions:["eot"]},"application/vnd.ms-powerpoint":{extensions:["ppt","pps","pot"]},"application/vnd.oasis.opendocument.presentation":{extensions:["odp"]},"application/vnd.oasis.opendocument.spreadsheet":{extensions:["ods"]},"application/vnd.oasis.opendocument.text":{extensions:["odt"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{extensions:["docx"]},"application/vnd.rar":{extensions:["rar"]},"application/vnd.visio":{extensions:["vsd","vst","vss","vsw"]},"application/x-7z-compressed":{extensions:["7z"]},"application/x-abiword":{extensions:["abw"]},"application/x-bzip":{extensions:["bz"]},"application/x-bzip2":{extensions:["bz2","boz"]},"application/x-csh":{extensions:["csh"]},"application/x-freearc":{extensions:["arc"]},"application/x-httpd-php":{extensions:["php"]},"application/x-sh":{extensions:["sh"]},"application/x-tar":{extensions:["tar"]},"application/xhtml+xml":{extensions:["xhtml","xht"]},"application/xml":{extensions:["xml","xsl","xsd","rng"]},"application/zip":{extensions:["zip"]},"audio/3gpp":{extensions:["3gpp"]},"audio/3gpp2":{extensions:["3g2"]},"audio/aac":{extensions:["aac"]},"audio/midi":{extensions:["mid","midi","kar","rmi"]},"audio/mpeg":{extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{extensions:["oga","ogg","spx","opus"]},"audio/opus":{extensions:["opus"]},"audio/wav":{extensions:["wav"]},"audio/webm":{extensions:["weba"]},"font/otf":{extensions:["otf"]},"font/ttf":{extensions:["ttf"]},"font/woff":{extensions:["woff"]},"font/woff2":{extensions:["woff2"]},"image/avif":{extensions:["avif"]},"image/bmp":{extensions:["bmp"]},"image/gif":{extensions:["gif"]},"image/jpeg":{extensions:["jpeg","jpg","jpe"]},"image/png":{extensions:["png"]},"image/svg+xml":{extensions:["svg","svgz"]},"image/tiff":{extensions:["tif","tiff"]},"image/vnd.microsoft.icon":{extensions:["ico"]},"image/webp":{extensions:["webp"]},"text/calendar":{extensions:["ics","ifb"]},"text/css":{extensions:["css"]},"text/csv":{extensions:["csv"]},"text/html":{extensions:["html","htm","shtml"]},"text/javascript":{extensions:["js","mjs"]},"text/plain":{extensions:["txt","text","conf","def","list","log","in","ini"]},"video/3gpp":{extensions:["3gp","3gpp"]},"video/3gpp2":{extensions:["3g2"]},"video/mp2t":{extensions:["ts"]},"video/mp4":{extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{extensions:["ogv"]},"video/webm":{extensions:["webm"]},"video/x-msvideo":{extensions:["avi"]}}}},tr=new class extends eN{rawDefinitions;definitions;airline=new f(this);animal=new eP(this);book=new ej(this);color=new k(this);commerce=new eR(this);company=new eM(this);database=new eL(this);date=new el(this);finance=new eU(this);food=new eB(this);git=new eJ(this);hacker=new eW(this);helpers=new ew(this);image=new eK(this);internet=new D(this);location=new ex(this);lorem=new eX(this);music=new eQ(this);person=new B(this);phone=new e0(this);science=new e1(this);system=new e5(this);vehicle=new e8(this);word=new e7(this);constructor(e){super({randomizer:e.randomizer,seed:e.seed});let{locale:t}=e;if(Array.isArray(t)){if(0===t.length)throw new a("The locale option must contain at least one locale definition.");t=eC(t)}this.rawDefinitions=t,this.definitions=ei(this.rawDefinitions)}getMetadata(){return this.rawDefinitions.metadata??{}}}({locale:[n.a,tt]})},41180:(e,t,r)=>{"use strict";r.d(t,{YN:()=>C,B2:()=>V,fJ:()=>P,Vi:()=>j,jY:()=>D,ck:()=>M,Pq:()=>U,Fm:()=>J,AO:()=>z,zZ:()=>R,pG:()=>W,lH:()=>F,GH:()=>N,Bp:()=>B});var n=r(69530),i=r(28809),a=r(51628);r(73897);var s=r(92173),o=r(67146),l=r(87150),u=r(78488),c=r(64184),d=r(25050),p=r(23294);function h({name:e,serialized:t}){return void 0!==e?e:t?.name!==void 0?t.name:t?.id!==void 0&&Array.isArray(t?.id)?t.id[t.id.length-1]:"Unnamed"}let f=e=>"event_stream_tracer"===e.name;var m=class extends d.JS{autoClose=!0;includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;runInfoMap=new Map;tappedPromises=new Map;transformStream;writer;receiveStream;readableStreamClosed=!1;name="event_stream_tracer";lc_prefer_streaming=!0;constructor(e){super({_awaitHandler:!0,...e}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream({flush:()=>{this.readableStreamClosed=!0}}),this.writer=this.transformStream.writable.getWriter(),this.receiveStream=l.bO.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){let t=e.tags??[],r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.runType)),void 0!==this.includeTags&&(r=r||void 0!==t.find(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.runType)),void 0!==this.excludeTags&&(r=r&&t.every(e=>!this.excludeTags?.includes(e))),r}async *tapOutputIterable(e,t){let r=await t.next();if(r.done)return;let n=this.runInfoMap.get(e);if(void 0===n)return void(yield r.value);function i(e,t){return"llm"===e&&"string"==typeof t?new p.mu({text:t}):t}let a=this.tappedPromises.get(e);if(void 0===a){let s;a=new Promise(e=>{s=e}),this.tappedPromises.set(e,a);try{let a={event:`on_${n.runType}_stream`,run_id:e,name:n.name,tags:n.tags,metadata:n.metadata,data:{}};for await(let e of(await this.send({...a,data:{chunk:i(n.runType,r.value)}},n),yield r.value,t))"tool"!==n.runType&&"retriever"!==n.runType&&await this.send({...a,data:{chunk:i(n.runType,e)}},n),yield e}finally{s?.()}}else for await(let e of(yield r.value,t))yield e}async send(e,t){!this.readableStreamClosed&&this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){let r=this.tappedPromises.get(e.run_id);void 0!==r?r.then(()=>{this.send(e,t)}):await this.send(e,t)}async onLLMStart(e){let t=h(e),r=void 0!==e.inputs.messages?"chat_model":"llm",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,n);let i=`on_${r}_start`;await this.send({event:i,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onLLMNewToken(e,t,r){let n,i,a=this.runInfoMap.get(e.id);if(void 0===a)throw Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(1!==this.runInfoMap.size){if("chat_model"===a.runType)i="on_chat_model_stream",n=r?.chunk===void 0?new c.H({content:t,id:`run-${e.id}`}):r.chunk.message;else if("llm"===a.runType)i="on_llm_stream",n=r?.chunk===void 0?new p.mu({text:t}):r.chunk;else throw Error(`Unexpected run type ${a.runType}`);await this.send({event:i,data:{chunk:n},run_id:e.id,name:a.name,tags:a.tags,metadata:a.metadata},a)}}async onLLMEnd(e){let t,r,n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===n)throw Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);let i=e.outputs?.generations;if("chat_model"===n.runType){for(let e of i??[]){if(void 0!==r)break;r=e[0]?.message}t="on_chat_model_end"}else if("llm"===n.runType)r={generations:i?.map(e=>e.map(e=>({text:e.text,generationInfo:e.generationInfo}))),llmOutput:e.outputs?.llmOutput??{}},t="on_llm_end";else throw Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:t,data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){let t=h(e),r=e.run_type??"chain",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:e.run_type},i={};""===e.inputs.input&&1===Object.keys(e.inputs).length?(i={},n.inputs={}):void 0!==e.inputs.input?(i.input=e.inputs.input,n.inputs=e.inputs.input):(i.input=e.inputs,n.inputs=e.inputs),this.runInfoMap.set(e.id,n),await this.send({event:`on_${r}_start`,data:i,name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onChainEnd(e){let t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw Error(`onChainEnd: Run ID ${e.id} not found in run map.`);let r=`on_${e.run_type}_end`,n=e.inputs??t.inputs??{},i={output:e.outputs?.output??e.outputs,input:n};n.input&&1===Object.keys(n).length&&(i.input=n.input,t.inputs=n.input),await this.sendEndEvent({event:r,data:i,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)}async onToolStart(e){let t=h(e),r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:e.extra?.metadata??{}},r)}async onToolEnd(e){let t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(void 0===t.inputs)throw Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);let r=e.outputs?.output===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){let t=h(e),r="retriever",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:r,inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,n),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onRetrieverEnd(e){let t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:e.outputs?.documents??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,r){let n=this.runInfoMap.get(r);if(void 0===n)throw Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:n.tags,metadata:n.metadata,data:t},n)}async finish(){Promise.all([...this.tappedPromises.values()]).finally(()=>{this.writer.close()})}},g=r(39921),y=r(65408),v=class extends d.JS{name="RootListenersTracer";rootId;config;argOnStart;argOnEnd;argOnError;constructor({config:e,onStart:t,onEnd:r,onError:n}){super({_awaitHandler:!0}),this.config=e,this.argOnStart=t,this.argOnEnd=r,this.argOnError=n}persistRun(e){return Promise.resolve()}async onRunCreate(e){!this.rootId&&(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}},_=r(92096),b=r(34497),w=r(98864);function k(e){let t=new TextEncoder,r=new ReadableStream({async start(r){for await(let n of e)r.enqueue(t.encode(`event: data
data: ${JSON.stringify(n)}

`));r.enqueue(t.encode("event: end\n\n")),r.close()}});return l.bO.fromReadableStream(r)}function x(e){return"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.iterator]&&"function"==typeof e.next}let $=e=>null!=e&&"object"==typeof e&&"next"in e&&"function"==typeof e.next;function S(e){return"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.asyncIterator]}function*I(e,t){for(;;){let{value:r,done:n}=a.N.runWithConfig((0,s.DY)(e),t.next.bind(t),!0);if(n)break;yield r}}async function*E(e,t){let r=t[Symbol.asyncIterator]();for(;;){let{value:n,done:i}=await a.N.runWithConfig((0,s.DY)(e),r.next.bind(t),!0);if(i)break;yield n}}var A=r(4556),O=r(32197),T=r(19839);function N(e,t){return!e||Array.isArray(e)||e instanceof Date||"object"!=typeof e?{[t]:e}:e}var C=class extends n.yL{lc_runnable=!0;name;getName(e){let t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}withRetry(e){return new z({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new P({bound:this,config:e,kwargs:{}})}withFallbacks(e){return new F({runnable:this,fallbacks:Array.isArray(e)?e:e.fallbacks})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(s.ZI);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");let r=Object.fromEntries(Object.entries(e).filter(([e])=>"runId"!==e));return Array.from({length:t},(t,n)=>(0,s.ZI)(0===n?e:r))}return Array.from({length:t},()=>(0,s.ZI)(e))}async batch(e,t,r){let n=this._getOptionsList(t??{},e.length),i=n[0]?.maxConcurrency??r?.maxConcurrency,a=new y.g({maxConcurrency:i,onFailedAttempt:e=>{throw e}});return Promise.all(e.map((e,t)=>a.call(async()=>{try{return await this.invoke(e,n[t])}catch(e){if(r?.returnExceptions)return e;throw e}})))}async *_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){let r=(0,s.ZI)(t),n=new l.Tr({generator:this._streamIterator(e,r),config:r});return await n.setup,l.bO.fromAsyncGenerator(n)}_separateRunnableConfigFromCallOptions(e){let t;t=void 0===e?(0,s.ZI)(e):(0,s.ZI)({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});let r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[t,r]}async _callWithConfig(e,t,r){let n,i=(0,s.ZI)(r),a=await (0,s.kJ)(i),l=await a?.handleChainStart(this.toJSON(),N(t,"input"),i.runId,i?.runType,void 0,void 0,i?.runName??this.getName());delete i.runId;try{let a=e.call(this,t,i,l);n=await (0,o.o)(a,r?.signal)}catch(e){throw await l?.handleChainError(e),e}return await l?.handleChainEnd(N(n,"output")),n}async _batchWithConfig(e,t,r,n){let i,a=this._getOptionsList(r??{},t.length),l=await Promise.all(a.map(s.kJ)),u=await Promise.all(l.map(async(e,r)=>{let n=await e?.handleChainStart(this.toJSON(),N(t[r],"input"),a[r].runId,a[r].runType,void 0,void 0,a[r].runName??this.getName());return delete a[r].runId,n}));try{let r=e.call(this,t,a,u,n);i=await (0,o.o)(r,a?.[0]?.signal)}catch(e){throw await Promise.all(u.map(t=>t?.handleChainError(e))),e}return await Promise.all(u.map(e=>e?.handleChainEnd(N(i,"output")))),i}_concatOutputChunks(e,t){return(0,l.xW)(e,t)}async *_transformStreamWithConfig(e,t,r){let n,i,a,o=!0,c=!0,d=(0,s.ZI)(r),p=await (0,s.kJ)(d),h=this;async function*m(){for await(let t of e){if(o)if(void 0===n)n=t;else try{n=h._concatOutputChunks(n,t)}catch{n=void 0,o=!1}yield t}}try{let e=await (0,l.DS)(t.bind(this),m(),async()=>p?.handleChainStart(this.toJSON(),{input:""},d.runId,d.runType,void 0,void 0,d.runName??this.getName(),void 0,{lc_defers_inputs:!0}),r?.signal,d);delete d.runId,a=e.setup;let n=a?.handlers.find(f),s=e.output;void 0!==n&&void 0!==a&&(s=n.tapOutputIterable(a.runId,s));let o=a?.handlers.find(u.l7);for await(let e of(void 0!==o&&void 0!==a&&(s=o.tapOutputIterable(a.runId,s)),s))if(yield e,c)if(void 0===i)i=e;else try{i=this._concatOutputChunks(i,e)}catch{i=void 0,c=!1}}catch(e){throw await a?.handleChainError(e,void 0,void 0,void 0,{inputs:N(n,"input")}),e}await a?.handleChainEnd(i??{},void 0,void 0,void 0,{inputs:N(n,"input")})}getGraph(e){let t=new w.T,r=t.addNode({name:`${this.getName()}Input`,schema:A.z.any()}),n=t.addNode(this),i=t.addNode({name:`${this.getName()}Output`,schema:A.z.any()});return t.addEdge(r,n),t.addEdge(n,i),t}pipe(e){return new R({first:this,last:B(e)})}pick(e){return this.pipe(new J(e))}assign(e){return this.pipe(new V(new M({steps:e})))}async *transform(e,t){let r;for await(let t of e)r=void 0===r?t:this._concatOutputChunks(r,t);yield*this._streamIterator(r,(0,s.ZI)(t))}async *streamLog(e,t,r){let n=new u.y9({...r,autoClose:!1,_schemaFormat:"original"}),i=(0,s.ZI)(t);yield*this._streamLog(e,n,i)}async *_streamLog(e,t,r){let{callbacks:n}=r;if(void 0===n)r.callbacks=[t];else if(Array.isArray(n))r.callbacks=n.concat([t]);else{let e=n.copy();e.addHandler(t,!0),r.callbacks=e}let i=this.stream(e,r),a=async function(){try{for await(let e of(await i)){let r=new u.Od({ops:[{op:"add",path:"/streamed_output/-",value:e}]});await t.writer.write(r)}}finally{await t.writer.close()}}();try{for await(let e of t)yield e}finally{await a}}streamEvents(e,t,r){let n;if("v1"===t.version)n=this._streamEventsV1(e,t,r);else if("v2"===t.version)n=this._streamEventsV2(e,t,r);else throw Error('Only versions "v1" and "v2" of the schema are currently supported.');return"text/event-stream"===t.encoding?k(n):l.bO.fromAsyncGenerator(n)}async *_streamEventsV2(e,t,r){let n,i=new m({...r,autoClose:!1}),a=(0,s.ZI)(t),o=a.runId??(0,O.A)();a.runId=o;let l=a.callbacks;if(void 0===l)a.callbacks=[i];else if(Array.isArray(l))a.callbacks=l.concat(i);else{let e=l.copy();e.addHandler(i,!0),a.callbacks=e}let u=new AbortController,c=this,d=async function(){let r,n=null;try{t?.signal?"any"in AbortSignal?r=AbortSignal.any([u.signal,t.signal]):(r=t.signal,n=()=>{u.abort()},t.signal.addEventListener("abort",n,{once:!0})):r=u.signal;let s=await c.stream(e,{...a,signal:r});for await(let e of i.tapOutputIterable(o,s))if(u.signal.aborted)break}finally{await i.finish(),r&&n&&r.removeEventListener("abort",n)}}(),p=!1;try{for await(let t of i){if(!p){t.data.input=e,p=!0,n=t.run_id,yield t;continue}t.run_id===n&&t.event.endsWith("_end")&&t.data?.input&&delete t.data.input,yield t}}finally{u.abort(),await d}}async *_streamEventsV1(e,t,r){let n,i=!1,a=(0,s.ZI)(t),o=a.tags??[],l=a.metadata??{},c=a.runName??this.getName(),d=new u.y9({...r,autoClose:!1,_schemaFormat:"streaming_events"}),p=new _.GW({...r});for await(let t of this._streamLog(e,d,a)){if(void 0===(n=n?n.concat(t):u.sD.fromRunLogPatch(t)).state)throw Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!i){i=!0;let t={...n.state},r={run_id:t.id,event:`on_${t.type}_start`,name:c,tags:o,metadata:l,data:{input:e}};p.includeEvent(r,t.type)&&(yield r)}for(let e of[...new Set(t.ops.filter(e=>e.path.startsWith("/logs/")).map(e=>e.path.split("/")[2]))]){let t,r={},i=n.state.logs[e];if("start"==(t=void 0===i.end_time?i.streamed_output.length>0?"stream":"start":"end"))void 0!==i.inputs&&(r.input=i.inputs);else if("end"===t)void 0!==i.inputs&&(r.input=i.inputs),r.output=i.final_output;else if("stream"===t){let e=i.streamed_output.length;if(1!==e)throw Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${i.name}"`);r={chunk:i.streamed_output[0]},i.streamed_output=[]}yield{event:`on_${i.type}_${t}`,name:i.name,run_id:i.id,tags:i.tags,metadata:i.metadata,data:r}}let{state:r}=n;if(r.streamed_output.length>0){let e=r.streamed_output.length;if(1!==e)throw Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${r.name}"`);let t={chunk:r.streamed_output[0]};r.streamed_output=[];let n={event:`on_${r.type}_stream`,run_id:r.id,tags:o,metadata:l,name:c,data:t};p.includeEvent(n,r.type)&&(yield n)}}let h=n?.state;if(void 0!==h){let e={event:`on_${h.type}_end`,name:c,run_id:h.id,tags:o,metadata:l,data:{output:h.final_output}};p.includeEvent(e,h.type)&&(yield e)}}static isRunnable(e){return(0,_.Tu)(e)}withListeners({onStart:e,onEnd:t,onError:r}){return new P({bound:this,config:{},configFactories:[n=>({callbacks:[new v({config:n,onStart:e,onEnd:t,onError:r})]})]})}asTool(e){return q(this,e)}},P=class e extends C{static lc_name(){return"RunnableBinding"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;bound;config;kwargs;configFactories;constructor(e){super(e),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){let t=(0,s.SV)(this.config,...e);return(0,s.SV)(t,...this.configFactories?await Promise.all(this.configFactories.map(async e=>await e(t))):[])}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new z({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e?.stopAfterAttempt,...e})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig(t,this.kwargs))}async batch(e,t,r){let n=Array.isArray(t)?await Promise.all(t.map(async e=>this._mergeConfig((0,s.ZI)(e),this.kwargs))):await this._mergeConfig((0,s.ZI)(t),this.kwargs);return this.bound.batch(e,n,r)}_concatOutputChunks(e,t){return this.bound._concatOutputChunks(e,t)}async *_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig((0,s.ZI)(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig((0,s.ZI)(t),this.kwargs))}async *transform(e,t){yield*this.bound.transform(e,await this._mergeConfig((0,s.ZI)(t),this.kwargs))}streamEvents(e,t,r){let n=this,i=async function*(){yield*n.bound.streamEvents(e,{...await n._mergeConfig((0,s.ZI)(t),n.kwargs),version:t.version},r)};return l.bO.fromAsyncGenerator(i())}static isRunnableBinding(e){return e.bound&&C.isRunnable(e.bound)}withListeners({onStart:t,onEnd:r,onError:n}){return new e({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[e=>({callbacks:[new v({config:e,onStart:t,onEnd:r,onError:n})]})]})}},j=class e extends C{static lc_name(){return"RunnableEach"}lc_serializable=!0;lc_namespace=["langchain_core","runnables"];bound;constructor(e){super(e),this.bound=e.bound}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _invoke(e,t,r){return this.bound.batch(e,(0,s.tn)(t,{callbacks:r?.getChild()}))}withListeners({onStart:t,onEnd:r,onError:n}){return new e({bound:this.bound.withListeners({onStart:t,onEnd:r,onError:n})})}},z=class extends P{static lc_name(){return"RunnableRetry"}lc_namespace=["langchain_core","runnables"];maxAttemptNumber=3;onFailedAttempt=()=>{};constructor(e){super(e),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,r){let n=e>1?`retry:attempt:${e}`:void 0;return(0,s.tn)(t,{callbacks:r?.getChild(n)})}async _invoke(e,t,r){return(0,g.J)(n=>super.invoke(e,this._patchConfigForRetry(n,t,r)),{onFailedAttempt:({error:t})=>this.onFailedAttempt(t,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _batch(e,t,r,n){let i={};try{await (0,g.J)(async a=>{let s,o=e.map((e,t)=>t).filter(e=>void 0===i[e.toString()]||i[e.toString()]instanceof Error),l=o.map(t=>e[t]),u=o.map(e=>this._patchConfigForRetry(a,t?.[e],r?.[e])),c=await super.batch(l,u,{...n,returnExceptions:!0});for(let e=0;e<c.length;e+=1){let t=c[e],r=o[e];t instanceof Error&&void 0===s&&((s=t).input=l[e]),i[r.toString()]=t}if(s)throw s;return c},{onFailedAttempt:({error:e})=>this.onFailedAttempt(e,e.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(e){if(n?.returnExceptions!==!0)throw e}return Object.keys(i).sort((e,t)=>parseInt(e,10)-parseInt(t,10)).map(e=>i[parseInt(e,10)])}async batch(e,t,r){return this._batchWithConfig(this._batch.bind(this),e,t,r)}},R=class e extends C{static lc_name(){return"RunnableSequence"}first;middle=[];last;omitSequenceTags=!1;lc_serializable=!0;lc_namespace=["langchain_core","runnables"];constructor(e){super(e),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){let r,n=(0,s.ZI)(t),i=await (0,s.kJ)(n),a=await i?.handleChainStart(this.toJSON(),N(e,"input"),n.runId,void 0,void 0,void 0,n?.runName);delete n.runId;let l=e;try{let e=[this.first,...this.middle];for(let r=0;r<e.length;r+=1){let i=e[r].invoke(l,(0,s.tn)(n,{callbacks:a?.getChild(this.omitSequenceTags?void 0:`seq:step:${r+1}`)}));l=await (0,o.o)(i,t?.signal)}if(t?.signal?.aborted)throw(0,o.F)(t.signal);r=await this.last.invoke(l,(0,s.tn)(n,{callbacks:a?.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(e){throw await a?.handleChainError(e),e}return await a?.handleChainEnd(N(r,"output")),r}async batch(e,t,r){let n=this._getOptionsList(t??{},e.length),i=await Promise.all(n.map(s.kJ)),a=await Promise.all(i.map(async(t,r)=>{let i=await t?.handleChainStart(this.toJSON(),N(e[r],"input"),n[r].runId,void 0,void 0,void 0,n[r].runName);return delete n[r].runId,i})),l=e;try{for(let e=0;e<this.steps.length;e+=1){let t=this.steps[e].batch(l,a.map((t,r)=>{let i=t?.getChild(this.omitSequenceTags?void 0:`seq:step:${e+1}`);return(0,s.tn)(n[r],{callbacks:i})}),r);l=await (0,o.o)(t,n[0]?.signal)}}catch(e){throw await Promise.all(a.map(t=>t?.handleChainError(e))),e}return await Promise.all(a.map(e=>e?.handleChainEnd(N(l,"output")))),l}_concatOutputChunks(e,t){return this.last._concatOutputChunks(e,t)}async *_streamIterator(e,t){let r,n=await (0,s.kJ)(t),{runId:i,...a}=t??{},o=await n?.handleChainStart(this.toJSON(),N(e,"input"),i,void 0,void 0,void 0,a?.runName),l=[this.first,...this.middle,this.last],u=!0;async function*c(){yield e}try{let e=l[0].transform(c(),(0,s.tn)(a,{callbacks:o?.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let t=1;t<l.length;t+=1){let r=l[t];e=await r.transform(e,(0,s.tn)(a,{callbacks:o?.getChild(this.omitSequenceTags?void 0:`seq:step:${t+1}`)}))}for await(let n of e)if(t?.signal?.throwIfAborted(),yield n,u)if(void 0===r)r=n;else try{r=this._concatOutputChunks(r,n)}catch{r=void 0,u=!1}}catch(e){throw await o?.handleChainError(e),e}await o?.handleChainEnd(N(r,"output"))}getGraph(e){let t=new w.T,r=null;return this.steps.forEach((n,i)=>{let a=n.getGraph(e);0!==i&&a.trimFirstNode(),i!==this.steps.length-1&&a.trimLastNode(),t.extend(a);let s=a.firstNode();if(!s)throw Error(`Runnable ${n} has no first node`);r&&t.addEdge(r,s),r=a.lastNode()}),t}pipe(t){return new e(e.isRunnableSequence(t)?{first:this.first,middle:this.middle.concat([this.last,t.first,...t.middle]),last:t.last,name:this.name??t.name}:{first:this.first,middle:[...this.middle,this.last],last:B(t),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&C.isRunnable(e)}static from([t,...r],n){let i={};return"string"==typeof n?i.name=n:void 0!==n&&(i=n),new e({...i,first:B(t),middle:r.slice(0,-1).map(B),last:B(r[r.length-1])})}},M=class e extends C{static lc_name(){return"RunnableMap"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;steps;getStepsKeys(){return Object.keys(this.steps)}constructor(e){for(let[t,r]of(super(e),this.steps={},Object.entries(e.steps)))this.steps[t]=B(r)}static from(t){return new e({steps:t})}async invoke(e,t){let r=(0,s.ZI)(t),n=await (0,s.kJ)(r),i=await n?.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r?.runName);delete r.runId;let a={};try{let n=Object.entries(this.steps).map(async([t,n])=>{a[t]=await n.invoke(e,(0,s.tn)(r,{callbacks:i?.getChild(`map:key:${t}`)}))});await (0,o.o)(Promise.all(n),t?.signal)}catch(e){throw await i?.handleChainError(e),e}return await i?.handleChainEnd(a),a}async *_transform(e,t,r){let n={...this.steps},i=(0,l.gI)(e,Object.keys(n).length),a=new Map(Object.entries(n).map(([e,n],a)=>{let o=n.transform(i[a],(0,s.tn)(r,{callbacks:t?.getChild(`map:key:${e}`)}));return[e,o.next().then(t=>({key:e,gen:o,result:t}))]}));for(;a.size;){let e=Promise.race(a.values()),{key:t,result:n,gen:i}=await (0,o.o)(e,r?.signal);a.delete(t),n.done||(yield{[t]:n.value},a.set(t,i.next().then(e=>({key:t,gen:i,result:e}))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}let n=(0,s.ZI)(t),i=new l.Tr({generator:this.transform(r(),n),config:n});return await i.setup,l.bO.fromAsyncGenerator(i)}},L=class e extends C{lc_serializable=!1;lc_namespace=["langchain_core","runnables"];func;constructor(e){if(super(e),!(0,T.GZ)(e.func))throw Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,t){let[r]=this._getOptionsList(t??{},1),n=await (0,s.kJ)(r),i=this.func((0,s.tn)(r,{callbacks:n}),e);return(0,o.o)(i,r?.signal)}async *_streamIterator(e,t){let[r]=this._getOptionsList(t??{},1),n=await this.invoke(e,t);if(S(n)){for await(let e of n)r?.signal?.throwIfAborted(),yield e;return}if($(n)){for(;;){r?.signal?.throwIfAborted();let e=n.next();if(e.done)break;yield e.value}return}yield n}static from(t){return new e({func:t})}};function Z(e){if((0,T.GZ)(e))throw Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var D=class e extends C{static lc_name(){return"RunnableLambda"}lc_namespace=["langchain_core","runnables"];func;constructor(e){if((0,T.GZ)(e.func))return L.from(e.func);super(e),Z(e.func),this.func=e.func}static from(t){return new e({func:t})}async _invoke(e,t,r){return new Promise((n,i)=>{let o=(0,s.tn)(t,{callbacks:r?.getChild(),recursionLimit:(t?.recursionLimit??s.p_)-1});a.N.runWithConfig((0,s.DY)(o),async()=>{try{let r=await this.func(e,{...o});if(r&&C.isRunnable(r)){if(t?.recursionLimit===0)throw Error("Recursion limit reached.");r=await r.invoke(e,{...o,recursionLimit:(o.recursionLimit??s.p_)-1})}else if(S(r)){let e;for await(let n of E(o,r))if(t?.signal?.throwIfAborted(),void 0===e)e=n;else try{e=this._concatOutputChunks(e,n)}catch{e=n}r=e}else if(x(r)){let e;for(let n of I(o,r))if(t?.signal?.throwIfAborted(),void 0===e)e=n;else try{e=this._concatOutputChunks(e,n)}catch{e=n}r=e}n(r)}catch(e){i(e)}})})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async *_transform(e,t,r){let n;for await(let t of e)if(void 0===n)n=t;else try{n=this._concatOutputChunks(n,t)}catch{n=t}let i=(0,s.tn)(r,{callbacks:t?.getChild(),recursionLimit:(r?.recursionLimit??s.p_)-1}),o=await new Promise((e,t)=>{a.N.runWithConfig((0,s.DY)(i),async()=>{try{let t=await this.func(n,{...i,config:i});e(t)}catch(e){t(e)}})});if(o&&C.isRunnable(o)){if(r?.recursionLimit===0)throw Error("Recursion limit reached.");for await(let e of(await o.stream(n,i)))yield e}else if(S(o))for await(let e of E(i,o))r?.signal?.throwIfAborted(),yield e;else if(x(o))for(let e of I(i,o))r?.signal?.throwIfAborted(),yield e;else yield o}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}let n=(0,s.ZI)(t),i=new l.Tr({generator:this.transform(r(),n),config:n});return await i.setup,l.bO.fromAsyncGenerator(i)}},U=class extends M{},F=class extends C{static lc_name(){return"RunnableWithFallbacks"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;runnable;fallbacks;constructor(e){super(e),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){for(let e of(yield this.runnable,this.fallbacks))yield e}async invoke(e,t){let r=(0,s.ZI)(t),n=await (0,s.kJ)(r),{runId:i,...o}=r,l=await n?.handleChainStart(this.toJSON(),N(e,"input"),i,void 0,void 0,void 0,o?.runName),u=(0,s.tn)(o,{callbacks:l?.getChild()});return await a.N.runWithConfig(u,async()=>{let t;for(let n of this.runnables()){r?.signal?.throwIfAborted();try{let t=await n.invoke(e,u);return await l?.handleChainEnd(N(t,"output")),t}catch(e){void 0===t&&(t=e)}}if(void 0===t)throw Error("No error stored at end of fallback.");throw await l?.handleChainError(t),t})}async *_streamIterator(e,t){let r,n,i,a=(0,s.ZI)(t),o=await (0,s.kJ)(a),{runId:l,...u}=a,c=await o?.handleChainStart(this.toJSON(),N(e,"input"),l,void 0,void 0,void 0,u?.runName);for(let t of this.runnables()){a?.signal?.throwIfAborted();let i=(0,s.tn)(u,{callbacks:c?.getChild()});try{let r=await t.stream(e,i);n=E(i,r);break}catch(e){void 0===r&&(r=e)}}if(void 0===n){let e=r??Error("No error stored at end of fallback.");throw await c?.handleChainError(e),e}try{for await(let e of n){yield e;try{i=void 0===i?i:this._concatOutputChunks(i,e)}catch{i=void 0}}}catch(e){throw await c?.handleChainError(e),e}await c?.handleChainEnd(N(i,"output"))}async batch(e,t,r){let n;if(r?.returnExceptions)throw Error("Not implemented.");let i=this._getOptionsList(t??{},e.length),a=await Promise.all(i.map(e=>(0,s.kJ)(e))),o=await Promise.all(a.map(async(t,r)=>{let n=await t?.handleChainStart(this.toJSON(),N(e[r],"input"),i[r].runId,void 0,void 0,void 0,i[r].runName);return delete i[r].runId,n}));for(let t of this.runnables()){i[0].signal?.throwIfAborted();try{let n=await t.batch(e,o.map((e,t)=>(0,s.tn)(i[t],{callbacks:e?.getChild()})),r);return await Promise.all(o.map((e,t)=>e?.handleChainEnd(N(n[t],"output")))),n}catch(e){void 0===n&&(n=e)}}if(!n)throw Error("No error stored at end of fallbacks.");throw await Promise.all(o.map(e=>e?.handleChainError(n))),n}};function B(e){if("function"==typeof e)return new D({func:e});if(C.isRunnable(e))return e;if(Array.isArray(e)||"object"!=typeof e)throw Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`);{let t={};for(let[r,n]of Object.entries(e))t[r]=B(n);return new M({steps:t})}}var V=class extends C{static lc_name(){return"RunnableAssign"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;mapper;constructor(e){e instanceof M&&(e={mapper:e}),super(e),this.mapper=e.mapper}async invoke(e,t){let r=await this.mapper.invoke(e,t);return{...e,...r}}async *_transform(e,t,r){let n=this.mapper.getStepsKeys(),[i,a]=(0,l.gI)(e),o=this.mapper.transform(a,(0,s.tn)(r,{callbacks:t?.getChild()})),u=o.next();for await(let e of i){if("object"!=typeof e||Array.isArray(e))throw Error(`RunnableAssign can only be used with objects as input, got ${typeof e}`);let t=Object.fromEntries(Object.entries(e).filter(([e])=>!n.includes(e)));Object.keys(t).length>0&&(yield t)}for await(let e of(yield(await u).value,o))yield e}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}let n=(0,s.ZI)(t),i=new l.Tr({generator:this.transform(r(),n),config:n});return await i.setup,l.bO.fromAsyncGenerator(i)}},J=class extends C{static lc_name(){return"RunnablePick"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;keys;constructor(e){("string"==typeof e||Array.isArray(e))&&(e={keys:e}),super(e),this.keys=e.keys}async _pick(e){if("string"==typeof this.keys)return e[this.keys];{let t=this.keys.map(t=>[t,e[t]]).filter(e=>void 0!==e[1]);return 0===t.length?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async *_transform(e){for await(let t of e){let e=await this._pick(t);void 0!==e&&(yield e)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}let n=(0,s.ZI)(t),i=new l.Tr({generator:this.transform(r(),n),config:n});return await i.setup,l.bO.fromAsyncGenerator(i)}},W=class extends P{name;description;schema;constructor(e){super({bound:R.from([D.from(async e=>{let t;if((0,i.Ky)(e))try{t=await (0,b.hZ)(this.schema,e.args)}catch{throw new i.qe("Received tool input did not match expected schema",JSON.stringify(e.args))}else t=e;return t}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name}),config:e.config??{}}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};function q(e,t){let r=t.name??e.getName(),n=t.description??(0,b.cg)(t.schema);return new W((0,b.yQ)(t.schema)?{name:r,description:n,schema:A.z.object({input:A.z.string()}).transform(e=>e.input),bound:e}:{name:r,description:n,schema:t.schema,bound:e})}},42299:(e,t,r)=>{"use strict";r.d(t,{OA:()=>u,Wb:()=>s,az:()=>i,eh:()=>a,jE:()=>o,uE:()=>c});var n=r(78982);function i(e){let t=e?.target??"draft-2020-12";return"draft-4"===t&&(t="draft-04"),"draft-7"===t&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??n.fd,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function a(e,t,r={path:[],schemaPath:[]}){var n;let i=e._zod.def,s=t.seen.get(e);if(s)return s.count++,r.schemaPath.includes(e)&&(s.cycle=r.path),s.schema;let o={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,o);let u=e._zod.toJSONSchema?.();if(u)o.schema=u;else{let n={...r,schemaPath:[...r.schemaPath,e],path:r.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,o.schema,n);else{let r=o.schema,a=t.processors[i.type];if(!a)throw Error(`[toJSONSchema]: Non-representable type encountered: ${i.type}`);a(e,t,r,n)}let s=e._zod.parent;s&&(o.ref||(o.ref=s),a(s,t,n),t.seen.get(s).isParent=!0)}let c=t.metadataRegistry.get(e);return c&&Object.assign(o.schema,c),"input"===t.io&&l(e)&&(delete o.schema.examples,delete o.schema.default),"input"===t.io&&o.schema._prefault&&((n=o.schema).default??(n.default=o.schema._prefault)),delete o.schema._prefault,t.seen.get(e).schema}function s(e,t){let r=e.seen.get(t);if(!r)throw Error("Unprocessed schema. This is a bug in Zod.");let n=new Map;for(let t of e.seen.entries()){let r=e.metadataRegistry.get(t[0])?.id;if(r){let e=n.get(r);if(e&&e!==t[0])throw Error(`Duplicate schema id "${r}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);n.set(r,t[0])}}let i=t=>{let n="draft-2020-12"===e.target?"$defs":"definitions";if(e.external){let r=e.external.registry.get(t[0])?.id,i=e.external.uri??(e=>e);if(r)return{ref:i(r)};let a=t[1].defId??t[1].schema.id??`schema${e.counter++}`;return t[1].defId=a,{defId:a,ref:`${i("__shared")}#/${n}/${a}`}}if(t[1]===r)return{ref:"#"};let i="#",a=`${i}/${n}/`,s=t[1].schema.id??`__schema${e.counter++}`;return{defId:s,ref:a+s}},a=e=>{if(e[1].schema.$ref)return;let t=e[1],{ref:r,defId:n}=i(e);t.def={...t.schema},n&&(t.defId=n);let a=t.schema;for(let e in a)delete a[e];a.$ref=r};if("throw"===e.cycles)for(let t of e.seen.entries()){let e=t[1];if(e.cycle)throw Error(`Cycle detected: #/${e.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let r of e.seen.entries()){let n=r[1];if(t===r[0]){a(r);continue}if(e.external){let n=e.external.registry.get(r[0])?.id;if(t!==r[0]&&n){a(r);continue}}if(e.metadataRegistry.get(r[0])?.id||n.cycle||n.count>1&&"ref"===e.reused){a(r);continue}}}function o(e,t){let r=e.seen.get(t);if(!r)throw Error("Unprocessed schema. This is a bug in Zod.");let n=t=>{let r=e.seen.get(t);if(null===r.ref)return;let i=r.def??r.schema,a={...i},s=r.ref;if(r.ref=null,s){n(s);let r=e.seen.get(s),o=r.schema;if(o.$ref&&("draft-07"===e.target||"draft-04"===e.target||"openapi-3.0"===e.target)?(i.allOf=i.allOf??[],i.allOf.push(o)):Object.assign(i,o),Object.assign(i,a),t._zod.parent===s)for(let e in i)"$ref"!==e&&"allOf"!==e&&(e in a||delete i[e]);if(o.$ref)for(let e in i)"$ref"!==e&&"allOf"!==e&&e in r.def&&JSON.stringify(i[e])===JSON.stringify(r.def[e])&&delete i[e]}let o=t._zod.parent;if(o&&o!==s){n(o);let t=e.seen.get(o);if(t?.schema.$ref&&(i.$ref=t.schema.$ref,t.def))for(let e in i)"$ref"!==e&&"allOf"!==e&&e in t.def&&JSON.stringify(i[e])===JSON.stringify(t.def[e])&&delete i[e]}e.override({zodSchema:t,jsonSchema:i,path:r.path??[]})};for(let t of[...e.seen.entries()].reverse())n(t[0]);let i={};if("draft-2020-12"===e.target?i.$schema="https://json-schema.org/draft/2020-12/schema":"draft-07"===e.target?i.$schema="http://json-schema.org/draft-07/schema#":"draft-04"===e.target?i.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){let r=e.external.registry.get(t)?.id;if(!r)throw Error("Schema is missing an `id` property");i.$id=e.external.uri(r)}Object.assign(i,r.def??r.schema);let a=e.external?.defs??{};for(let t of e.seen.entries()){let e=t[1];e.def&&e.defId&&(a[e.defId]=e.def)}e.external||Object.keys(a).length>0&&("draft-2020-12"===e.target?i.$defs=a:i.definitions=a);try{let r=JSON.parse(JSON.stringify(i));return Object.defineProperty(r,"~standard",{value:{...t["~standard"],jsonSchema:{input:c(t,"input",e.processors),output:c(t,"output",e.processors)}},enumerable:!1,writable:!1}),r}catch(e){throw Error("Error converting schema to JSON.")}}function l(e,t){let r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);let n=e._zod.def;if("transform"===n.type)return!0;if("array"===n.type)return l(n.element,r);if("set"===n.type)return l(n.valueType,r);if("lazy"===n.type)return l(n.getter(),r);if("promise"===n.type||"optional"===n.type||"nonoptional"===n.type||"nullable"===n.type||"readonly"===n.type||"default"===n.type||"prefault"===n.type)return l(n.innerType,r);if("intersection"===n.type)return l(n.left,r)||l(n.right,r);if("record"===n.type||"map"===n.type)return l(n.keyType,r)||l(n.valueType,r);if("pipe"===n.type)return l(n.in,r)||l(n.out,r);if("object"===n.type){for(let e in n.shape)if(l(n.shape[e],r))return!0;return!1}if("union"===n.type){for(let e of n.options)if(l(e,r))return!0;return!1}if("tuple"===n.type){for(let e of n.items)if(l(e,r))return!0;if(n.rest&&l(n.rest,r))return!0}return!1}let u=(e,t={})=>r=>{let n=i({...r,processors:t});return a(e,n),s(n,e),o(n,e)},c=(e,t,r={})=>n=>{let{libraryOptions:l,target:u}=n??{},c=i({...l??{},target:u,io:t,processors:r});return a(e,c),s(c,e),o(c,e)}},42452:(e,t,r)=>{"use strict";function n(e,t){return e.lc_error_code=t,e.message=`${e.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${t}/
`,e}r.d(t,{Y:()=>n})},43454:(e,t,r)=>{"use strict";r.d(t,{DM:()=>h,G4:()=>p,I3:()=>s,MY:()=>l,OK:()=>d,fn:()=>f,jm:()=>c,uY:()=>u,xP:()=>m,y7:()=>a,zn:()=>o});var n=r(85722),i=r(76642);let a=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],s={...i,path:a};if(void 0!==i.message)return{...i,path:a,message:i.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(s,{data:t,defaultError:o}).message;return{...i,path:a,message:o}},s=[];function o(e,t){let r=(0,n.$W)(),s=a({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===i.A?void 0:i.A].filter(e=>!!e)});e.common.issues.push(s)}class l{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return u;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return l.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return u;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}let u=Object.freeze({status:"aborted"}),c=e=>({status:"dirty",value:e}),d=e=>({status:"valid",value:e}),p=e=>"aborted"===e.status,h=e=>"dirty"===e.status,f=e=>"valid"===e.status,m=e=>"undefined"!=typeof Promise&&e instanceof Promise},43969:(e,t,r)=>{"use strict";function n(e,t,r){if(!t.has(e))throw TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}r.d(t,{_:()=>n})},44182:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});var n=r(74281);function i(e,t,r,a,s){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=(0,n.bT)(t),l=(0,n.bT)(e),u=!1,c=l.length-1;c>=0;c--){var d=l[c],p=e[d];if((0,n.mQ)(t,d)&&(void 0!==t[d]||void 0===p||!1!==Array.isArray(t))){var h=t[d];"object"==typeof p&&null!=p&&"object"==typeof h&&null!=h&&Array.isArray(p)===Array.isArray(h)?i(p,h,r,a+"/"+(0,n.YX)(d),s):p!==h&&(s&&r.push({op:"test",path:a+"/"+(0,n.YX)(d),value:(0,n.LH)(p)}),r.push({op:"replace",path:a+"/"+(0,n.YX)(d),value:(0,n.LH)(h)}))}else Array.isArray(e)===Array.isArray(t)?(s&&r.push({op:"test",path:a+"/"+(0,n.YX)(d),value:(0,n.LH)(p)}),r.push({op:"remove",path:a+"/"+(0,n.YX)(d)}),u=!0):(s&&r.push({op:"test",path:a,value:e}),r.push({op:"replace",path:a,value:t}))}if(u||o.length!=l.length)for(var c=0;c<o.length;c++){var d=o[c];(0,n.mQ)(e,d)||void 0===t[d]||r.push({op:"add",path:a+"/"+(0,n.YX)(d),value:(0,n.LH)(t[d])})}}}function a(e,t,r=!1){var n=[];return i(e,t,n,"",r),n}r(62531)},44768:(e,t,r)=>{"use strict";r.d(t,{X0:()=>s,hr:()=>i,pH:()=>a});let n=Symbol.for("ls:tracing_async_local_storage"),i=Symbol.for("lc:context_variables"),a=e=>{globalThis[n]=e},s=()=>globalThis[n]},46081:(e,t,r)=>{"use strict";r.d(t,{A:()=>s,q:()=>a});var n=r(12115),i=r(95155);function a(e,t){let r=n.createContext(t),a=e=>{let{children:t,...a}=e,s=n.useMemo(()=>a,Object.values(a));return(0,i.jsx)(r.Provider,{value:s,children:t})};return a.displayName=e+"Provider",[a,function(i){let a=n.useContext(r);if(a)return a;if(void 0!==t)return t;throw Error(`\`${i}\` must be used within \`${e}\``)}]}function s(e,t=[]){let r=[];function a(t,a){let s=n.createContext(a),o=r.length;r=[...r,a];let l=t=>{let{scope:r,children:a,...l}=t,u=r?.[e]?.[o]||s,c=n.useMemo(()=>l,Object.values(l));return(0,i.jsx)(u.Provider,{value:c,children:a})};return l.displayName=t+"Provider",[l,function(r,i){let l=i?.[e]?.[o]||s,u=n.useContext(l);if(u)return u;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${t}\``)}]}let l=()=>{let t=r.map(e=>n.createContext(e));return function(r){let i=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:i}}),[r,i])}};return l.scopeName=e,[a,o(l,...t)]}function o(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=r.reduce((t,{useScope:r,scopeName:n})=>{let i=r(e)[`__scope${n}`];return{...t,...i}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}},46520:(e,t,r)=>{"use strict";let n=r(21232);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}let a=(e,t,r)=>new Promise((a,s)=>{if("number"!=typeof t||t<0)throw TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void a(e);let o=setTimeout(()=>{if("function"==typeof r){try{a(r())}catch(e){s(e)}return}let n="string"==typeof r?r:`Promise timed out after ${t} milliseconds`,o=r instanceof Error?r:new i(n);"function"==typeof e.cancel&&e.cancel(),s(o)},t);n(e.then(a,s),()=>{clearTimeout(o)})});e.exports=a,e.exports.default=a,e.exports.TimeoutError=i},46935:(e,t,r)=>{"use strict";r.d(t,{Hm:()=>a});var n=r(67893),i=r(51797),a={};(0,n.V)(a,{awaitAllCallbacks:()=>i._,consumeCallback:()=>i.u})},47075:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$ZodAny:()=>t1,$ZodArray:()=>t5,$ZodAsyncError:()=>l,$ZodBase64:()=>tD,$ZodBase64URL:()=>tF,$ZodBigInt:()=>tH,$ZodBigIntFormat:()=>tY,$ZodBoolean:()=>tG,$ZodCIDRv4:()=>tM,$ZodCIDRv6:()=>tL,$ZodCUID:()=>tS,$ZodCUID2:()=>tI,$ZodCatch:()=>rC,$ZodCheck:()=>e0,$ZodCheckBigIntFormat:()=>e3,$ZodCheckEndsWith:()=>tu,$ZodCheckGreaterThan:()=>e4,$ZodCheckIncludes:()=>to,$ZodCheckLengthEquals:()=>tr,$ZodCheckLessThan:()=>e2,$ZodCheckLowerCase:()=>ta,$ZodCheckMaxLength:()=>te,$ZodCheckMaxSize:()=>e5,$ZodCheckMimeType:()=>tp,$ZodCheckMinLength:()=>tt,$ZodCheckMinSize:()=>e8,$ZodCheckMultipleOf:()=>e6,$ZodCheckNumberFormat:()=>e9,$ZodCheckOverwrite:()=>th,$ZodCheckProperty:()=>td,$ZodCheckRegex:()=>ti,$ZodCheckSizeEquals:()=>e7,$ZodCheckStartsWith:()=>tl,$ZodCheckStringFormat:()=>tn,$ZodCheckUpperCase:()=>ts,$ZodCodec:()=>rR,$ZodCustom:()=>rJ,$ZodCustomStringFormat:()=>tW,$ZodDate:()=>t9,$ZodDefault:()=>rI,$ZodDiscriminatedUnion:()=>ro,$ZodE164:()=>tB,$ZodEmail:()=>tw,$ZodEmoji:()=>tx,$ZodEncodeError:()=>u,$ZodEnum:()=>rv,$ZodError:()=>f,$ZodExactOptional:()=>r$,$ZodFile:()=>rb,$ZodFunction:()=>rF,$ZodGUID:()=>t_,$ZodIPv4:()=>tj,$ZodIPv6:()=>tz,$ZodISODate:()=>tN,$ZodISODateTime:()=>tT,$ZodISODuration:()=>tP,$ZodISOTime:()=>tC,$ZodIntersection:()=>rl,$ZodJWT:()=>tJ,$ZodKSUID:()=>tO,$ZodLazy:()=>rV,$ZodLiteral:()=>r_,$ZodMAC:()=>tR,$ZodMap:()=>rf,$ZodNaN:()=>rP,$ZodNanoID:()=>t$,$ZodNever:()=>t4,$ZodNonOptional:()=>rO,$ZodNull:()=>t0,$ZodNullable:()=>rS,$ZodNumber:()=>tq,$ZodNumberFormat:()=>tK,$ZodObject:()=>rt,$ZodObjectJIT:()=>rr,$ZodOptional:()=>rx,$ZodPipe:()=>rj,$ZodPrefault:()=>rA,$ZodPromise:()=>rB,$ZodReadonly:()=>rZ,$ZodRealError:()=>m,$ZodRecord:()=>rh,$ZodRegistry:()=>rK.rs,$ZodSet:()=>rg,$ZodString:()=>ty,$ZodStringFormat:()=>tv,$ZodSuccess:()=>rN,$ZodSymbol:()=>tX,$ZodTemplateLiteral:()=>rU,$ZodTransform:()=>rw,$ZodTuple:()=>rd,$ZodType:()=>tg,$ZodULID:()=>tE,$ZodURL:()=>tk,$ZodUUID:()=>tb,$ZodUndefined:()=>tQ,$ZodUnion:()=>ri,$ZodUnknown:()=>t2,$ZodVoid:()=>t6,$ZodXID:()=>tA,$ZodXor:()=>rs,$brand:()=>o,$constructor:()=>s,$input:()=>rK.nP,$output:()=>rK.UY,Doc:()=>tf,JSONSchema:()=>i,JSONSchemaGenerator:()=>iD,NEVER:()=>a,TimePrecision:()=>nc,_any:()=>nN,_array:()=>ii,_base64:()=>ns,_base64url:()=>no,_bigint:()=>n$,_boolean:()=>nk,_catch:()=>i$,_check:()=>iP,_cidrv4:()=>ni,_cidrv6:()=>na,_coercedBigint:()=>nS,_coercedBoolean:()=>nx,_coercedDate:()=>nR,_coercedNumber:()=>ng,_coercedString:()=>rH,_cuid:()=>r3,_cuid2:()=>r5,_custom:()=>iT,_date:()=>nz,_decode:()=>N,_decodeAsync:()=>z,_default:()=>iw,_discriminatedUnion:()=>io,_e164:()=>nl,_email:()=>rY,_emoji:()=>r6,_encode:()=>O,_encodeAsync:()=>P,_endsWith:()=>n6,_enum:()=>ih,_file:()=>iy,_float32:()=>nv,_float64:()=>n_,_gt:()=>nD,_gte:()=>nU,_guid:()=>rX,_includes:()=>n2,_int:()=>ny,_int32:()=>nb,_int64:()=>nI,_intersection:()=>il,_ipv4:()=>nt,_ipv6:()=>nr,_isoDate:()=>np,_isoDateTime:()=>nd,_isoDuration:()=>nf,_isoTime:()=>nh,_jwt:()=>nu,_ksuid:()=>ne,_lazy:()=>iA,_length:()=>nX,_literal:()=>ig,_lowercase:()=>n0,_lt:()=>nL,_lte:()=>nZ,_mac:()=>nn,_map:()=>id,_max:()=>nZ,_maxLength:()=>nH,_maxSize:()=>nq,_mime:()=>n3,_min:()=>nU,_minLength:()=>nY,_minSize:()=>nK,_multipleOf:()=>nW,_nan:()=>nM,_nanoid:()=>r9,_nativeEnum:()=>im,_negative:()=>nB,_never:()=>nP,_nonnegative:()=>nJ,_nonoptional:()=>ik,_nonpositive:()=>nV,_normalize:()=>n8,_null:()=>nT,_nullable:()=>ib,_number:()=>nm,_optional:()=>i_,_overwrite:()=>n5,_parse:()=>w,_parseAsync:()=>x,_pipe:()=>iS,_positive:()=>nF,_promise:()=>iO,_property:()=>n9,_readonly:()=>iI,_record:()=>ic,_refine:()=>iN,_regex:()=>nQ,_safeDecode:()=>Z,_safeDecodeAsync:()=>B,_safeEncode:()=>M,_safeEncodeAsync:()=>U,_safeParse:()=>S,_safeParseAsync:()=>E,_set:()=>ip,_size:()=>nG,_slugify:()=>ir,_startsWith:()=>n4,_string:()=>rG,_stringFormat:()=>iM,_stringbool:()=>iR,_success:()=>ix,_superRefine:()=>iC,_symbol:()=>nA,_templateLiteral:()=>iE,_toLowerCase:()=>ie,_toUpperCase:()=>it,_transform:()=>iv,_trim:()=>n7,_tuple:()=>iu,_uint32:()=>nw,_uint64:()=>nE,_ulid:()=>r8,_undefined:()=>nO,_union:()=>ia,_unknown:()=>nC,_uppercase:()=>n1,_url:()=>r4,_uuid:()=>rQ,_uuidv4:()=>r0,_uuidv6:()=>r1,_uuidv7:()=>r2,_void:()=>nj,_xid:()=>r7,_xor:()=>is,clone:()=>p.clone,config:()=>d,createStandardJSONSchemaMethod:()=>iL.uE,createToJSONSchemaMethod:()=>iL.OA,decode:()=>C,decodeAsync:()=>R,describe:()=>ij,encode:()=>T,encodeAsync:()=>j,extractDefs:()=>iL.Wb,finalize:()=>iL.jE,flattenError:()=>g,formatError:()=>y,globalConfig:()=>c,globalRegistry:()=>rK.fd,initializeContext:()=>iL.az,isValidBase64:()=>tZ,isValidBase64URL:()=>tU,isValidJWT:()=>tV,locales:()=>rq,meta:()=>iz,parse:()=>k,parseAsync:()=>$,prettifyError:()=>b,process:()=>iL.eh,regexes:()=>n,registry:()=>rK.u5,safeDecode:()=>D,safeDecodeAsync:()=>V,safeEncode:()=>L,safeEncodeAsync:()=>F,safeParse:()=>I,safeParseAsync:()=>A,toDotPath:()=>_,toJSONSchema:()=>iZ.bl,treeifyError:()=>v,util:()=>p,version:()=>tm});var n={};r.r(n),r.d(n,{base64:()=>ey,base64url:()=>ev,bigint:()=>eA,boolean:()=>eN,browserEmail:()=>eu,cidrv4:()=>em,cidrv6:()=>eg,cuid:()=>J,cuid2:()=>W,date:()=>ex,datetime:()=>eI,domain:()=>eb,duration:()=>Y,e164:()=>ew,email:()=>ei,emoji:()=>ed,extendedDuration:()=>X,guid:()=>Q,hex:()=>eR,hostname:()=>e_,html5Email:()=>ea,idnEmail:()=>el,integer:()=>eO,ipv4:()=>ep,ipv6:()=>eh,ksuid:()=>G,lowercase:()=>ej,mac:()=>ef,md5_base64:()=>eD,md5_base64url:()=>eU,md5_hex:()=>eZ,nanoid:()=>H,null:()=>eC,number:()=>eT,rfc5322Email:()=>es,sha1_base64:()=>eB,sha1_base64url:()=>eV,sha1_hex:()=>eF,sha256_base64:()=>eW,sha256_base64url:()=>eq,sha256_hex:()=>eJ,sha384_base64:()=>eG,sha384_base64url:()=>eH,sha384_hex:()=>eK,sha512_base64:()=>eX,sha512_base64url:()=>eQ,sha512_hex:()=>eY,string:()=>eE,time:()=>eS,ulid:()=>q,undefined:()=>eP,unicodeEmail:()=>eo,uppercase:()=>ez,uuid:()=>ee,uuid4:()=>et,uuid6:()=>er,uuid7:()=>en,xid:()=>K});var i={};r.r(i);let a=Object.freeze({status:"aborted"});function s(e,t,r){function n(r,n){if(r._zod||Object.defineProperty(r,"_zod",{value:{def:n,constr:s,traits:new Set},enumerable:!1}),r._zod.traits.has(e))return;r._zod.traits.add(e),t(r,n);let i=s.prototype,a=Object.keys(i);for(let e=0;e<a.length;e++){let t=a[e];t in r||(r[t]=i[t].bind(r))}}let i=r?.Parent??Object;class a extends i{}function s(e){var t;let i=r?.Parent?new a:this;for(let r of(n(i,e),(t=i._zod).deferred??(t.deferred=[]),i._zod.deferred))r();return i}return Object.defineProperty(a,"name",{value:e}),Object.defineProperty(s,"init",{value:n}),Object.defineProperty(s,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}let o=Symbol("zod_brand");class l extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class u extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}let c={};function d(e){return e&&Object.assign(c,e),c}var p=r(64845);let h=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,p.jsonStringifyReplacer,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},f=s("$ZodError",h),m=s("$ZodError",h,{Parent:Error});function g(e,t=e=>e.message){let r={},n=[];for(let i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}function y(e,t=e=>e.message){let r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code&&i.errors.length)i.errors.map(e=>n({issues:e}));else if("invalid_key"===i.code)n({issues:i.issues});else if("invalid_element"===i.code)n({issues:i.issues});else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(e),r}function v(e,t=e=>e.message){let r={errors:[]},n=(e,i=[])=>{var a,s;for(let o of e.issues)if("invalid_union"===o.code&&o.errors.length)o.errors.map(e=>n({issues:e},o.path));else if("invalid_key"===o.code)n({issues:o.issues},o.path);else if("invalid_element"===o.code)n({issues:o.issues},o.path);else{let e=[...i,...o.path];if(0===e.length){r.errors.push(t(o));continue}let n=r,l=0;for(;l<e.length;){let r=e[l],i=l===e.length-1;"string"==typeof r?(n.properties??(n.properties={}),(a=n.properties)[r]??(a[r]={errors:[]}),n=n.properties[r]):(n.items??(n.items=[]),(s=n.items)[r]??(s[r]={errors:[]}),n=n.items[r]),i&&n.errors.push(t(o)),l++}}};return n(e),r}function _(e){let t=[];for(let r of e.map(e=>"object"==typeof e?e.key:e))"number"==typeof r?t.push(`[${r}]`):"symbol"==typeof r?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}function b(e){let t=[];for(let r of[...e.issues].sort((e,t)=>(e.path??[]).length-(t.path??[]).length))t.push(` ${r.message}`),r.path?.length&&t.push(`   at ${_(r.path)}`);return t.join("\n")}let w=e=>(t,r,n,i)=>{let a=n?Object.assign(n,{async:!1}):{async:!1},s=t._zod.run({value:r,issues:[]},a);if(s instanceof Promise)throw new l;if(s.issues.length){let t=new(i?.Err??e)(s.issues.map(e=>p.finalizeIssue(e,a,d())));throw p.captureStackTrace(t,i?.callee),t}return s.value},k=w(m),x=e=>async(t,r,n,i)=>{let a=n?Object.assign(n,{async:!0}):{async:!0},s=t._zod.run({value:r,issues:[]},a);if(s instanceof Promise&&(s=await s),s.issues.length){let t=new(i?.Err??e)(s.issues.map(e=>p.finalizeIssue(e,a,d())));throw p.captureStackTrace(t,i?.callee),t}return s.value},$=x(m),S=e=>(t,r,n)=>{let i=n?{...n,async:!1}:{async:!1},a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new l;return a.issues.length?{success:!1,error:new(e??f)(a.issues.map(e=>p.finalizeIssue(e,i,d())))}:{success:!0,data:a.value}},I=S(m),E=e=>async(t,r,n)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},a=t._zod.run({value:r,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(e=>p.finalizeIssue(e,i,d())))}:{success:!0,data:a.value}},A=E(m),O=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return w(e)(t,r,i)},T=O(m),N=e=>(t,r,n)=>w(e)(t,r,n),C=N(m),P=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return x(e)(t,r,i)},j=P(m),z=e=>async(t,r,n)=>x(e)(t,r,n),R=z(m),M=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return S(e)(t,r,i)},L=M(m),Z=e=>(t,r,n)=>S(e)(t,r,n),D=Z(m),U=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return E(e)(t,r,i)},F=U(m),B=e=>async(t,r,n)=>E(e)(t,r,n),V=B(m),J=/^[cC][^\s-]{8,}$/,W=/^[0-9a-z]+$/,q=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,K=/^[0-9a-vA-V]{20}$/,G=/^[A-Za-z0-9]{27}$/,H=/^[a-zA-Z0-9_-]{21}$/,Y=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,X=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Q=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ee=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,et=ee(4),er=ee(6),en=ee(7),ei=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ea=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,es=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,eo=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,el=eo,eu=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ec="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function ed(){return RegExp(ec,"u")}let ep=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eh=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,ef=e=>{let t=p.escapeRegex(e??":");return RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},em=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,eg=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ey=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ev=/^[A-Za-z0-9_-]*$/,e_=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,eb=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,ew=/^\+[1-9]\d{6,14}$/,ek="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ex=RegExp(`^${ek}$`);function e$(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function eS(e){return RegExp(`^${e$(e)}$`)}function eI(e){let t=e$({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${t}(?:${r.join("|")})`;return RegExp(`^${ek}T(?:${n})$`)}let eE=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},eA=/^-?\d+n?$/,eO=/^-?\d+$/,eT=/^-?\d+(?:\.\d+)?$/,eN=/^(?:true|false)$/i,eC=/^null$/i,eP=/^undefined$/i,ej=/^[^A-Z]*$/,ez=/^[^a-z]*$/,eR=/^[0-9a-fA-F]*$/;function eM(e,t){return RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function eL(e){return RegExp(`^[A-Za-z0-9_-]{${e}}$`)}let eZ=/^[0-9a-fA-F]{32}$/,eD=eM(22,"=="),eU=eL(22),eF=/^[0-9a-fA-F]{40}$/,eB=eM(27,"="),eV=eL(27),eJ=/^[0-9a-fA-F]{64}$/,eW=eM(43,"="),eq=eL(43),eK=/^[0-9a-fA-F]{96}$/,eG=eM(64,""),eH=eL(64),eY=/^[0-9a-fA-F]{128}$/,eX=eM(86,"=="),eQ=eL(86),e0=s("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),e1={number:"number",bigint:"bigint",object:"date"},e2=s("$ZodCheckLessThan",(e,t)=>{e0.init(e,t);let r=e1[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<n&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:"object"==typeof t.value?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),e4=s("$ZodCheckGreaterThan",(e,t)=>{e0.init(e,t);let r=e1[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>n&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:"object"==typeof t.value?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),e6=s("$ZodCheckMultipleOf",(e,t)=>{e0.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===p.floatSafeRemainder(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),e9=s("$ZodCheckNumberFormat",(e,t)=>{e0.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),n=r?"int":"number",[i,a]=p.NUMBER_FORMAT_RANGES[t.format];e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,n.minimum=i,n.maximum=a,r&&(n.pattern=eO)}),e._zod.check=s=>{let o=s.value;if(r){if(!Number.isInteger(o))return void s.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?s.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort}):s.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort}))}o<i&&s.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),o>a&&s.issues.push({origin:"number",input:o,code:"too_big",maximum:a,inclusive:!0,inst:e,continue:!t.abort})}}),e3=s("$ZodCheckBigIntFormat",(e,t)=>{e0.init(e,t);let[r,n]=p.BIGINT_FORMAT_RANGES[t.format];e._zod.onattach.push(e=>{let i=e._zod.bag;i.format=t.format,i.minimum=r,i.maximum=n}),e._zod.check=i=>{let a=i.value;a<r&&i.issues.push({origin:"bigint",input:a,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),a>n&&i.issues.push({origin:"bigint",input:a,code:"too_big",maximum:n,inclusive:!0,inst:e,continue:!t.abort})}}),e5=s("$ZodCheckMaxSize",(e,t)=>{var r;e0.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!p.nullish(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;n.size<=t.maximum||r.issues.push({origin:p.getSizableOrigin(n),code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),e8=s("$ZodCheckMinSize",(e,t)=>{var r;e0.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!p.nullish(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;n.size>=t.minimum||r.issues.push({origin:p.getSizableOrigin(n),code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),e7=s("$ZodCheckSizeEquals",(e,t)=>{var r;e0.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!p.nullish(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.size,r.maximum=t.size,r.size=t.size}),e._zod.check=r=>{let n=r.value,i=n.size;if(i===t.size)return;let a=i>t.size;r.issues.push({origin:p.getSizableOrigin(n),...a?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),te=s("$ZodCheckMaxLength",(e,t)=>{var r;e0.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!p.nullish(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;if(n.length<=t.maximum)return;let i=p.getLengthableOrigin(n);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),tt=s("$ZodCheckMinLength",(e,t)=>{var r;e0.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!p.nullish(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;if(n.length>=t.minimum)return;let i=p.getLengthableOrigin(n);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),tr=s("$ZodCheckLengthEquals",(e,t)=>{var r;e0.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!p.nullish(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let n=r.value,i=n.length;if(i===t.length)return;let a=p.getLengthableOrigin(n),s=i>t.length;r.issues.push({origin:a,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),tn=s("$ZodCheckStringFormat",(e,t)=>{var r,n;e0.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),ti=s("$ZodCheckRegex",(e,t)=>{tn.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),ta=s("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=ej),tn.init(e,t)}),ts=s("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=ez),tn.init(e,t)}),to=s("$ZodCheckIncludes",(e,t)=>{e0.init(e,t);let r=p.escapeRegex(t.includes),n=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),tl=s("$ZodCheckStartsWith",(e,t)=>{e0.init(e,t);let r=RegExp(`^${p.escapeRegex(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),tu=s("$ZodCheckEndsWith",(e,t)=>{e0.init(e,t);let r=RegExp(`.*${p.escapeRegex(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});function tc(e,t,r){e.issues.length&&t.issues.push(...p.prefixIssues(r,e.issues))}let td=s("$ZodCheckProperty",(e,t)=>{e0.init(e,t),e._zod.check=e=>{let r=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(r instanceof Promise)return r.then(r=>tc(r,e,t.property));tc(r,e,t.property)}}),tp=s("$ZodCheckMimeType",(e,t)=>{e0.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:t.mime,input:n.value.type,inst:e,continue:!t.abort})}}),th=s("$ZodCheckOverwrite",(e,t)=>{e0.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class tf{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}let tm={major:4,minor:3,patch:4},tg=s("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=tm;let n=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&n.unshift(e),n))for(let r of t._zod.onattach)r(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let n,i=p.aborted(e);for(let a of t){if(a._zod.def.when){if(!a._zod.def.when(e))continue}else if(i)continue;let t=e.issues.length,s=a._zod.check(e);if(s instanceof Promise&&r?.async===!1)throw new l;if(n||s instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await s,e.issues.length!==t&&(i||(i=p.aborted(e,t)))});else{if(e.issues.length===t)continue;i||(i=p.aborted(e,t))}}return n?n.then(()=>e):e},r=(r,i,a)=>{if(p.aborted(r))return r.aborted=!0,r;let s=t(i,n,a);if(s instanceof Promise){if(!1===a.async)throw new l;return s.then(t=>e._zod.parse(t,a))}return e._zod.parse(s,a)};e._zod.run=(i,a)=>{if(a.skipChecks)return e._zod.parse(i,a);if("backward"===a.direction){let t=e._zod.parse({value:i.value,issues:[]},{...a,skipChecks:!0});return t instanceof Promise?t.then(e=>r(e,i,a)):r(t,i,a)}let s=e._zod.parse(i,a);if(s instanceof Promise){if(!1===a.async)throw new l;return s.then(e=>t(e,n,a))}return t(s,n,a)}}p.defineLazy(e,"~standard",()=>({validate:t=>{try{let r=I(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return A(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}))}),ty=s("$ZodString",(e,t)=>{tg.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??eE(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch(e){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),tv=s("$ZodStringFormat",(e,t)=>{tn.init(e,t),ty.init(e,t)}),t_=s("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Q),tv.init(e,t)}),tb=s("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ee(e))}else t.pattern??(t.pattern=ee());tv.init(e,t)}),tw=s("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=ei),tv.init(e,t)}),tk=s("$ZodURL",(e,t)=>{tv.init(e,t),e._zod.check=r=>{try{let n=r.value.trim(),i=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=i.href:r.value=n;return}catch(n){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),tx=s("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=ed()),tv.init(e,t)}),t$=s("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=H),tv.init(e,t)}),tS=s("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=J),tv.init(e,t)}),tI=s("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=W),tv.init(e,t)}),tE=s("$ZodULID",(e,t)=>{t.pattern??(t.pattern=q),tv.init(e,t)}),tA=s("$ZodXID",(e,t)=>{t.pattern??(t.pattern=K),tv.init(e,t)}),tO=s("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=G),tv.init(e,t)}),tT=s("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=eI(t)),tv.init(e,t)}),tN=s("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=ex),tv.init(e,t)}),tC=s("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=eS(t)),tv.init(e,t)}),tP=s("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Y),tv.init(e,t)}),tj=s("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=ep),tv.init(e,t),e._zod.bag.format="ipv4"}),tz=s("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=eh),tv.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),tR=s("$ZodMAC",(e,t)=>{t.pattern??(t.pattern=ef(t.delimiter)),tv.init(e,t),e._zod.bag.format="mac"}),tM=s("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=em),tv.init(e,t)}),tL=s("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=eg),tv.init(e,t),e._zod.check=r=>{let n=r.value.split("/");try{if(2!==n.length)throw Error();let[e,t]=n;if(!t)throw Error();let r=Number(t);if(`${r}`!==t||r<0||r>128)throw Error();new URL(`http://[${e}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function tZ(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let tD=s("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=ey),tv.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{tZ(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function tU(e){if(!ev.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return tZ(t.padEnd(4*Math.ceil(t.length/4),"="))}let tF=s("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=ev),tv.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{tU(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),tB=s("$ZodE164",(e,t)=>{t.pattern??(t.pattern=ew),tv.init(e,t)});function tV(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[n]=r;if(!n)return!1;let i=JSON.parse(atob(n));if("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))return!1;return!0}catch{return!1}}let tJ=s("$ZodJWT",(e,t)=>{tv.init(e,t),e._zod.check=r=>{tV(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),tW=s("$ZodCustomStringFormat",(e,t)=>{tv.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),tq=s("$ZodNumber",(e,t)=>{tg.init(e,t),e._zod.pattern=e._zod.bag.pattern??eT,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}let i=r.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return r;let a="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...a?{received:a}:{}}),r}}),tK=s("$ZodNumberFormat",(e,t)=>{e9.init(e,t),tq.init(e,t)}),tG=s("$ZodBoolean",(e,t)=>{tg.init(e,t),e._zod.pattern=eN,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch(e){}let i=r.value;return"boolean"==typeof i||r.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),r}}),tH=s("$ZodBigInt",(e,t)=>{tg.init(e,t),e._zod.pattern=eA,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch(e){}return"bigint"==typeof r.value||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),tY=s("$ZodBigIntFormat",(e,t)=>{e3.init(e,t),tH.init(e,t)}),tX=s("$ZodSymbol",(e,t)=>{tg.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return"symbol"==typeof n||t.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:e}),t}}),tQ=s("$ZodUndefined",(e,t)=>{tg.init(e,t),e._zod.pattern=eP,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:e}),t}}),t0=s("$ZodNull",(e,t)=>{tg.init(e,t),e._zod.pattern=eC,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{let n=t.value;return null===n||t.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),t}}),t1=s("$ZodAny",(e,t)=>{tg.init(e,t),e._zod.parse=e=>e}),t2=s("$ZodUnknown",(e,t)=>{tg.init(e,t),e._zod.parse=e=>e}),t4=s("$ZodNever",(e,t)=>{tg.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),t6=s("$ZodVoid",(e,t)=>{tg.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),t}}),t9=s("$ZodDate",(e,t)=>{tg.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch(e){}let i=r.value,a=i instanceof Date;return a&&!Number.isNaN(i.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:i,...a?{received:"Invalid Date"}:{},inst:e}),r}});function t3(e,t,r){e.issues.length&&t.issues.push(...p.prefixIssues(r,e.issues)),t.value[r]=e.value}let t5=s("$ZodArray",(e,t)=>{tg.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);let a=[];for(let e=0;e<i.length;e++){let s=i[e],o=t.element._zod.run({value:s,issues:[]},n);o instanceof Promise?a.push(o.then(t=>t3(t,r,e))):t3(o,r,e)}return a.length?Promise.all(a).then(()=>r):r}});function t8(e,t,r,n,i){if(e.issues.length){if(i&&!(r in n))return;t.issues.push(...p.prefixIssues(r,e.issues))}void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function t7(e){let t=Object.keys(e.shape);for(let r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${r}": expected a Zod schema`);let r=p.optionalKeys(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function re(e,t,r,n,i,a){let s=[],o=i.keySet,l=i.catchall._zod,u=l.def.type,c="optional"===l.optout;for(let i in t){if(o.has(i))continue;if("never"===u){s.push(i);continue}let a=l.run({value:t[i],issues:[]},n);a instanceof Promise?e.push(a.then(e=>t8(e,r,i,t,c))):t8(a,r,i,t,c)}return(s.length&&r.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:a}),e.length)?Promise.all(e).then(()=>r):r}let rt=s("$ZodObject",(e,t)=>{let r;tg.init(e,t);let n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){let e=t.shape;Object.defineProperty(t,"shape",{get:()=>{let r={...e};return Object.defineProperty(t,"shape",{value:r}),r}})}let i=p.cached(()=>t7(t));p.defineLazy(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let n=e[t]._zod;if(n.values)for(let e of(r[t]??(r[t]=new Set),n.values))r[t].add(e)}return r});let a=p.isObject,s=t.catchall;e._zod.parse=(t,n)=>{r??(r=i.value);let o=t.value;if(!a(o))return t.issues.push({expected:"object",code:"invalid_type",input:o,inst:e}),t;t.value={};let l=[],u=r.shape;for(let e of r.keys){let r=u[e],i="optional"===r._zod.optout,a=r._zod.run({value:o[e],issues:[]},n);a instanceof Promise?l.push(a.then(r=>t8(r,t,e,o,i))):t8(a,t,e,o,i)}return s?re(l,o,t,n,i.value,e):l.length?Promise.all(l).then(()=>t):t}}),rr=s("$ZodObjectJIT",(e,t)=>{let r,n;rt.init(e,t);let i=e._zod.parse,a=p.cached(()=>t7(t)),s=e=>{let t=new tf(["shape","payload","ctx"]),r=a.value,n=e=>{let t=p.esc(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let i=Object.create(null),s=0;for(let e of r.keys)i[e]=`key_${s++}`;for(let a of(t.write("const newResult = {};"),r.keys)){let r=i[a],s=p.esc(a),o=e[a],l=o?._zod?.optout==="optional";t.write(`const ${r} = ${n(a)};`),l?t.write(`
        if (${r}.issues.length) {
          if (${s} in input) {
            payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${s}, ...iss.path] : [${s}]
            })));
          }
        }
        
        if (${r}.value === undefined) {
          if (${s} in input) {
            newResult[${s}] = undefined;
          }
        } else {
          newResult[${s}] = ${r}.value;
        }
        
      `):t.write(`
        if (${r}.issues.length) {
          payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${s}, ...iss.path] : [${s}]
          })));
        }
        
        if (${r}.value === undefined) {
          if (${s} in input) {
            newResult[${s}] = undefined;
          }
        } else {
          newResult[${s}] = ${r}.value;
        }
        
      `)}t.write("payload.value = newResult;"),t.write("return payload;");let o=t.compile();return(t,r)=>o(e,t,r)},o=p.isObject,l=!c.jitless,u=p.allowsEval,d=l&&u.value,h=t.catchall;e._zod.parse=(u,c)=>{n??(n=a.value);let p=u.value;return o(p)?l&&d&&c?.async===!1&&!0!==c.jitless?(r||(r=s(t.shape)),u=r(u,c),h)?re([],p,u,c,n,e):u:i(u,c):(u.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),u)}});function rn(e,t,r,n){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;let i=e.filter(e=>!p.aborted(e));return 1===i.length?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>p.finalizeIssue(e,n,d())))}),t)}let ri=s("$ZodUnion",(e,t)=>{tg.init(e,t),p.defineLazy(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),p.defineLazy(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),p.defineLazy(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),p.defineLazy(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>p.cleanRegex(e.source)).join("|")})$`)}});let r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(i,a)=>{if(r)return n(i,a);let s=!1,o=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},a);if(t instanceof Promise)o.push(t),s=!0;else{if(0===t.issues.length)return t;o.push(t)}}return s?Promise.all(o).then(t=>rn(t,i,e,a)):rn(o,i,e,a)}});function ra(e,t,r,n){let i=e.filter(e=>0===e.issues.length);return 1===i.length?t.value=i[0].value:0===i.length?t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>p.finalizeIssue(e,n,d())))}):t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:[],inclusive:!1}),t}let rs=s("$ZodXor",(e,t)=>{ri.init(e,t),t.inclusive=!1;let r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(i,a)=>{if(r)return n(i,a);let s=!1,o=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},a);t instanceof Promise?(o.push(t),s=!0):o.push(t)}return s?Promise.all(o).then(t=>ra(t,i,e,a)):ra(o,i,e,a)}}),ro=s("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,ri.init(e,t);let r=e._zod.parse;p.defineLazy(e._zod,"propValues",()=>{let e={};for(let r of t.options){let n=r._zod.propValues;if(!n||0===Object.keys(n).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(n))for(let n of(e[t]||(e[t]=new Set),r))e[t].add(n)}return e});let n=p.cached(()=>{let e=t.options,r=new Map;for(let n of e){let e=n._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let t of e){if(r.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,n)}}return r});e._zod.parse=(i,a)=>{let s=i.value;if(!p.isObject(s))return i.issues.push({code:"invalid_type",expected:"object",input:s,inst:e}),i;let o=n.value.get(s?.[t.discriminator]);return o?o._zod.run(i,a):t.unionFallback?r(i,a):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:s,path:[t.discriminator],inst:e}),i)}}),rl=s("$ZodIntersection",(e,t)=>{tg.init(e,t),e._zod.parse=(e,r)=>{let n=e.value,i=t.left._zod.run({value:n,issues:[]},r),a=t.right._zod.run({value:n,issues:[]},r);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([t,r])=>rc(e,t,r)):rc(e,i,a)}});function ru(e,t){if(e===t||e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(p.isPlainObject(e)&&p.isPlainObject(t)){let r=Object.keys(t),n=Object.keys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(let r of n){let n=ru(e[r],t[r]);if(!n.valid)return{valid:!1,mergeErrorPath:[r,...n.mergeErrorPath]};i[r]=n.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<e.length;n++){let i=ru(e[n],t[n]);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function rc(e,t,r){let n,i=new Map;for(let r of t.issues)if("unrecognized_keys"===r.code)for(let e of(n??(n=r),r.keys))i.has(e)||i.set(e,{}),i.get(e).l=!0;else e.issues.push(r);for(let t of r.issues)if("unrecognized_keys"===t.code)for(let e of t.keys)i.has(e)||i.set(e,{}),i.get(e).r=!0;else e.issues.push(t);let a=[...i].filter(([,e])=>e.l&&e.r).map(([e])=>e);if(a.length&&n&&e.issues.push({...n,keys:a}),p.aborted(e))return e;let s=ru(t.value,r.value);if(!s.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}let rd=s("$ZodTuple",(e,t)=>{tg.init(e,t);let r=t.items;e._zod.parse=(n,i)=>{let a=n.value;if(!Array.isArray(a))return n.issues.push({input:a,inst:e,expected:"tuple",code:"invalid_type"}),n;n.value=[];let s=[],o=[...r].reverse().findIndex(e=>"optional"!==e._zod.optin),l=-1===o?0:r.length-o;if(!t.rest){let t=a.length>r.length,i=a.length<l-1;if(t||i)return n.issues.push({...t?{code:"too_big",maximum:r.length,inclusive:!0}:{code:"too_small",minimum:r.length},input:a,inst:e,origin:"array"}),n}let u=-1;for(let e of r){if(++u>=a.length&&u>=l)continue;let t=e._zod.run({value:a[u],issues:[]},i);t instanceof Promise?s.push(t.then(e=>rp(e,n,u))):rp(t,n,u)}if(t.rest)for(let e of a.slice(r.length)){u++;let r=t.rest._zod.run({value:e,issues:[]},i);r instanceof Promise?s.push(r.then(e=>rp(e,n,u))):rp(r,n,u)}return s.length?Promise.all(s).then(()=>n):n}});function rp(e,t,r){e.issues.length&&t.issues.push(...p.prefixIssues(r,e.issues)),t.value[r]=e.value}let rh=s("$ZodRecord",(e,t)=>{tg.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!p.isPlainObject(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),r;let a=[],s=t.keyType._zod.values;if(s){let o;r.value={};let l=new Set;for(let e of s)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){l.add("number"==typeof e?e.toString():e);let s=t.valueType._zod.run({value:i[e],issues:[]},n);s instanceof Promise?a.push(s.then(t=>{t.issues.length&&r.issues.push(...p.prefixIssues(e,t.issues)),r.value[e]=t.value})):(s.issues.length&&r.issues.push(...p.prefixIssues(e,s.issues)),r.value[e]=s.value)}for(let e in i)l.has(e)||(o=o??[]).push(e);o&&o.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:o})}else for(let s of(r.value={},Reflect.ownKeys(i))){if("__proto__"===s)continue;let o=t.keyType._zod.run({value:s,issues:[]},n);if(o instanceof Promise)throw Error("Async schemas not supported in object keys currently");if("string"==typeof s&&eT.test(s)&&o.issues.length&&o.issues.some(e=>"invalid_type"===e.code&&"number"===e.expected)){let e=t.keyType._zod.run({value:Number(s),issues:[]},n);if(e instanceof Promise)throw Error("Async schemas not supported in object keys currently");0===e.issues.length&&(o=e)}if(o.issues.length){"loose"===t.mode?r.value[s]=i[s]:r.issues.push({code:"invalid_key",origin:"record",issues:o.issues.map(e=>p.finalizeIssue(e,n,d())),input:s,path:[s],inst:e});continue}let l=t.valueType._zod.run({value:i[s],issues:[]},n);l instanceof Promise?a.push(l.then(e=>{e.issues.length&&r.issues.push(...p.prefixIssues(s,e.issues)),r.value[o.value]=e.value})):(l.issues.length&&r.issues.push(...p.prefixIssues(s,l.issues)),r.value[o.value]=l.value)}return a.length?Promise.all(a).then(()=>r):r}}),rf=s("$ZodMap",(e,t)=>{tg.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:i,inst:e}),r;let a=[];for(let[s,o]of(r.value=new Map,i)){let l=t.keyType._zod.run({value:s,issues:[]},n),u=t.valueType._zod.run({value:o,issues:[]},n);l instanceof Promise||u instanceof Promise?a.push(Promise.all([l,u]).then(([t,a])=>{rm(t,a,r,s,i,e,n)})):rm(l,u,r,s,i,e,n)}return a.length?Promise.all(a).then(()=>r):r}});function rm(e,t,r,n,i,a,s){e.issues.length&&(p.propertyKeyTypes.has(typeof n)?r.issues.push(...p.prefixIssues(n,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:i,inst:a,issues:e.issues.map(e=>p.finalizeIssue(e,s,d()))})),t.issues.length&&(p.propertyKeyTypes.has(typeof n)?r.issues.push(...p.prefixIssues(n,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:i,inst:a,key:n,issues:t.issues.map(e=>p.finalizeIssue(e,s,d()))})),r.value.set(e.value,t.value)}let rg=s("$ZodSet",(e,t)=>{tg.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Set))return r.issues.push({input:i,inst:e,expected:"set",code:"invalid_type"}),r;let a=[];for(let e of(r.value=new Set,i)){let i=t.valueType._zod.run({value:e,issues:[]},n);i instanceof Promise?a.push(i.then(e=>ry(e,r))):ry(i,r)}return a.length?Promise.all(a).then(()=>r):r}});function ry(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}let rv=s("$ZodEnum",(e,t)=>{tg.init(e,t);let r=p.getEnumValues(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=RegExp(`^(${r.filter(e=>p.propertyKeyTypes.has(typeof e)).map(e=>"string"==typeof e?p.escapeRegex(e):e.toString()).join("|")})$`),e._zod.parse=(t,i)=>{let a=t.value;return n.has(a)||t.issues.push({code:"invalid_value",values:r,input:a,inst:e}),t}}),r_=s("$ZodLiteral",(e,t)=>{if(tg.init(e,t),0===t.values.length)throw Error("Cannot create literal schema with no valid values");let r=new Set(t.values);e._zod.values=r,e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?p.escapeRegex(e):e?p.escapeRegex(e.toString()):String(e)).join("|")})$`),e._zod.parse=(n,i)=>{let a=n.value;return r.has(a)||n.issues.push({code:"invalid_value",values:t.values,input:a,inst:e}),n}}),rb=s("$ZodFile",(e,t)=>{tg.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return n instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),t}}),rw=s("$ZodTransform",(e,t)=>{tg.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new u(e.constructor.name);let i=t.transform(r.value,r);if(n.async)return(i instanceof Promise?i:Promise.resolve(i)).then(e=>(r.value=e,r));if(i instanceof Promise)throw new l;return r.value=i,r}});function rk(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}let rx=s("$ZodOptional",(e,t)=>{tg.init(e,t),e._zod.optin="optional",e._zod.optout="optional",p.defineLazy(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),p.defineLazy(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${p.cleanRegex(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>{if("optional"===t.innerType._zod.optin){let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>rk(t,e.value)):rk(n,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,r)}}),r$=s("$ZodExactOptional",(e,t)=>{rx.init(e,t),p.defineLazy(e._zod,"values",()=>t.innerType._zod.values),p.defineLazy(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(e,r)=>t.innerType._zod.run(e,r)}),rS=s("$ZodNullable",(e,t)=>{tg.init(e,t),p.defineLazy(e._zod,"optin",()=>t.innerType._zod.optin),p.defineLazy(e._zod,"optout",()=>t.innerType._zod.optout),p.defineLazy(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${p.cleanRegex(e.source)}|null)$`):void 0}),p.defineLazy(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),rI=s("$ZodDefault",(e,t)=>{tg.init(e,t),e._zod.optin="optional",p.defineLazy(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);if(void 0===e.value)return e.value=t.defaultValue,e;let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(e=>rE(e,t)):rE(n,t)}});function rE(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let rA=s("$ZodPrefault",(e,t)=>{tg.init(e,t),e._zod.optin="optional",p.defineLazy(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>("backward"===r.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),rO=s("$ZodNonOptional",(e,t)=>{tg.init(e,t),p.defineLazy(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,n)=>{let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(t=>rT(t,e)):rT(i,e)}});function rT(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let rN=s("$ZodSuccess",(e,t)=>{tg.init(e,t),e._zod.parse=(e,r)=>{if("backward"===r.direction)throw new u("ZodSuccess");let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===n.issues.length,e)}}),rC=s("$ZodCatch",(e,t)=>{tg.init(e,t),p.defineLazy(e._zod,"optin",()=>t.innerType._zod.optin),p.defineLazy(e._zod,"optout",()=>t.innerType._zod.optout),p.defineLazy(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>p.finalizeIssue(e,r,d()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>p.finalizeIssue(e,r,d()))},input:e.value}),e.issues=[]),e)}}),rP=s("$ZodNaN",(e,t)=>{tg.init(e,t),e._zod.parse=(t,r)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),rj=s("$ZodPipe",(e,t)=>{tg.init(e,t),p.defineLazy(e._zod,"values",()=>t.in._zod.values),p.defineLazy(e._zod,"optin",()=>t.in._zod.optin),p.defineLazy(e._zod,"optout",()=>t.out._zod.optout),p.defineLazy(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("backward"===r.direction){let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>rz(e,t.in,r)):rz(n,t.in,r)}let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>rz(e,t.out,r)):rz(n,t.out,r)}});function rz(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}let rR=s("$ZodCodec",(e,t)=>{tg.init(e,t),p.defineLazy(e._zod,"values",()=>t.in._zod.values),p.defineLazy(e._zod,"optin",()=>t.in._zod.optin),p.defineLazy(e._zod,"optout",()=>t.out._zod.optout),p.defineLazy(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("forward"===(r.direction||"forward")){let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>rM(e,t,r)):rM(n,t,r)}{let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>rM(e,t,r)):rM(n,t,r)}}});function rM(e,t,r){if(e.issues.length)return e.aborted=!0,e;if("forward"===(r.direction||"forward")){let n=t.transform(e.value,e);return n instanceof Promise?n.then(n=>rL(e,n,t.out,r)):rL(e,n,t.out,r)}{let n=t.reverseTransform(e.value,e);return n instanceof Promise?n.then(n=>rL(e,n,t.in,r)):rL(e,n,t.in,r)}}function rL(e,t,r,n){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},n)}let rZ=s("$ZodReadonly",(e,t)=>{tg.init(e,t),p.defineLazy(e._zod,"propValues",()=>t.innerType._zod.propValues),p.defineLazy(e._zod,"values",()=>t.innerType._zod.values),p.defineLazy(e._zod,"optin",()=>t.innerType?._zod?.optin),p.defineLazy(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(rD):rD(n)}});function rD(e){return e.value=Object.freeze(e.value),e}let rU=s("$ZodTemplateLiteral",(e,t)=>{tg.init(e,t);let r=[];for(let e of t.parts)if("object"==typeof e&&null!==e){if(!e._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);let t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw Error(`Invalid template literal part: ${e._zod.traits}`);let n=+!!t.startsWith("^"),i=t.endsWith("$")?t.length-1:t.length;r.push(t.slice(n,i))}else if(null===e||p.primitiveTypes.has(typeof e))r.push(p.escapeRegex(`${e}`));else throw Error(`Invalid template literal part: ${e}`);e._zod.pattern=RegExp(`^${r.join("")}$`),e._zod.parse=(r,n)=>("string"!=typeof r.value?r.issues.push({input:r.value,inst:e,expected:"string",code:"invalid_type"}):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source})),r)}),rF=s("$ZodFunction",(e,t)=>(tg.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if("function"!=typeof t)throw Error("implement() must be called with a function");return function(...r){let n=Reflect.apply(t,this,e._def.input?k(e._def.input,r):r);return e._def.output?k(e._def.output,n):n}},e.implementAsync=t=>{if("function"!=typeof t)throw Error("implementAsync() must be called with a function");return async function(...r){let n=e._def.input?await $(e._def.input,r):r,i=await Reflect.apply(t,this,n);return e._def.output?await $(e._def.output,i):i}},e._zod.parse=(t,r)=>("function"!=typeof t.value?t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:e}):e._def.output&&"promise"===e._def.output._zod.def.type?t.value=e.implementAsync(t.value):t.value=e.implement(t.value),t),e.input=(...t)=>{let r=e.constructor;return new r(Array.isArray(t[0])?{type:"function",input:new rd({type:"tuple",items:t[0],rest:t[1]}),output:e._def.output}:{type:"function",input:t[0],output:e._def.output})},e.output=t=>new e.constructor({type:"function",input:e._def.input,output:t}),e)),rB=s("$ZodPromise",(e,t)=>{tg.init(e,t),e._zod.parse=(e,r)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},r))}),rV=s("$ZodLazy",(e,t)=>{tg.init(e,t),p.defineLazy(e._zod,"innerType",()=>t.getter()),p.defineLazy(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),p.defineLazy(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),p.defineLazy(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),p.defineLazy(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(t,r)=>e._zod.innerType._zod.run(t,r)}),rJ=s("$ZodCustom",(e,t)=>{e0.init(e,t),tg.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(t=>rW(t,r,n,e));rW(i,r,n,e)}});function rW(e,t,r,n){if(!e){let e={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(p.issue(e))}}var rq=r(68133),rK=r(78982);function rG(e,t){return new e({type:"string",...p.normalizeParams(t)})}function rH(e,t){return new e({type:"string",coerce:!0,...p.normalizeParams(t)})}function rY(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...p.normalizeParams(t)})}function rX(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...p.normalizeParams(t)})}function rQ(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...p.normalizeParams(t)})}function r0(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...p.normalizeParams(t)})}function r1(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...p.normalizeParams(t)})}function r2(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...p.normalizeParams(t)})}function r4(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...p.normalizeParams(t)})}function r6(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...p.normalizeParams(t)})}function r9(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...p.normalizeParams(t)})}function r3(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...p.normalizeParams(t)})}function r5(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...p.normalizeParams(t)})}function r8(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...p.normalizeParams(t)})}function r7(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...p.normalizeParams(t)})}function ne(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...p.normalizeParams(t)})}function nt(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...p.normalizeParams(t)})}function nr(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...p.normalizeParams(t)})}function nn(e,t){return new e({type:"string",format:"mac",check:"string_format",abort:!1,...p.normalizeParams(t)})}function ni(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...p.normalizeParams(t)})}function na(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...p.normalizeParams(t)})}function ns(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...p.normalizeParams(t)})}function no(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...p.normalizeParams(t)})}function nl(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...p.normalizeParams(t)})}function nu(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...p.normalizeParams(t)})}let nc={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function nd(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...p.normalizeParams(t)})}function np(e,t){return new e({type:"string",format:"date",check:"string_format",...p.normalizeParams(t)})}function nh(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...p.normalizeParams(t)})}function nf(e,t){return new e({type:"string",format:"duration",check:"string_format",...p.normalizeParams(t)})}function nm(e,t){return new e({type:"number",checks:[],...p.normalizeParams(t)})}function ng(e,t){return new e({type:"number",coerce:!0,checks:[],...p.normalizeParams(t)})}function ny(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...p.normalizeParams(t)})}function nv(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...p.normalizeParams(t)})}function n_(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...p.normalizeParams(t)})}function nb(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...p.normalizeParams(t)})}function nw(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...p.normalizeParams(t)})}function nk(e,t){return new e({type:"boolean",...p.normalizeParams(t)})}function nx(e,t){return new e({type:"boolean",coerce:!0,...p.normalizeParams(t)})}function n$(e,t){return new e({type:"bigint",...p.normalizeParams(t)})}function nS(e,t){return new e({type:"bigint",coerce:!0,...p.normalizeParams(t)})}function nI(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...p.normalizeParams(t)})}function nE(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...p.normalizeParams(t)})}function nA(e,t){return new e({type:"symbol",...p.normalizeParams(t)})}function nO(e,t){return new e({type:"undefined",...p.normalizeParams(t)})}function nT(e,t){return new e({type:"null",...p.normalizeParams(t)})}function nN(e){return new e({type:"any"})}function nC(e){return new e({type:"unknown"})}function nP(e,t){return new e({type:"never",...p.normalizeParams(t)})}function nj(e,t){return new e({type:"void",...p.normalizeParams(t)})}function nz(e,t){return new e({type:"date",...p.normalizeParams(t)})}function nR(e,t){return new e({type:"date",coerce:!0,...p.normalizeParams(t)})}function nM(e,t){return new e({type:"nan",...p.normalizeParams(t)})}function nL(e,t){return new e2({check:"less_than",...p.normalizeParams(t),value:e,inclusive:!1})}function nZ(e,t){return new e2({check:"less_than",...p.normalizeParams(t),value:e,inclusive:!0})}function nD(e,t){return new e4({check:"greater_than",...p.normalizeParams(t),value:e,inclusive:!1})}function nU(e,t){return new e4({check:"greater_than",...p.normalizeParams(t),value:e,inclusive:!0})}function nF(e){return nD(0,e)}function nB(e){return nL(0,e)}function nV(e){return nZ(0,e)}function nJ(e){return nU(0,e)}function nW(e,t){return new e6({check:"multiple_of",...p.normalizeParams(t),value:e})}function nq(e,t){return new e5({check:"max_size",...p.normalizeParams(t),maximum:e})}function nK(e,t){return new e8({check:"min_size",...p.normalizeParams(t),minimum:e})}function nG(e,t){return new e7({check:"size_equals",...p.normalizeParams(t),size:e})}function nH(e,t){return new te({check:"max_length",...p.normalizeParams(t),maximum:e})}function nY(e,t){return new tt({check:"min_length",...p.normalizeParams(t),minimum:e})}function nX(e,t){return new tr({check:"length_equals",...p.normalizeParams(t),length:e})}function nQ(e,t){return new ti({check:"string_format",format:"regex",...p.normalizeParams(t),pattern:e})}function n0(e){return new ta({check:"string_format",format:"lowercase",...p.normalizeParams(e)})}function n1(e){return new ts({check:"string_format",format:"uppercase",...p.normalizeParams(e)})}function n2(e,t){return new to({check:"string_format",format:"includes",...p.normalizeParams(t),includes:e})}function n4(e,t){return new tl({check:"string_format",format:"starts_with",...p.normalizeParams(t),prefix:e})}function n6(e,t){return new tu({check:"string_format",format:"ends_with",...p.normalizeParams(t),suffix:e})}function n9(e,t,r){return new td({check:"property",property:e,schema:t,...p.normalizeParams(r)})}function n3(e,t){return new tp({check:"mime_type",mime:e,...p.normalizeParams(t)})}function n5(e){return new th({check:"overwrite",tx:e})}function n8(e){return n5(t=>t.normalize(e))}function n7(){return n5(e=>e.trim())}function ie(){return n5(e=>e.toLowerCase())}function it(){return n5(e=>e.toUpperCase())}function ir(){return n5(e=>p.slugify(e))}function ii(e,t,r){return new e({type:"array",element:t,...p.normalizeParams(r)})}function ia(e,t,r){return new e({type:"union",options:t,...p.normalizeParams(r)})}function is(e,t,r){return new e({type:"union",options:t,inclusive:!1,...p.normalizeParams(r)})}function io(e,t,r,n){return new e({type:"union",options:r,discriminator:t,...p.normalizeParams(n)})}function il(e,t,r){return new e({type:"intersection",left:t,right:r})}function iu(e,t,r,n){let i=r instanceof tg,a=i?n:r;return new e({type:"tuple",items:t,rest:i?r:null,...p.normalizeParams(a)})}function ic(e,t,r,n){return new e({type:"record",keyType:t,valueType:r,...p.normalizeParams(n)})}function id(e,t,r,n){return new e({type:"map",keyType:t,valueType:r,...p.normalizeParams(n)})}function ip(e,t,r){return new e({type:"set",valueType:t,...p.normalizeParams(r)})}function ih(e,t,r){return new e({type:"enum",entries:Array.isArray(t)?Object.fromEntries(t.map(e=>[e,e])):t,...p.normalizeParams(r)})}function im(e,t,r){return new e({type:"enum",entries:t,...p.normalizeParams(r)})}function ig(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...p.normalizeParams(r)})}function iy(e,t){return new e({type:"file",...p.normalizeParams(t)})}function iv(e,t){return new e({type:"transform",transform:t})}function i_(e,t){return new e({type:"optional",innerType:t})}function ib(e,t){return new e({type:"nullable",innerType:t})}function iw(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return"function"==typeof r?r():p.shallowClone(r)}})}function ik(e,t,r){return new e({type:"nonoptional",innerType:t,...p.normalizeParams(r)})}function ix(e,t){return new e({type:"success",innerType:t})}function i$(e,t,r){return new e({type:"catch",innerType:t,catchValue:"function"==typeof r?r:()=>r})}function iS(e,t,r){return new e({type:"pipe",in:t,out:r})}function iI(e,t){return new e({type:"readonly",innerType:t})}function iE(e,t,r){return new e({type:"template_literal",parts:t,...p.normalizeParams(r)})}function iA(e,t){return new e({type:"lazy",getter:t})}function iO(e,t){return new e({type:"promise",innerType:t})}function iT(e,t,r){let n=p.normalizeParams(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function iN(e,t,r){return new e({type:"custom",check:"custom",fn:t,...p.normalizeParams(r)})}function iC(e){let t=iP(r=>(r.addIssue=e=>{if("string"==typeof e)r.issues.push(p.issue(e,r.value,t._zod.def));else{let n=e;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=t),n.continue??(n.continue=!t._zod.def.abort),r.issues.push(p.issue(n))}},e(r.value,r)));return t}function iP(e,t){let r=new e0({check:"custom",...p.normalizeParams(t)});return r._zod.check=e,r}function ij(e){let t=new e0({check:"describe"});return t._zod.onattach=[t=>{let r=rK.fd.get(t)??{};rK.fd.add(t,{...r,description:e})}],t._zod.check=()=>{},t}function iz(e){let t=new e0({check:"meta"});return t._zod.onattach=[t=>{let r=rK.fd.get(t)??{};rK.fd.add(t,{...r,...e})}],t._zod.check=()=>{},t}function iR(e,t){let r=p.normalizeParams(t),n=r.truthy??["true","1","yes","on","y","enabled"],i=r.falsy??["false","0","no","off","n","disabled"];"sensitive"!==r.case&&(n=n.map(e=>"string"==typeof e?e.toLowerCase():e),i=i.map(e=>"string"==typeof e?e.toLowerCase():e));let a=new Set(n),s=new Set(i),o=e.Codec??rR,l=e.Boolean??tG,u=new o({type:"pipe",in:new(e.String??ty)({type:"string",error:r.error}),out:new l({type:"boolean",error:r.error}),transform:(e,t)=>{let n=e;return"sensitive"!==r.case&&(n=n.toLowerCase()),!!a.has(n)||!s.has(n)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...a,...s],input:t.value,inst:u,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?n[0]||"true":i[0]||"false",error:r.error});return u}function iM(e,t,r,n={}){let i=p.normalizeParams(n),a={...p.normalizeParams(n),check:"string_format",type:"string",format:t,fn:"function"==typeof r?r:e=>r.test(e),...i};return r instanceof RegExp&&(a.pattern=r),new e(a)}var iL=r(42299),iZ=r(86985);class iD{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter(e){this.ctx.counter=e}get seen(){return this.ctx.seen}constructor(e){let t=e?.target??"draft-2020-12";"draft-4"===t&&(t="draft-04"),"draft-7"===t&&(t="draft-07"),this.ctx=(0,iL.az)({processors:iZ.Df,target:t,...e?.metadata&&{metadata:e.metadata},...e?.unrepresentable&&{unrepresentable:e.unrepresentable},...e?.override&&{override:e.override},...e?.io&&{io:e.io}})}process(e,t={path:[],schemaPath:[]}){return(0,iL.eh)(e,this.ctx,t)}emit(e,t){t&&(t.cycles&&(this.ctx.cycles=t.cycles),t.reused&&(this.ctx.reused=t.reused),t.external&&(this.ctx.external=t.external)),(0,iL.Wb)(this.ctx,e);let{"~standard":r,...n}=(0,iL.jE)(this.ctx,e);return n}}},47096:(e,t,r)=>{"use strict";r.d(t,{b:()=>p,s:()=>s});var n=r(67893),i=r(25050),a=r(84123),s={};function o(e,t){return`${e.open}${t}${e.close}`}function l(e,t){try{return JSON.stringify(e,null,2)}catch{return t}}function u(e){return"string"==typeof e?e.trim():null==e?e:l(e,e.toString())}function c(e){if(!e.end_time)return"";let t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}(0,n.V)(s,{ConsoleCallbackHandler:()=>p});let{color:d}=a;var p=class extends i.JS{name="console_callback_handler";persistRun(e){return Promise.resolve()}getParents(e){let t=[],r=e;for(;r.parent_run_id;){let e=this.runMap.get(r.parent_run_id);if(e)t.push(e),r=e;else break}return t}getBreadcrumbs(e){let t=[...this.getParents(e).reverse(),e].map((e,t,r)=>{let n=`${e.execution_order}:${e.run_type}:${e.name}`;return t===r.length-1?o(a.bold,n):n}).join(" > ");return o(d.grey,t)}onChainStart(e){let t=this.getBreadcrumbs(e);console.log(`${o(d.green,"[chain/start]")} [${t}] Entering Chain run with input: ${l(e.inputs,"[inputs]")}`)}onChainEnd(e){let t=this.getBreadcrumbs(e);console.log(`${o(d.cyan,"[chain/end]")} [${t}] [${c(e)}] Exiting Chain run with output: ${l(e.outputs,"[outputs]")}`)}onChainError(e){let t=this.getBreadcrumbs(e);console.log(`${o(d.red,"[chain/error]")} [${t}] [${c(e)}] Chain run errored with error: ${l(e.error,"[error]")}`)}onLLMStart(e){let t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(e=>e.trim())}:e.inputs;console.log(`${o(d.green,"[llm/start]")} [${t}] Entering LLM run with input: ${l(r,"[inputs]")}`)}onLLMEnd(e){let t=this.getBreadcrumbs(e);console.log(`${o(d.cyan,"[llm/end]")} [${t}] [${c(e)}] Exiting LLM run with output: ${l(e.outputs,"[response]")}`)}onLLMError(e){let t=this.getBreadcrumbs(e);console.log(`${o(d.red,"[llm/error]")} [${t}] [${c(e)}] LLM run errored with error: ${l(e.error,"[error]")}`)}onToolStart(e){let t=this.getBreadcrumbs(e);console.log(`${o(d.green,"[tool/start]")} [${t}] Entering Tool run with input: "${u(e.inputs.input)}"`)}onToolEnd(e){let t=this.getBreadcrumbs(e);console.log(`${o(d.cyan,"[tool/end]")} [${t}] [${c(e)}] Exiting Tool run with output: "${u(e.outputs?.output)}"`)}onToolError(e){let t=this.getBreadcrumbs(e);console.log(`${o(d.red,"[tool/error]")} [${t}] [${c(e)}] Tool run errored with error: ${l(e.error,"[error]")}`)}onRetrieverStart(e){let t=this.getBreadcrumbs(e);console.log(`${o(d.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${l(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){let t=this.getBreadcrumbs(e);console.log(`${o(d.cyan,"[retriever/end]")} [${t}] [${c(e)}] Exiting Retriever run with output: ${l(e.outputs,"[outputs]")}`)}onRetrieverError(e){let t=this.getBreadcrumbs(e);console.log(`${o(d.red,"[retriever/error]")} [${t}] [${c(e)}] Retriever run errored with error: ${l(e.error,"[error]")}`)}onAgentAction(e){let t=e,r=this.getBreadcrumbs(e);console.log(`${o(d.blue,"[agent/action]")} [${r}] Agent selected action: ${l(t.actions[t.actions.length-1],"[action]")}`)}}},47548:(e,t,r)=>{"use strict";function n(e){return"object"==typeof e&&null!==e&&"type"in e&&"content"in e&&("string"==typeof e.content||Array.isArray(e.content))}r.d(t,{K:()=>n})},49573:(e,t,r)=>{"use strict";r.d(t,{kN:()=>v,_G:()=>f});var n=r(67893),i=r(65408),a=r(57719),s=Object.defineProperty,o=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function l(e,t){let r=Array.from({length:e.length},(e,t)=>({start:t,end:t+1}));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){let a=e.slice(r[i].start,r[i+1].end),s=t.get(a.join(","));null!=s&&(null==n||s<n[0])&&(n=[s,i])}if(null!=n){let e=n[1];r[e]={start:r[e].start,end:r[e+1].end},r.splice(e+1,1)}else break}return r}function u(e,t){return 1===e.length?[t.get(e.join(","))]:l(e,t).map(r=>t.get(e.slice(r.start,r.end).join(","))).filter(e=>null!=e)}function c(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var d=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(e,t){for(let[t,r]of(this.patStr=e.pat_str,Object.entries(e.bpe_ranks.split("\n").filter(Boolean).reduce((e,t)=>{let[r,n,...i]=t.split(" "),a=Number.parseInt(n,10);return i.forEach((t,r)=>e[t]=a+r),e},{})))){let e=a.toByteArray(t);this.rankMap.set(e.join(","),r),this.textMap.set(r,e)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((e,[t,r])=>(e[r]=this.textEncoder.encode(t),e),{})}encode(e,t=[],r="all"){let n=RegExp(this.patStr,"ug"),i=d.specialTokenRegex(Object.keys(this.specialTokens)),a=[],s=new Set("all"===t?Object.keys(this.specialTokens):t),o=new Set("all"===r?Object.keys(this.specialTokens).filter(e=>!s.has(e)):r);if(o.size>0){let t=d.specialTokenRegex([...o]),r=e.match(t);if(null!=r)throw Error(`The text contains a special token that is not allowed: ${r[0]}`)}let l=0;for(;;){let t=null,r=l;for(;i.lastIndex=r,!(null==(t=i.exec(e))||s.has(t[0]));)r=t.index+1;let o=t?.index??e.length;for(let t of e.substring(l,o).matchAll(n)){let e=this.textEncoder.encode(t[0]),r=this.rankMap.get(e.join(","));if(null!=r){a.push(r);continue}a.push(...u(e,this.rankMap))}if(null==t)break;let c=this.specialTokens[t[0]];a.push(c),l=t.index+t[0].length}return a}decode(e){let t=[],r=0;for(let n=0;n<e.length;++n){let i=e[n],a=this.textMap.get(i)??this.inverseSpecialTokens[i];null!=a&&(t.push(a),r+=a.length)}let n=new Uint8Array(r),i=0;for(let e of t)n.set(e,i),i+=e.length;return this.textDecoder.decode(n)}},p=d;function h(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw Error("Unknown model")}}((e,t,r)=>o(e,"symbol"!=typeof t?t+"":t,r))(p,"specialTokenRegex",e=>RegExp(e.map(e=>c(e)).join("|"),"g"));var f={};(0,n.V)(f,{encodingForModel:()=>v,getEncoding:()=>y});let m={},g=new i.g({});async function y(e){return e in m||(m[e]=g.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then(e=>e.json()).then(e=>new p(e)).catch(t=>{throw delete m[e],t})),await m[e]}async function v(e){return y(h(e))}},49641:e=>{var t="/";!function(){var r={675:function(e,t){"use strict";t.byteLength=u,t.toByteArray=d,t.fromByteArray=f;for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=a.length;s<o;++s)r[s]=a[s],n[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function u(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n}function c(e,t,r){return(t+r)*3/4-r}function d(e){var t,r,a=l(e),s=a[0],o=a[1],u=new i(c(e,s,o)),d=0,p=o>0?s-4:s;for(r=0;r<p;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[d++]=t>>16&255,u[d++]=t>>8&255,u[d++]=255&t;return 2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[d++]=255&t),1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[d++]=t>>8&255,u[d++]=255&t),u}function p(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function h(e,t,r){for(var n=[],i=t;i<r;i+=3)n.push(p((e[i]<<16&0xff0000)+(e[i+1]<<8&65280)+(255&e[i+2])));return n.join("")}function f(e){for(var t,n=e.length,i=n%3,a=[],s=16383,o=0,l=n-i;o<l;o+=s)a.push(h(e,o,o+s>l?l:o+s));return 1===i?a.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&a.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),a.join("")}n[45]=62,n[95]=63},72:function(e,t,r){"use strict";var n=r(675),i=r(783),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50;var s=0x7fffffff;function o(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function l(e){if(e>s)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return f(e,t);if(ArrayBuffer.isView(e))return m(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return g(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);var i=y(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function p(e,t,r){return(d(e),e<=0)?l(e):void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)}function h(e){return d(e),l(e<0?0:0|v(e))}function f(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!u.isEncoding(t))throw TypeError("Unknown encoding: "+t);var r=0|b(e,t),n=l(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function m(e){for(var t=e.length<0?0:0|v(e.length),r=l(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),u.prototype),n}function y(e){if(u.isBuffer(e)){var t=0|v(e.length),r=l(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||X(e.length)?l(0):m(e):"Buffer"===e.type&&Array.isArray(e.data)?m(e.data):void 0}function v(e){if(e>=s)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),u.alloc(+e)}function b(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(i)return n?-1:W(e).length;t=(""+t).toLowerCase(),i=!0}}function w(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return z(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return N(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function k(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function x(e,t,r,n,i){if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),X(r*=1)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:$(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return $(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function $(e,t,r,n,i){var a,s=1,o=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,o/=2,l/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(a=r;a<o;a++)if(u(e,a)===u(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*s}else -1!==c&&(a-=a-c),c=-1}else for(r+l>o&&(r=o-l),a=r;a>=0;a--){for(var d=!0,p=0;p<l;p++)if(u(e,a+p)!==u(t,p)){d=!1;break}if(d)return a}return -1}function S(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;n>a/2&&(n=a/2);for(var s=0;s<n;++s){var o=parseInt(t.substr(2*s,2),16);if(X(o))break;e[r+s]=o}return s}function I(e,t,r,n){return H(W(t,e.length-r),e,r,n)}function E(e,t,r,n){return H(q(t),e,r,n)}function A(e,t,r,n){return E(e,t,r,n)}function O(e,t,r,n){return H(G(t),e,r,n)}function T(e,t,r,n){return H(K(t,e.length-r),e,r,n)}function N(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function C(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,s,o,l,u=e[i],c=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=r)switch(d){case 1:u<128&&(c=u);break;case 2:(192&(a=e[i+1]))==128&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[i+1],s=e[i+2],(192&a)==128&&(192&s)==128&&(l=(15&u)<<12|(63&a)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[i+1],s=e[i+2],o=e[i+3],(192&a)==128&&(192&s)==128&&(192&o)==128&&(l=(15&u)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=d}return j(n)}t.kMaxLength=0x7fffffff,u.TYPED_ARRAY_SUPPORT=o(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return p(e,t,r)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(Y(a,Uint8Array)&&(a=u.from(a)),!u.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=b,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)k(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)k(this,t,t+3),k(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)k(this,t,t+7),k(this,t+1,t+6),k(this,t+2,t+5),k(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?C(this,0,e):w.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,s=r-t,o=Math.min(a,s),l=this.slice(n,i),c=e.slice(t,r),d=0;d<o;++d)if(l[d]!==c[d]){a=l[d],s=c[d];break}return a<s?-1:+(s<a)},u.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return x(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return x(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return S(this,e,t,r);case"utf8":case"utf-8":return I(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return A(this,e,t,r);case"base64":return O(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(a)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function j(e){var t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=P));return r}function z(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=Q[e[a]];return i}function L(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function Z(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,i,a){if(!u.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function U(e,t,r,n,i,a){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function F(e,t,r,n,a){return t*=1,r>>>=0,a||U(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,a){return t*=1,r>>>=0,a||U(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||Z(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||Z(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return e>>>=0,t||Z(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||Z(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||Z(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||Z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||Z(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||Z(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||Z(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return(e>>>=0,t||Z(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||Z(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||Z(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||Z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||Z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||Z(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||Z(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||Z(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||Z(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;D(this,e,t,r,i,0)}var a=1,s=0;for(this[t]=255&e;++s<r&&(a*=256);)this[t+s]=e/a&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;D(this,e,t,r,i,0)}var a=r-1,s=1;for(this[t+a]=255&e;--a>=0&&(s*=256);)this[t+a]=e/s&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var a=0,s=1,o=0;for(this[t]=255&e;++a<r&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s|0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var a=r-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s|0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||D(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var a=i-1;a>=0;--a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var i,a=e.charCodeAt(0);("utf8"===n&&a<128||"latin1"===n)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=u.isBuffer(e)?e:u.from(e,n),o=s.length;if(0===o)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};var V=/[^+/0-9A-Za-z-_]/g;function J(e){if((e=(e=e.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function W(e,t){t=t||1/0;for(var r,n=e.length,i=null,a=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319||s+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return a}function q(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function K(e,t){for(var r,n,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i.push(r%256),i.push(n);return i}function G(e){return n.toByteArray(J(e))}function H(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!=e}var Q=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},783:function(e,t){t.read=function(e,t,r,n,i){var a,s,o=8*i-n-1,l=(1<<o)-1,u=l>>1,c=-7,d=r?i-1:0,p=r?-1:1,h=e[t+d];for(d+=p,a=h&(1<<-c)-1,h>>=-c,c+=o;c>0;a=256*a+e[t+d],d+=p,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=n;c>0;s=256*s+e[t+d],d+=p,c-=8);if(0===a)a=1-u;else{if(a===l)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),a-=u}return(h?-1:1)*s*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var s,o,l,u=8*a-i-1,c=(1<<u)-1,d=c>>1,p=5960464477539062e-23*(23===i),h=n?0:a-1,f=n?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?t+=p/l:t+=p*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=c?(o=0,s=c):s+d>=1?(o=(t*l-1)*Math.pow(2,i),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+h]=255&o,h+=f,o/=256,i-=8);for(s=s<<i|o,u+=i;u>0;e[r+h]=255&s,h+=f,s/=256,u-=8);e[r+h-f]|=128*m}}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}},s=!0;try{r[e](a,a.exports,i),s=!1}finally{s&&delete n[e]}return a.exports}i.ab=t+"/",e.exports=i(72)}()},50125:(e,t,r)=>{"use strict";let n;r.d(t,{Sn:()=>bi,z6:()=>er.z6});var i,a,s,o,l,u,c,d,p={};r.r(p),r.d(p,{base64:()=>dm,base64url:()=>dg,bigint:()=>dI,boolean:()=>dO,browserEmail:()=>ds,cidrv4:()=>dh,cidrv6:()=>df,cuid:()=>cX,cuid2:()=>cQ,date:()=>dw,datetime:()=>d$,domain:()=>dv,duration:()=>c6,e164:()=>d_,email:()=>dt,emoji:()=>du,extendedDuration:()=>c9,guid:()=>c3,hex:()=>dj,hostname:()=>dy,html5Email:()=>dr,idnEmail:()=>da,integer:()=>dE,ipv4:()=>dc,ipv6:()=>dd,ksuid:()=>c2,lowercase:()=>dC,mac:()=>dp,md5_base64:()=>dL,md5_base64url:()=>dZ,md5_hex:()=>dM,nanoid:()=>c4,null:()=>dT,number:()=>dA,rfc5322Email:()=>dn,sha1_base64:()=>dU,sha1_base64url:()=>dF,sha1_hex:()=>dD,sha256_base64:()=>dV,sha256_base64url:()=>dJ,sha256_hex:()=>dB,sha384_base64:()=>dq,sha384_base64url:()=>dK,sha384_hex:()=>dW,sha512_base64:()=>dH,sha512_base64url:()=>dY,sha512_hex:()=>dG,string:()=>dS,time:()=>dx,ulid:()=>c0,undefined:()=>dN,unicodeEmail:()=>di,uppercase:()=>dP,uuid:()=>c5,uuid4:()=>c8,uuid6:()=>c7,uuid7:()=>de,xid:()=>c1});var h={};r.r(h),r.d(h,{endsWith:()=>f5,gt:()=>fB,gte:()=>fV,includes:()=>f9,length:()=>f1,lowercase:()=>f4,lt:()=>fU,lte:()=>fF,maxLength:()=>fQ,maxSize:()=>fH,mime:()=>f7,minLength:()=>f0,minSize:()=>fY,multipleOf:()=>fG,negative:()=>fW,nonnegative:()=>fK,nonpositive:()=>fq,normalize:()=>mt,overwrite:()=>me,positive:()=>fJ,property:()=>f8,regex:()=>f2,size:()=>fX,slugify:()=>ma,startsWith:()=>f3,toLowerCase:()=>mn,toUpperCase:()=>mi,trim:()=>mr,uppercase:()=>f6});var f={};r.r(f),r.d(f,{ZodISODate:()=>gt,ZodISODateTime:()=>m7,ZodISODuration:()=>ga,ZodISOTime:()=>gn,date:()=>gr,datetime:()=>ge,duration:()=>gs,time:()=>gi});var m={};r.r(m),r.d(m,{ZodAny:()=>yC,ZodArray:()=>yF,ZodBase64:()=>g8,ZodBase64URL:()=>ye,ZodBigInt:()=>yw,ZodBigIntFormat:()=>yx,ZodBoolean:()=>y_,ZodCIDRv4:()=>g6,ZodCIDRv6:()=>g3,ZodCUID:()=>gF,ZodCUID2:()=>gV,ZodCatch:()=>vE,ZodCodec:()=>vP,ZodCustom:()=>vJ,ZodCustomStringFormat:()=>ys,ZodDate:()=>yD,ZodDefault:()=>v_,ZodDiscriminatedUnion:()=>yQ,ZodE164:()=>yr,ZodEmail:()=>gI,ZodEmoji:()=>gL,ZodEnum:()=>vn,ZodExactOptional:()=>vf,ZodFile:()=>vl,ZodFunction:()=>vB,ZodGUID:()=>gA,ZodIPv4:()=>gX,ZodIPv6:()=>g2,ZodIntersection:()=>y1,ZodJWT:()=>yi,ZodKSUID:()=>gH,ZodLazy:()=>vZ,ZodLiteral:()=>vs,ZodMAC:()=>g0,ZodMap:()=>y7,ZodNaN:()=>vO,ZodNanoID:()=>gD,ZodNever:()=>yR,ZodNonOptional:()=>vx,ZodNull:()=>yT,ZodNullable:()=>vg,ZodNumber:()=>yd,ZodNumberFormat:()=>yh,ZodObject:()=>yJ,ZodOptional:()=>vp,ZodPipe:()=>vN,ZodPrefault:()=>vw,ZodPromise:()=>vU,ZodReadonly:()=>vz,ZodRecord:()=>y9,ZodSet:()=>vt,ZodString:()=>gx,ZodStringFormat:()=>gS,ZodSuccess:()=>vS,ZodSymbol:()=>yI,ZodTemplateLiteral:()=>vM,ZodTransform:()=>vc,ZodTuple:()=>y4,ZodType:()=>gw,ZodULID:()=>gW,ZodURL:()=>gz,ZodUUID:()=>gT,ZodUndefined:()=>yA,ZodUnion:()=>yG,ZodUnknown:()=>yj,ZodVoid:()=>yL,ZodXID:()=>gK,ZodXor:()=>yY,_ZodString:()=>gk,_default:()=>vb,_function:()=>vV,any:()=>yP,array:()=>yB,base64:()=>g7,base64url:()=>yt,bigint:()=>yk,boolean:()=>yb,catch:()=>vA,check:()=>vW,cidrv4:()=>g9,cidrv6:()=>g5,codec:()=>vj,cuid:()=>gB,cuid2:()=>gJ,custom:()=>vq,date:()=>yU,describe:()=>vH,discriminatedUnion:()=>y0,e164:()=>yn,email:()=>gE,emoji:()=>gZ,enum:()=>vi,exactOptional:()=>vm,file:()=>vu,float32:()=>ym,float64:()=>yg,function:()=>vV,guid:()=>gO,hash:()=>yc,hex:()=>yu,hostname:()=>yl,httpUrl:()=>gM,instanceof:()=>vX,int:()=>yf,int32:()=>yy,int64:()=>y$,intersection:()=>y2,ipv4:()=>gQ,ipv6:()=>g4,json:()=>v0,jwt:()=>ya,keyof:()=>yV,ksuid:()=>gY,lazy:()=>vD,literal:()=>vo,looseObject:()=>yK,looseRecord:()=>y8,mac:()=>g1,map:()=>ve,meta:()=>vY,nan:()=>vT,nanoid:()=>gU,nativeEnum:()=>va,never:()=>yM,nonoptional:()=>v$,null:()=>yN,nullable:()=>vy,nullish:()=>vv,number:()=>yp,object:()=>yW,optional:()=>vh,partialRecord:()=>y5,pipe:()=>vC,prefault:()=>vk,preprocess:()=>v1,promise:()=>vF,readonly:()=>vR,record:()=>y3,refine:()=>vK,set:()=>vr,strictObject:()=>yq,string:()=>g$,stringFormat:()=>yo,stringbool:()=>vQ,success:()=>vI,superRefine:()=>vG,symbol:()=>yE,templateLiteral:()=>vL,transform:()=>vd,tuple:()=>y6,uint32:()=>yv,uint64:()=>yS,ulid:()=>gq,undefined:()=>yO,union:()=>yH,unknown:()=>yz,url:()=>gR,uuid:()=>gN,uuidv4:()=>gC,uuidv6:()=>gP,uuidv7:()=>gj,void:()=>yZ,xid:()=>gG,xor:()=>yX});var g=Object.defineProperty,y=Object.getOwnPropertyDescriptor,v=Object.getOwnPropertyNames,_=Object.prototype.hasOwnProperty,b=(e,t)=>{for(var r in t)g(e,r,{get:t[r],enumerable:!0})},w=r(36984),k=r(1995),x=r(87150);b({},{ConfigurableModel:()=>O,MODEL_PROVIDER_CONFIG:()=>$,_inferModelProvider:()=>A,getChatModelByClassName:()=>I,initChatModel:()=>T});let $={openai:{package:"@langchain/openai",className:"ChatOpenAI"},anthropic:{package:"@langchain/anthropic",className:"ChatAnthropic"},azure_openai:{package:"@langchain/openai",className:"AzureChatOpenAI"},cohere:{package:"@langchain/cohere",className:"ChatCohere"},"google-vertexai":{package:"@langchain/google-vertexai",className:"ChatVertexAI"},"google-vertexai-web":{package:"@langchain/google-vertexai-web",className:"ChatVertexAI"},"google-genai":{package:"@langchain/google-genai",className:"ChatGoogleGenerativeAI"},ollama:{package:"@langchain/ollama",className:"ChatOllama"},mistralai:{package:"@langchain/mistralai",className:"ChatMistralAI"},mistral:{package:"@langchain/mistralai",className:"ChatMistralAI"},groq:{package:"@langchain/groq",className:"ChatGroq"},cerebras:{package:"@langchain/cerebras",className:"ChatCerebras"},bedrock:{package:"@langchain/aws",className:"ChatBedrockConverse"},deepseek:{package:"@langchain/deepseek",className:"ChatDeepSeek"},xai:{package:"@langchain/xai",className:"ChatXAI"},fireworks:{package:"@langchain/community/chat_models/fireworks",className:"ChatFireworks",hasCircularDependency:!0},together:{package:"@langchain/community/chat_models/togetherai",className:"ChatTogetherAI",hasCircularDependency:!0},perplexity:{package:"@langchain/community/chat_models/perplexity",className:"ChatPerplexity",hasCircularDependency:!0}},S=Object.keys($);async function I(e){let t=Object.entries($).find(([,t])=>t.className===e);if(!t)return;let[,n]=t;try{return(await r(16657)(n.package))[n.className]}catch(t){let e=t;if("code"in e&&e.code?.toString().includes("ERR_MODULE_NOT_FOUND")&&"message"in e){let t=e.message.split("Error: Cannot find package '")[1].split("'")[0];throw Error(`Unable to import ${t}. Please install with \`npm install ${t}\` or \`pnpm install ${t}\``)}throw t}}async function E(e,t,r={}){let n=t||A(e);if(!n)throw Error(`Unable to infer model provider for { model: ${e} }, please specify modelProvider directly.`);let i=$[n];if(!i){let e=S.join(", ");throw Error(`Unsupported { modelProvider: ${n} }.

Supported model providers are: ${e}`)}let{modelProvider:a,...s}=r;return new(await I(i.className))({model:e,...s})}function A(e){if(e.startsWith("gpt-3")||e.startsWith("gpt-4")||e.startsWith("gpt-5")||e.startsWith("o1")||e.startsWith("o3")||e.startsWith("o4"))return"openai";if(e.startsWith("claude"))return"anthropic";if(e.startsWith("command"))return"cohere";if(e.startsWith("accounts/fireworks"))return"fireworks";if(e.startsWith("gemini"))return"google-vertexai";else if(e.startsWith("amazon."))return"bedrock";else if(e.startsWith("mistral"))return"mistralai";else if(e.startsWith("sonar")||e.startsWith("pplx"))return"perplexity";else return}var O=class e extends w.xV{_llmType(){return"chat_model"}lc_namespace=["langchain","chat_models"];_defaultConfig={};_configurableFields="any";_configPrefix;_queuedMethodOperations={};_modelInstanceCache=new Map;_profile;constructor(e){super(e),this._defaultConfig=e.defaultConfig??{},"any"===e.configurableFields?this._configurableFields="any":this._configurableFields=e.configurableFields??["model","modelProvider"],e.configPrefix?this._configPrefix=e.configPrefix.endsWith("_")?e.configPrefix:`${e.configPrefix}_`:this._configPrefix="",this._queuedMethodOperations=e.queuedMethodOperations??this._queuedMethodOperations,this._profile=e.profile??void 0}async _getModelInstance(e){let t=JSON.stringify(e??{}),r=this._modelInstanceCache.get(t);if(r)return r;let n={...this._defaultConfig,...this._modelParams(e)},i=await E(n.model,n.modelProvider,n);for(let[e,t]of Object.entries(this._queuedMethodOperations))e in i&&"function"==typeof i[e]&&(i=await i[e](...t));return this._modelInstanceCache.set(t,i),i}async _generate(e,t,r){return(await this._getModelInstance(t))._generate(e,t??{},r)}bindTools(t,r){let n={...this._queuedMethodOperations};return n.bindTools=[t,r],new e({defaultConfig:this._defaultConfig,configurableFields:this._configurableFields,configPrefix:this._configPrefix,queuedMethodOperations:n})}withStructuredOutput=(t,...r)=>{let n={...this._queuedMethodOperations};return n.withStructuredOutput=[t,...r],new e({defaultConfig:this._defaultConfig,configurableFields:this._configurableFields,configPrefix:this._configPrefix,queuedMethodOperations:n})};_modelParams(e){let t=e?.configurable??{},r={};for(let[e,n]of Object.entries(t))e.startsWith(this._configPrefix)&&(r[this._removePrefix(e,this._configPrefix)]=n);return"any"!==this._configurableFields&&(r=Object.fromEntries(Object.entries(r).filter(([e])=>this._configurableFields.includes(e)))),r}_removePrefix(e,t){return e.startsWith(t)?e.slice(t.length):e}withConfig(t){let r={...t||{}},n=this._modelParams(r);Object.fromEntries(Object.entries(r).filter(([e])=>"configurable"!==e)).configurable=Object.fromEntries(Object.entries(r.configurable||{}).filter(([e])=>this._configPrefix&&!Object.keys(n).includes(this._removePrefix(e,this._configPrefix))));let i=new e({defaultConfig:{...this._defaultConfig,...n},configurableFields:Array.isArray(this._configurableFields)?[...this._configurableFields]:this._configurableFields,configPrefix:this._configPrefix,queuedMethodOperations:this._queuedMethodOperations});return new k.fJ({config:r,bound:i})}async invoke(e,t){let r=await this._getModelInstance(t),n=(0,k.ZI)(t);return r.invoke(e,n)}async stream(e,t){let r=await this._getModelInstance(t),n=new x.Tr({generator:await r.stream(e,t),config:t});return await n.setup,x.bO.fromAsyncGenerator(n)}async batch(e,t,r){return super.batch(e,t,r)}async *transform(e,t){let r=await this._getModelInstance(t),n=(0,k.ZI)(t);yield*r.transform(e,n)}async *streamLog(e,t,r){let n=await this._getModelInstance(t),i=(0,k.ZI)(t);yield*n.streamLog(e,i,{...r,_schemaFormat:"original",includeNames:r?.includeNames,includeTypes:r?.includeTypes,includeTags:r?.includeTags,excludeNames:r?.excludeNames,excludeTypes:r?.excludeTypes,excludeTags:r?.excludeTags})}streamEvents(e,t,r){let n=this;async function*i(){let i=await n._getModelInstance(t),a=(0,k.ZI)(t);for await(let t of i.streamEvents(e,a,r))yield t}return x.bO.fromAsyncGenerator(i())}get profile(){if(this._profile)return this._profile;let e=JSON.stringify({}),t=this._modelInstanceCache.get(e);return t?.profile??{}}};async function T(e,t){let r,{configurableFields:n,configPrefix:i,modelProvider:a,profile:s,...o}={configPrefix:"",...t??{}};if(void 0===a&&e?.includes(":")){let[t,...r]=e.split(":"),n=0===r.length?[t]:[t,r.join(":")];S.includes(n[0])&&([a,e]=n)}let l=Array.isArray(n)?[...n]:n;e||void 0!==l||(l=["model","modelProvider"]),i&&void 0===l&&console.warn(`{ configPrefix: ${i} } has been set but no fields are configurable. Set { configurableFields: [...] } to specify the model params that are configurable.`);let u={...o};return void 0===l?r=new O({defaultConfig:{...u,model:e,modelProvider:a},configPrefix:i,profile:s}):(e&&(u.model=e),a&&(u.modelProvider=a),r=new O({defaultConfig:u,configPrefix:i,configurableFields:l,profile:s})),await r._getModelInstance(),r}var N=class extends Error{constructor(){super("The provided LLM already has bound tools. Please provide an LLM without bound tools to createAgent. The agent will bind the tools provided in the 'tools' parameter.")}},C=class extends Error{toolNames;constructor(e){super(`The model has called multiple tools: ${e.join(", ")} to return a structured output. This is not supported. Please provide a single structured output.`),this.toolNames=e}},P=class extends Error{toolName;errors;constructor(e,t){super(`Failed to parse structured output for tool '${e}':${t.map(e=>`
  - ${e}`).join("")}.`),this.toolName=e,this.errors=t}},j=class extends Error{toolCall;toolError;constructor(e,t){let r=e instanceof Error?e:Error(String(e));super(`Error invoking tool '${t.name}' with kwargs ${JSON.stringify(t.args)} with error: ${r.stack}
 Please fix the error and try again.`),this.toolCall=t,this.toolError=r}};function z(e){return"invoke"in e&&"function"==typeof e.invoke&&"_streamResponseChunks"in e}function R(e){return"object"==typeof e&&null!=e&&"_queuedMethodOperations"in e&&"_getModelInstance"in e&&"function"==typeof e._getModelInstance}var M=r(8872),L=r(25720);let Z=0;var D=class e{constructor(e,t,r){this.schema=e,this.tool=t,this.options=r}get name(){return this.tool.function.name}static fromSchema(t,r){let n;function i(e){return e??`extract-${++Z}`}if((0,M.c9)(t)){let n=(0,L.PF)(t),a={type:"function",function:{name:i(),strict:!1,description:n.description??"Tool for extracting structured output from the model's response.",parameters:n}};return new e(n,a,r)}return n="string"==typeof t.name&&"object"==typeof t.parameters&&null!=t.parameters?t:{name:i(t.title),description:t.description??"",parameters:t.schema||t},new e((0,L.PF)(t),{type:"function",function:n},r)}parse(e){let t=new L.Dr(this.schema).validate(e);if(!t.valid)throw new P(this.name,t.errors.map(e=>e.error));return e}},U=class e{_schemaType;schema;strict;constructor(e,t){if("schema"in e&&"object"==typeof e.schema&&null!==e.schema&&!("type"in e)){let t=e;this.schema=t.schema,this.strict=t.strict??!1}else this.schema=e,this.strict=t??!1}static fromSchema(t,r=!1){return new e((0,L.PF)(t),r)}parse(e){let t;if("string"==typeof e.content)t=e.content;else if(Array.isArray(e.content)){for(let r of e.content)if("object"==typeof r&&null!==r&&"type"in r&&"text"===r.type&&"text"in r&&"string"==typeof r.text){t=r.text;break}}if(t&&""!==t)try{let e=JSON.parse(t);if(!new L.Dr(this.schema).validate(e).valid)return;return e}catch{}}};function F(e,t,r){if(!e||"object"==typeof e&&null!==e&&"__responseFormatUndefined"in e)return[];if(Array.isArray(e)){if(e.every(e=>e instanceof D||e instanceof U))return e;if(e.every(e=>(0,M.QV)(e))||e.every(e=>"object"==typeof e&&null!==e&&!(0,M.QV)(e)))return e.map(e=>D.fromSchema(e,t));throw Error("Invalid response format: list contains mixed types.\nAll items must be either InteropZodObject or plain JSON schema objects.")}if(e instanceof D||e instanceof U)return[e];let n=q(r);if((0,M.QV)(e)||"object"==typeof e&&null!==e&&"properties"in e)return n?[U.fromSchema(e)]:[D.fromSchema(e,t)];throw Error(`Invalid response format: ${String(e)}`)}function B(e,t){return F(e,t)}function V(e){if("object"==typeof e&&null!==e&&"schema"in e&&!(0,M.c9)(e)&&!("type"in e)){let{schema:t,strict:r}=e;return U.fromSchema(t,r??!1)}return U.fromSchema(e,!1)}let J=["ChatOpenAI","ChatXAI"],W=["grok","gpt-5","gpt-4.1","gpt-4o","gpt-oss","o3-pro","o3-mini"];function q(e){if(!e)return!1;if("string"==typeof e){let t=e.split(":").pop();return W.some(e=>t.includes(e))}if(R(e))return q(e._defaultConfig.model);if(!z(e))return!1;let t=e.getName();return!!("FakeToolCallingChatModel"===t||J.includes(t)&&("model"in e&&W.some(t=>"string"==typeof e.model&&e.model.includes(t))||"FakeToolCallingModel"===t&&"structuredResponse"in e))}var K=r(67286);function G(e){let t=0;for(let r of e){let e;e="string"==typeof r.content?r.content:Array.isArray(r.content)?r.content.map(e=>"string"==typeof e?e:"text"===e.type&&"text"in e?e.text:"").join(""):"",K.Od.isInstance(r)&&Array.isArray(r.tool_calls)&&r.tool_calls.length>0&&(e+=JSON.stringify(r.tool_calls)),K.uf.isInstance(r)&&(e+=r.tool_call_id??""),t+=e.length}return Math.ceil(t/4)}function H(e){if(e&&"function"!=typeof e)return e.canJumpTo}function Y(e){return"function"==typeof e?e:e.hook}function X(e){return new Promise(t=>setTimeout(t,e))}function Q(e,t){let r,{backoffFactor:n,initialDelayMs:i,maxDelayMs:a,jitter:s}=e;if(r=Math.min(r=0===n?i:i*n**t,a),s&&r>0){let e=.25*r;r+=(2*Math.random()-1)*e,r=Math.max(0,r)}return r}let ee=Symbol("AgentMiddleware");function et(e){return{[ee]:!0,name:e.name,stateSchema:e.stateSchema,contextSchema:e.contextSchema,wrapToolCall:e.wrapToolCall,wrapModelCall:e.wrapModelCall,beforeAgent:e.beforeAgent,beforeModel:e.beforeModel,afterModel:e.afterModel,afterAgent:e.afterAgent,tools:e.tools??[]}}var er=r(52330);!function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(i||(i={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(a||(a={}));let en=i.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ei=e=>{switch(typeof e){case"undefined":return en.undefined;case"string":return en.string;case"number":return Number.isNaN(e)?en.nan:en.number;case"boolean":return en.boolean;case"function":return en.function;case"bigint":return en.bigint;case"symbol":return en.symbol;case"object":if(Array.isArray(e))return en.array;if(null===e)return en.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return en.promise;if("undefined"!=typeof Map&&e instanceof Map)return en.map;if("undefined"!=typeof Set&&e instanceof Set)return en.set;if("undefined"!=typeof Date&&e instanceof Date)return en.date;return en.object;default:return en.unknown}},ea=i.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class es extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof es))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,i.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t=Object.create(null),r=[];for(let n of this.issues)if(n.path.length>0){let r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}es.create=e=>new es(e);let eo=(e,t)=>{let r;switch(e.code){case ea.invalid_type:r=e.received===en.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case ea.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,i.jsonStringifyReplacer)}`;break;case ea.unrecognized_keys:r=`Unrecognized key(s) in object: ${i.joinValues(e.keys,", ")}`;break;case ea.invalid_union:r="Invalid input";break;case ea.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${i.joinValues(e.options)}`;break;case ea.invalid_enum_value:r=`Invalid enum value. Expected ${i.joinValues(e.options)}, received '${e.received}'`;break;case ea.invalid_arguments:r="Invalid function arguments";break;case ea.invalid_return_type:r="Invalid function return type";break;case ea.invalid_date:r="Invalid date";break;case ea.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:i.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case ea.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case ea.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case ea.custom:r="Invalid input";break;case ea.invalid_intersection_types:r="Intersection results could not be merged";break;case ea.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case ea.not_finite:r="Number must be finite";break;default:r=t.defaultError,i.assertNever(e)}return{message:r}},el=eo;function eu(){return el}let ec=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],s={...i,path:a};if(void 0!==i.message)return{...i,path:a,message:i.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(s,{data:t,defaultError:o}).message;return{...i,path:a,message:o}};function ed(e,t){let r=eu(),n=ec({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===eo?void 0:eo].filter(e=>!!e)});e.common.issues.push(n)}class ep{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return eh;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return ep.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return eh;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}let eh=Object.freeze({status:"aborted"}),ef=e=>({status:"dirty",value:e}),em=e=>({status:"valid",value:e}),eg=e=>"aborted"===e.status,ey=e=>"dirty"===e.status,ev=e=>"valid"===e.status,e_=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(s||(s={}));class eb{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let ew=(e,t)=>{if(ev(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new es(e.common.issues);return this._error=t,this._error}}};function ek(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:a}=e;return"invalid_enum_value"===t.code?{message:a??i.defaultError}:void 0===i.data?{message:a??n??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:a??r??i.defaultError}},description:i}}class ex{get description(){return this._def.description}_getType(e){return ei(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ei(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ep,ctx:{common:e.parent.common,data:e.data,parsedType:ei(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(e_(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ei(e)},n=this._parseSync({data:e,path:r.path,parent:r});return ew(r,n)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ei(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return ev(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>ev(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ei(e)},n=this._parse({data:e,path:r.path,parent:r});return ew(r,await (e_(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),a=()=>n.addIssue({code:ea.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(a(),!1)):!!i||(a(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new tm({schema:this,typeName:o.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return tg.create(this,this._def)}nullable(){return ty.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return e3.create(this)}promise(){return tf.create(this,this._def)}or(e){return e7.create([this,e],this._def)}and(e){return tn.create(this,e,this._def)}transform(e){return new tm({...ek(this._def),schema:this,typeName:o.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t="function"==typeof e?e:()=>e;return new tv({...ek(this._def),innerType:this,defaultValue:t,typeName:o.ZodDefault})}brand(){return new tw({typeName:o.ZodBranded,type:this,...ek(this._def)})}catch(e){let t="function"==typeof e?e:()=>e;return new t_({...ek(this._def),innerType:this,catchValue:t,typeName:o.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return tk.create(this,e)}readonly(){return tx.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let e$=/^c[^\s-]{8,}$/i,eS=/^[0-9a-z]+$/,eI=/^[0-9A-HJKMNP-TV-Z]{26}$/i,eE=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,eA=/^[a-z0-9_-]{21}$/i,eO=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,eT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,eN=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,eC="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",eP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ej=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ez=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,eR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eM=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eL=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,eZ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eD=RegExp(`^${eZ}$`);function eU(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function eF(e){return RegExp(`^${eU(e)}$`)}function eB(e){let t=`${eZ}T${eU(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}function eV(e,t){return!!(("v4"===t||!t)&&eP.test(e)||("v6"===t||!t)&&ez.test(e))}function eJ(e,t){if(!eO.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));if("object"!=typeof i||null===i||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)return!1;return!0}catch{return!1}}function eW(e,t){return!!(("v4"===t||!t)&&ej.test(e)||("v6"===t||!t)&&eR.test(e))}class eq extends ex{_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==en.string){let t=this._getOrReturnCtx(e);return ed(t,{code:ea.invalid_type,expected:en.string,received:t.parsedType}),eh}let r=new ep;for(let a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(ed(t=this._getOrReturnCtx(e,t),{code:ea.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if("max"===a.kind)e.data.length>a.value&&(ed(t=this._getOrReturnCtx(e,t),{code:ea.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if("length"===a.kind){let n=e.data.length>a.value,i=e.data.length<a.value;(n||i)&&(t=this._getOrReturnCtx(e,t),n?ed(t,{code:ea.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):i&&ed(t,{code:ea.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if("email"===a.kind)eN.test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{validation:"email",code:ea.invalid_string,message:a.message}),r.dirty());else if("emoji"===a.kind)n||(n=RegExp(eC,"u")),n.test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{validation:"emoji",code:ea.invalid_string,message:a.message}),r.dirty());else if("uuid"===a.kind)eE.test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{validation:"uuid",code:ea.invalid_string,message:a.message}),r.dirty());else if("nanoid"===a.kind)eA.test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{validation:"nanoid",code:ea.invalid_string,message:a.message}),r.dirty());else if("cuid"===a.kind)e$.test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{validation:"cuid",code:ea.invalid_string,message:a.message}),r.dirty());else if("cuid2"===a.kind)eS.test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{validation:"cuid2",code:ea.invalid_string,message:a.message}),r.dirty());else if("ulid"===a.kind)eI.test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{validation:"ulid",code:ea.invalid_string,message:a.message}),r.dirty());else if("url"===a.kind)try{new URL(e.data)}catch{ed(t=this._getOrReturnCtx(e,t),{validation:"url",code:ea.invalid_string,message:a.message}),r.dirty()}else"regex"===a.kind?(a.regex.lastIndex=0,a.regex.test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{validation:"regex",code:ea.invalid_string,message:a.message}),r.dirty())):"trim"===a.kind?e.data=e.data.trim():"includes"===a.kind?e.data.includes(a.value,a.position)||(ed(t=this._getOrReturnCtx(e,t),{code:ea.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):"toLowerCase"===a.kind?e.data=e.data.toLowerCase():"toUpperCase"===a.kind?e.data=e.data.toUpperCase():"startsWith"===a.kind?e.data.startsWith(a.value)||(ed(t=this._getOrReturnCtx(e,t),{code:ea.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):"endsWith"===a.kind?e.data.endsWith(a.value)||(ed(t=this._getOrReturnCtx(e,t),{code:ea.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):"datetime"===a.kind?eB(a).test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{code:ea.invalid_string,validation:"datetime",message:a.message}),r.dirty()):"date"===a.kind?eD.test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{code:ea.invalid_string,validation:"date",message:a.message}),r.dirty()):"time"===a.kind?eF(a).test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{code:ea.invalid_string,validation:"time",message:a.message}),r.dirty()):"duration"===a.kind?eT.test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{validation:"duration",code:ea.invalid_string,message:a.message}),r.dirty()):"ip"===a.kind?eV(e.data,a.version)||(ed(t=this._getOrReturnCtx(e,t),{validation:"ip",code:ea.invalid_string,message:a.message}),r.dirty()):"jwt"===a.kind?eJ(e.data,a.alg)||(ed(t=this._getOrReturnCtx(e,t),{validation:"jwt",code:ea.invalid_string,message:a.message}),r.dirty()):"cidr"===a.kind?eW(e.data,a.version)||(ed(t=this._getOrReturnCtx(e,t),{validation:"cidr",code:ea.invalid_string,message:a.message}),r.dirty()):"base64"===a.kind?eM.test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{validation:"base64",code:ea.invalid_string,message:a.message}),r.dirty()):"base64url"===a.kind?eL.test(e.data)||(ed(t=this._getOrReturnCtx(e,t),{validation:"base64url",code:ea.invalid_string,message:a.message}),r.dirty()):i.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:ea.invalid_string,...s.errToObj(r)})}_addCheck(e){return new eq({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...s.errToObj(e)})}url(e){return this._addCheck({kind:"url",...s.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...s.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...s.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...s.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...s.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...s.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...s.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...s.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...s.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...s.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...s.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...s.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...s.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...s.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...s.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...s.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...s.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...s.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...s.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...s.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...s.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...s.errToObj(t)})}nonempty(e){return this.min(1,s.errToObj(e))}trim(){return new eq({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new eq({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new eq({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function eK(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}eq.create=e=>new eq({checks:[],typeName:o.ZodString,coerce:e?.coerce??!1,...ek(e)});class eG extends ex{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==en.number){let t=this._getOrReturnCtx(e);return ed(t,{code:ea.invalid_type,expected:en.number,received:t.parsedType}),eh}let r=new ep;for(let n of this._def.checks)"int"===n.kind?i.isInteger(e.data)||(ed(t=this._getOrReturnCtx(e,t),{code:ea.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(ed(t=this._getOrReturnCtx(e,t),{code:ea.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(ed(t=this._getOrReturnCtx(e,t),{code:ea.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==eK(e.data,n.value)&&(ed(t=this._getOrReturnCtx(e,t),{code:ea.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(ed(t=this._getOrReturnCtx(e,t),{code:ea.not_finite,message:n.message}),r.dirty()):i.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,s.toString(t))}gt(e,t){return this.setLimit("min",e,!1,s.toString(t))}lte(e,t){return this.setLimit("max",e,!0,s.toString(t))}lt(e,t){return this.setLimit("max",e,!1,s.toString(t))}setLimit(e,t,r,n){return new eG({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:s.toString(n)}]})}_addCheck(e){return new eG({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:s.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:s.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:s.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:s.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:s.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:s.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:s.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:s.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:s.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&i.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}eG.create=e=>new eG({checks:[],typeName:o.ZodNumber,coerce:e?.coerce||!1,...ek(e)});class eH extends ex{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==en.bigint)return this._getInvalidInput(e);let r=new ep;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(ed(t=this._getOrReturnCtx(e,t),{code:ea.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(ed(t=this._getOrReturnCtx(e,t),{code:ea.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(ed(t=this._getOrReturnCtx(e,t),{code:ea.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):i.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return ed(t,{code:ea.invalid_type,expected:en.bigint,received:t.parsedType}),eh}gte(e,t){return this.setLimit("min",e,!0,s.toString(t))}gt(e,t){return this.setLimit("min",e,!1,s.toString(t))}lte(e,t){return this.setLimit("max",e,!0,s.toString(t))}lt(e,t){return this.setLimit("max",e,!1,s.toString(t))}setLimit(e,t,r,n){return new eH({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:s.toString(n)}]})}_addCheck(e){return new eH({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:s.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:s.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:s.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:s.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:s.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}eH.create=e=>new eH({checks:[],typeName:o.ZodBigInt,coerce:e?.coerce??!1,...ek(e)});class eY extends ex{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==en.boolean){let t=this._getOrReturnCtx(e);return ed(t,{code:ea.invalid_type,expected:en.boolean,received:t.parsedType}),eh}return em(e.data)}}eY.create=e=>new eY({typeName:o.ZodBoolean,coerce:e?.coerce||!1,...ek(e)});class eX extends ex{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==en.date){let t=this._getOrReturnCtx(e);return ed(t,{code:ea.invalid_type,expected:en.date,received:t.parsedType}),eh}if(Number.isNaN(e.data.getTime()))return ed(this._getOrReturnCtx(e),{code:ea.invalid_date}),eh;let r=new ep;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(ed(t=this._getOrReturnCtx(e,t),{code:ea.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(ed(t=this._getOrReturnCtx(e,t),{code:ea.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):i.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new eX({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:s.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:s.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}eX.create=e=>new eX({checks:[],coerce:e?.coerce||!1,typeName:o.ZodDate,...ek(e)});class eQ extends ex{_parse(e){if(this._getType(e)!==en.symbol){let t=this._getOrReturnCtx(e);return ed(t,{code:ea.invalid_type,expected:en.symbol,received:t.parsedType}),eh}return em(e.data)}}eQ.create=e=>new eQ({typeName:o.ZodSymbol,...ek(e)});class e0 extends ex{_parse(e){if(this._getType(e)!==en.undefined){let t=this._getOrReturnCtx(e);return ed(t,{code:ea.invalid_type,expected:en.undefined,received:t.parsedType}),eh}return em(e.data)}}e0.create=e=>new e0({typeName:o.ZodUndefined,...ek(e)});class e1 extends ex{_parse(e){if(this._getType(e)!==en.null){let t=this._getOrReturnCtx(e);return ed(t,{code:ea.invalid_type,expected:en.null,received:t.parsedType}),eh}return em(e.data)}}e1.create=e=>new e1({typeName:o.ZodNull,...ek(e)});class e2 extends ex{constructor(){super(...arguments),this._any=!0}_parse(e){return em(e.data)}}e2.create=e=>new e2({typeName:o.ZodAny,...ek(e)});class e4 extends ex{constructor(){super(...arguments),this._unknown=!0}_parse(e){return em(e.data)}}e4.create=e=>new e4({typeName:o.ZodUnknown,...ek(e)});class e6 extends ex{_parse(e){let t=this._getOrReturnCtx(e);return ed(t,{code:ea.invalid_type,expected:en.never,received:t.parsedType}),eh}}e6.create=e=>new e6({typeName:o.ZodNever,...ek(e)});class e9 extends ex{_parse(e){if(this._getType(e)!==en.undefined){let t=this._getOrReturnCtx(e);return ed(t,{code:ea.invalid_type,expected:en.void,received:t.parsedType}),eh}return em(e.data)}}e9.create=e=>new e9({typeName:o.ZodVoid,...ek(e)});class e3 extends ex{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==en.array)return ed(t,{code:ea.invalid_type,expected:en.array,received:t.parsedType}),eh;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(ed(t,{code:e?ea.too_big:ea.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(ed(t,{code:ea.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(ed(t,{code:ea.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new eb(t,e,t.path,r)))).then(e=>ep.mergeArray(r,e));let i=[...t.data].map((e,r)=>n.type._parseSync(new eb(t,e,t.path,r)));return ep.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new e3({...this._def,minLength:{value:e,message:s.toString(t)}})}max(e,t){return new e3({...this._def,maxLength:{value:e,message:s.toString(t)}})}length(e,t){return new e3({...this._def,exactLength:{value:e,message:s.toString(t)}})}nonempty(e){return this.min(1,e)}}function e5(e){if(e instanceof e8){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=tg.create(e5(n))}return new e8({...e._def,shape:()=>t})}if(e instanceof e3)return new e3({...e._def,type:e5(e.element)});if(e instanceof tg)return tg.create(e5(e.unwrap()));if(e instanceof ty)return ty.create(e5(e.unwrap()));if(e instanceof ti)return ti.create(e.items.map(e=>e5(e)));else return e}e3.create=(e,t)=>new e3({type:e,minLength:null,maxLength:null,exactLength:null,typeName:o.ZodArray,...ek(t)});class e8 extends ex{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=i.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==en.object){let t=this._getOrReturnCtx(e);return ed(t,{code:ea.invalid_type,expected:en.object,received:t.parsedType}),eh}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof e6&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||a.push(e);let s=[];for(let e of i){let t=n[e],i=r.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new eb(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof e6){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of a)s.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)a.length>0&&(ed(r,{code:ea.unrecognized_keys,keys:a}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of a){let n=r.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new eb(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of s){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>ep.mergeObjectSync(t,e)):ep.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return s.errToObj,new e8({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:s.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new e8({...this._def,unknownKeys:"strip"})}passthrough(){return new e8({...this._def,unknownKeys:"passthrough"})}extend(e){return new e8({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new e8({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:o.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new e8({...this._def,catchall:e})}pick(e){let t={};for(let r of i.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new e8({...this._def,shape:()=>t})}omit(e){let t={};for(let r of i.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new e8({...this._def,shape:()=>t})}deepPartial(){return e5(this)}partial(e){let t={};for(let r of i.objectKeys(this.shape)){let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new e8({...this._def,shape:()=>t})}required(e){let t={};for(let r of i.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof tg;)e=e._def.innerType;t[r]=e}return new e8({...this._def,shape:()=>t})}keyof(){return td(i.objectKeys(this.shape))}}e8.create=(e,t)=>new e8({shape:()=>e,unknownKeys:"strip",catchall:e6.create(),typeName:o.ZodObject,...ek(t)}),e8.strictCreate=(e,t)=>new e8({shape:()=>e,unknownKeys:"strict",catchall:e6.create(),typeName:o.ZodObject,...ek(t)}),e8.lazycreate=(e,t)=>new e8({shape:e,unknownKeys:"strip",catchall:e6.create(),typeName:o.ZodObject,...ek(t)});class e7 extends ex{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;function n(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new es(e.ctx.common.issues));return ed(t,{code:ea.invalid_union,unionErrors:r}),eh}if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(n);{let e,n=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new es(e));return ed(t,{code:ea.invalid_union,unionErrors:i}),eh}}get options(){return this._def.options}}e7.create=(e,t)=>new e7({options:e,typeName:o.ZodUnion,...ek(t)});let te=e=>{if(e instanceof tu)return te(e.schema);if(e instanceof tm)return te(e.innerType());if(e instanceof tc)return[e.value];if(e instanceof tp)return e.options;if(e instanceof th)return i.objectValues(e.enum);else if(e instanceof tv)return te(e._def.innerType);else if(e instanceof e0)return[void 0];else if(e instanceof e1)return[null];else if(e instanceof tg)return[void 0,...te(e.unwrap())];else if(e instanceof ty)return[null,...te(e.unwrap())];else if(e instanceof tw)return te(e.unwrap());else if(e instanceof tx)return te(e.unwrap());else if(e instanceof t_)return te(e._def.innerType);else return[]};class tt extends ex{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==en.object)return ed(t,{code:ea.invalid_type,expected:en.object,received:t.parsedType}),eh;let r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(ed(t,{code:ea.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),eh)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=te(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new tt({typeName:o.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...ek(r)})}}function tr(e,t){let r=ei(e),n=ei(t);if(e===t)return{valid:!0,data:e};if(r===en.object&&n===en.object){let r=i.objectKeys(t),n=i.objectKeys(e).filter(e=>-1!==r.indexOf(e)),a={...e,...t};for(let r of n){let n=tr(e[r],t[r]);if(!n.valid)return{valid:!1};a[r]=n.data}return{valid:!0,data:a}}if(r===en.array&&n===en.array){if(e.length!==t.length)return{valid:!1};let r=[];for(let n=0;n<e.length;n++){let i=tr(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}if(r===en.date&&n===en.date&&+e==+t)return{valid:!0,data:e};return{valid:!1}}class tn extends ex{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(eg(e)||eg(n))return eh;let i=tr(e.value,n.value);return i.valid?((ey(e)||ey(n))&&t.dirty(),{status:t.value,value:i.data}):(ed(r,{code:ea.invalid_intersection_types}),eh)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}tn.create=(e,t,r)=>new tn({left:e,right:t,typeName:o.ZodIntersection,...ek(r)});class ti extends ex{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==en.array)return ed(r,{code:ea.invalid_type,expected:en.array,received:r.parsedType}),eh;if(r.data.length<this._def.items.length)return ed(r,{code:ea.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),eh;!this._def.rest&&r.data.length>this._def.items.length&&(ed(r,{code:ea.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new eb(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>ep.mergeArray(t,e)):ep.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ti({...this._def,rest:e})}}ti.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ti({items:e,typeName:o.ZodTuple,rest:null,...ek(t)})};class ta extends ex{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==en.object)return ed(r,{code:ea.invalid_type,expected:en.object,received:r.parsedType}),eh;let n=[],i=this._def.keyType,a=this._def.valueType;for(let e in r.data)n.push({key:i._parse(new eb(r,e,r.path,e)),value:a._parse(new eb(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?ep.mergeObjectAsync(t,n):ep.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new ta(t instanceof ex?{keyType:e,valueType:t,typeName:o.ZodRecord,...ek(r)}:{keyType:eq.create(),valueType:e,typeName:o.ZodRecord,...ek(t)})}}class ts extends ex{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==en.map)return ed(r,{code:ea.invalid_type,expected:en.map,received:r.parsedType}),eh;let n=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([e,t],a)=>({key:n._parse(new eb(r,e,r.path,[a,"key"])),value:i._parse(new eb(r,t,r.path,[a,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of a){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return eh;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of a){let n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return eh;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}ts.create=(e,t,r)=>new ts({valueType:t,keyType:e,typeName:o.ZodMap,...ek(r)});class to extends ex{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==en.set)return ed(r,{code:ea.invalid_type,expected:en.set,received:r.parsedType}),eh;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(ed(r,{code:ea.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(ed(r,{code:ea.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function a(e){let r=new Set;for(let n of e){if("aborted"===n.status)return eh;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let s=[...r.data.values()].map((e,t)=>i._parse(new eb(r,e,r.path,t)));return r.common.async?Promise.all(s).then(e=>a(e)):a(s)}min(e,t){return new to({...this._def,minSize:{value:e,message:s.toString(t)}})}max(e,t){return new to({...this._def,maxSize:{value:e,message:s.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}to.create=(e,t)=>new to({valueType:e,minSize:null,maxSize:null,typeName:o.ZodSet,...ek(t)});class tl extends ex{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==en.function)return ed(t,{code:ea.invalid_type,expected:en.function,received:t.parsedType}),eh;function r(e,r){return ec({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,eu(),eo].filter(e=>!!e),issueData:{code:ea.invalid_arguments,argumentsError:r}})}function n(e,r){return ec({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,eu(),eo].filter(e=>!!e),issueData:{code:ea.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof tf){let e=this;return em(async function(...t){let s=new es([]),o=await e._def.args.parseAsync(t,i).catch(e=>{throw s.addIssue(r(t,e)),s}),l=await Reflect.apply(a,this,o);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw s.addIssue(n(l,e)),s})})}{let e=this;return em(function(...t){let s=e._def.args.safeParse(t,i);if(!s.success)throw new es([r(t,s.error)]);let o=Reflect.apply(a,this,s.data),l=e._def.returns.safeParse(o,i);if(!l.success)throw new es([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new tl({...this._def,args:ti.create(e).rest(e4.create())})}returns(e){return new tl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new tl({args:e||ti.create([]).rest(e4.create()),returns:t||e4.create(),typeName:o.ZodFunction,...ek(r)})}}class tu extends ex{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}tu.create=(e,t)=>new tu({getter:e,typeName:o.ZodLazy,...ek(t)});class tc extends ex{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return ed(t,{received:t.data,code:ea.invalid_literal,expected:this._def.value}),eh}return{status:"valid",value:e.data}}get value(){return this._def.value}}function td(e,t){return new tp({values:e,typeName:o.ZodEnum,...ek(t)})}tc.create=(e,t)=>new tc({value:e,typeName:o.ZodLiteral,...ek(t)});class tp extends ex{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return ed(t,{expected:i.joinValues(r),received:t.parsedType,code:ea.invalid_type}),eh}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return ed(t,{received:t.data,code:ea.invalid_enum_value,options:r}),eh}return em(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return tp.create(e,{...this._def,...t})}exclude(e,t=this._def){return tp.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}tp.create=td;class th extends ex{_parse(e){let t=i.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==en.string&&r.parsedType!==en.number){let e=i.objectValues(t);return ed(r,{expected:i.joinValues(e),received:r.parsedType,code:ea.invalid_type}),eh}if(this._cache||(this._cache=new Set(i.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=i.objectValues(t);return ed(r,{received:r.data,code:ea.invalid_enum_value,options:e}),eh}return em(e.data)}get enum(){return this._def.values}}th.create=(e,t)=>new th({values:e,typeName:o.ZodNativeEnum,...ek(t)});class tf extends ex{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==en.promise&&!1===t.common.async?(ed(t,{code:ea.invalid_type,expected:en.promise,received:t.parsedType}),eh):em((t.parsedType===en.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}tf.create=(e,t)=>new tf({type:e,typeName:o.ZodPromise,...ek(t)});class tm extends ex{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===o.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:e=>{ed(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===n.type){let e=n.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return eh;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?eh:"dirty"===n.status||"dirty"===t.value?ef(n.value):n});{if("aborted"===t.value)return eh;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?eh:"dirty"===n.status||"dirty"===t.value?ef(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?eh:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?eh:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>ev(e)?Promise.resolve(n.transform(e.value,a)).then(e=>({status:t.value,value:e})):eh);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ev(e))return eh;let i=n.transform(e.value,a);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}i.assertNever(n)}}tm.create=(e,t,r)=>new tm({schema:e,typeName:o.ZodEffects,effect:t,...ek(r)}),tm.createWithPreprocess=(e,t,r)=>new tm({schema:t,effect:{type:"preprocess",transform:e},typeName:o.ZodEffects,...ek(r)});class tg extends ex{_parse(e){return this._getType(e)===en.undefined?em(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tg.create=(e,t)=>new tg({innerType:e,typeName:o.ZodOptional,...ek(t)});class ty extends ex{_parse(e){return this._getType(e)===en.null?em(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ty.create=(e,t)=>new ty({innerType:e,typeName:o.ZodNullable,...ek(t)});class tv extends ex{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===en.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}tv.create=(e,t)=>new tv({innerType:e,typeName:o.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...ek(t)});class t_ extends ex{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return e_(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new es(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new es(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}t_.create=(e,t)=>new t_({innerType:e,typeName:o.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...ek(t)});class tb extends ex{_parse(e){if(this._getType(e)!==en.nan){let t=this._getOrReturnCtx(e);return ed(t,{code:ea.invalid_type,expected:en.nan,received:t.parsedType}),eh}return{status:"valid",value:e.data}}}tb.create=e=>new tb({typeName:o.ZodNaN,...ek(e)}),Symbol("zod_brand");class tw extends ex{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class tk extends ex{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?eh:"dirty"===e.status?(t.dirty(),ef(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?eh:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new tk({in:e,out:t,typeName:o.ZodPipeline})}}class tx extends ex{_parse(e){let t=this._def.innerType._parse(e),r=e=>(ev(e)&&(e.value=Object.freeze(e.value)),e);return e_(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function t$(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function tS(e,t={},r){return e?e2.create().superRefine((n,i)=>{let a=e(n);if(a instanceof Promise)return a.then(e=>{if(!e){let e=t$(t,n),a=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:a})}});if(!a){let e=t$(t,n),a=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:a})}}):e2.create()}tx.create=(e,t)=>new tx({innerType:e,typeName:o.ZodReadonly,...ek(t)}),e8.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(o||(o={}));let tI=(e,t={message:`Input not instance of ${e.name}`})=>tS(t=>t instanceof e,t),tE=eq.create,tA=eG.create;tb.create,eH.create;let tO=eY.create;eX.create,eQ.create;let tT=e0.create;e1.create;let tN=e2.create;e4.create,e6.create,e9.create;let tC=e3.create,tP=e8.create;e8.strictCreate;let tj=e7.create;tt.create,tn.create,ti.create;let tz=ta.create;ts.create,to.create;let tR=tl.create;tu.create;let tM=tc.create,tL=tp.create;th.create;let tZ=tf.create;tm.create,tg.create,ty.create,tm.createWithPreprocess,tk.create;var tD=r(84598),tU=r(40510),tF=0,tB=0;let tV=function(e,t,r){var n=t&&r||0,i=t||Array(16),a=(e=e||{}).node,s=e.clockseq;if(e._v6||(a||(a=l),null==s&&(s=u)),null==a||null==s){var o=e.random||(e.rng||tU.A)();null==a&&(a=[o[0],o[1],o[2],o[3],o[4],o[5]],l||e._v6||(a[0]|=1,l=a)),null==s&&(s=(o[6]<<8|o[7])&16383,void 0!==u||e._v6||(u=s))}var c=void 0!==e.msecs?e.msecs:Date.now(),d=void 0!==e.nsecs?e.nsecs:tB+1,p=c-tF+(d-tB)/1e4;if(p<0&&void 0===e.clockseq&&(s=s+1&16383),(p<0||c>tF)&&void 0===e.nsecs&&(d=0),d>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");tF=c,tB=d,u=s;var h=((0xfffffff&(c+=122192928e5))*1e4+d)%0x100000000;i[n++]=h>>>24&255,i[n++]=h>>>16&255,i[n++]=h>>>8&255,i[n++]=255&h;var f=c/0x100000000*1e4&0xfffffff;i[n++]=f>>>8&255,i[n++]=255&f,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var m=0;m<6;++m)i[n+m]=a[m];return t||(0,tD.k)(i)};var tJ=r(59520);function tW(e){var t=tq("string"==typeof e?(0,tJ.A)(e):e);return"string"==typeof e?(0,tD.k)(t):t}function tq(e,t=!1){return Uint8Array.of((15&e[6])<<4|e[7]>>4&15,(15&e[7])<<4|(240&e[4])>>4,(15&e[4])<<4|(240&e[5])>>4,(15&e[5])<<4|(240&e[0])>>4,(15&e[0])<<4|(240&e[1])>>4,(15&e[1])<<4|(240&e[2])>>4,96|15&e[2],e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function tK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tK(Object(r),!0).forEach(function(t){tH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tK(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tH(e,t,r){return(t=tY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tY(e){var t=tX(e,"string");return"symbol"==typeof t?t:t+""}function tX(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function tQ(e={},t,r=0){var n=tV(tG(tG({},e),{},{_v6:!0}),new Uint8Array(16));if(n=tW(n),t){for(var i=0;i<16;i++)t[r+i]=n[i];return t}return(0,tD.k)(n)}var t0=r(23778);function t1(e){return tQ({clockseq:e})}function t2(e,t){let r=t.replace(/-/g,"").match(/.{2}/g).map(e=>parseInt(e,16));return(0,t0.A)(e,new Uint8Array(r))}let t4="__error__",t6="__scheduled__",t9="__interrupt__",t3="__resume__";var t5="[...]",t8="[Circular]",t7=[],re=[];function rt(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function rr(e,t,r,n){void 0===n&&(n=rt()),ri(e,"",0,[],void 0,0,n);try{i=0===re.length?JSON.stringify(e,t,r):JSON.stringify(e,ra(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==t7.length;){var i,a=t7.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return i}function rn(e,t,r,n){var i=Object.getOwnPropertyDescriptor(n,r);void 0!==i.get?i.configurable?(Object.defineProperty(n,r,{value:e}),t7.push([n,r,t,i])):re.push([t,r,e]):(n[r]=e,t7.push([n,r,t]))}function ri(e,t,r,n,i,a,s){if(a+=1,"object"==typeof e&&null!==e){for(o=0;o<n.length;o++)if(n[o]===e)return void rn(t8,e,t,i);if(void 0!==s.depthLimit&&a>s.depthLimit||void 0!==s.edgesLimit&&r+1>s.edgesLimit)return void rn(t5,e,t,i);if(n.push(e),Array.isArray(e))for(o=0;o<e.length;o++)ri(e[o],o,o,n,e,a,s);else{var o,l=Object.keys(e);for(o=0;o<l.length;o++){var u=l[o];ri(e[u],u,o,n,e,a,s)}}n.pop()}}function ra(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(re.length>0)for(var n=0;n<re.length;n++){var i=re[n];if(i[1]===t&&i[0]===r){r=i[2],re.splice(n,1);break}}return e.call(this,t,r)}}var rs=r(2730),ro=r(55870),rl=r(69530),ru=r(4397);let rc=[];var rd=r(67893),rp={},rh=r(27231),rf=r(72716),rm=r(25050),rg=r(47096),ry=r(16208),rv=r(46935),r_=r(55452),rb=r(73897),rw=r(78488),rk=r(23294),rx=r(65408),r$=r(98864),rS=r(62886),rI=r(64184),rE={};(0,rd.V)(rE,{BaseChatMessageHistory:()=>rA,BaseListChatMessageHistory:()=>rO,InMemoryChatMessageHistory:()=>rT});var rA=class extends rl.yL{async addMessages(e){for(let t of e)await this.addMessage(t)}},rO=class extends rl.yL{addUserMessage(e){return this.addMessage(new rS.xc(e))}addAIMessage(e){return this.addMessage(new rI.Od(e))}async addMessages(e){for(let t of e)await this.addMessage(t)}clear(){throw Error("Not implemented.")}},rT=class extends rO{lc_namespace=["langchain","stores","message","in_memory"];messages=[];constructor(e){super(...arguments),this.messages=e??[]}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async clear(){this.messages=[]}},rN=r(91306),rC={},rP={};(0,rd.V)(rP,{BaseMemory:()=>rj,getInputValue:()=>rR,getOutputValue:()=>rM,getPromptInputKey:()=>rL});var rj=class{};let rz=(e,t)=>{if(void 0!==t)return e[t];let r=Object.keys(e);if(1===r.length)return e[r[0]]},rR=(e,t)=>{let r=rz(e,t);if(!r){let t=Object.keys(e);throw Error(`input values have ${t.length} keys, you must specify an input key or pass only 1 key as input`)}return r},rM=(e,t)=>{let r=rz(e,t);if(!r&&""!==r){let t=Object.keys(e);throw Error(`output values have ${t.length} keys, you must specify an output key or pass only 1 key as output`)}return r};function rL(e,t){let r=Object.keys(e).filter(e=>!t.includes(e)&&"stop"!==e);if(1!==r.length)throw Error(`One input key expected, but got ${r.length}`);return r[0]}var rZ=r(91481),rD={};(0,rd.V)(rD,{BaseStore:()=>rU,InMemoryStore:()=>rF});var rU=class extends rl.yL{},rF=class extends rU{lc_namespace=["langchain","storage"];store={};async mget(e){return e.map(e=>this.store[e])}async mset(e){for(let[t,r]of e)this.store[t]=r}async mdelete(e){for(let t of e)delete this.store[t]}async *yieldKeys(e){for(let t of Object.keys(this.store))(void 0===e||t.startsWith(e))&&(yield t)}},rB=r(92173),rV=r(41180),rJ={};(0,rd.V)(rJ,{BaseRetriever:()=>rW});var rW=class extends rV.YN{callbacks;tags;metadata;verbose;constructor(e){super(e),this.callbacks=e?.callbacks,this.tags=e?.tags??[],this.metadata=e?.metadata??{},this.verbose=e?.verbose??!1}_getRelevantDocuments(e,t){throw Error("Not implemented!")}async invoke(e,t){let r=(0,rB.ZI)((0,r_.H_)(t)),n=await r_.Td.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),i=await n?.handleRetrieverStart(this.toJSON(),e,r.runId,void 0,void 0,void 0,r.runName);try{let t=await this._getRelevantDocuments(e,i);return await i?.handleRetrieverEnd(t),t}catch(e){throw await i?.handleRetrieverError(e),e}}},rq={};(0,rd.V)(rq,{SaveableVectorStore:()=>rH,VectorStore:()=>rG,VectorStoreRetriever:()=>rK});var rK=class extends rW{static lc_name(){return"VectorStoreRetriever"}get lc_namespace(){return["langchain_core","vectorstores"]}vectorStore;k=4;searchType="similarity";searchKwargs;filter;_vectorstoreType(){return this.vectorStore._vectorstoreType()}constructor(e){super(e),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.searchType=e.searchType??this.searchType,this.filter=e.filter,"mmr"===e.searchType&&(this.searchKwargs=e.searchKwargs)}async _getRelevantDocuments(e,t){if("mmr"===this.searchType){if("function"!=typeof this.vectorStore.maxMarginalRelevanceSearch)throw Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,{k:this.k,filter:this.filter,...this.searchKwargs},t?.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,t?.getChild("vectorstore"))}async addDocuments(e,t){return this.vectorStore.addDocuments(e,t)}},rG=class extends rl.yL{lc_namespace=["langchain","vectorstores",this._vectorstoreType()];embeddings;constructor(e,t){super(t),this.embeddings=e}async delete(e){throw Error("Not implemented.")}async similaritySearch(e,t=4,r,n){return(await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),t,r)).map(e=>e[0])}async similaritySearchWithScore(e,t=4,r,n){return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),t,r)}static fromTexts(e,t,r,n){throw Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,t,r){throw Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,t,r,n,i,a){if("number"==typeof e)return new rK({vectorStore:this,k:e,filter:t,tags:[...n??[],this._vectorstoreType()],metadata:i,verbose:a,callbacks:r});{let t={vectorStore:this,k:e?.k,filter:e?.filter,tags:[...e?.tags??[],this._vectorstoreType()],metadata:e?.metadata,verbose:e?.verbose,callbacks:e?.callbacks,searchType:e?.searchType};return new rK(e?.searchType==="mmr"?{...t,searchKwargs:e.searchKwargs}:{...t})}}},rH=class extends rG{static load(e,t){throw Error("Not implemented")}},rY=r(65662),rX=r(14672),rQ={};(0,rd.V)(rQ,{BaseDocumentLoader:()=>r0});var r0=class{},r1=r(82926),r2={};(0,rd.V)(r2,{LangSmithLoader:()=>r4});var r4=class extends r0{datasetId;datasetName;exampleIds;asOf;splits;inlineS3Urls;offset;limit;metadata;filter;contentKey;formatContent;client;constructor(e){if(super(),e.client&&e.clientConfig)throw Error("client and clientConfig cannot both be provided.");this.client=e.client??new r1.Kj(e?.clientConfig),this.contentKey=e.contentKey?e.contentKey.split("."):[],this.formatContent=e.formatContent??r6,this.datasetId=e.datasetId,this.datasetName=e.datasetName,this.exampleIds=e.exampleIds,this.asOf=e.asOf,this.splits=e.splits,this.inlineS3Urls=e.inlineS3Urls,this.offset=e.offset,this.limit=e.limit,this.metadata=e.metadata,this.filter=e.filter}async load(){let e=[];for await(let t of this.client.listExamples({datasetId:this.datasetId,datasetName:this.datasetName,exampleIds:this.exampleIds,asOf:this.asOf,splits:this.splits,inlineS3Urls:this.inlineS3Urls,offset:this.offset,limit:this.limit,metadata:this.metadata,filter:this.filter})){let r=t.inputs;for(let e of this.contentKey)r=r[e];let n=this.formatContent(r),i=t;["created_at","modified_at"].forEach(e=>{e in i&&"object"==typeof i[e]&&(i[e]=i[e].toString())}),e.push({pageContent:n,metadata:i})}return e}};function r6(e){if("string"==typeof e)return e;try{return JSON.stringify(e,null,2)}catch{return String(e)}}var r9=class{pageContent;metadata;id;constructor(e){this.pageContent=void 0!==e.pageContent?e.pageContent.toString():"",this.metadata=e.metadata??{},this.id=e.id}},r3=class extends rV.YN{lc_namespace=["langchain_core","documents","transformers"];invoke(e,t){return this.transformDocuments(e)}},r5=class extends r3{async transformDocuments(e){let t=[];for(let r of e){let e=await this._transformDocument(r);t.push(e)}return t}},r8={};(0,rd.V)(r8,{BaseDocumentTransformer:()=>r3,Document:()=>r9,MappingDocumentTransformer:()=>r5});var r7=class extends rl.yL{lc_namespace=["langchain_core","example_selectors","base"]},ne=class{async getPromptAsync(e,t){return this.getPrompt(e).partial(t?.partialVariables??{})}},nt=class extends ne{defaultPrompt;conditionals;constructor(e,t=[]){super(),this.defaultPrompt=e,this.conditionals=t}getPrompt(e){for(let[t,r]of this.conditionals)if(t(e))return r;return this.defaultPrompt}};function nr(e){return"base_llm"===e._modelType()}function nn(e){return"base_chat_model"===e._modelType()}function ni(e){return e.split(/\n| /).length}var na=class e extends r7{examples=[];examplePrompt;getTextLength=ni;maxLength=2048;exampleTextLengths=[];constructor(e){super(e),this.examplePrompt=e.examplePrompt,this.maxLength=e.maxLength??2048,this.getTextLength=e.getTextLength??ni}async addExample(e){this.examples.push(e);let t=await this.examplePrompt.format(e);this.exampleTextLengths.push(this.getTextLength(t))}async calculateExampleTextLengths(e,t){if(e.length>0)return e;let{examples:r,examplePrompt:n}=t;return(await Promise.all(r.map(e=>n.format(e)))).map(e=>this.getTextLength(e))}async selectExamples(e){let t=Object.values(e).join(" "),r=this.maxLength-this.getTextLength(t),n=0,i=[];for(;r>0&&n<this.examples.length;){let e=r-this.exampleTextLengths[n];if(e<0)break;i.push(this.examples[n]),r=e,n+=1}return i}static async fromExamples(t,r){let n=new e(r);return await Promise.all(t.map(e=>n.addExample(e))),n}};function ns(e){return Object.keys(e).sort().map(t=>e[t])}var no=class e extends r7{vectorStoreRetriever;exampleKeys;inputKeys;constructor(e){if(super(e),this.exampleKeys=e.exampleKeys,this.inputKeys=e.inputKeys,void 0!==e.vectorStore)this.vectorStoreRetriever=e.vectorStore.asRetriever({k:e.k??4,filter:e.filter});else if(e.vectorStoreRetriever)this.vectorStoreRetriever=e.vectorStoreRetriever;else throw Error('You must specify one of "vectorStore" and "vectorStoreRetriever".')}async addExample(e){let t=ns((this.inputKeys??Object.keys(e)).reduce((t,r)=>({...t,[r]:e[r]}),{})).join(" ");await this.vectorStoreRetriever.addDocuments([new r9({pageContent:t,metadata:e})])}async selectExamples(e){let t=ns((this.inputKeys??Object.keys(e)).reduce((t,r)=>({...t,[r]:e[r]}),{})).join(" "),r=(await this.vectorStoreRetriever.invoke(t)).map(e=>e.metadata);return this.exampleKeys?r.map(e=>this.exampleKeys.reduce((t,r)=>({...t,[r]:e[r]}),{})):r}static async fromExamples(t,r,n,i={}){let a=i.inputKeys??null,s=t.map(e=>ns(a?a.reduce((t,r)=>({...t,[r]:e[r]}),{}):e).join(" "));return new e({vectorStore:await n.fromTexts(s,t,r,i),k:i.k??4,exampleKeys:i.exampleKeys,inputKeys:i.inputKeys})}},nl={};(0,rd.V)(nl,{BaseExampleSelector:()=>r7,BasePromptSelector:()=>ne,ConditionalPromptSelector:()=>nt,LengthBasedExampleSelector:()=>na,SemanticSimilarityExampleSelector:()=>no,isChatModel:()=>nn,isLLM:()=>nr});let nu="10f90ea3-90a4-4962-bf75-83a0f3c1c62a";var nc=class extends rl.yL{lc_namespace=["langchain","recordmanagers"]},nd=r(5168),np=class{uid;hash_;contentHash;metadataHash;pageContent;metadata;keyEncoder=nd.s;constructor(e){this.uid=e.uid,this.pageContent=e.pageContent,this.metadata=e.metadata}makeDefaultKeyEncoder(e){this.keyEncoder=e}calculateHashes(){let e=["hash_","content_hash","metadata_hash"];for(let t of e)if(t in this.metadata)throw Error(`Metadata cannot contain key ${t} as it is reserved for internal use. Restricted keys: [${e.join(", ")}]`);let t=this._hashStringToUUID(this.pageContent);try{let e=this._hashNestedDictToUUID(this.metadata);this.contentHash=t,this.metadataHash=e}catch(e){throw Error(`Failed to hash metadata: ${e}. Please use a dict that can be serialized using json.`)}this.hash_=this._hashStringToUUID(this.contentHash+this.metadataHash),this.uid||(this.uid=this.hash_)}toDocument(){return new r9({pageContent:this.pageContent,metadata:this.metadata})}static fromDocument(e,t){let r=new this({pageContent:e.pageContent,metadata:e.metadata,uid:t||e.uid});return r.calculateHashes(),r}_hashStringToUUID(e){let t=this.keyEncoder(e);return(0,t0.A)(t,nu)}_hashNestedDictToUUID(e){let t=JSON.stringify(e,Object.keys(e).sort()),r=this.keyEncoder(t);return(0,t0.A)(r,nu)}};function nh(e,t){let r=[],n=[];return t.forEach(t=>{n.push(t),n.length>=e&&(r.push(n),n=[])}),n.length>0&&r.push(n),r}function nf(e){let t=new Set,r=[];for(let n of e){if(!n.hash_)throw Error("Hashed document does not have a hash");t.has(n.hash_)||(t.add(n.hash_),r.push(n))}return r}function nm(e){if(null===e)return e=>null;if("string"==typeof e)return t=>t.metadata[e];if("function"==typeof e)return e;throw Error(`sourceIdKey should be null, a string or a function, got ${typeof e}`)}let ng=e=>"load"in e&&"function"==typeof e.load&&"loadAndSplit"in e&&"function"==typeof e.loadAndSplit;async function ny(e){let{docsSource:t,recordManager:r,vectorStore:n,options:i}=e,{batchSize:a=100,cleanup:s,sourceIdKey:o,cleanupBatchSize:l=1e3,forceUpdate:u=!1}=i??{};if("incremental"===s&&!o)throw Error("sourceIdKey is required when cleanup mode is incremental. Please provide through 'options.sourceIdKey'.");let c=ng(t)?await t.load():t,d=nm(o??null),p=await r.getTime(),h=0,f=0,m=0,g=0;for(let e of nh(a??100,c)){let t=nf(e.map(e=>np.fromDocument(e))),i=t.map(e=>d(e));"incremental"===s&&t.forEach((e,t)=>{if(null===i[t])throw Error("sourceIdKey must be provided when cleanup is incremental")});let a=await r.exists(t.map(e=>e.uid)),o=[],l=[],c=[],y=new Set;if(t.forEach((e,t)=>{if(a[t])if(!u)return void c.push(e.uid);else y.add(e.uid);o.push(e.uid),l.push(e.toDocument())}),c.length>0&&(await r.update(c,{timeAtLeast:p}),g+=c.length),l.length>0&&(await n.addDocuments(l,{ids:o}),h+=l.length-y.size,m+=y.size),await r.update(t.map(e=>e.uid),{timeAtLeast:p,groupIds:i}),"incremental"===s){i.forEach(e=>{if(!e)throw Error("Source id cannot be null")});let e=await r.listKeys({before:p,groupIds:i});e.length>0&&(await n.delete({ids:e}),await r.deleteKeys(e),f+=e.length)}}if("full"===s){let e=await r.listKeys({before:p,limit:l});for(;e.length>0;)await n.delete({ids:e}),await r.deleteKeys(e),f+=e.length,e=await r.listKeys({before:p,limit:l})}return{numAdded:h,numDeleted:f,numUpdated:m,numSkipped:g}}var nv={};(0,rd.V)(nv,{RecordManager:()=>nc,UUIDV5_NAMESPACE:()=>nu,_HashedDocument:()=>np,_batch:()=>nh,_deduplicateInOrder:()=>nf,_getSourceIdAssigner:()=>nm,_isBaseDocumentLoader:()=>ng,index:()=>ny});var n_=r(49573),nb=r(61115),nw=r(50766),nk={},nx={};(0,rd.V)(nx,{BaseDocumentCompressor:()=>n$});var n$=class{static isBaseDocumentCompressor(e){return e?.compressDocuments!==void 0}},nS=class extends rV.YN{lc_serializable=!0;lc_namespace=["langchain_core","prompts",this._getPromptType()];get lc_attributes(){return{partialVariables:void 0}}inputVariables;outputParser;partialVariables;metadata;tags;constructor(e){super(e);let{inputVariables:t}=e;if(t.includes("stop"))throw Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){let t=this.partialVariables??{},r={};for(let[e,n]of Object.entries(t))"string"==typeof n?r[e]=n:r[e]=await n();return{...r,...e}}async invoke(e,t){let r={...this.metadata,...t?.metadata},n=[...this.tags??[],...t?.tags??[]];return this._callWithConfig(e=>this.formatPromptValue(e),e,{...t,tags:n,metadata:r,runType:"prompt"})}},nI=class extends nS{async formatPromptValue(e){let t=await this.format(e);return new rZ.HY(t)}},nE=r(42452),nA=Object.prototype.toString,nO=Array.isArray||function(e){return"[object Array]"===nA.call(e)};function nT(e){return"function"==typeof e}function nN(e){return nO(e)?"array":typeof e}function nC(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function nP(e,t){return null!=e&&"object"==typeof e&&t in e}function nj(e,t){return null!=e&&"object"!=typeof e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var nz=RegExp.prototype.test;function nR(e,t){return nz.call(e,t)}var nM=/\S/;function nL(e){return!nR(nM,e)}var nZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function nD(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return nZ[e]})}var nU=/\s*/,nF=/\s+/,nB=/\s*=/,nV=/\s*\}/,nJ=/#|\^|\/|>|\{|&|=|!/;function nW(e,t){if(!e)return[];var r,n,i,a,s,o,l,u,c,d=!1,p=[],h=[],f=[],m=!1,g=!1,y="",v=0;function _(){if(m&&!g)for(;f.length;)delete h[f.pop()];else f=[];m=!1,g=!1}function b(e){if("string"==typeof e&&(e=e.split(nF,2)),!nO(e)||2!==e.length)throw Error("Invalid tags: "+e);r=RegExp(nC(e[0])+"\\s*"),n=RegExp("\\s*"+nC(e[1])),i=RegExp("\\s*"+nC("}"+e[1]))}b(t||nX.tags);for(var w=new nG(e);!w.eos();){if(a=w.pos,o=w.scanUntil(r))for(var k=0,x=o.length;k<x;++k)nL(l=o.charAt(k))?(f.push(h.length),y+=l):(g=!0,d=!0,y+=" "),h.push(["text",l,a,a+1]),a+=1,"\n"===l&&(_(),y="",v=0,d=!1);if(!w.scan(r))break;if(m=!0,s=w.scan(nJ)||"name",w.scan(nU),"="===s?(o=w.scanUntil(nB),w.scan(nB),w.scanUntil(n)):"{"===s?(o=w.scanUntil(i),w.scan(nV),w.scanUntil(n),s="&"):o=w.scanUntil(n),!w.scan(n))throw Error("Unclosed tag at "+w.pos);if(u=">"==s?[s,o,a,w.pos,y,v,d]:[s,o,a,w.pos],v++,h.push(u),"#"===s||"^"===s)p.push(u);else if("/"===s){if(!(c=p.pop()))throw Error('Unopened section "'+o+'" at '+a);if(c[1]!==o)throw Error('Unclosed section "'+c[1]+'" at '+a)}else"name"===s||"{"===s||"&"===s?g=!0:"="===s&&b(o)}if(_(),c=p.pop())throw Error('Unclosed section "'+c[1]+'" at '+w.pos);return nK(nq(h))}function nq(e){for(var t,r,n=[],i=0,a=e.length;i<a;++i)(t=e[i])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}function nK(e){for(var t,r=[],n=r,i=[],a=0,s=e.length;a<s;++a)switch((t=e[a])[0]){case"#":case"^":n.push(t),i.push(t),n=t[4]=[];break;case"/":i.pop()[5]=t[2],n=i.length>0?i[i.length-1][4]:r;break;default:n.push(t)}return r}function nG(e){this.string=e,this.tail=e,this.pos=0}function nH(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function nY(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}nG.prototype.eos=function(){return""===this.tail},nG.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},nG.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case -1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},nH.prototype.push=function(e){return new nH(e,this)},nH.prototype.lookup=function(e){var t=this.cache;if(t.hasOwnProperty(e))r=t[e];else{for(var r,n,i,a,s=this,o=!1;s;){if(e.indexOf(".")>0)for(n=s.view,i=e.split("."),a=0;null!=n&&a<i.length;)a===i.length-1&&(o=nP(n,i[a])||nj(n,i[a])),n=n[i[a++]];else n=s.view[e],o=nP(s.view,e);if(o){r=n;break}s=s.parent}t[e]=r}return nT(r)&&(r=r.call(this.view)),r},nY.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},nY.prototype.parse=function(e,t){var r=this.templateCache,n=e+":"+(t||nX.tags).join(":"),i=void 0!==r,a=i?r.get(n):void 0;return void 0==a&&(a=nW(e,t),i&&r.set(n,a)),a},nY.prototype.render=function(e,t,r,n){var i=this.getConfigTags(n),a=this.parse(e,i),s=t instanceof nH?t:new nH(t,void 0);return this.renderTokens(a,s,r,e,n)},nY.prototype.renderTokens=function(e,t,r,n,i){for(var a,s,o,l="",u=0,c=e.length;u<c;++u)o=void 0,"#"===(s=(a=e[u])[0])?o=this.renderSection(a,t,r,n,i):"^"===s?o=this.renderInverted(a,t,r,n,i):">"===s?o=this.renderPartial(a,t,r,i):"&"===s?o=this.unescapedValue(a,t):"name"===s?o=this.escapedValue(a,t,i):"text"===s&&(o=this.rawValue(a)),void 0!==o&&(l+=o);return l},nY.prototype.renderSection=function(e,t,r,n,i){var a=this,s="",o=t.lookup(e[1]);function l(e){return a.render(e,t,r,i)}if(o){if(nO(o))for(var u=0,c=o.length;u<c;++u)s+=this.renderTokens(e[4],t.push(o[u]),r,n,i);else if("object"==typeof o||"string"==typeof o||"number"==typeof o)s+=this.renderTokens(e[4],t.push(o),r,n,i);else if(nT(o)){if("string"!=typeof n)throw Error("Cannot use higher-order sections without the original template");null!=(o=o.call(t.view,n.slice(e[3],e[5]),l))&&(s+=o)}else s+=this.renderTokens(e[4],t,r,n,i);return s}},nY.prototype.renderInverted=function(e,t,r,n,i){var a=t.lookup(e[1]);if(!a||nO(a)&&0===a.length)return this.renderTokens(e[4],t,r,n,i)},nY.prototype.indentPartial=function(e,t,r){for(var n=t.replace(/[^ \t]/g,""),i=e.split("\n"),a=0;a<i.length;a++)i[a].length&&(a>0||!r)&&(i[a]=n+i[a]);return i.join("\n")},nY.prototype.renderPartial=function(e,t,r,n){if(r){var i=this.getConfigTags(n),a=nT(r)?r(e[1]):r[e[1]];if(null!=a){var s=e[6],o=e[5],l=e[4],u=a;0==o&&l&&(u=this.indentPartial(a,l,s));var c=this.parse(u,i);return this.renderTokens(c,t,r,u,n)}}},nY.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},nY.prototype.escapedValue=function(e,t,r){var n=this.getConfigEscape(r)||nX.escape,i=t.lookup(e[1]);if(null!=i)return"number"==typeof i&&n===nX.escape?String(i):n(i)},nY.prototype.rawValue=function(e){return e[1]},nY.prototype.getConfigTags=function(e){return nO(e)?e:e&&"object"==typeof e?e.tags:void 0},nY.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!nO(e)?e.escape:void 0};var nX={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(cache){nQ.templateCache=cache},get templateCache(){return nQ.templateCache}},nQ=new nY;nX.clearCache=function(){return nQ.clearCache()},nX.parse=function(e,t){return nQ.parse(e,t)},nX.render=function(e,t,r,n){if("string"!=typeof e)throw TypeError('Invalid template! Template should be a "string" but "'+nN(e)+'" was given as the first argument for mustache#render(template, view, partials)');return nQ.render(e,t,r,n)},nX.escape=nD,nX.Scanner=nG,nX.Context=nH,nX.Writer=nY;let n0=nX;function n1(){n0.escape=e=>e}let n2=e=>{let t=e.split(""),r=[],n=(e,r)=>{for(let n=r;n<t.length;n+=1)if(e.includes(t[n]))return n;return -1},i=0;for(;i<t.length;)if("{"===t[i]&&i+1<t.length&&"{"===t[i+1])r.push({type:"literal",text:"{"}),i+=2;else if("}"===t[i]&&i+1<t.length&&"}"===t[i+1])r.push({type:"literal",text:"}"}),i+=2;else if("{"===t[i]){let e=n("}",i);if(e<0)throw Error("Unclosed '{' in template.");r.push({type:"variable",name:t.slice(i+1,e).join("")}),i=e+1}else if("}"===t[i])throw Error("Single '}' in template.");else{let e=n("{}",i),a=(e<0?t.slice(i):t.slice(i,e)).join("");r.push({type:"literal",text:a}),i=e<0?t.length:e}return r},n4=(e,t=[])=>{let r=[];for(let n of e)if("name"===n[0]){let e=n[1].includes(".")?n[1].split(".")[0]:n[1];r.push({type:"variable",name:e})}else if(["#","&","^",">"].includes(n[0])){if(r.push({type:"variable",name:n[1]}),"#"===n[0]&&n.length>4&&Array.isArray(n[4])){let e=[...t,n[1]],i=n4(n[4],e);r.push(...i)}}else r.push({type:"literal",text:n[1]});return r},n6=e=>(n1(),n4(n0.parse(e))),n9=(e,t)=>n2(e).reduce((e,r)=>{if("variable"===r.type){if(r.name in t)return e+("string"==typeof t[r.name]?t[r.name]:JSON.stringify(t[r.name]));throw Error(`(f-string) Missing value for input ${r.name}`)}return e+r.text},""),n3=(e,t)=>(n1(),n0.render(e,t)),n5={"f-string":n9,mustache:n3},n8={"f-string":n2,mustache:n6},n7=(e,t,r)=>{try{return n5[t](e,r)}catch(e){throw(0,nE.Y)(e,"INVALID_PROMPT_INPUT")}},ie=(e,t)=>n8[t](e),it=(e,t,r)=>{if(!(t in n5)){let e=Object.keys(n5);throw Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${e}`)}try{let n=r.reduce((e,t)=>(e[t]="foo",e),{});Array.isArray(e)?e.forEach(e=>{if("text"===e.type&&"text"in e&&"string"==typeof e.text)n7(e.text,t,n);else if("image_url"===e.type){if("string"==typeof e.image_url)n7(e.image_url,t,n);else if("object"==typeof e.image_url&&null!==e.image_url&&"url"in e.image_url&&"string"==typeof e.image_url.url){let r=e.image_url.url;n7(r,t,n)}}else throw Error(`Invalid message template received. ${JSON.stringify(e,null,2)}`)}):n7(e,t,n)}catch(e){throw Error(`Invalid prompt schema: ${e.message}`)}};var ir=class e extends nI{static lc_name(){return"PromptTemplate"}template;templateFormat="f-string";validateTemplate=!0;additionalContentFields;constructor(e){if(super(e),"mustache"===e.templateFormat&&void 0===e.validateTemplate&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if("mustache"===this.templateFormat)throw Error("Mustache templates cannot be validated.");let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),it(this.template,this.templateFormat,e)}}_getPromptType(){return"prompt"}async format(e){let t=await this.mergePartialAndUserVariables(e);return n7(this.template,this.templateFormat,t)}static fromExamples(t,r,n,i="\n\n",a=""){return new e({inputVariables:n,template:[a,...t,r].join(i)})}static fromTemplate(t,r){let{templateFormat:n="f-string",...i}=r??{},a=new Set;return ie(t,n).forEach(e=>{"variable"===e.type&&a.add(e.name)}),new e({inputVariables:[...a],templateFormat:n,template:t,...i})}async partial(t){let r=this.inputVariables.filter(e=>!(e in t)),n={...this.partialVariables??{},...t};return new e({...this,inputVariables:r,partialVariables:n})}serialize(){if(void 0!==this.outputParser)throw Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(t){if(!t.template)throw Error("Prompt template must have a template");return new e({inputVariables:t.input_variables,template:t.template,templateFormat:t.template_format})}},ii=class e extends nS{static lc_name(){return"ImagePromptTemplate"}lc_namespace=["langchain_core","prompts","image"];template;templateFormat="f-string";validateTemplate=!0;additionalContentFields;constructor(e){if(super(e),this.template=e.template,this.templateFormat=e.templateFormat??this.templateFormat,this.validateTemplate=e.validateTemplate??this.validateTemplate,this.additionalContentFields=e.additionalContentFields,this.validateTemplate){let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),it([{type:"image_url",image_url:this.template}],this.templateFormat,e)}}_getPromptType(){return"prompt"}async partial(t){let r=this.inputVariables.filter(e=>!(e in t)),n={...this.partialVariables??{},...t};return new e({...this,inputVariables:r,partialVariables:n})}async format(e){let t={};for(let[r,n]of Object.entries(this.template))"string"==typeof n?t[r]=n7(n,this.templateFormat,e):t[r]=n;let r=e.url||t.url,n=e.detail||t.detail;if(!r)throw Error("Must provide either an image URL.");if("string"!=typeof r)throw Error("url must be a string.");let i={url:r};return n&&(i.detail=n),i}async formatPromptValue(e){let t=await this.format(e);return new rZ.vX(t)}},ia=class extends rV.YN{lc_namespace=["langchain_core","prompts","dict"];lc_serializable=!0;template;templateFormat;inputVariables;static lc_name(){return"DictPromptTemplate"}constructor(e){let t=e.templateFormat??"f-string",r=is(e.template,t);super({inputVariables:r,...e}),this.template=e.template,this.templateFormat=t,this.inputVariables=r}async format(e){return io(this.template,e,this.templateFormat)}async invoke(e){return await this._callWithConfig(this.format.bind(this),e,{runType:"prompt"})}};function is(e,t){let r=[];for(let n of Object.values(e))if("string"==typeof n)ie(n,t).forEach(e=>{"variable"===e.type&&r.push(e.name)});else if(Array.isArray(n))for(let e of n)"string"==typeof e?ie(e,t).forEach(e=>{"variable"===e.type&&r.push(e.name)}):"object"==typeof e&&r.push(...is(e,t));else"object"==typeof n&&null!==n&&r.push(...is(n,t));return Array.from(new Set(r))}function io(e,t,r){let n={};for(let[i,a]of Object.entries(e))if("string"==typeof a)n[i]=n7(a,r,t);else if(Array.isArray(a)){let e=[];for(let n of a)"string"==typeof n?e.push(n7(n,r,t)):"object"==typeof n&&e.push(io(n,t,r));n[i]=e}else"object"==typeof a&&null!==a?n[i]=io(a,t,r):n[i]=a;return n}var il=r(79271),iu=r(71151),ic=r(91356),id=r(90338),ip=class extends rV.YN{lc_namespace=["langchain_core","prompts","chat"];lc_serializable=!0;async invoke(e,t){return this._callWithConfig(e=>this.formatMessages(e),e,{...t,runType:"prompt"})}},ih=class extends ip{static lc_name(){return"MessagesPlaceholder"}variableName;optional;constructor(e){"string"==typeof e&&(e={variableName:e}),super(e),this.variableName=e.variableName,this.optional=e.optional??!1}get inputVariables(){return[this.variableName]}async formatMessages(e){let t,r=e[this.variableName];if(this.optional&&!r)return[];if(!r){let e=Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);throw e.name="InputFormatError",e}try{t=Array.isArray(r)?r.map(id.K0):[(0,id.K0)(r)]}catch(n){let e="string"==typeof r?r:JSON.stringify(r,null,2),t=Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.

Received value: ${e}

Additional message: ${n.message}`);throw t.name="InputFormatError",t.lc_error_code=n.lc_error_code,t}return t}},im=class extends ip{prompt;constructor(e){"prompt"in e||(e={prompt:e}),super(e),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}},ig=class extends nS{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){let t=await this.formatMessages(e);return new rZ.aB(t)}},iy=class extends im{static lc_name(){return"ChatMessagePromptTemplate"}role;constructor(e,t){"prompt"in e||(e={prompt:e,role:t}),super(e),this.role=e.role}async format(e){return new iu.cM(await this.prompt.format(e),this.role)}static fromTemplate(e,t,r){return new this(ir.fromTemplate(e,{templateFormat:r?.templateFormat}),t)}};function iv(e){return!(null===e||"object"!=typeof e||Array.isArray(e))&&1===Object.keys(e).length&&"text"in e&&"string"==typeof e.text}function i_(e){return!(null===e||"object"!=typeof e||Array.isArray(e))&&"image_url"in e&&("string"==typeof e.image_url||"object"==typeof e.image_url&&null!==e.image_url&&"url"in e.image_url&&"string"==typeof e.image_url.url)}var ib=class extends ip{lc_namespace=["langchain_core","prompts","chat"];lc_serializable=!0;inputVariables=[];additionalOptions={};prompt;messageClass;static _messageClass(){throw Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}chatMessageClass;constructor(e,t){if("prompt"in e||(e={prompt:e}),super(e),this.prompt=e.prompt,Array.isArray(this.prompt)){let e=[];this.prompt.forEach(t=>{"inputVariables"in t&&(e=e.concat(t.inputVariables))}),this.inputVariables=e}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=t??this.additionalOptions}createMessage(e){let t=this.constructor;if(t._messageClass())return new(t._messageClass())({content:e});if(t.chatMessageClass){let r=t.chatMessageClass();return new r({content:e,role:this.getRoleFromMessageClass(r.lc_name())})}throw Error("No message class defined")}getRoleFromMessageClass(e){switch(e){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw Error("Invalid message class name")}}static fromTemplate(e,t){if("string"==typeof e)return new this(ir.fromTemplate(e,t));let r=[];for(let n of e)if("string"==typeof n)r.push(ir.fromTemplate(n,t));else if(null===n);else if(iv(n)){let e="";"string"==typeof n.text&&(e=n.text??"");let i={...t,additionalContentFields:n};r.push(ir.fromTemplate(e,i))}else if(i_(n)){let e,i=n.image_url??"",a=[];if("string"==typeof i){let r,s=(r=t?.templateFormat==="mustache"?n6(i):n2(i)).flatMap(e=>"variable"===e.type?[e.name]:[]);if((s?.length??0)>0){if(s.length>1)throw Error(`Only one format variable allowed per image template.
Got: ${s}
From: ${i}`);a=[s[0]]}else a=[];e=new ii({template:i={url:i},inputVariables:a,templateFormat:t?.templateFormat,additionalContentFields:n})}else if("object"==typeof i){if("url"in i){let e;a=(e=t?.templateFormat==="mustache"?n6(i.url):n2(i.url)).flatMap(e=>"variable"===e.type?[e.name]:[])}else a=[];e=new ii({template:i,inputVariables:a,templateFormat:t?.templateFormat,additionalContentFields:n})}else throw Error("Invalid image template");r.push(e)}else"object"==typeof n&&r.push(new ia({template:n,templateFormat:t?.templateFormat}));return new this({prompt:r,additionalOptions:t})}async format(e){if(this.prompt instanceof nI){let t=await this.prompt.format(e);return this.createMessage(t)}{let t=[];for(let r of this.prompt){let n={};if(!("inputVariables"in r))throw Error(`Prompt ${r} does not have inputVariables defined.`);for(let t of r.inputVariables)n||(n={[t]:e[t]}),n={...n,[t]:e[t]};if(r instanceof nI){let e,i=await r.format(n);"additionalContentFields"in r&&(e=r.additionalContentFields),""!==i&&t.push({...e,type:"text",text:i})}else if(r instanceof ii){let e,i=await r.format(n);"additionalContentFields"in r&&(e=r.additionalContentFields),t.push({...e,type:"image_url",image_url:i})}else if(r instanceof ia){let e,i=await r.format(n);"additionalContentFields"in r&&(e=r.additionalContentFields),t.push({...e,...i})}}return this.createMessage(t)}}async formatMessages(e){return[await this.format(e)]}},iw=class extends ib{static _messageClass(){return rS.xc}static lc_name(){return"HumanMessagePromptTemplate"}},ik=class extends ib{static _messageClass(){return rI.Od}static lc_name(){return"AIMessagePromptTemplate"}},ix=class extends ib{static _messageClass(){return ic.tn}static lc_name(){return"SystemMessagePromptTemplate"}};function i$(e){return"function"==typeof e.formatMessages}function iS(e,t){let r;if(i$(e)||(0,il.ny)(e))return e;if(Array.isArray(e)&&"placeholder"===e[0]){let r=e[1];if(t?.templateFormat==="mustache"&&"string"==typeof r&&"{{"===r.slice(0,2)&&"}}"===r.slice(-2))return new ih({variableName:r.slice(2,-2),optional:!0});if("string"==typeof r&&"{"===r[0]&&"}"===r[r.length-1])return new ih({variableName:r.slice(1,-1),optional:!0});throw Error(`Invalid placeholder template for format ${t?.templateFormat??'"f-string"'}: "${e[1]}". Expected a variable name surrounded by ${t?.templateFormat==="mustache"?"double":"single"} curly braces.`)}let n=(0,id.K0)(e);if(r="string"==typeof n.content?n.content:n.content.map(e=>"text"in e?{...e,text:e.text}:"image_url"in e?{...e,image_url:e.image_url}:e),"human"===n._getType())return iw.fromTemplate(r,t);if("ai"===n._getType())return ik.fromTemplate(r,t);if("system"===n._getType())return ix.fromTemplate(r,t);if(iu.cM.isInstance(n))return iy.fromTemplate(n.content,n.role,t);throw Error(`Could not coerce message prompt template from input. Received message type: "${n._getType()}".`)}function iI(e){return"MessagesPlaceholder"===e.constructor.lc_name()}var iE=class e extends ig{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}promptMessages;validateTemplate=!0;templateFormat="f-string";constructor(e){if(super(e),"mustache"===e.templateFormat&&void 0===e.validateTemplate&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){let e=new Set;for(let t of this.promptMessages)if(!(t instanceof il.XQ))for(let r of t.inputVariables)e.add(r);let t=this.inputVariables,r=new Set(this.partialVariables?t.concat(Object.keys(this.partialVariables)):t),n=new Set([...r].filter(t=>!e.has(t)));if(n.size>0)throw Error(`Input variables \`${[...n]}\` are not used in any of the prompt messages.`);let i=new Set([...e].filter(e=>!r.has(e)));if(i.size>0)throw Error(`Input variables \`${[...i]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async _parseImagePrompts(e,t){if("string"==typeof e.content)return e;let r=await Promise.all(e.content.map(async e=>{if("image_url"!==e.type)return e;let r="";"string"==typeof e.image_url?r=e.image_url:"object"==typeof e.image_url&&null!==e.image_url&&"url"in e.image_url&&"string"==typeof e.image_url.url&&(r=e.image_url.url);let n=ir.fromTemplate(r,{templateFormat:this.templateFormat}),i=await n.format(t);return"object"==typeof e.image_url&&null!==e.image_url&&"url"in e.image_url?e.image_url.url=i:e.image_url=i,e}));return e.content=r,e}async formatMessages(e){let t=await this.mergePartialAndUserVariables(e),r=[];for(let e of this.promptMessages)if(e instanceof il.XQ)r.push(await this._parseImagePrompts(e,t));else{let n;n="mustache"===this.templateFormat?{...t}:e.inputVariables.reduce((r,n)=>{if(!(n in t)&&!(iI(e)&&e.optional))throw(0,nE.Y)(Error(`Missing value for input variable \`${n.toString()}\``),"INVALID_PROMPT_INPUT");return r[n]=t[n],r},{});let i=await e.formatMessages(n);r=r.concat(i)}return r}async partial(t){let r=this.inputVariables.filter(e=>!(e in t)),n={...this.partialVariables??{},...t};return new e({...this,inputVariables:r,partialVariables:n})}static fromTemplate(e,t){let r=new iw({prompt:ir.fromTemplate(e,t)});return this.fromMessages([r])}static fromMessages(t,r){let n=t.reduce((t,n)=>t.concat(n instanceof e?n.promptMessages:[iS(n,r)]),[]),i=t.reduce((t,r)=>r instanceof e?Object.assign(t,r.partialVariables):t,Object.create(null)),a=new Set;for(let e of n)if(!(e instanceof il.XQ))for(let t of e.inputVariables)t in i||a.add(t);return new this({...r,inputVariables:[...a],promptMessages:n,partialVariables:i,templateFormat:r?.templateFormat})}},iA=class e extends nI{lc_serializable=!1;examples;exampleSelector;examplePrompt;suffix="";exampleSeparator="\n\n";prefix="";templateFormat="f-string";validateTemplate=!0;constructor(e){if(super(e),Object.assign(this,e),void 0!==this.examples&&void 0!==this.exampleSelector)throw Error("Only one of 'examples' and 'example_selector' should be provided");if(void 0===this.examples&&void 0===this.exampleSelector)throw Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),it(this.prefix+this.suffix,this.templateFormat,e)}}_getPromptType(){return"few_shot"}static lc_name(){return"FewShotPromptTemplate"}async getExamples(e){if(void 0!==this.examples)return this.examples;if(void 0!==this.exampleSelector)return this.exampleSelector.selectExamples(e);throw Error("One of 'examples' and 'example_selector' should be provided")}async partial(t){let r=this.inputVariables.filter(e=>!(e in t)),n={...this.partialVariables??{},...t};return new e({...this,inputVariables:r,partialVariables:n})}async format(e){let t=await this.mergePartialAndUserVariables(e),r=await this.getExamples(t),n=await Promise.all(r.map(e=>this.examplePrompt.format(e)));return n7([this.prefix,...n,this.suffix].join(this.exampleSeparator),this.templateFormat,t)}serialize(){if(this.exampleSelector||!this.examples)throw Error("Serializing an example selector is not currently supported");if(void 0!==this.outputParser)throw Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(t){let r,{example_prompt:n}=t;if(!n)throw Error("Missing example prompt");let i=await ir.deserialize(n);if(Array.isArray(t.examples))r=t.examples;else throw Error("Invalid examples format. Only list or string are supported.");return new e({inputVariables:t.input_variables,examplePrompt:i,examples:r,exampleSeparator:t.example_separator,prefix:t.prefix,suffix:t.suffix,templateFormat:t.template_format})}},iO=class e extends ig{lc_serializable=!0;examples;exampleSelector;examplePrompt;suffix="";exampleSeparator="\n\n";prefix="";templateFormat="f-string";validateTemplate=!0;_getPromptType(){return"few_shot_chat"}static lc_name(){return"FewShotChatMessagePromptTemplate"}constructor(e){if(super(e),this.examples=e.examples,this.examplePrompt=e.examplePrompt,this.exampleSeparator=e.exampleSeparator??"\n\n",this.exampleSelector=e.exampleSelector,this.prefix=e.prefix??"",this.suffix=e.suffix??"",this.templateFormat=e.templateFormat??"f-string",this.validateTemplate=e.validateTemplate??!0,void 0!==this.examples&&void 0!==this.exampleSelector)throw Error("Only one of 'examples' and 'example_selector' should be provided");if(void 0===this.examples&&void 0===this.exampleSelector)throw Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),it(this.prefix+this.suffix,this.templateFormat,e)}}async getExamples(e){if(void 0!==this.examples)return this.examples;if(void 0!==this.exampleSelector)return this.exampleSelector.selectExamples(e);throw Error("One of 'examples' and 'example_selector' should be provided")}async formatMessages(e){let t=await this.mergePartialAndUserVariables(e),r=await this.getExamples(t);r=r.map(e=>{let t={};return this.examplePrompt.inputVariables.forEach(r=>{t[r]=e[r]}),t});let n=[];for(let e of r){let t=await this.examplePrompt.formatMessages(e);n.push(...t)}return n}async format(e){let t=await this.mergePartialAndUserVariables(e),r=await this.getExamples(t),n=(await Promise.all(r.map(e=>this.examplePrompt.formatMessages(e)))).flat().map(e=>e.content);return n7([this.prefix,...n,this.suffix].join(this.exampleSeparator),this.templateFormat,t)}async partial(t){let r=this.inputVariables.filter(e=>!(e in t)),n={...this.partialVariables??{},...t};return new e({...this,inputVariables:r,partialVariables:n})}},iT=class e extends nS{static lc_name(){return"PipelinePromptTemplate"}pipelinePrompts;finalPrompt;constructor(e){super({...e,inputVariables:[]}),this.pipelinePrompts=e.pipelinePrompts,this.finalPrompt=e.finalPrompt,this.inputVariables=this.computeInputValues()}computeInputValues(){let e=this.pipelinePrompts.map(e=>e.name);return[...new Set(this.pipelinePrompts.map(t=>t.prompt.inputVariables.filter(t=>!e.includes(t))).flat())]}static extractRequiredInputValues(e,t){return t.reduce((t,r)=>(t[r]=e[r],t),{})}async formatPipelinePrompts(t){let r=await this.mergePartialAndUserVariables(t);for(let{name:t,prompt:n}of this.pipelinePrompts){let i=e.extractRequiredInputValues(r,n.inputVariables);n instanceof iE?r[t]=await n.formatMessages(i):r[t]=await n.format(i)}return e.extractRequiredInputValues(r,this.finalPrompt.inputVariables)}async formatPromptValue(e){return this.finalPrompt.formatPromptValue(await this.formatPipelinePrompts(e))}async format(e){return this.finalPrompt.format(await this.formatPipelinePrompts(e))}async partial(t){let r={...this};return r.inputVariables=this.inputVariables.filter(e=>!(e in t)),r.partialVariables={...this.partialVariables??{},...t},new e(r)}serialize(){throw Error("Not implemented.")}_getPromptType(){return"pipeline"}};function iN(e){return"object"==typeof e&&null!=e&&"withStructuredOutput"in e&&"function"==typeof e.withStructuredOutput}function iC(e){return"object"==typeof e&&null!=e&&"lc_id"in e&&Array.isArray(e.lc_id)&&"langchain_core/runnables/RunnableBinding"===e.lc_id.join("/")}var iP=class e extends iE{schema;method;lc_namespace=["langchain_core","prompts","structured"];get lc_aliases(){return{...super.lc_aliases,schema:"schema_"}}constructor(e){super(e),this.schema=e.schema,this.method=e.method}pipe(e){if(iN(e))return super.pipe(e.withStructuredOutput(this.schema));if(iC(e)&&iN(e.bound))return super.pipe(new rV.fJ({bound:e.bound.withStructuredOutput(this.schema,...this.method?[{method:this.method}]:[]),kwargs:e.kwargs??{},config:e.config,configFactories:e.configFactories}));throw Error('Structured prompts need to be piped to a language model that supports the "withStructuredOutput()" method.')}static fromMessagesAndSchema(t,r,n){return e.fromMessages(t,{schema:r,method:n})}},ij={};(0,rd.V)(ij,{AIMessagePromptTemplate:()=>ik,BaseChatPromptTemplate:()=>ig,BaseMessagePromptTemplate:()=>ip,BaseMessageStringPromptTemplate:()=>im,BasePromptTemplate:()=>nS,BaseStringPromptTemplate:()=>nI,ChatMessagePromptTemplate:()=>iy,ChatPromptTemplate:()=>iE,DEFAULT_FORMATTER_MAPPING:()=>n5,DEFAULT_PARSER_MAPPING:()=>n8,DictPromptTemplate:()=>ia,FewShotChatMessagePromptTemplate:()=>iO,FewShotPromptTemplate:()=>iA,HumanMessagePromptTemplate:()=>iw,ImagePromptTemplate:()=>ii,MessagesPlaceholder:()=>ih,PipelinePromptTemplate:()=>iT,PromptTemplate:()=>ir,StructuredPrompt:()=>iP,SystemMessagePromptTemplate:()=>ix,checkValidTemplate:()=>it,interpolateFString:()=>n9,interpolateMustache:()=>n3,parseFString:()=>n2,parseMustache:()=>n6,parseTemplate:()=>ie,renderTemplate:()=>n7});var iz=r(913),iR=r(91846),iM={},iL={};(0,rd.V)(iL,{RunCollectorCallbackHandler:()=>iZ});var iZ=class extends rm.JS{name="run_collector";exampleId;tracedRuns;constructor({exampleId:e}={}){super({_awaitHandler:!0}),this.exampleId=e,this.tracedRuns=[]}async persistRun(e){let t={...e};t.reference_example_id=this.exampleId,this.tracedRuns.push(t)}},iD={};function iU(e,...t){let r=e.raw,n="";for(let e=0;e<r.length;e++)if(n+=r[e].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{"),e<t.length){let r=iF(t[e],n);n+="string"==typeof r?r:JSON.stringify(r)}return(n=(n=iB(n)).trim()).replace(/\\n/g,"\n")}function iF(e,t){if("string"!=typeof e||!e.includes("\n"))return e;let r=t.slice(t.lastIndexOf("\n")+1).match(/^(\s+)/);if(r){let t=r[1];return e.replace(/\n/g,`
${t}`)}return e}function iB(e){let t=e.split("\n"),r=null;for(let e of t){let t=e.match(/^(\s+)\S+/);if(t){let e=t[1].length;r=null===r?e:Math.min(r,e)}}return null===r?e:t.map(e=>" "===e[0]||"	"===e[0]?e.slice(r):e).join("\n")}(0,rd.V)(iD,{context:()=>iU});var iV=r(58036),iJ=r(44182),iW=r(14654),iq=r(59305);r(4929);var iK=class extends iW.vd{static lc_name(){return"OutputFunctionsParser"}lc_namespace=["langchain","output_parsers","openai_functions"];lc_serializable=!0;argsOnly=!0;constructor(e){super(),this.argsOnly=e?.argsOnly??this.argsOnly}async parseResult(e){if("message"in e[0]){let t=e[0].message.additional_kwargs.function_call;if(!t)throw Error(`No function_call in message ${JSON.stringify(e)}`);if(!t.arguments)throw Error(`No arguments in function_call ${JSON.stringify(e)}`);return this.argsOnly?t.arguments:JSON.stringify(t)}throw Error(`No message in generations ${JSON.stringify(e)}`)}},iG=class extends iq.T{static lc_name(){return"JsonOutputFunctionsParser"}lc_namespace=["langchain","output_parsers","openai_functions"];lc_serializable=!0;outputParser;argsOnly=!0;constructor(e){super(e),this.argsOnly=e?.argsOnly??this.argsOnly,this.outputParser=new iK(e)}_diff(e,t){if(t)return(0,iJ.U)(e??{},t)}async parsePartialResult(e){let t=e[0];if(!t.message)return;let{message:r}=t,n=r.additional_kwargs.function_call;if(n)return this.argsOnly?(0,iV.d)(n.arguments):{...n,arguments:(0,iV.d)(n.arguments)}}async parseResult(e){let t=await this.outputParser.parseResult(e);if(!t)throw Error(`No result from "OutputFunctionsParser" ${JSON.stringify(e)}`);return this.parse(t)}async parse(e){let t=JSON.parse(e);return this.argsOnly||(t.arguments=JSON.parse(t.arguments)),t}getFormatInstructions(){return""}},iH=class extends iW.vd{static lc_name(){return"JsonKeyOutputFunctionsParser"}lc_namespace=["langchain","output_parsers","openai_functions"];lc_serializable=!0;outputParser=new iG;attrName;get lc_aliases(){return{attrName:"key_name"}}constructor(e){super(e),this.attrName=e.attrName}async parseResult(e){return(await this.outputParser.parseResult(e))[this.attrName]}},iY={};(0,rd.V)(iY,{JsonKeyOutputFunctionsParser:()=>iH,JsonOutputFunctionsParser:()=>iG,OutputFunctionsParser:()=>iK});var iX=r(55853),iQ=r(59621);let i0={and:"and",or:"or",not:"not"},i1={eq:"eq",ne:"ne",lt:"lt",gt:"gt",lte:"lte",gte:"gte"};var i2=class{},i4=class{accept(e){if("Operation"===this.exprName)return e.visitOperation(this);if("Comparison"===this.exprName)return e.visitComparison(this);if("StructuredQuery"===this.exprName)return e.visitStructuredQuery(this);throw Error("Unknown Expression type")}},i6=class extends i4{},i9=class extends i6{exprName="Comparison";constructor(e,t,r){super(),this.comparator=e,this.attribute=t,this.value=r}},i3=class extends i6{exprName="Operation";constructor(e,t){super(),this.operator=e,this.args=t}},i5=class extends i4{exprName="StructuredQuery";constructor(e,t){super(),this.query=e,this.filter=t}};function i8(e){return e&&"object"==typeof e&&!Array.isArray(e)}function i7(e){return!e||("string"!=typeof e||!(e.length>0))&&"function"!=typeof e&&i8(e)&&0===Object.keys(e).length}function ae(e){if("number"==typeof e)return e%1==0;if("string"==typeof e){let t=parseInt(e,10);return!Number.isNaN(t)&&t%1==0&&t.toString()===e}return!1}function at(e){if("number"==typeof e)return e%1!=0;if("string"==typeof e){let t=parseFloat(e);return!Number.isNaN(t)&&t%1!=0&&t.toString()===e}return!1}function ar(e){return"string"==typeof e&&(Number.isNaN(parseFloat(e))||parseFloat(e).toString()!==e)}function an(e){return"boolean"==typeof e}function ai(e){let t;if(ar(e))t=e;else if(ae(e))t=parseInt(e,10);else if(at(e))t=parseFloat(e);else if(an(e))t=!!e;else throw Error("Unsupported value type");return t}var aa=class extends i2{},as=class extends aa{allowedOperators;allowedComparators;constructor(e){super(),this.allowedOperators=e?.allowedOperators??[i0.and,i0.or],this.allowedComparators=e?.allowedComparators??[i1.eq,i1.ne,i1.gt,i1.gte,i1.lt,i1.lte]}formatFunction(e){if(e in i1){if(this.allowedComparators.length>0&&-1===this.allowedComparators.indexOf(e))throw Error(`Comparator ${e} not allowed. Allowed comparators: ${this.allowedComparators.join(", ")}`)}else if(e in i0){if(this.allowedOperators.length>0&&-1===this.allowedOperators.indexOf(e))throw Error(`Operator ${e} not allowed. Allowed operators: ${this.allowedOperators.join(", ")}`)}else throw Error("Unknown comparator or operator");return`$${e}`}visitOperation(e){let t=e.args?.map(e=>e.accept(this));return{[this.formatFunction(e.operator)]:t}}visitComparison(e){return{[e.attribute]:{[this.formatFunction(e.comparator)]:ai(e.value)}}}visitStructuredQuery(e){let t={};return e.filter&&(t={filter:e.filter.accept(this)}),t}mergeFilters(e,t,r="and",n=!1){if(!(i7(e)&&i7(t))){if(i7(e)||"replace"===r){if(i7(t))return;return t}if(i7(t)){if(n)return e;if("and"===r)return;return e}if("and"===r)return{$and:[e,t]};if("or"===r)return{$or:[e,t]};throw Error("Unknown merge type")}}},ao=class extends aa{allowedOperators=[i0.and,i0.or];allowedComparators=[i1.eq,i1.ne,i1.gt,i1.gte,i1.lt,i1.lte];formatFunction(){throw Error("Not implemented")}getAllowedComparatorsForType(e){switch(e){case"string":case"number":return[i1.eq,i1.ne,i1.gt,i1.gte,i1.lt,i1.lte];case"boolean":return[i1.eq,i1.ne];default:throw Error(`Unsupported data type: ${e}`)}}getComparatorFunction(e){switch(e){case i1.eq:return(e,t)=>e===t;case i1.ne:return(e,t)=>e!==t;case i1.gt:return(e,t)=>e>t;case i1.gte:return(e,t)=>e>=t;case i1.lt:return(e,t)=>e<t;case i1.lte:return(e,t)=>e<=t;default:throw Error("Unknown comparator")}}getOperatorFunction(e){switch(e){case i0.and:return(e,t)=>e&&t;case i0.or:return(e,t)=>e||t;default:throw Error("Unknown operator")}}visitOperation(e){let{operator:t,args:r}=e;if(this.allowedOperators.includes(t)){let e=this.getOperatorFunction(t);return t=>!r||r.reduce((r,n)=>{let i=n.accept(this);if("function"==typeof i)return e(r,i(t));throw Error("Filter is not a function")},!0)}throw Error("Operator not allowed")}visitComparison(e){let{comparator:t,attribute:r,value:n}=e,i=[i1.ne];if(this.allowedComparators.includes(t)){if(!this.getAllowedComparatorsForType(typeof n).includes(t))throw Error(`'${t}' comparator not allowed to be used with ${typeof n}`);let e=this.getComparatorFunction(t);return a=>{let s=a.metadata[r];return void 0===s?!!i.includes(t):e(s,ai(n))}}throw Error("Comparator not allowed")}visitStructuredQuery(e){if(!e.filter)return{};let t=e.filter?.accept(this);if("function"!=typeof t)throw Error("Structured query filter is not a function");return{filter:t}}mergeFilters(e,t,r="and"){if(!(i7(e)&&i7(t))){if(i7(e)||"replace"===r){if(i7(t))return;return t}if(i7(t)){if("and"===r)return;return e}if("and"===r)return r=>e(r)&&t(r);if("or"===r)return r=>e(r)||t(r);throw Error("Unknown merge type")}}},al={};(0,rd.V)(al,{BaseTranslator:()=>aa,BasicTranslator:()=>as,Comparators:()=>i1,Comparison:()=>i9,Expression:()=>i4,FilterDirective:()=>i6,FunctionalTranslator:()=>ao,Operation:()=>i3,Operators:()=>i0,StructuredQuery:()=>i5,Visitor:()=>i2,castValue:()=>ai,isBoolean:()=>an,isFilterEmpty:()=>i7,isFloat:()=>at,isInt:()=>ae,isObject:()=>i8,isString:()=>ar});var au=class extends w.xV{_combineLLMOutput(){return[]}_llmType(){return"fake"}async _generate(e,t,r){if(t?.stop?.length)return{generations:[{message:new rI.Od(t.stop[0]),text:t.stop[0]}]};let n=e.map(e=>"string"==typeof e.content?e.content:JSON.stringify(e.content,null,2)).join("\n");return await r?.handleLLMNewToken(n),{generations:[{message:new rI.Od(n),text:n}],llmOutput:{}}}},ac=class e extends w.xV{sleep=50;responses=[];chunks=[];toolStyle="openai";thrownErrorString;tools=[];constructor({sleep:e=50,responses:t=[],chunks:r=[],toolStyle:n="openai",thrownErrorString:i,...a}){super(a),this.sleep=e,this.responses=t,this.chunks=r,this.toolStyle=n,this.thrownErrorString=i}_llmType(){return"fake"}bindTools(t){let r=[...this.tools,...t],n=r.map(e=>{switch(this.toolStyle){case"openai":return{type:"function",function:{name:e.name,description:e.description,parameters:(0,L.PF)(e.schema)}};case"anthropic":return{name:e.name,description:e.description,input_schema:(0,L.PF)(e.schema)};case"bedrock":return{toolSpec:{name:e.name,description:e.description,inputSchema:(0,L.PF)(e.schema)}};case"google":return{name:e.name,description:e.description,parameters:(0,L.PF)(e.schema)};default:throw Error(`Unsupported tool style: ${this.toolStyle}`)}}),i="google"===this.toolStyle?[{functionDeclarations:n}]:n,a=new e({sleep:this.sleep,responses:this.responses,chunks:this.chunks,toolStyle:this.toolStyle,thrownErrorString:this.thrownErrorString});return a.tools=r,a.withConfig({tools:i})}async _generate(e,t,r){if(this.thrownErrorString)throw Error(this.thrownErrorString);let n=this.responses?.[0]?.content??e[0].content??"";return{generations:[{text:"",message:new rI.Od({content:n,tool_calls:this.chunks?.[0]?.tool_calls})}]}}async *_streamResponseChunks(e,t,r){if(this.thrownErrorString)throw Error(this.thrownErrorString);if(this.chunks?.length){for(let e of this.chunks){let n=new rk.Cf({message:new rI.H({content:e.content,tool_calls:e.tool_calls,additional_kwargs:e.additional_kwargs??{}}),text:e.content?.toString()??""});if(t.signal?.aborted)break;yield n,await r?.handleLLMNewToken(e.content,void 0,void 0,void 0,void 0,{chunk:n})}return}let n=this.responses?.[0]??new rI.Od("string"==typeof e[0].content?e[0].content:"");for(let e of"string"==typeof n.content?n.content:""){await new Promise(e=>setTimeout(e,this.sleep));let n=new rk.Cf({message:new rI.H({content:e}),text:e});if(t.signal?.aborted)break;yield n,await r?.handleLLMNewToken(e,void 0,void 0,void 0,void 0,{chunk:n})}}},ad=class e extends w.xV{static lc_name(){return"FakeListChatModel"}lc_serializable=!0;responses;i=0;sleep;emitCustomEvent=!1;generationInfo;tools=[];toolStyle="openai";constructor(e){super(e);let{responses:t,sleep:r,emitCustomEvent:n,generationInfo:i}=e;this.responses=t,this.sleep=r,this.emitCustomEvent=n??this.emitCustomEvent,this.generationInfo=i}_combineLLMOutput(){return[]}_llmType(){return"fake-list"}async _generate(e,t,r){if(await this._sleepIfRequested(),t?.thrownErrorString)throw Error(t.thrownErrorString);if(this.emitCustomEvent&&await r?.handleCustomEvent("some_test_event",{someval:!0}),t?.stop?.length)return{generations:[this._formatGeneration(t.stop[0])]};{let e=this._currentResponse();return this._incrementResponse(),{generations:[this._formatGeneration(e)],llmOutput:{}}}}_formatGeneration(e){return{message:new rI.Od(e),text:e}}async *_streamResponseChunks(e,t,r){let n=this._currentResponse();this._incrementResponse(),this.emitCustomEvent&&await r?.handleCustomEvent("some_test_event",{someval:!0});let i=[...n];for(let e=0;e<i.length;e++){let n=i[e],a=e===i.length-1;if(await this._sleepIfRequested(),t?.thrownErrorString)throw Error(t.thrownErrorString);let s=this._createResponseChunk(n,a?this.generationInfo:void 0);if(t.signal?.aborted)break;yield s,r?.handleLLMNewToken(n)}}async _sleepIfRequested(){void 0!==this.sleep&&await this._sleep()}async _sleep(){return new Promise(e=>{setTimeout(()=>e(),this.sleep)})}_createResponseChunk(e,t){return new rk.Cf({message:new rI.H({content:e}),text:e,generationInfo:t})}_currentResponse(){return this.responses[this.i]}_incrementResponse(){this.i<this.responses.length-1?this.i+=1:this.i=0}bindTools(t){let r=[...this.tools,...t],n=r.map(e=>{switch(this.toolStyle){case"openai":return{type:"function",function:{name:e.name,description:e.description,parameters:(0,L.PF)(e.schema)}};case"anthropic":return{name:e.name,description:e.description,input_schema:(0,L.PF)(e.schema)};case"bedrock":return{toolSpec:{name:e.name,description:e.description,inputSchema:(0,L.PF)(e.schema)}};case"google":return{name:e.name,description:e.description,parameters:(0,L.PF)(e.schema)};default:throw Error(`Unsupported tool style: ${this.toolStyle}`)}}),i="google"===this.toolStyle?[{functionDeclarations:n}]:n,a=new e({responses:this.responses,sleep:this.sleep,emitCustomEvent:this.emitCustomEvent,generationInfo:this.generationInfo});return a.tools=r,a.toolStyle=this.toolStyle,a.i=this.i,a.withConfig({tools:i})}withStructuredOutput(e,t){return rV.jY.from(async e=>{let t=await this.invoke(e);if(t.tool_calls?.[0]?.args)return t.tool_calls[0].args;if("string"==typeof t.content)return JSON.parse(t.content);throw Error("No structured output found")})}},ap=class extends rN.J{vectorSize;constructor(e){super(e??{}),this.vectorSize=e?.vectorSize??4}async embedDocuments(e){return Promise.all(e.map(e=>this.embedQuery(e)))}async embedQuery(e){let t=e,r=(t=t.toLowerCase().replaceAll(/[^a-z ]/g,"")).length%this.vectorSize,n=0===r?0:this.vectorSize-r,i=t.length+n,a=(t=t.padEnd(i," ")).length/this.vectorSize,s=[];for(let e=0;e<t.length;e+=a)s.push(t.slice(e,e+a));return s.map(e=>{let t=0;for(let r=0;r<e.length;r+=1)t+=" "===e?0:e.charCodeAt(r);return t%26/26})}},ah=class extends rN.J{constructor(e){super(e??{})}embedDocuments(e){return Promise.resolve(e.map(()=>[.1,.2,.3,.4]))}embedQuery(e){return Promise.resolve([.1,.2,.3,.4])}},af=class extends nw.IH{response;thrownErrorString;constructor(e){super(e),this.response=e.response,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}async _call(e,t,r){if(this.thrownErrorString)throw Error(this.thrownErrorString);let n=this.response??e;return await r?.handleLLMNewToken(n),n}},am=class extends nw.IH{sleep=50;responses;thrownErrorString;constructor(e){super(e),this.sleep=e.sleep??this.sleep,this.responses=e.responses,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}async _call(e){if(this.thrownErrorString)throw Error(this.thrownErrorString);let t=this.responses?.[0];return this.responses=this.responses?.slice(1),t??e}async *_streamResponseChunks(e,t,r){if(this.thrownErrorString)throw Error(this.thrownErrorString);let n=this.responses?.[0];for(let t of(this.responses=this.responses?.slice(1),n??e))await new Promise(e=>setTimeout(e,this.sleep)),yield{text:t,generationInfo:{}},await r?.handleLLMNewToken(t)}},ag=class extends rA{lc_namespace=["langchain_core","message","fake"];messages=[];constructor(){super()}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async addUserMessage(e){this.messages.push(new rS.xc(e))}async addAIMessage(e){this.messages.push(new rI.Od(e))}async clear(){this.messages=[]}},ay=class extends rO{lc_namespace=["langchain_core","message","fake"];messages=[];constructor(){super()}async addMessage(e){this.messages.push(e)}async getMessages(){return this.messages}},av=class extends rm.JS{name="fake_tracer";runs=[];constructor(){super()}persistRun(e){return this.runs.push(e),Promise.resolve()}},a_=class extends iW.mJ{lc_namespace=["tests","fake"];getFormatInstructions(){return""}async parse(e){return e.split(",").map(e=>e.trim())}},ab=class extends rW{lc_namespace=["test","fake"];output=[new r9({pageContent:"foo"}),new r9({pageContent:"bar"})];constructor(e){super(),this.output=e?.output??this.output}async _getRelevantDocuments(e){return this.output}},aw=class extends rV.YN{lc_namespace=["tests","fake"];returnOptions;constructor(e){super(e),this.returnOptions=e.returnOptions}async invoke(e,t){return this.returnOptions?t??{}:{input:e}}},ak=class extends er.Ou{name;description;schema;constructor(e){super(e),this.name=e.name,this.description=e.description,this.schema=e.schema}async _call(e,t){return JSON.stringify(e)}},ax=class extends rm.JS{runPromiseResolver;runPromise;name="single_run_extractor";constructor(){super(),this.runPromise=new Promise(e=>{this.runPromiseResolver=e})}async persistRun(e){this.runPromiseResolver(e)}async extract(){return this.runPromise}};function a$(e,t){let r=0,n=0,i=0;for(let a=0;a<e.length;a++)r+=e[a]*t[a],n+=e[a]*e[a],i+=t[a]*t[a];return r/(Math.sqrt(n)*Math.sqrt(i))}var aS=class e extends rG{memoryVectors=[];similarity;_vectorstoreType(){return"memory"}constructor(e,{similarity:t,...r}={}){super(e,r),this.similarity=t??a$}async addDocuments(e){let t=e.map(({pageContent:e})=>e);return this.addVectors(await this.embeddings.embedDocuments(t),e)}async addVectors(e,t){let r=e.map((e,r)=>({content:t[r].pageContent,embedding:e,metadata:t[r].metadata}));this.memoryVectors=this.memoryVectors.concat(r)}async similaritySearchVectorWithScore(e,t,r){let n=e=>!r||r(new r9({metadata:e.metadata,pageContent:e.content})),i=this.memoryVectors.filter(n);return i.map((t,r)=>({similarity:this.similarity(e,t.embedding),index:r})).sort((e,t)=>e.similarity>t.similarity?-1:0).slice(0,t).map(e=>[new r9({metadata:i[e.index].metadata,pageContent:i[e.index].content}),e.similarity])}static async fromTexts(t,r,n,i){let a=[];for(let e=0;e<t.length;e+=1){let n=Array.isArray(r)?r[e]:r,i=new r9({pageContent:t[e],metadata:n});a.push(i)}return e.fromDocuments(a,n,i)}static async fromDocuments(e,t,r){let n=new this(t,r);return await n.addDocuments(e),n}static async fromExistingIndex(e,t){return new this(e,t)}},aI={};(0,rd.V)(aI,{FakeChatMessageHistory:()=>ag,FakeChatModel:()=>au,FakeEmbeddings:()=>ah,FakeLLM:()=>af,FakeListChatMessageHistory:()=>ay,FakeListChatModel:()=>ad,FakeRetriever:()=>ab,FakeRunnable:()=>aw,FakeSplitIntoListParser:()=>a_,FakeStreamingChatModel:()=>ac,FakeStreamingLLM:()=>am,FakeTool:()=>ak,FakeTracer:()=>av,FakeVectorStore:()=>aS,SingleRunExtractor:()=>ax,SyntheticEmbeddings:()=>ap});var aE={};(0,rd.V)(aE,{EventStreamContentType:()=>aA,convertEventStreamToIterableReadableDataStream:()=>az,getBytes:()=>aO,getLines:()=>aN,getMessages:()=>aC});let aA="text/event-stream";async function aO(e,t){if(e instanceof ReadableStream){let r=e.getReader();for(;;){let e=await r.read();if(e.done){t(new Uint8Array,!0);break}t(e.value)}}else try{for await(let r of e)t(new Uint8Array(r));t(new Uint8Array,!0)}catch(e){throw Error(`Parsing event source stream failed.
Ensure your implementation of fetch returns a web or Node readable stream.
Error: ${e.message}`)}}var aT=function(e){return e[e.NewLine=10]="NewLine",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.Colon=58]="Colon",e}(aT||{});function aN(e){let t,r,n,i=!1;return function(a,s){if(s)return void e(a,0,!0);void 0===t?(t=a,r=0,n=-1):t=aP(t,a);let o=t.length,l=0;for(;r<o;){i&&(t[r]===aT.NewLine&&(l=++r),i=!1);let a=-1;for(;r<o&&-1===a;++r)switch(t[r]){case aT.Colon:-1===n&&(n=r-l);break;case aT.CarriageReturn:i=!0;case aT.NewLine:a=r}if(-1===a)break;e(t.subarray(l,a),n),l=r,n=-1}l===o?t=void 0:0!==l&&(t=t.subarray(l),r-=l)}}function aC(e,t,r){let n=aj(),i=new TextDecoder;return function(a,s,o){if(o){aR(n)||(e?.(n),n=aj());return}if(0===a.length)e?.(n),n=aj();else if(s>0){let e=i.decode(a.subarray(0,s)),o=s+(a[s+1]===aT.Space?2:1),l=i.decode(a.subarray(o));switch(e){case"data":n.data=n.data?n.data+"\n"+l:l;break;case"event":n.event=l;break;case"id":t?.(n.id=l);break;case"retry":{let e=parseInt(l,10);Number.isNaN(e)||r?.(n.retry=e)}}}}}function aP(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function aj(){return{data:"",event:"",id:"",retry:void 0}}function az(e,t){let r=new ReadableStream({async start(r){let n=aC(e=>{if("error"===e.event)throw Error(e.data??"Unspecified event streaming error.");"metadata"===e.event?t?.(e):e.data&&r.enqueue(e.data)}),i=(e,t,i)=>{n(e,t,i),i&&r.close()};await aO(e,aN(i))}});return x.bO.fromReadableStream(r)}function aR(e){return""===e.data&&""===e.event&&""===e.id&&void 0===e.retry}var aM=r(83461),aL={};function aZ(e,t){let r=0;for(let n=0;n<e.length;n++)r+=e[n]*t[n];return r}function aD(e,t){let r=0;for(let n=0;n<e.length;n++)r+=(e[n]-t[n])*(e[n]-t[n]);return r}function aU(e,t){return Math.sqrt(aD(e,t))}var aF={};function aB(e,t,r){if(0===e.length||0===e[0].length||0===t.length||0===t[0].length)return[[]];if(e[0].length!==t[0].length)throw Error(`Number of columns in X and Y must be the same. X has shape ${[e.length,e[0].length]} and Y has shape ${[t.length,t[0].length]}.`);return e.map(e=>t.map(t=>r(e,t)).map(e=>Number.isNaN(e)?0:e))}function aV(e,t=!1){let r=aH(e);return e.map(e=>e.map(e=>t?1-e/r:e/r))}function aJ(e,t){return aB(e,t,a$)}function aW(e,t){return aB(e,t,aZ)}function aq(e,t){return aB(e,t,aU)}function aK(e,t,r=.5,n=4){if(0>=Math.min(n,t.length))return[];let i=aJ(Array.isArray(e[0])?e:[e],t)[0],a=aG(i).maxIndex,s=[t[a]],o=[a];for(;o.length<Math.min(n,t.length);){let e=-1/0,n=-1,a=aJ(t,s);i.forEach((t,i)=>{if(o.includes(i))return;let s=r*t-(1-r)*Math.max(...a[i]);s>e&&(e=s,n=i)}),s.push(t[n]),o.push(n)}return o}function aG(e){if(0===e.length)return{maxIndex:-1,maxValue:NaN};let t=e[0],r=0;for(let n=1;n<e.length;n+=1)e[n]>t&&(r=n,t=e[n]);return{maxIndex:r,maxValue:t}}function aH(e){return e.reduce((e,t)=>Math.max(e,aG(t).maxValue),0)}(0,rd.V)(aF,{cosineSimilarity:()=>aJ,euclideanDistance:()=>aq,innerProduct:()=>aW,matrixFunc:()=>aB,maximalMarginalRelevance:()=>aK,normalize:()=>aV});var aY={};(0,rd.V)(aY,{agents:()=>rp,caches:()=>rX.wO,callbacks__base:()=>rf.eY,callbacks__manager:()=>r_.u8,callbacks__promises:()=>rv.Hm,chat_history:()=>rE,document_loaders__base:()=>rQ,document_loaders__langsmith:()=>r2,documents:()=>r8,embeddings:()=>rN.v,example_selectors:()=>nl,index:()=>rC,indexing:()=>nv,language_models__base:()=>nb.eY,language_models__chat_models:()=>w.su,language_models__llms:()=>nw.Vo,language_models__profile:()=>nk,load__serializable:()=>rl.Of,memory:()=>rP,messages:()=>K.$$,messages__tool:()=>rh.Nv,output_parsers:()=>aM.XM,output_parsers__openai_functions:()=>iY,output_parsers__openai_tools:()=>iR.lV,outputs:()=>rk.dQ,prompt_values:()=>rZ.cw,prompts:()=>ij,retrievers:()=>rJ,retrievers__document_compressors:()=>nx,runnables:()=>k.N8,runnables__graph:()=>r$.V,singletons:()=>rb.Ds,stores:()=>rD,structured_query:()=>al,tools:()=>er.on,tracers__base:()=>rm.eY,tracers__console:()=>rg.s,tracers__log_stream:()=>rw.W5,tracers__run_collector:()=>iL,tracers__tracer_langchain:()=>ry.y,types__stream:()=>iM,utils__async_caller:()=>rx.f,utils__chunk_array:()=>iX.y,utils__context:()=>iD,utils__env:()=>ru.Se,utils__event_source_parse:()=>aE,utils__format:()=>aL,utils__function_calling:()=>iQ.Qw,utils__hash:()=>rY.H,utils__json_patch:()=>iz.yn,utils__json_schema:()=>L.Po,utils__math:()=>aF,utils__stream:()=>x.xK,utils__testing:()=>aI,utils__tiktoken:()=>n_._G,utils__types:()=>M.WL,vectorstores:()=>rq});let aX=50;function aQ(e){let t={};for(let r=e;r&&r.prototype;r=Object.getPrototypeOf(r))Object.assign(t,Reflect.get(r.prototype,"lc_aliases"));return Object.entries(t).reduce((e,[t,r])=>(e[r]=t,e),{})}async function a0(e){let{optionalImportsMap:t,optionalImportEntrypoints:r,importMap:n,secretsMap:i,secretsFromEnv:a,path:s,depth:o,maxDepth:l}=this,u=s.join(".");if(o>l)throw Error(`Maximum recursion depth (${l}) exceeded during deserialization. This may indicate a malicious payload or you may need to increase maxDepth.`);if("object"!=typeof e||null==e)return e;if(Array.isArray(e))return Promise.all(e.map((e,t)=>a0.call({...this,path:[...s,`${t}`],depth:o+1},e)));let c=e;if((0,ro.py)(c))return(0,ro.MG)(c);if("lc"in c&&"type"in c&&"id"in c&&1===c.lc&&"secret"===c.type){let[e]=c.id;if(e in i)return i[e];if(a){let t=(0,ru.Az)(e);if(t)return t}throw Error(`Missing secret "${e}" at ${u}`)}if("lc"in c&&"type"in c&&"id"in c&&1===c.lc&&"not_implemented"===c.type){let e=JSON.stringify(c);throw Error(`Trying to load an object that doesn't implement serialization: ${u} -> ${e}`)}if("lc"in c&&"type"in c&&"id"in c&&"kwargs"in c&&1===c.lc&&"constructor"===c.type){let e=c,i=JSON.stringify(e),[a,...l]=e.id.slice().reverse(),d=l.reverse(),p={langchain_core:aY,langchain:n},h=null,f=[d.join("/")];"langchain_community"===d[0]&&f.push(["langchain",...d.slice(1)].join("/"));let m=f.find(e=>e in t);if(rc.concat(r).includes(d.join("/"))||m)if(void 0!==m)h=await t[m];else throw Error(`Missing key "${d.join("/")}" for ${u} in load(optionalImportsMap={})`);else{let e,t;if("langchain"===d[0]||"langchain_core"===d[0])e=p[d[0]],d.shift();else throw Error(`Invalid namespace: ${u} -> ${i}`);if(0===d.length)throw Error(`Invalid namespace: ${u} -> ${i}`);do{if((t=d.join("__"))in e)break;d.pop()}while(d.length>0);t in e&&(h=e[t])}if("object"!=typeof h||null===h)throw Error(`Invalid namespace: ${u} -> ${i}`);let g=h[a]??Object.values(h).find(e=>"function"==typeof e&&(0,rl.ZO)(e)===a);if("function"!=typeof g)throw Error(`Invalid identifer: ${u} -> ${i}`);let y=await a0.call({...this,path:[...s,"kwargs"],depth:o+1},e.kwargs),v=new g((0,rs.d4)(y,rs.O3,aQ(g)));return Object.defineProperty(v.constructor,"name",{value:a}),v}let d={};for(let[e,t]of Object.entries(c))d[e]=await a0.call({...this,path:[...s,e],depth:o+1},t);return d}async function a1(e,t){let r=JSON.parse(e),n={optionalImportsMap:t?.optionalImportsMap??{},optionalImportEntrypoints:t?.optionalImportEntrypoints??[],secretsMap:t?.secretsMap??{},secretsFromEnv:t?.secretsFromEnv??!1,importMap:t?.importMap??{},path:["$"],depth:0,maxDepth:t?.maxDepth??aX};return a0.call(n,r)}function a2(e){return null!==e&&1===e.lc&&"constructor"===e.type&&Array.isArray(e.id)}async function a4(e){if(e&&"object"==typeof e)if(Array.isArray(e))return await Promise.all(e.map(e=>a4(e)));else{let t={};for(let[r,n]of Object.entries(e))t[r]=await a4(n);if(2===t.lc&&"undefined"===t.type)return;if(2===t.lc&&"constructor"===t.type&&Array.isArray(t.id))try{let e;switch(t.id[t.id.length-1]){case"Set":e=Set;break;case"Map":e=Map;break;case"RegExp":e=RegExp;break;case"Error":e=Error;break;default:return t}if(t.method)return e[t.method](...t.args||[]);return new e(...t.args||[])}catch(e){}else if(a2(t))return a1(JSON.stringify(t));return t}return e}function a6(e,t,r,n){return{lc:2,type:"constructor",id:[e.name],method:t??null,args:r??[],kwargs:n??{}}}function a9(e){if(void 0===e)return{lc:2,type:"undefined"};if(e instanceof Set||e instanceof Map)return a6(e.constructor,void 0,[Array.from(e)]);if(e instanceof RegExp)return a6(RegExp,void 0,[e.source,e.flags]);if(e instanceof Error)return a6(e.constructor,void 0,[e.message]);if(e?.lg_name==="Send")return{node:e.node,args:e.args};else return e}var a3=class{_dumps(e){return new TextEncoder().encode(rr(e,(e,t)=>a9(t)))}async dumpsTyped(e){return e instanceof Uint8Array?["bytes",e]:["json",this._dumps(e)]}async _loads(e){return a4(JSON.parse(e))}async loadsTyped(e,t){if("bytes"===e)return"string"==typeof t?new TextEncoder().encode(t):t;if("json"===e)return this._loads("string"==typeof t?t:new TextDecoder().decode(t));throw Error(`Unknown serialization type: ${e}`)}};function a5(e){if("object"!=typeof e||null===e)return e;let t=Array.isArray(e)?[]:{};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=a5(e[r]));return t}function a8(){return{v:4,id:t1(-2),ts:new Date().toISOString(),channel_values:{},channel_versions:{},versions_seen:{}}}function a7(e){return{v:e.v,id:e.id,ts:e.ts,channel_values:{...e.channel_values},channel_versions:{...e.channel_versions},versions_seen:a5(e.versions_seen)}}function se(e,t){return"number"==typeof e&&"number"==typeof t?Math.sign(e-t):String(e).localeCompare(String(t))}function st(...e){return e.reduce((e,t,r)=>0===r?t:se(e,t)>=0?e:t)}let sr={[t4]:-1,[t6]:-2,[t9]:-3,[t3]:-4};var sn=class extends Error{constructor(e){super(e),this.name="InvalidNamespaceError"}};function si(e){if(0===e.length)throw new sn("Namespace cannot be empty.");for(let t of e){if("string"!=typeof t)throw new sn(`Invalid namespace label '${t}' found in ${e}. Namespace labels must be strings, but got ${typeof t}.`);if(t.includes("."))throw new sn(`Invalid namespace label '${t}' found in ${e}. Namespace labels cannot contain periods ('.').`);if(""===t)throw new sn(`Namespace labels cannot be empty strings. Got ${t} in ${e}`)}if("langgraph"===e[0])throw new sn(`Root label for namespace cannot be "langgraph". Got: ${e}`)}var sa=class{async get(e,t){return(await this.batch([{namespace:e,key:t}]))[0]}async search(e,t={}){let{filter:r,limit:n=10,offset:i=0,query:a}=t;return(await this.batch([{namespacePrefix:e,filter:r,limit:n,offset:i,query:a}]))[0]}async put(e,t,r,n){si(e),await this.batch([{namespace:e,key:t,value:r,index:n}])}async delete(e,t){await this.batch([{namespace:e,key:t,value:null}])}async listNamespaces(e={}){let{prefix:t,suffix:r,maxDepth:n,limit:i=100,offset:a=0}=e,s=[];return t&&s.push({matchType:"prefix",path:t}),r&&s.push({matchType:"suffix",path:r}),(await this.batch([{matchConditions:s.length?s:void 0,maxDepth:n,limit:i,offset:a}]))[0]}start(){}stop(){}};let ss=e=>"lg_name"in e&&"AsyncBatchedStore"===e.lg_name?e.store:e;var so=class extends sa{lg_name="AsyncBatchedStore";store;queue=new Map;nextKey=0;running=!1;processingTask=null;constructor(e){super(),this.store=ss(e)}get isRunning(){return this.running}async batch(e){throw Error("The `batch` method is not implemented on `AsyncBatchedStore`.\n Instead, it calls the `batch` method on the wrapped store.\n If you are seeing this error, something is wrong.")}async get(e,t){return this.enqueueOperation({namespace:e,key:t})}async search(e,t){let{filter:r,limit:n=10,offset:i=0,query:a}=t||{};return this.enqueueOperation({namespacePrefix:e,filter:r,limit:n,offset:i,query:a})}async put(e,t,r){return this.enqueueOperation({namespace:e,key:t,value:r})}async delete(e,t){return this.enqueueOperation({namespace:e,key:t,value:null})}start(){this.running||(this.running=!0,this.processingTask=this.processBatchQueue())}async stop(){this.running=!1,this.processingTask&&await this.processingTask}enqueueOperation(e){return new Promise((t,r)=>{let n=this.nextKey;this.nextKey+=1,this.queue.set(n,{operation:e,resolve:t,reject:r})})}async processBatchQueue(){for(;this.running;){if(await new Promise(e=>{setTimeout(e,0)}),0===this.queue.size)continue;let e=new Map(this.queue);this.queue.clear();try{let t=Array.from(e.values()).map(({operation:e})=>e),r=await this.store.batch(t);e.forEach(({resolve:t},n)=>{let i=Array.from(e.keys()).indexOf(n);t(r[i])})}catch(t){e.forEach(({reject:e})=>{e(t)})}}}toJSON(){return{queue:this.queue,nextKey:this.nextKey,running:this.running,store:"[LangGraphStore]"}}};function sl(e){if(!e)return[];let t=[],r=[],n=0;for(;n<e.length;){let i=e[n];if("["===i){r.length&&(t.push(r.join("")),r=[]);let i=1,a=["["];for(n+=1;n<e.length&&i>0;)"["===e[n]?i+=1:"]"===e[n]&&(i-=1),a.push(e[n]),n+=1;t.push(a.join(""));continue}if("{"===i){r.length&&(t.push(r.join("")),r=[]);let i=1,a=["{"];for(n+=1;n<e.length&&i>0;)"{"===e[n]?i+=1:"}"===e[n]&&(i-=1),a.push(e[n]),n+=1;t.push(a.join(""));continue}"."===i?r.length&&(t.push(r.join("")),r=[]):r.push(i);n+=1}return r.length&&t.push(r.join("")),t}function su(e){return"object"==typeof e&&null!==e&&Object.keys(e).every(e=>"$eq"===e||"$ne"===e||"$gt"===e||"$gte"===e||"$lt"===e||"$lte"===e||"$in"===e||"$nin"===e)}var sc=class{serde=new a3;constructor(e){this.serde=e||this.serde}},sd=class e extends w.xV{toolCalls;toolStyle;indexRef;structuredResponse;tools=[];constructor({toolCalls:e=[],toolStyle:t="openai",index:r=0,structuredResponse:n,indexRef:i,...a}={}){super(a),this.toolCalls=e,this.toolStyle=t,this.indexRef=i??{current:r},this.structuredResponse=n}get index(){return this.indexRef.current}set index(e){this.indexRef.current=e}_llmType(){return"fake-tool-calling"}_combineLLMOutput(){return[]}bindTools(t){let r=new e({toolCalls:this.toolCalls,toolStyle:this.toolStyle,structuredResponse:this.structuredResponse,indexRef:this.indexRef});return r.tools=[...this.tools,...t],r}withStructuredOutput(e){return new k.jY({func:async()=>this.structuredResponse})}async _generate(e,t,r){let n=e[e.length-1].content;e.length>1&&(n=e.map(e=>e.content).filter(Boolean).map(e=>"string"==typeof e?e:"object"==typeof e&&"text"in e?e.text:Array.isArray(e)?e.map(e=>"string"==typeof e?e:"object"==typeof e&&"text"in e?e.text:"").join("-"):JSON.stringify(e)).join("-")),(1===e.length||2===e.length&&e.every(K.xc.isInstance))&&0!==this.index&&(this.index=0);let i=this.toolCalls[this.index]||[],a=this.index.toString();this.index=(this.index+1)%Math.max(1,this.toolCalls.length);let s=new K.Od({content:n,id:a,tool_calls:i.length>0?i.map(e=>({...e,type:"tool_call"})):void 0});return{generations:[{text:n,message:s}],llmOutput:{}}}},sp=r(34595);function sh(){rb.Nx.initializeGlobalInstance(new sp.T)}var sf=class extends Error{lc_error_code;constructor(e,t){let r=e??"";t?.lc_error_code&&(r=`${r}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langgraph/${t.lc_error_code}/
`),super(r),this.lc_error_code=t?.lc_error_code}},sm=class extends sf{get is_bubble_up(){return!0}},sg=class extends sf{constructor(e,t){super(e,t),this.name="GraphRecursionError"}static get unminifiable_name(){return"GraphRecursionError"}},sy=class extends sf{constructor(e,t){super(e,t),this.name="GraphValueError"}static get unminifiable_name(){return"GraphValueError"}},sv=class extends sm{interrupts;constructor(e,t){super(JSON.stringify(e,null,2),t),this.name="GraphInterrupt",this.interrupts=e??[]}static get unminifiable_name(){return"GraphInterrupt"}},s_=class extends sv{constructor(e,t){super([{value:e}],t),this.name="NodeInterrupt"}static get unminifiable_name(){return"NodeInterrupt"}},sb=class extends sm{command;constructor(e){super(),this.name="ParentCommand",this.command=e}static get unminifiable_name(){return"ParentCommand"}};function sw(e){return void 0!==e&&e.name===sb.unminifiable_name}function sk(e){return void 0!==e&&!0===e.is_bubble_up}function sx(e){return void 0!==e&&[sv.unminifiable_name,s_.unminifiable_name].includes(e.name)}var s$=class extends sf{constructor(e,t){super(e,t),this.name="EmptyInputError"}static get unminifiable_name(){return"EmptyInputError"}},sS=class extends sf{constructor(e,t){super(e,t),this.name="EmptyChannelError"}static get unminifiable_name(){return"EmptyChannelError"}},sI=class extends sf{constructor(e,t){super(e,t),this.name="InvalidUpdateError"}static get unminifiable_name(){return"InvalidUpdateError"}},sE=class extends sf{constructor(e,t){super(e,t),this.name="UnreachableNodeError"}static get unminifiable_name(){return"UnreachableNodeError"}};function sA(e){return null!=e&&!0===e.lg_is_channel}var sO=class{ValueType;UpdateType;lg_is_channel=!0;consume(){return!1}finish(){return!1}isAvailable(){try{return this.get(),!0}catch(e){if(e.name===sS.unminifiable_name)return!1;throw e}}};let sT=Symbol.for("LG_IS_ONLY_BASE_CHANNEL");function sN(e){if(!0===e[sT])return e;let t={};for(let r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;let n=e[r];sA(n)&&(t[r]=n)}return Object.assign(t,{[sT]:!0}),t}function sC(e,t){let r=sN(e),n={};for(let e in r){if(!Object.prototype.hasOwnProperty.call(r,e))continue;let i=t.channel_values[e];n[e]=r[e].fromCheckpoint(i)}return Object.assign(n,{[sT]:!0}),n}function sP(e,t,r,n){let i;if(void 0===t)i=e.channel_values;else for(let e in i={},t)if(Object.prototype.hasOwnProperty.call(t,e))try{i[e]=t[e].checkpoint()}catch(e){if(e.name===sS.unminifiable_name);else throw e}return{v:4,id:n?.id??t1(r),ts:new Date().toISOString(),channel_values:i,channel_versions:e.channel_versions,versions_seen:e.versions_seen}}var sj=class e extends sO{lc_graph_name="BinaryOperatorAggregate";value;operator;initialValueFactory;constructor(e,t){super(),this.operator=e,this.initialValueFactory=t,this.value=t?.()}fromCheckpoint(t){let r=new e(this.operator,this.initialValueFactory);return void 0!==t&&(r.value=t),r}update(e){let t=e;if(!t.length)return!1;for(let e of(void 0===this.value&&([this.value]=t,t=t.slice(1)),t))void 0!==this.value&&(this.value=this.operator(this.value,e));return!0}get(){if(void 0===this.value)throw new sS;return this.value}checkpoint(){if(void 0===this.value)throw new sS;return this.value}isAvailable(){return void 0!==this.value}},sz=class e extends sO{lc_graph_name="LastValue";value=[];constructor(e){super(),this.initialValueFactory=e,e&&(this.value=[e()])}fromCheckpoint(t){let r=new e(this.initialValueFactory);return void 0!==t&&(r.value=[t]),r}update(e){if(0===e.length)return!1;if(1!==e.length)throw new sI("LastValue can only receive one value per step.",{lc_error_code:"INVALID_CONCURRENT_GRAPH_UPDATE"});return this.value=[e[e.length-1]],!0}get(){if(0===this.value.length)throw new sS;return this.value[0]}checkpoint(){if(0===this.value.length)throw new sS;return this.value[0]}isAvailable(){return 0!==this.value.length}},sR=class e extends sO{lc_graph_name="LastValueAfterFinish";value=[];finished=!1;fromCheckpoint(t){let r=new e;if(void 0!==t){let[e,n]=t;r.value=[e],r.finished=n}return r}update(e){return 0!==e.length&&(this.finished=!1,this.value=[e[e.length-1]],!0)}get(){if(0===this.value.length||!this.finished)throw new sS;return this.value[0]}checkpoint(){if(0!==this.value.length)return[this.value[0],this.finished]}consume(){return!!this.finished&&(this.finished=!1,this.value=[],!0)}finish(){return!this.finished&&this.value.length>0&&(this.finished=!0,!0)}isAvailable(){return 0!==this.value.length&&this.finished}},sM=class{lc_graph_name="AnnotationRoot";spec;constructor(e){this.spec=e}};let sL=function(e){return e?sZ(e):new sz};function sZ(e){return"object"==typeof e&&e&&"reducer"in e&&e.reducer?new sj(e.reducer,e.default):"object"==typeof e&&e&&"value"in e&&e.value?new sj(e.value,e.default):new sz}sL.Root=e=>new sM(e);let sD="__start__",sU="__end__",sF="__input__",sB="__copy__",sV="__error__",sJ="__pregel_ns_writes",sW="__pregel_send",sq="__pregel_call",sK="__pregel_read",sG="__pregel_checkpointer",sH="__pregel_resuming",sY="__pregel_task_id",sX="__pregel_stream",sQ="__pregel_resume_map",s0="__pregel_scratchpad",s1="__pregel_previous",s2="__pregel_durability",s4="checkpoint_id",s6="checkpoint_ns",s9="__pregel_node_finished",s3="checkpoint_map",s5="__pregel_abort_signals",s8="__interrupt__",s7="__resume__",oe="__no_writes__",ot="__return__",or="__previous__",on="langsmith:hidden",oi="langsmith:nostream",oa="__self__",os="__pregel_tasks",oo="__pregel_push",ol="__pregel_pull",ou="00000000-0000-0000-0000-000000000000",oc=[on,sF,s8,s7,sV,oe,sW,sK,sG,s2,sX,sH,sY,sq,"__pregel_resume_value",s0,s1,s3,s6,s4],od="|",op=":",oh=Symbol.for("langgraph.command");var of=class{[oh];constructor(e){this[oh]=e}};function om(e){let t=e;return null!=t&&"string"==typeof t.node&&void 0!==t.args}var og=class{lg_name="Send";node;args;constructor(e,t){this.node=e,this.args=ow(t)}toJSON(){return{lg_name:this.lg_name,node:this.node,args:this.args}}};function oy(e){return e instanceof og}function ov(e){return!!e&&"object"==typeof e&&s8 in e&&Array.isArray(e[s8])}var o_=class extends of{lg_name="Command";lc_direct_tool_output=!0;graph;update;resume;goto=[];static PARENT="__parent__";constructor(e){super(e),this.resume=e.resume,this.graph=e.graph,this.update=e.update,e.goto&&(this.goto=Array.isArray(e.goto)?ow(e.goto):[ow(e.goto)])}_updateAsTuples(){return this.update&&"object"==typeof this.update&&!Array.isArray(this.update)?Object.entries(this.update):Array.isArray(this.update)&&this.update.every(e=>Array.isArray(e)&&2===e.length&&"string"==typeof e[0])?this.update:[["__root__",this.update]]}toJSON(){let e;return e="string"==typeof this.goto?this.goto:oy(this.goto)?this.goto.toJSON():this.goto?.map(e=>"string"==typeof e?e:e.toJSON()),{lg_name:this.lg_name,update:this.update,resume:this.resume,goto:e}}};function ob(e){return"object"==typeof e&&null!=e&&"lg_name"in e&&"Command"===e.lg_name}function ow(e,t=new Map){if(null!=e&&"object"==typeof e){let r;if(t.has(e))return t.get(e);if(Array.isArray(e))r=[],t.set(e,r),e.forEach((e,n)=>{r[n]=ow(e,t)});else if(!ob(e)||e instanceof o_)if(!om(e)||e instanceof og)if(ob(e)||oy(e))r=e,t.set(e,r);else if("lc_serializable"in e&&e.lc_serializable)r=e,t.set(e,r);else for(let[n,i]of(r={},t.set(e,r),Object.entries(e)))r[n]=ow(i,t);else r=new og(e.node,e.args),t.set(e,r);else r=new o_(e),t.set(e,r);return r}return e}let ok=["tags","metadata","callbacks","configurable"],ox=["tags","metadata","callbacks","runName","maxConcurrency","recursionLimit","configurable","runId","outputKeys","streamMode","store","writer","interrupt","context","interruptBefore","interruptAfter","checkpointDuring","durability","signal"],o$=25;function oS(...e){let t={tags:[],metadata:{},callbacks:void 0,recursionLimit:o$,configurable:{}},r=rb.Nx.getRunnableConfig();if(void 0!==r){for(let[e,n]of Object.entries(r))if(void 0!==n)if(ok.includes(e)){let r;r=Array.isArray(n)?[...n]:"object"==typeof n?"callbacks"===e&&"copy"in n&&"function"==typeof n.copy?n.copy():{...n}:n,t[e]=r}else t[e]=n}for(let r of e)if(void 0!==r)for(let[e,n]of Object.entries(r))void 0!==n&&ox.includes(e)&&(t[e]=n);for(let[e,r]of Object.entries(t.configurable))t.metadata=t.metadata??{},e.startsWith("__")||"string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r||e in t.metadata||(t.metadata[e]=r);return t}function oI(){return rb.Nx.getRunnableConfig()}function oE(e){return e.split(od).filter(e=>!e.match(/^\d+$/)).map(e=>e.split(op)[0]).join(od)}function oA(e){let t=e.split(od);for(;t.length>1&&t[t.length-1].match(/^\d+$/);)t.pop();return t.slice(0,-1).join(od)}let oO=e=>BigInt(e),oT=(e,t=0)=>new DataView(e.buffer,e.byteOffset+t,e.byteLength-t),oN=oO("0x9E3779B1"),oC=oO("0x85EBCA77"),oP=oO("0xC2B2AE3D"),oj=oO("0x9E3779B185EBCA87"),oz=oO("0xC2B2AE3D27D4EB4F"),oR=oO("0x165667B19E3779F9"),oM=oO("0x85EBCA77C2B2AE63"),oL=oO("0x27D4EB2F165667C5"),oZ=oO("0x165667919E3779F9"),oD=oO("0x9FB21C651E98DF25"),oU=(e=>{let t=e.length;if(t%2!=0)throw Error("String should have an even number of characters");let r=t/2,n=new Uint8Array(r),i=0,a=0;for(;a<r;){let t=e.slice(i,i+=2);n[a]=Number.parseInt(t,16),a+=1}return oT(n)})("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e"),oF=(oO(1)<<oO(128))-oO(1),oB=(oO(1)<<oO(64))-oO(1),oV=(oO(1)<<oO(32))-oO(1),oJ=64,oW=8,oq=8,oK=4;function oG(e){if(!e)throw Error("Assert failed")}function oH(e){let t=new DataView(new ArrayBuffer(8));return t.setBigUint64(0,e,!0),t.getBigUint64(0,!1)}function oY(e){let t=e;return((t=(t&oO(65535))<<oO(16)|(t&oO(0xffff0000))>>oO(16))&oO(0xff00ff))<<oO(8)|(t&oO(0xff00ff00))>>oO(8)}function oX(e,t){return(e&oV)*(t&oV)&oB}function oQ(e,t){return(e<<t|e>>oO(32)-t)&oV}function o0(e,t,r){for(let n=0;n<oW;n+=1){let i=t.getBigUint64(8*n,!0),a=i^r.getBigUint64(8*n,!0);e[1^n]+=i,e[n]+=oX(a,a>>oO(32))}return e}function o1(e,t,r,n){for(let i=0;i<n;i+=1)o0(e,oT(t,i*oJ),oT(r,8*i));return e}function o2(e,t){for(let r=0;r<oW;r+=1){let n=t.getBigUint64(8*r,!0),i=e[r];i=(ln(i,oO(47))^n)*oN,e[r]=i&oB}return e}function o4(e,t){return o5(e[0]^t.getBigUint64(0,!0),e[1]^t.getBigUint64(oq,!0))}function o6(e,t,r){let n=r;return n+=o4(e.slice(0),oT(t,0*oK)),n+=o4(e.slice(2),oT(t,4*oK)),n+=o4(e.slice(4),oT(t,8*oK)),le((n+=o4(e.slice(6),oT(t,12*oK)))&oB)}function o9(e,t,r,n,i){let a=e,s=Math.floor((r.byteLength-oJ)/8),o=oJ*s,l=Math.floor((t.byteLength-1)/o);for(let e=0;e<l;e+=1)a=i(a=o1(a,oT(t,e*o),r,s),oT(r,r.byteLength-oJ));{let e=Math.floor((t.byteLength-1-o*l)/oJ);a=n(a=o1(a,oT(t,l*o),r,e),oT(t,t.byteLength-oJ),oT(r,r.byteLength-oJ-7))}return a}function o3(e,t){let r=new BigUint64Array([oP,oj,oz,oR,oM,oC,oL,oN]);oG(e.byteLength>128),oG(8*(r=o9(r,e,t,o0,o2)).length==64);{let n=o6(r,oT(t,11),oO(e.byteLength)*oj&oB);return o6(r,oT(t,t.byteLength-oJ-11),~(oO(e.byteLength)*oz)&oB)<<oO(64)|n}}function o5(e,t){let r=e*t&oF;return r&oB^r>>oO(64)}function o8(e,t,r){return o5((e.getBigUint64(0,!0)^t.getBigUint64(0,!0)+r)&oB,(e.getBigUint64(8,!0)^t.getBigUint64(8,!0)-r)&oB)}function o7(e,t,r,n,i){let a=e&oB,s=e>>oO(64)&oB;return a+=o8(t,n,i),a^=r.getBigUint64(0,!0)+r.getBigUint64(8,!0),a&=oB,s+=o8(r,oT(n,16),i),s^=t.getBigUint64(0,!0)+t.getBigUint64(8,!0),(s&=oB)<<oO(64)|a}function le(e){let t=e;return t^=t>>oO(37),t*=oZ,t&=oB,t^=t>>oO(32)}function lt(e){let t=e;return t^=t>>oO(33),t*=oz,t&=oB,t^=t>>oO(29),t*=oR,t&=oB,t^=t>>oO(32)}function lr(e,t,r){let n=e.byteLength;oG(n>0&&n<=3);let i=oO(e.getUint8(n-1))|oO(n<<8)|oO(e.getUint8(0)<<16)|oO(e.getUint8(n>>1)<<24),a=(i^(oO(t.getUint32(0,!0))^oO(t.getUint32(4,!0)))+r)&oB,s=(oO(t.getUint32(8,!0))^oO(t.getUint32(12,!0)))-r;return(lt((oQ(oY(i),oO(13))^s)&oB)&oB)<<oO(64)|lt(a)}function ln(e,t){return e^e>>t}function li(e,t,r){let n=e.byteLength;oG(n>=4&&n<=8);{let i=e.getUint32(0,!0),a=e.getUint32(n-4,!0),s=((oO(i)|oO(a)<<oO(32))^(t.getBigUint64(16,!0)^t.getBigUint64(24,!0))+r&oB)*(oj+(oO(n)<<oO(2)))&oF;return s+=(s&oB)<<oO(65),s&=oF,ln(ln((s^=s>>oO(67))&oB,oO(35))*oD&oB,oO(28))|le(s>>oO(64))<<oO(64)}}function la(e,t,r){let n=e.byteLength;oG(n>=9&&n<=16);{let i=(t.getBigUint64(32,!0)^t.getBigUint64(40,!0))+r&oB,a=(t.getBigUint64(48,!0)^t.getBigUint64(56,!0))-r&oB,s=e.getBigUint64(0,!0),o=e.getBigUint64(n-8,!0),l=(s^o^i)*oj,u=(l&oB)+(oO(n-1)<<oO(54));l=l&(oF^oB)|u,o^=a,l+=o+(o&oV)*(oC-oO(1))<<oO(64),l&=oF;let c=((l^=oH(l>>oO(64)))&oB)*oz;return c+=(l>>oO(64))*oz<<oO(64),le((c&=oF)&oB)|le(c>>oO(64))<<oO(64)}}function ls(e,t){let r=e.byteLength;return(oG(r<=16),r>8)?la(e,oU,t):r>=4?li(e,oU,t):r>0?lr(e,oU,t):lt(t^oU.getBigUint64(64,!0)^oU.getBigUint64(72,!0))|lt(t^oU.getBigUint64(80,!0)^oU.getBigUint64(88,!0))<<oO(64)}function lo(e){return~e+oO(1)&oB}function ll(e,t,r){let n=oO(e.byteLength)*oj&oB,i=oO(e.byteLength-1)/oO(32);for(;i>=0;){let a=Number(i);n=o7(n,oT(e,16*a),oT(e,e.byteLength-16*(a+1)),oT(t,32*a),r),i-=oO(1)}let a=n+(n>>oO(64))&oB;a=le(a);let s=(n&oB)*oj+(n>>oO(64))*oM+(oO(e.byteLength)-r&oB)*oz;return s&=oB,a|(s=lo(le(s)))<<oO(64)}function lu(e,t,r){let n=oO(e.byteLength)*oj&oB;for(let i=32;i<160;i+=32)n=o7(n,oT(e,i-32),oT(e,i-16),oT(t,i-32),r);n=le(n&oB)|le(n>>oO(64))<<oO(64);for(let i=160;i<=e.byteLength;i+=32)n=o7(n,oT(e,i-32),oT(e,i-16),oT(t,3+i-160),r);let i=(n=o7(n,oT(e,e.byteLength-16),oT(e,e.byteLength-32),oT(t,103),lo(r)))+(n>>oO(64))&oB;i=le(i);let a=(n&oB)*oj+(n>>oO(64))*oM+(oO(e.byteLength)-r&oB)*oz;return a&=oB,i|(a=lo(le(a)))<<oO(64)}function lc(e,t=oO(0)){let r=new TextEncoder,n=oT("string"==typeof e?r.encode(e):e),i=n.byteLength,a=e=>e.toString(16).padStart(32,"0");return a(i<=16?ls(n,t):i<=128?ll(n,oU,t):i<=240?lu(n,oU,t):o3(n,oU))}function ld(e){return/^[0-9a-f]{32}$/.test(e)}function lp(e){let t=rb.Nx.getRunnableConfig();if(!t)throw Error("Called interrupt() outside the context of a graph.");let r=t.configurable;if(!r)throw Error("No configurable found in config");if(!r[sG])throw new sy("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});let n=r[s0];n.interruptCounter+=1;let i=n.interruptCounter;if(n.resume.length>0&&i<n.resume.length)return r[sW]?.([[s7,n.resume]]),n.resume[i];if(void 0!==n.nullResume){if(n.resume.length!==i)throw Error(`Resume length mismatch: ${n.resume.length} !== ${i}`);let e=n.consumeNullResume();return n.resume.push(e),r[sW]?.([[s7,n.resume]]),e}let a=r[s6]?.split(od);throw new sv([{id:a?lc(a.join(od)):void 0,value:e}])}var lh=class extends k.YN{lc_namespace=["langgraph"];func;tags;config;trace=!0;recurse=!0;constructor(e){super(),this.name=e.name??e.func.name,this.func=e.func,this.config=e.tags?{tags:e.tags}:void 0,this.trace=e.trace??this.trace,this.recurse=e.recurse??this.recurse}async _tracedInvoke(e,t,r){return new Promise((n,i)=>{let a=(0,k.tn)(t,{callbacks:r?.getChild()});rb.Nx.runWithConfig(a,async()=>{try{let t=await this.func(e,a);n(t)}catch(e){i(e)}})})}async invoke(e,t){let r,n=oS(t),i=(0,k.SV)(this.config,n);return(r=this.trace?await this._callWithConfig(this._tracedInvoke,e,i):await rb.Nx.runWithConfig(i,async()=>this.func(e,i)),k.YN.isRunnable(r)&&this.recurse)?await rb.Nx.runWithConfig(i,async()=>r.invoke(e,i)):r}};function*lf(e,t){if(void 0===t)yield*e;else for(let r of e)yield[t,r]}async function lm(e){let t=[];for await(let r of(await e))t.push(r);return t}function lg(e){let t=[];for(let r of e)t.push(r);return t}function ly(e,t){return e?"configurable"in e?{...e,configurable:{...e.configurable,...t}}:{...e,configurable:t}:{configurable:t}}function lv(e){return null!=e&&"function"==typeof e&&e instanceof Object.getPrototypeOf(async function*(){}).constructor}function l_(e){return null!=e&&"function"==typeof e&&e instanceof Object.getPrototypeOf(function*(){}).constructor}function lb(e){return"object"==typeof e&&e?.[Symbol.for("LG_SKIP_WRITE")]!==void 0}Symbol.for("LG_SKIP_WRITE");let lw={[Symbol.for("LG_PASSTHROUGH")]:!0};function lk(e){return"object"==typeof e&&e?.[Symbol.for("LG_PASSTHROUGH")]!==void 0}let lx=Symbol("IS_WRITER");var l$=class e extends lh{writes;constructor(e,t){super({writes:e,name:`ChannelWrite<${e.map(e=>oy(e)?e.node:"channel"in e?e.channel:"...").join(",")}>`,tags:t,func:async(e,t)=>this._write(e,t??{})}),this.writes=e}async _write(t,r){let n=this.writes.map(e=>lI(e)&&lk(e.value)?{mapper:e.mapper,value:t}:lS(e)&&lk(e.value)?{channel:e.channel,value:t,skipNone:e.skipNone,mapper:e.mapper}:e);return await e.doWrite(r,n),t}static async doWrite(e,t){for(let e of t){if(lS(e)){if(e.channel===os)throw new sI("Cannot write to the reserved channel TASKS");if(lk(e.value))throw new sI("PASSTHROUGH value must be replaced")}if(lI(e)&&lk(e.value))throw new sI("PASSTHROUGH value must be replaced")}let r=[];for(let n of t)if(oy(n))r.push([os,n]);else if(lI(n)){let t=await n.mapper.invoke(n.value,e);null!=t&&t.length>0&&r.push(...t)}else if(lS(n)){let t=void 0!==n.mapper?await n.mapper.invoke(n.value,e):n.value;if(lb(t)||n.skipNone&&void 0===t)continue;r.push([n.channel,t])}else throw Error(`Invalid write entry: ${JSON.stringify(n)}`);(e.configurable?.[sW])(r)}static isWriter(t){return t instanceof e||lx in t&&!!t[lx]}static registerWriter(e){return Object.defineProperty(e,lx,{value:!0})}};function lS(e){return void 0!==e&&"string"==typeof e.channel}function lI(e){return void 0!==e&&!lS(e)&&k.YN.isRunnable(e.mapper)}var lE=class e extends lh{lc_graph_name="ChannelRead";channel;fresh=!1;mapper;constructor(t,r,n=!1){super({func:(t,r)=>e.doRead(r,this.channel,this.fresh,this.mapper)}),this.fresh=n,this.mapper=r,this.channel=t,this.name=Array.isArray(t)?`ChannelRead<${t.join(",")}>`:`ChannelRead<${t}>`}static doRead(e,t,r,n){let i=e.configurable?.[sK];if(!i)throw Error("Runnable is not configured with a read function. Make sure to call in the context of a Pregel process");return n?n(i(t,r)):i(t,r)}};let lA=new k.kI;var lO=class e extends k.fJ{lc_graph_name="PregelNode";channels;triggers=[];mapper;writers=[];bound=lA;kwargs={};metadata={};tags=[];retryPolicy;cachePolicy;subgraphs;ends;constructor(e){let{channels:t,triggers:r,mapper:n,writers:i,bound:a,kwargs:s,metadata:o,retryPolicy:l,cachePolicy:u,tags:c,subgraphs:d,ends:p}=e,h=[...e.config?.tags?e.config.tags:[],...c??[]];super({...e,bound:e.bound??lA,config:{...e.config?e.config:{},tags:h}}),this.channels=t,this.triggers=r,this.mapper=n,this.writers=i??this.writers,this.bound=a??this.bound,this.kwargs=s??this.kwargs,this.metadata=o??this.metadata,this.tags=h,this.retryPolicy=l,this.cachePolicy=u,this.subgraphs=d,this.ends=p}getWriters(){let e=[...this.writers];for(;e.length>1&&e[e.length-1]instanceof l$&&e[e.length-2]instanceof l$;){let t=e.slice(-2),r=t[0].writes.concat(t[1].writes);e[e.length-2]=new l$(r,t[0].config?.tags),e.pop()}return e}getNode(){let e=this.getWriters();if(this.bound!==lA||0!==e.length)return this.bound===lA&&1===e.length?e[0]:this.bound===lA?new k.zZ({first:e[0],middle:e.slice(1,e.length-1),last:e[e.length-1],omitSequenceTags:!0}):e.length>0?new k.zZ({first:this.bound,middle:e.slice(0,e.length-1),last:e[e.length-1],omitSequenceTags:!0}):this.bound}join(t){if(!Array.isArray(t))throw Error("channels must be a list");if("object"!=typeof this.channels)throw Error("all channels must be named when using .join()");return new e({channels:{...this.channels,...Object.fromEntries(t.map(e=>[e,e]))},triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound,kwargs:this.kwargs,config:this.config,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}pipe(t){return new e(l$.isWriter(t)?{channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:[...this.writers,t],bound:this.bound,config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}:this.bound===lA?{channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:(0,k.Bp)(t),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}:{channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound.pipe(t),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}};function lT(e){return"steps"in e&&Array.isArray(e.steps)}function lN(e){return"lg_is_pregel"in e&&!0===e.lg_is_pregel}function lC(e){let t=[e];for(let e of t)if(lN(e))return e;else lT(e)&&t.push(...e.steps)}function lP(e,t,r=!0,n=!1){try{return e[t].get()}catch(e){if(e.name===sS.unminifiable_name){if(n)return e;else if(r)return null}throw e}}function lj(e,t,r=!0){if(!Array.isArray(t))return lP(e,t);{let n={};for(let i of t)try{n[i]=lP(e,i,!r)}catch(e){if(e.name===sS.unminifiable_name)continue}return n}}function*lz(e,t){if(e.graph===o_.PARENT)throw new sI("There is no parent graph.");if(e.goto){let t;for(let r of t=Array.isArray(e.goto)?e.goto:[e.goto])if(oy(r))yield[ou,os,r];else if("string"==typeof r)yield[ou,`branch:to:${r}`,"__start__"];else throw Error(`In Command.send, expected Send or string, got ${typeof r}`)}if(e.resume)if("object"==typeof e.resume&&Object.keys(e.resume).length&&Object.keys(e.resume).every(ld))for(let[r,n]of Object.entries(e.resume)){let e=t.filter(e=>e[0]===r&&e[1]===s7).map(e=>e[2]).slice(0,1)??[];e.push(n),yield[r,s7,e]}else yield[ou,s7,e.resume];if(e.update){if("object"!=typeof e.update||!e.update)throw Error("Expected cmd.update to be a dict mapping channel names to update values");if(Array.isArray(e.update))for(let[t,r]of e.update)yield[ou,t,r];else for(let[t,r]of Object.entries(e.update))yield[ou,t,r]}}function*lR(e,t){if(null!=t)if(Array.isArray(e)&&"object"==typeof t&&!Array.isArray(t))for(let r in t)e.includes(r)&&(yield[r,t[r]]);else if(Array.isArray(e))throw Error('Input chunk must be an object when "inputChannels" is an array');else yield[e,t]}function*lM(e,t,r){Array.isArray(e)?(!0===t||t.find(([t,r])=>e.includes(t)))&&(yield lj(r,e)):(!0===t||t.some(([t,r])=>t===e))&&(yield lP(r,e))}function*lL(e,t,r){let n,i=t.filter(([e,t])=>(void 0===e.config||!e.config.tags?.includes(on))&&t[0][0]!==sV&&t[0][0]!==s8);if(!i.length)return;n=i.some(([e])=>e.writes.some(([e,t])=>e===ot))?i.flatMap(([e])=>e.writes.filter(([e,t])=>e===ot).map(([t,r])=>[e.name,r])):Array.isArray(e)?i.flatMap(([t])=>{let{writes:r}=t,n={};for(let[t]of r)e.includes(t)&&(n[t]=(n[t]||0)+1);return Object.values(n).some(e=>e>1)?r.filter(([t])=>e.includes(t)).map(([e,r])=>[t.name,{[e]:r}]):[[t.name,Object.fromEntries(r.filter(([t])=>e.includes(t)))]]}):i.flatMap(([t])=>t.writes.filter(([t,r])=>t===e).map(([e,r])=>[t.name,r]));let a={};for(let[e,t]of n)e in a||(a[e]=[]),a[e].push(t);let s={};for(let e in a)if(1===a[e].length){let[t]=a[e];s[e]=t}else s[e]=a[e];r&&(s.__metadata__={cached:r}),yield s}function lZ(e){let t=typeof e[sD];if("number"===t)return 0;if("string"===t)return"";for(let t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;let r=typeof e[t];if("number"===r)return 0;if("string"===r)return"";break}}function lD(e,t){if(!(Object.keys(e).length>0))return t;{let r=lZ(t);return Object.fromEntries(Object.entries(t).filter(([t,n])=>n>(e[t]??r)))}}function lU(e,t){return!e||Array.isArray(e)||e instanceof Date||"object"!=typeof e?{[t]:e}:e}function lF(e,t){return null===e?{configurable:t}:e?.configurable===void 0?{...e,configurable:t}:{...e,configurable:{...e.configurable,...t}}}function lB(e,t){let r=t?.parents??{};return Object.keys(r).length>0?lF(e,{[s3]:{...r,[e.configurable?.checkpoint_ns??""]:e.configurable?.checkpoint_id}}):e}function lV(...e){let t=[...new Set(e.filter(Boolean))];if(0===t.length)return{signal:void 0,dispose:void 0};if(1===t.length)return{signal:t[0],dispose:void 0};let r=new AbortController,n=()=>{let e=t.find(e=>e.aborted)?.reason;r.abort(e),t.forEach(e=>e.removeEventListener("abort",n))};t.forEach(e=>e.addEventListener("abort",n,{once:!0}));let i=t.find(e=>e.aborted);return i&&r.abort(i.reason),{signal:r.signal,dispose:()=>{t.forEach(e=>e.removeEventListener("abort",n))}}}let lJ=(e,t)=>{if(e||t)return e?t?Array.isArray(e)&&Array.isArray(t)?[...e,...t]:Array.isArray(e)?[...e,t]:Array.isArray(t)?[e,...t]:[e,t]:e:t};var lW=class{func;name;input;retry;cache;callbacks;__lg_type="call";constructor({func:e,name:t,input:r,retry:n,cache:i,callbacks:a}){this.func=e,this.name=t,this.input=r,this.retry=n,this.cache=i,this.callbacks=a}};function lq(e){return"object"==typeof e&&null!==e&&"__lg_type"in e&&"call"===e.__lg_type}function lK(e,t){let r=new lh({func:e=>t(...e),name:e,trace:!1,recurse:!1});return new k.zZ({name:e,first:r,last:new l$([{channel:ot,value:lw}],[on])})}function lG(e,t){return new lh({func:(e,r)=>t(e,r),name:e,trace:!1,recurse:!1})}let lH=e=>void 0!==e?e+1:1;function lY(e,t){if(null==t)return!1;for(let r of e)if(t[r])return!0;return!1}function lX(e){let t;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t=null==t?e[r]:st(t,e[r]));return t}function lQ(e,t,r){let n=lZ(e.channel_versions),i=e.versions_seen[s8]??{},a=!1;if((e.channel_versions[sD]??n)>(i[sD]??n))a=!0;else for(let t in e.channel_versions)if(Object.prototype.hasOwnProperty.call(e.channel_versions,t)&&e.channel_versions[t]>(i[t]??n)){a=!0;break}let s=r.some(e=>"*"===t?!e.config?.tags?.includes(on):t.includes(e.name));return a&&s}function l0(e,t,r,n,i=!1){let a,s=new Set;if(Array.isArray(n))s=new Set(n.filter(e=>r.writes.some(([t,r])=>t===e)));else{for(let[e]of r.writes)if(e===n){s=new Set([e]);break}s=s||new Set}if(i&&s.size>0){let i=Object.fromEntries(Object.entries(t).filter(([e,t])=>s.has(e))),o=sP(e,i,-1),l=sC(i,o);l4(a7(o),l,[r],void 0,void 0),a=lj({...t,...l},n)}else a=lj(t,n);return a}function l1(e,t,r){for(let[e,n]of r)if([oo,os].includes(e)&&null!=n){if(!oy(n))throw new sI(`Invalid packet type, expected SendProtocol, got ${JSON.stringify(n)}`);if(!(n.node in t))throw new sI(`Invalid node name "${n.node}" in Send packet`)}e(r)}let l2=new Set([oe,oo,s7,s8,ot,sV]);function l4(e,t,r,n,i){r.sort((e,t)=>{let r=e.path?.slice(0,3)||[],n=t.path?.slice(0,3)||[];for(let e=0;e<Math.min(r.length,n.length);e+=1){if(r[e]<n[e])return -1;if(r[e]>n[e])return 1}return r.length-n.length});let a=r.some(e=>e.triggers.length>0),s=sN(t);for(let t of r)for(let r of(e.versions_seen[t.name]??={},t.triggers))r in e.channel_versions&&(e.versions_seen[t.name][r]=e.channel_versions[r]);let o=lX(e.channel_versions),l=new Set(r.flatMap(e=>e.triggers).filter(e=>!oc.includes(e))),u=!1;for(let t of l)t in s&&s[t].consume()&&void 0!==n&&(e.channel_versions[t]=n(o),u=!0);let c={};for(let e of r)for(let[t,r]of e.writes)l2.has(t)||t in s&&(c[t]??=[],c[t].push(r));null!=o&&null!=n&&(o=u?n(o):o);let d=new Set;for(let[t,r]of Object.entries(c))if(t in s){let i,a=s[t];try{i=a.update(r)}catch(e){if(e.name===sI.unminifiable_name){let n=new sI(`Invalid update for channel "${t}" with values ${JSON.stringify(r)}: ${e.message}`);throw n.lc_error_code=e.lc_error_code,n}throw e}i&&void 0!==n&&(e.channel_versions[t]=n(o),a.isAvailable()&&d.add(t))}if(a)for(let t in s){if(!Object.prototype.hasOwnProperty.call(s,t))continue;let r=s[t];r.isAvailable()&&!d.has(t)&&r.update([])&&void 0!==n&&(e.channel_versions[t]=n(o),r.isAvailable()&&d.add(t))}if(a&&!lY(d,i))for(let t in s){if(!Object.prototype.hasOwnProperty.call(s,t))continue;let r=s[t];r.finish()&&void 0!==n&&(e.channel_versions[t]=n(o),r.isAvailable()&&d.add(t))}return d}function*l6(e,t,r){if(null!=r.updatedChannels&&null!=r.triggerToNodes){let e=new Set;for(let t of r.updatedChannels)for(let n of r.triggerToNodes[t]??[])e.add(n);yield*[...e].sort();return}if(!(()=>{for(let t in e.channel_versions)if(null!==e.channel_versions[t])return!1;return!0})())for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(yield e)}function l9(e,t,r,n,i,a,s){let o={},l=n[os];if(l?.isAvailable()){let u=l.get().length;for(let l=0;l<u;l+=1){let u=l3([oo,l],e,t,r,n,i,a,s);void 0!==u&&(o[u.id]=u)}}for(let l of l6(e,r,s)){let u=l3([ol,l],e,t,r,n,i,a,s);void 0!==u&&(o[u.id]=u)}return o}function l3(e,t,r,n,i,a,s,o){let{step:l,checkpointer:u,manager:c}=o,d=a.configurable??{},p=d.checkpoint_ns??"";if(e[0]===oo&&lq(e[e.length-1])){let h=e[e.length-1],f=lK(h.name,h.func),m=[oo],g=""===p?h.name:`${p}${od}${h.name}`,y=t2(JSON.stringify([g,l.toString(),h.name,oo,e[1],e[2]]),t.id),v=`${g}${op}${y}`,_=[...e.slice(0,3),!0],b={langgraph_step:l,langgraph_node:h.name,langgraph_triggers:m,langgraph_path:_,langgraph_checkpoint_ns:v};if(!s)return{id:y,name:h.name,interrupts:[],path:_};{let e=[];return{name:h.name,input:h.input,proc:f,writes:e,config:(0,k.tn)((0,k.SV)(a,{metadata:b,store:o.store??a.store}),{runName:h.name,callbacks:c?.getChild(`graph:step:${l}`),configurable:{[sY]:y,[sW]:t=>l1(t=>e.push(...t),n,t),[sK]:(r,n=!1)=>l0(t,i,{name:h.name,writes:e,triggers:m,path:_},r,n),[sG]:u??d[sG],[s3]:{...d[s3],[p]:t.id},[s0]:l8({pendingWrites:r??[],taskId:y,currentTaskInput:h.input,resumeMap:a.configurable?.[sQ],namespaceHash:lc(v)}),[s1]:t.channel_values[or],checkpoint_id:void 0,checkpoint_ns:v}}),triggers:m,retry_policy:h.retry,cache_key:h.cache?{key:lc((h.cache.keyFunc??JSON.stringify)([h.input])),ns:[sJ,h.name??"__dynamic__"],ttl:h.cache.ttl}:void 0,id:y,path:_,writers:[]}}}if(e[0]===oo){let h="number"==typeof e[1]?e[1]:parseInt(e[1],10);if(!i[os]?.isAvailable())return;let f=i[os].get();if(h<0||h>=f.length)return;let m=om(f[h])&&!oy(f[h])?new og(f[h].node,f[h].args):f[h];if(!om(m))return void console.warn(`Ignoring invalid packet ${JSON.stringify(m)} in pending sends.`);if(!(m.node in n))return void console.warn(`Ignoring unknown node name ${m.node} in pending sends.`);let g=[oo],y=""===p?m.node:`${p}${od}${m.node}`,v=t2(JSON.stringify([y,l.toString(),m.node,oo,h.toString()]),t.id),_=`${y}${op}${v}`,b={langgraph_step:l,langgraph_node:m.node,langgraph_triggers:g,langgraph_path:e.slice(0,3),langgraph_checkpoint_ns:_};if(!s)return{id:v,name:m.node,interrupts:[],path:e};{let s=n[m.node],h=s.getNode();if(void 0!==h){void 0!==s.metadata&&(b={...b,...s.metadata});let f=[];return{name:m.node,input:m.args,proc:h,subgraphs:s.subgraphs,writes:f,config:(0,k.tn)((0,k.SV)(a,{metadata:b,tags:s.tags,store:o.store??a.store}),{runName:m.node,callbacks:c?.getChild(`graph:step:${l}`),configurable:{[sY]:v,[sW]:e=>l1(e=>f.push(...e),n,e),[sK]:(r,n=!1)=>l0(t,i,{name:m.node,writes:f,triggers:g,path:e},r,n),[sG]:u??d[sG],[s3]:{...d[s3],[p]:t.id},[s0]:l8({pendingWrites:r??[],taskId:v,currentTaskInput:m.args,resumeMap:a.configurable?.[sQ],namespaceHash:lc(_)}),[s1]:t.channel_values[or],checkpoint_id:void 0,checkpoint_ns:_}}),triggers:g,retry_policy:s.retryPolicy,cache_key:s.cachePolicy?{key:lc((s.cachePolicy.keyFunc??JSON.stringify)([m.args])),ns:[sJ,s.name??"__dynamic__",m.node],ttl:s.cachePolicy.ttl}:void 0,id:v,path:e,writers:s.getWriters()}}}}else if(e[0]===ol){let h=e[1].toString(),f=n[h];if(void 0===f)return;if(r?.length){let e=t2(JSON.stringify([""===p?h:`${p}${od}${h}`,l.toString(),h,ol,h]),t.id);if(r.some(t=>t[0]===e&&t[1]!==sV))return}let m=lZ(t.channel_versions);if(void 0===m)return;let g=t.versions_seen[h]??{},y=f.triggers.find(e=>!!i[e].isAvailable()&&(t.channel_versions[e]??m)>(g[e]??m));if(void 0!==y){let m=l5(f,i,s);if(void 0===m)return;let g=""===p?h:`${p}${od}${h}`,v=t2(JSON.stringify([g,l.toString(),h,ol,[y]]),t.id),_=`${g}${op}${v}`,b={langgraph_step:l,langgraph_node:h,langgraph_triggers:[y],langgraph_path:e,langgraph_checkpoint_ns:_};if(!s)return{id:v,name:h,interrupts:[],path:e};{let s=f.getNode();if(void 0!==s){void 0!==f.metadata&&(b={...b,...f.metadata});let g=[];return{name:h,input:m,proc:s,subgraphs:f.subgraphs,writes:g,config:(0,k.tn)((0,k.SV)(a,{metadata:b,tags:f.tags,store:o.store??a.store}),{runName:h,callbacks:c?.getChild(`graph:step:${l}`),configurable:{[sY]:v,[sW]:e=>l1(e=>{g.push(...e)},n,e),[sK]:(r,n=!1)=>l0(t,i,{name:h,writes:g,triggers:[y],path:e},r,n),[sG]:u??d[sG],[s3]:{...d[s3],[p]:t.id},[s0]:l8({pendingWrites:r??[],taskId:v,currentTaskInput:m,resumeMap:a.configurable?.[sQ],namespaceHash:lc(_)}),[s1]:t.channel_values[or],checkpoint_id:void 0,checkpoint_ns:_}}),triggers:[y],retry_policy:f.retryPolicy,cache_key:f.cachePolicy?{key:lc((f.cachePolicy.keyFunc??JSON.stringify)([m])),ns:[sJ,f.name??"__dynamic__",h],ttl:f.cachePolicy.ttl}:void 0,id:v,path:e,writers:f.getWriters()}}}}}}function l5(e,t,r){let n;if("object"!=typeof e.channels||Array.isArray(e.channels))if(Array.isArray(e.channels)){let r=!1;for(let i of e.channels)try{n=lP(t,i,!1),r=!0;break}catch(e){if(e.name===sS.unminifiable_name)continue;throw e}if(!r)return}else throw Error(`Invalid channels type, expected list or dict, got ${e.channels}`);else for(let[r,i]of(n={},Object.entries(e.channels)))if(e.triggers.includes(i))try{n[r]=lP(t,i,!1)}catch(e){if(e.name===sS.unminifiable_name)return;throw e}else if(i in t)try{n[r]=lP(t,i,!1)}catch(e){if(e.name===sS.unminifiable_name)continue;throw e}return r&&void 0!==e.mapper&&(n=e.mapper(n)),n}function l8({pendingWrites:e,taskId:t,currentTaskInput:r,resumeMap:n,namespaceHash:i}){let a=e.find(([e,t])=>e===ou&&t===s7)?.[2],s={callCounter:0,interruptCounter:-1,resume:(()=>{let r=e.filter(([e,r])=>e===t&&r===s7).flatMap(([e,t,r])=>r);if(null!=n&&i in n){let e=n[i];r.push(e)}return r})(),nullResume:a,subgraphCounter:0,currentTaskInput:r,consumeNullResume:()=>{if(s.nullResume)return delete s.nullResume,e.splice(e.findIndex(([e,t])=>e===ou&&t===s7),1),a}};return s}let l7={blue:{start:"\x1b[34m",end:"\x1b[0m"},green:{start:"\x1b[32m",end:"\x1b[0m"},yellow:{start:"\x1b[33;1m",end:"\x1b[0m"}},ue=(e,t)=>`${e.start}${t}${e.end}`;function*ut(e){for(let{id:t,name:r,input:n,config:i,triggers:a,writes:s}of e){if(i?.tags?.includes(on))continue;let e=s.filter(([e,r])=>e===t&&r===s8).map(([,e])=>e);yield{id:t,name:r,input:n,triggers:a,interrupts:e}}}function ur(e){return"object"==typeof e&&null!==e&&"$writes"in e&&Array.isArray(e.$writes)}function un(e){let t={};for(let[r,n]of e){let e=String(r);if(e in t){let r=ur(t[e])?t[e].$writes:[t[e]];r.push(n),t[e]={$writes:r}}else t[e]=n}return t}function*ui(e,t){for(let[{id:r,name:n,config:i},a]of e)i?.tags?.includes(on)||(yield{id:r,name:n,result:un(a.filter(([e])=>Array.isArray(t)?t.includes(e):e===t)),interrupts:a.filter(e=>e[0]===s8).map(e=>e[1])})}function*ua(e,t,r,n,i,a,s,o){function l(e){let t={};return null!=e.callbacks&&(t.callbacks=e.callbacks),null!=e.configurable&&(t.configurable=e.configurable),null!=e.maxConcurrency&&(t.max_concurrency=e.maxConcurrency),null!=e.metadata&&(t.metadata=e.metadata),null!=e.recursionLimit&&(t.recursion_limit=e.recursionLimit),null!=e.runId&&(t.run_id=e.runId),null!=e.runName&&(t.run_name=e.runName),null!=e.tags&&(t.tags=e.tags),t}let u=e.configurable?.checkpoint_ns,c={};for(let t of i){if(!(t.subgraphs?.length?t.subgraphs:[t.proc]).find(lC))continue;let r=`${t.name}:${t.id}`;u&&(r=`${u}|${r}`),c[t.id]={configurable:{thread_id:e.configurable?.thread_id,checkpoint_ns:r}}}yield{config:l(e),values:lj(t,r),metadata:n,next:i.map(e=>e.name),tasks:us(i,a,c,o),parentConfig:s?l(s):void 0}}function us(e,t,r,n){return e.map(e=>{let i=t.find(([t,r])=>t===e.id&&r===sV)?.[2],a=t.filter(([t,r])=>t===e.id&&r===s8).map(([,,e])=>e),s=(()=>{if(i||a.length||!t.length)return;let r=t.findIndex(([t,r])=>t===e.id&&r===ot);if(r>=0)return t[r][2];if("string"==typeof n)return t.find(([t,r])=>t===e.id&&r===n)?.[2];if(Array.isArray(n)){let r=t.filter(([t,r])=>t===e.id&&n.includes(r)).map(([,e,t])=>[e,t]);if(!r.length)return;return un(r)}})();if(i)return{id:e.id,name:e.name,path:e.path,error:i,interrupts:a,result:s};let o=r?.[e.id];return{id:e.id,name:e.name,path:e.path,interrupts:a,...void 0!==o?{state:o}:{},result:s}})}function uo(e,t,r){console.log([`${ue(l7.blue,`[${e}:checkpoint]`)}`,`\x1b[1m State at the end of step ${e}:\x1b[0m
`,JSON.stringify(lj(t,r),null,2)].join(""))}function ul(e,t){let r=t.length;console.log([`${ue(l7.blue,`[${e}:tasks]`)}`,`\x1b[1m Starting step ${e} with ${r} task${1===r?"":"s"}:\x1b[0m
`,t.map(e=>`- ${ue(l7.green,String(e.name))} -> ${JSON.stringify(e.input,null,2)}`).join("\n")].join(""))}function uu(e,t,r){let n={};for(let[e,i]of t)r.includes(e)&&(n[e]||(n[e]=[]),n[e].push(i));console.log([`${ue(l7.blue,`[${e}:writes]`)}`,`\x1b[1m Finished step ${e} with writes to ${Object.keys(n).length} channel${1!==Object.keys(n).length?"s":""}:\x1b[0m
`,Object.entries(n).map(([e,t])=>`- ${ue(l7.yellow,e)} -> ${t.map(e=>JSON.stringify(e)).join(", ")}`).join("\n")].join(""))}var uc=class extends x.bO{_abortController;_innerReader;constructor(e,t){let r=e.getReader(),n=t??new AbortController;super({start(e){return t();function t(){return r.read().then(({done:r,value:n})=>r?void e.close():(e.enqueue(n),t()))}}}),this._abortController=n,this._innerReader=r}async cancel(e){this._abortController.abort(e),this._innerReader.releaseLock()}get signal(){return this._abortController.signal}},ud=class extends x.bO{modes;controller;passthroughFn;_closed=!1;get closed(){return this._closed}constructor(e){let t,r=new Promise(e=>{t=e});super({start:e=>{t(e)}}),r.then(e=>{this.controller=e}),this.passthroughFn=e.passthroughFn,this.modes=e.modes}push(e){this.passthroughFn?.(e),this.controller.enqueue(e)}close(){try{this.controller.close()}catch(e){}finally{this._closed=!0}}error(e){this.controller.error(e)}};function up(e){return JSON.stringify(e,function(e,t){let r=this[e];if(null!=r&&"object"==typeof r&&"toDict"in r&&"function"==typeof r.toDict){let{type:e,data:t}=r.toDict();return{...t,type:e}}return t})}function uh(e){return e instanceof Error?{error:e.name,message:e.message}:{error:"Error",message:JSON.stringify(e)}}function uf(e){return"object"==typeof e&&null!=e&&"configurable"in e&&"object"==typeof e.configurable&&null!=e.configurable}function um(e){return uf(e)&&e.configurable.thread_id?{thread_id:e.configurable.thread_id,checkpoint_ns:e.configurable.checkpoint_ns||"",checkpoint_id:e.configurable.checkpoint_id||null,checkpoint_map:e.configurable.checkpoint_map||null}:null}function ug(e){if(uf(e)){let t=Object.fromEntries(Object.entries(e.configurable).filter(([e])=>!e.startsWith("__"))),r={...e,configurable:t};return delete r.callbacks,r}return e}function uy(e){let t={...e,checkpoint:um(e.config),parent_checkpoint:um(e.parentConfig),config:ug(e.config),parent_config:ug(e.parentConfig),tasks:e.tasks.map(e=>{if(uf(e.state)){let t=um(e.state);if(null!=t){let r={...e,checkpoint:t};return delete r.state,r}}return e})};return delete t.parentConfig,t}function uv(e){let t=new TextEncoder;return new ReadableStream({async start(r){let n=e=>{r.enqueue(t.encode(`event: ${e.event}
data: ${up(e.data)}

`))};try{for await(let t of e){let[e,r,i]=t,a=i;if("debug"===r){let e=i;"checkpoint"===e.type&&(a={...e,payload:uy(e.payload)})}"checkpoints"===r&&(a=uy(i));let s=e?.length?`${r}|${e.join("|")}`:r;n({event:s,data:a})}}catch(e){n({event:"error",data:uh(e)})}r.close()}})}let u_=Symbol.for("INPUT_DONE"),ub=Symbol.for("INPUT_RESUMING"),uw=25;function uk(...e){return new ud({passthroughFn:t=>{for(let r of e)r.modes.has(t[1])&&r.push(t)},modes:new Set(e.flatMap(e=>Array.from(e.modes)))})}var ux=class extends sc{cache;queue=Promise.resolve();constructor(e){super(),this.cache=e}async get(e){return this.enqueueOperation("get",e)}async set(e){return this.enqueueOperation("set",e)}async clear(e){return this.enqueueOperation("clear",e)}async stop(){await this.queue}enqueueOperation(e,...t){let r=this.queue.then(()=>this.cache[e](...t));return this.queue=r.then(()=>void 0,()=>void 0),r}},u$=class e{input;output;config;checkpointer;checkpointerGetNextVersion;channels;checkpoint;checkpointIdSaved;checkpointConfig;checkpointMetadata;checkpointNamespace;checkpointPendingWrites=[];checkpointPreviousVersions;step;stop;durability;outputKeys;streamKeys;nodes;skipDoneTasks;prevCheckpointConfig;updatedChannels;status="pending";tasks={};stream;checkpointerPromises=[];isNested;_checkpointerChainedPromise=Promise.resolve();store;cache;manager;interruptAfter;interruptBefore;toInterrupt=[];debug=!1;triggerToNodes;get isResuming(){let e=!1;if(sD in this.checkpoint.channel_versions)e=!0;else for(let t in this.checkpoint.channel_versions)if(Object.prototype.hasOwnProperty.call(this.checkpoint.channel_versions,t)){e=!0;break}let t=this.config.configurable?.[sH]!==void 0&&this.config.configurable?.[sH],r=null===this.input||void 0===this.input,n=ob(this.input)&&null!=this.input.resume,i=this.input===ub,a=!this.isNested&&this.config.metadata?.run_id!==void 0&&this.checkpointMetadata?.run_id!==void 0&&this.config.metadata.run_id===this.checkpointMetadata?.run_id;return e&&(t||r||n||i||a)}constructor(e){this.input=e.input,this.checkpointer=e.checkpointer,void 0!==this.checkpointer?this.checkpointerGetNextVersion=this.checkpointer.getNextVersion.bind(this.checkpointer):this.checkpointerGetNextVersion=lH,this.checkpoint=e.checkpoint,this.checkpointMetadata=e.checkpointMetadata,this.checkpointPreviousVersions=e.checkpointPreviousVersions,this.channels=e.channels,this.checkpointPendingWrites=e.checkpointPendingWrites,this.step=e.step,this.stop=e.stop,this.config=e.config,this.checkpointConfig=e.checkpointConfig,this.isNested=e.isNested,this.manager=e.manager,this.outputKeys=e.outputKeys,this.streamKeys=e.streamKeys,this.nodes=e.nodes,this.skipDoneTasks=e.skipDoneTasks,this.store=e.store,this.cache=e.cache?new ux(e.cache):void 0,this.stream=e.stream,this.checkpointNamespace=e.checkpointNamespace,this.prevCheckpointConfig=e.prevCheckpointConfig,this.interruptAfter=e.interruptAfter,this.interruptBefore=e.interruptBefore,this.durability=e.durability,this.debug=e.debug,this.triggerToNodes=e.triggerToNodes}static async initialize(t){let{config:r,stream:n}=t;void 0!==n&&r.configurable?.[sX]!==void 0&&(n=uk(n,r.configurable[sX]));let i=!r.configurable||!("checkpoint_id"in r.configurable),a=r.configurable?.[s0];r.configurable&&a&&(a.subgraphCounter>0&&(r=lF(r,{[s6]:[r.configurable[s6],a.subgraphCounter.toString()].join(od)})),a.subgraphCounter+=1);let s=sK in(r.configurable??{});s||r.configurable?.checkpoint_ns===void 0||r.configurable?.checkpoint_ns===""||(r=lF(r,{checkpoint_ns:"",checkpoint_id:void 0}));let o=r;r.configurable?.[s3]!==void 0&&r.configurable?.[s3]?.[r.configurable?.checkpoint_ns]&&(o=lF(r,{checkpoint_id:r.configurable[s3][r.configurable?.checkpoint_ns]}));let l=r.configurable?.checkpoint_ns?.split(od)??[],u=await t.checkpointer?.getTuple(o)??{config:r,checkpoint:a8(),metadata:{source:"input",step:-2,parents:{}},pendingWrites:[]};o={...r,...u.config,configurable:{checkpoint_ns:"",...r.configurable,...u.config.configurable}};let c=u.parentConfig,d=a7(u.checkpoint),p={...u.metadata},h=u.pendingWrites??[],f=sC(t.channelSpecs,d),m=(p.step??0)+1,g=m+(r.recursionLimit??uw)+1,y={...d.channel_versions},v=t.store?new so(t.store):void 0;return v&&await v.start(),new e({input:t.input,config:r,checkpointer:t.checkpointer,checkpoint:d,checkpointMetadata:p,checkpointConfig:o,prevCheckpointConfig:c,checkpointNamespace:l,channels:f,isNested:s,manager:t.manager,skipDoneTasks:i,step:m,stop:g,checkpointPreviousVersions:y,checkpointPendingWrites:h,outputKeys:t.outputKeys??[],streamKeys:t.streamKeys??[],nodes:t.nodes,stream:n,store:v,cache:t.cache,interruptAfter:t.interruptAfter,interruptBefore:t.interruptBefore,durability:t.durability,debug:t.debug,triggerToNodes:t.triggerToNodes})}_checkpointerPutAfterPrevious(e){this._checkpointerChainedPromise=this._checkpointerChainedPromise.then(()=>this.checkpointer?.put(e.config,e.checkpoint,e.metadata,e.newVersions)),this.checkpointerPromises.push(this._checkpointerChainedPromise)}putWrites(e,t){let r=t;if(0===r.length)return;for(let[t,n]of(r.every(([e])=>e in sr)&&(r=Array.from(new Map(r.map(e=>[e[0],e])).values())),this.checkpointPendingWrites=this.checkpointPendingWrites.filter(t=>t[0]!==e),r))this.checkpointPendingWrites.push([e,t,n]);let n=lF(this.checkpointConfig,{[s6]:this.config.configurable?.checkpoint_ns??"",[s4]:this.checkpoint.id});if("exit"!==this.durability&&null!=this.checkpointer&&this.checkpointerPromises.push(this.checkpointer.putWrites(n,r,e)),this.tasks&&this._outputWrites(e,r),!t.length||!this.cache||!this.tasks)return;let i=this.tasks[e];null!=i&&null!=i.cache_key&&t[0][0]!==sV&&t[0][0]!==s8&&this.cache.set([{key:[i.cache_key.ns,i.cache_key.key],value:i.writes,ttl:i.cache_key.ttl}])}_outputWrites(e,t,r=!1){let n=this.tasks[e];if(void 0!==n){if(void 0!==n.config&&(n.config.tags??[]).includes(on))return;if(t.length>0)if(t[0][0]===s8){if(n.path?.[0]===oo&&n.path?.at(-1)===!0)return;let e=t.filter(e=>e[0]===s8).flatMap(e=>e[1]);this._emit([["updates",{[s8]:e}],["values",{[s8]:e}]])}else t[0][0]!==sV&&this._emit(lg(lf(lL(this.outputKeys,[[n,t]],r),"updates")));r||this._emit(lg(lf(ui([[n,t]],this.streamKeys),"tasks")))}}async _matchCachedWrites(){if(!this.cache)return[];let e=[],t=([e,t])=>`ns:${e.join(",")}|key:${t}`,r=[],n={};for(let e of Object.values(this.tasks))null==e.cache_key||e.writes.length||(r.push([e.cache_key.ns,e.cache_key.key]),n[t([e.cache_key.ns,e.cache_key.key])]=e);if(0===r.length)return[];for(let{key:i,value:a}of(await this.cache.get(r))){let r=n[t(i)];null!=r&&(r.writes.push(...a),e.push({task:r,result:a}))}return e}async tick(e){this.store&&!this.store.isRunning&&await this.store?.start();let{inputKeys:t=[]}=e;if("pending"!==this.status)throw Error(`Cannot tick when status is no longer "pending". Current status: "${this.status}"`);if([u_,ub].includes(this.input))if(this.toInterrupt.length>0)throw this.status="interrupt_before",new sv;else{if(!Object.values(this.tasks).every(e=>e.writes.length>0))return!1;let e=Object.values(this.tasks).flatMap(e=>e.writes);this.updatedChannels=l4(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes);let t=await lm(lf(lM(this.outputKeys,e,this.channels),"values"));if(this._emit(t),this.checkpointPendingWrites=[],await this._putCheckpoint({source:"loop"}),lQ(this.checkpoint,this.interruptAfter,Object.values(this.tasks)))throw this.status="interrupt_after",new sv;this.config.configurable?.[sH]!==void 0&&delete this.config.configurable?.[sH]}else await this._first(t);if(this.step>this.stop)return this.status="out_of_steps",!1;let r=l9(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.config,!0,{step:this.step,checkpointer:this.checkpointer,isResuming:this.isResuming,manager:this.manager,store:this.store,stream:this.stream,triggerToNodes:this.triggerToNodes,updatedChannels:this.updatedChannels});if(this.tasks=r,this.checkpointer&&this._emit(await lm(lf(ua(this.checkpointConfig,this.channels,this.streamKeys,this.checkpointMetadata,Object.values(this.tasks),this.checkpointPendingWrites,this.prevCheckpointConfig,this.outputKeys),"checkpoints"))),0===Object.values(this.tasks).length)return this.status="done",!1;if(this.skipDoneTasks&&this.checkpointPendingWrites.length>0){for(let[e,t,r]of this.checkpointPendingWrites){if(t===sV||t===s8||t===s7)continue;let n=Object.values(this.tasks).find(t=>t.id===e);n&&n.writes.push([t,r])}for(let e of Object.values(this.tasks))e.writes.length>0&&this._outputWrites(e.id,e.writes,!0)}if(Object.values(this.tasks).every(e=>e.writes.length>0))return this.tick({inputKeys:t});if(lQ(this.checkpoint,this.interruptBefore,Object.values(this.tasks)))throw this.status="interrupt_before",new sv;let n=await lm(lf(ut(Object.values(this.tasks)),"tasks"));return this._emit(n),!0}async finishAndHandleError(e){"exit"===this.durability&&(!this.isNested||void 0!==e||this.checkpointNamespace.every(e=>!e.includes(op)))&&(this._putCheckpoint(this.checkpointMetadata),this._flushPendingWrites());let t=this._suppressInterrupt(e);return(t||void 0===e)&&(this.output=lj(this.channels,this.outputKeys)),t&&(void 0!==this.tasks&&this.checkpointPendingWrites.length>0&&Object.values(this.tasks).some(e=>e.writes.length>0)&&(this.updatedChannels=l4(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes),this._emit(lg(lf(lM(this.outputKeys,Object.values(this.tasks).flatMap(e=>e.writes),this.channels),"values")))),sx(e)&&!e.interrupts.length&&this._emit([["updates",{[s8]:[]}],["values",{[s8]:[]}]])),t}async acceptPush(e,t,r){if(this.interruptAfter?.length>0&&lQ(this.checkpoint,this.interruptAfter,[e]))return void this.toInterrupt.push(e);let n=l3([oo,e.path??[],t,e.id,r],this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,e.config??{},!0,{step:this.step,checkpointer:this.checkpointer,manager:this.manager,store:this.store,stream:this.stream});if(n){if(this.interruptBefore?.length>0&&lQ(this.checkpoint,this.interruptBefore,[n]))return void this.toInterrupt.push(n);for(let{task:e}of(this._emit(lg(lf(ut([n]),"tasks"))),this.debug&&ul(this.step,[n]),this.tasks[n.id]=n,this.skipDoneTasks&&this._matchWrites({[n.id]:n}),await this._matchCachedWrites()))this._outputWrites(e.id,e.writes,!0);return n}}_suppressInterrupt(e){return sx(e)&&!this.isNested}async _first(e){let{configurable:t}=this.config,r=t?.[s0];if(r&&void 0!==r.nullResume&&this.putWrites(ou,[[s7,r.nullResume]]),ob(this.input)){let e=null!=this.input.resume;if(null!=this.input.resume&&"object"==typeof this.input.resume&&Object.keys(this.input.resume).every(ld)&&(this.config.configurable??={},this.config.configurable[sQ]=this.input.resume),e&&null==this.checkpointer)throw Error("Cannot use Command(resume=...) without checkpointer");let t={};for(let[e,r,n]of lz(this.input,this.checkpointPendingWrites))t[e]??=[],t[e].push([r,n]);if(0===Object.keys(t).length)throw new s$("Received empty Command input");for(let[e,r]of Object.entries(t))this.putWrites(e,r)}let n=(this.checkpointPendingWrites??[]).filter(e=>e[0]===ou).map(e=>e.slice(1));n.length>0&&l4(this.checkpoint,this.channels,[{name:sF,writes:n,triggers:[]}],this.checkpointerGetNextVersion,this.triggerToNodes);let i=ob(this.input)&&n.length>0;if(this.isResuming||i){for(let e in this.channels)if(Object.prototype.hasOwnProperty.call(this.channels,e)&&void 0!==this.checkpoint.channel_versions[e]){let t=this.checkpoint.channel_versions[e];this.checkpoint.versions_seen[s8]={...this.checkpoint.versions_seen[s8],[e]:t}}let e=await lm(lf(lM(this.outputKeys,!0,this.channels),"values"));this._emit(e)}if(this.isResuming)this.input=ub;else if(i)await this._putCheckpoint({source:"input"}),this.input=u_;else{let t=await lm(lR(e,this.input));if(t.length>0){let e=l9(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.config,!0,{step:this.step});this.updatedChannels=l4(this.checkpoint,this.channels,Object.values(e).concat([{name:sF,writes:t,triggers:[]}]),this.checkpointerGetNextVersion,this.triggerToNodes),await this._putCheckpoint({source:"input"}),this.input=u_}else if(sH in(this.config.configurable??{}))this.input=u_;else throw new s$(`Received no input writes for ${JSON.stringify(e,null,2)}`)}this.isNested||(this.config=lF(this.config,{[sH]:this.isResuming}))}_emit(e){for(let[t,r]of e)if(this.stream.modes.has(t)&&this.stream.push([this.checkpointNamespace,t,r]),("checkpoints"===t||"tasks"===t)&&this.stream.modes.has("debug")){let e="checkpoints"===t?this.step-1:this.step,n=new Date().toISOString(),i="checkpoints"===t?"checkpoint":"object"==typeof r&&null!=r&&"result"in r?"task_result":"task";this.stream.push([this.checkpointNamespace,"debug",{step:e,type:i,timestamp:n,payload:r}])}}_putCheckpoint(e){let t=this.checkpointMetadata===e,r=null!=this.checkpointer&&("exit"!==this.durability||t),n=e=>{this.prevCheckpointConfig=this.checkpointConfig?.configurable?.checkpoint_id?this.checkpointConfig:void 0,this.checkpointConfig=lF(this.checkpointConfig,{[s6]:this.config.configurable?.checkpoint_ns??""});let t={...this.checkpoint.channel_versions},r=lD(this.checkpointPreviousVersions,t);this.checkpointPreviousVersions=t,this._checkpointerPutAfterPrevious({config:{...this.checkpointConfig},checkpoint:a7(e),metadata:{...this.checkpointMetadata},newVersions:r}),this.checkpointConfig={...this.checkpointConfig,configurable:{...this.checkpointConfig.configurable,checkpoint_id:this.checkpoint.id}}};t||(this.checkpointMetadata={...e,step:this.step,parents:this.config.configurable?.[s3]??{}}),this.checkpoint=sP(this.checkpoint,r?this.channels:void 0,this.step,t?{id:this.checkpoint.id}:void 0),r&&n(this.checkpoint),t||(this.step+=1)}_flushPendingWrites(){if(null==this.checkpointer||0===this.checkpointPendingWrites.length)return;let e=lF(this.checkpointConfig,{[s6]:this.config.configurable?.checkpoint_ns??"",[s4]:this.checkpoint.id}),t={};for(let[e,r,n]of this.checkpointPendingWrites)t[e]??=[],t[e].push([r,n]);for(let[r,n]of Object.entries(t))this.checkpointerPromises.push(this.checkpointer.putWrites(e,n,r))}_matchWrites(e){for(let[t,r,n]of this.checkpointPendingWrites){if(r===sV||r===s8||r===s7)continue;let i=Object.values(e).find(e=>e.id===t);i&&i.writes.push([r,n])}for(let t of Object.values(e))t.writes.length>0&&this._outputWrites(t.id,t.writes,!0)}};function uS(e){return(0,K.ny)(e?.message)}var uI=class extends rf.NK{name="StreamMessagesHandler";streamFn;metadatas={};seen={};emittedChatModelRunIds={};stableMessageIdMap={};lc_prefer_streaming=!0;constructor(e){super(),this.streamFn=e}_emit(e,t,r,n=!1){if(n&&void 0!==t.id&&void 0!==this.seen[t.id])return;let i=t.id;null!=r&&((0,K.wk)(t)?i??=`run-${r}-tool-${t.tool_call_id}`:((null==i||i===`run-${r}`)&&(i=this.stableMessageIdMap[r]??i??`run-${r}`),this.stableMessageIdMap[r]??=i)),i!==t.id&&(t.id=i,t.lc_kwargs.id=i),null!=t.id&&(this.seen[t.id]=t),this.streamFn([e[0],"messages",[t,e[1]]])}handleChatModelStart(e,t,r,n,i,a,s,o){!s||a&&(a.includes(oi)||a.includes("nostream"))||(this.metadatas[r]=[s.langgraph_checkpoint_ns.split("|"),{tags:a,name:o,...s}])}handleLLMNewToken(e,t,r,n,i,a){let s=a?.chunk;this.emittedChatModelRunIds[r]=!0,void 0!==this.metadatas[r]&&(uS(s)?this._emit(this.metadatas[r],s.message,r):this._emit(this.metadatas[r],new K.H({content:e}),r))}handleLLMEnd(e,t){if(void 0!==this.metadatas[t]){if(!this.emittedChatModelRunIds[t]){let r=e.generations?.[0]?.[0];(0,K.ny)(r?.message)&&this._emit(this.metadatas[t],r?.message,t,!0),delete this.emittedChatModelRunIds[t]}delete this.metadatas[t],delete this.stableMessageIdMap[t]}}handleLLMError(e,t){delete this.metadatas[t]}handleChainStart(e,t,r,n,i,a,s,o){if(void 0!==a&&o===a.langgraph_node&&(void 0===i||!i.includes(on))&&(this.metadatas[r]=[a.langgraph_checkpoint_ns.split("|"),{tags:i,name:o,...a}],"object"==typeof t)){for(let e of Object.values(t))if(((0,K.ny)(e)||(0,K.AJ)(e))&&void 0!==e.id)this.seen[e.id]=e;else if(Array.isArray(e))for(let t of e)((0,K.ny)(t)||(0,K.AJ)(t))&&void 0!==t.id&&(this.seen[t.id]=t)}}handleChainEnd(e,t){let r=this.metadatas[t];if(delete this.metadatas[t],void 0!==r){if((0,K.ny)(e))this._emit(r,e,t,!0);else if(Array.isArray(e))for(let n of e)(0,K.ny)(n)&&this._emit(r,n,t,!0);else if(null!=e&&"object"==typeof e){for(let n of Object.values(e))if((0,K.ny)(n))this._emit(r,n,t,!0);else if(Array.isArray(n))for(let e of n)(0,K.ny)(e)&&this._emit(r,e,t,!0)}}}handleChainError(e,t){delete this.metadatas[t]}};let uE=500,uA=2,uO=128e3,uT=3,uN=[400,401,402,403,404,405,406,407,409],uC=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||"AbortError"===e.name||"GraphValueError"===e.name||e?.code==="ECONNABORTED")return!1;let t=e?.response?.status??e?.status;return!(t&&uN.includes(+t))&&e?.error?.code!=="insufficient_quota"};async function uP(e,t,r,n){let i,a,s=e.retry_policy??t,o=void 0!==s?s.initialInterval??uE:0,l=0,{config:u}=e;for(r&&(u=lF(u,r)),u={...u,signal:n};!n?.aborted;){e.writes.splice(0,e.writes.length),i=void 0;try{a=await e.proc.invoke(e.input,u);break}catch(n){if((i=n).pregelTaskId=e.id,sw(i)){let t=u?.configurable?.checkpoint_ns,r=i.command;if(r.graph===t){for(let t of e.writers)await t.invoke(r,u);i=void 0;break}if(r.graph===o_.PARENT){let e=oA(t);i.command=new o_({...i.command,graph:e})}}if(sk(i)||void 0===s||(l+=1)>=(s.maxAttempts??uT)||!(s.retryOn??uC)(i))break;o=Math.min(s.maxInterval??uO,o*(s.backoffFactor??uA));let t=s.jitter?Math.floor(o+1e3*Math.random()):o;await new Promise(e=>setTimeout(e,t));let r=i.name??i.constructor.unminifiable_name??i.constructor.name;(s?.logWarning??!0)&&console.log(`Retrying task "${String(e.name)}" after ${o.toFixed(2)}ms (attempt ${l}) after ${r}: ${i}`),u=lF(u,{[sH]:!0})}}return{task:e,result:a,error:i,signalAborted:n?.aborted}}let uj=Symbol.for("promiseAdded");function uz(){let e={next:()=>void 0,wait:Promise.resolve(uj)};function t(r){e.next=()=>{e.wait=new Promise(t),r(uj)}}return e.wait=new Promise(t),e}var uR=class{nodeFinished;loop;constructor({loop:e,nodeFinished:t}){this.loop=e,this.nodeFinished=t}async tick(e={}){let t,{timeout:r,retryPolicy:n,onStepWrite:i,maxConcurrency:a}=e,s=new Set,o=new AbortController,l=o.signal,u=r?AbortSignal.timeout(r):void 0,c=Object.values(this.loop.tasks).filter(e=>0===e.writes.length),{signals:d,disposeCombinedSignal:p}=this._initializeAbortSignals({exceptionSignal:l,stepTimeoutSignal:u,signal:e.signal});for await(let{task:e,error:r,signalAborted:i}of this._executeTasksWithRetry(c,{signals:d,retryPolicy:n,maxConcurrency:a}))this._commit(e,r),sx(r)||sk(r)&&!sx(t)?t=r:r&&(0===s.size||!i)&&(o.abort(),s.add(r));if(p?.(),i?.(this.loop.step,Object.values(this.loop.tasks).map(e=>e.writes).flat()),1===s.size)throw Array.from(s)[0];if(s.size>1)throw AggregateError(Array.from(s),`Multiple errors occurred during superstep ${this.loop.step}. See the "errors" field of this exception for more details.`);if(sx(t)||sk(t)&&this.loop.isNested)throw t}_initializeAbortSignals({exceptionSignal:e,stepTimeoutSignal:t,signal:r}){let n=this.loop.config.configurable?.[s5]??{},i=n.externalAbortSignal??r,a=t??n.timeoutAbortSignal,{signal:s,dispose:o}=lV(i,a,e),l={externalAbortSignal:i,timeoutAbortSignal:a,composedAbortSignal:s};return this.loop.config=lF(this.loop.config,{[s5]:l}),{signals:l,disposeCombinedSignal:o}}async *_executeTasksWithRetry(e,t){let r,{retryPolicy:n,maxConcurrency:i,signals:a}=t??{},s=uz(),o={},l={executingTasksMap:o,barrier:s,retryPolicy:n,scheduleTask:async(e,t,r)=>this.loop.acceptPush(e,t,r)};if(a?.composedAbortSignal?.aborted)throw Error("Abort");let u=0,c=lV(a?.externalAbortSignal,a?.timeoutAbortSignal),d=c.signal?new Promise((e,t)=>{r=()=>t(Error("Abort")),c.signal?.addEventListener("abort",r,{once:!0})}):void 0;for(;(0===u||Object.keys(o).length>0)&&e.length;){for(;Object.values(o).length<(i??e.length)&&u<e.length;u+=1){let t=e[u];o[t.id]=uP(t,n,{[sq]:uM?.bind(l,this,t)},a?.composedAbortSignal).catch(e=>({task:t,error:e,signalAborted:a?.composedAbortSignal?.aborted}))}let t=await Promise.race([...Object.values(o),...d?[d]:[],s.wait]);t!==uj&&(yield t,null!=r&&(c.signal?.removeEventListener("abort",r),c.dispose?.()),delete o[t.task.id])}}_commit(e,t){if(void 0!==t)if(sx(t)){if(t.interrupts.length){let r=t.interrupts.map(e=>[s8,e]),n=e.writes.filter(e=>e[0]===s7);n.length&&r.push(...n),this.loop.putWrites(e.id,r)}}else sk(t)&&e.writes.length?this.loop.putWrites(e.id,e.writes):this.loop.putWrites(e.id,[[sV,{message:t.message,name:t.name}]]);else this.nodeFinished&&(e.config?.tags==null||!e.config.tags.includes(on))&&this.nodeFinished(String(e.name)),0===e.writes.length&&e.writes.push([oe,null]),this.loop.putWrites(e.id,e.writes)}};async function uM(e,t,r,n,i,a={}){let s=t.config?.configurable?.[s0];if(!s)throw Error(`BUG: No scratchpad found on task ${t.name}__${t.id}`);let o=s.callCounter;s.callCounter+=1;let l=new lW({func:r,name:n,input:i,cache:a.cache,retry:a.retry,callbacks:a.callbacks}),u=await this.scheduleTask(t,o,l);if(!u)return;let c=this.executingTasksMap[u.id];if(void 0!==c)return c;if(u.writes.length>0){let e=u.writes.filter(([e])=>e===ot),t=u.writes.filter(([e])=>e===sV);if(e.length>0){if(1===e.length)return Promise.resolve(e[0][1]);throw Error(`BUG: multiple returns found for task ${u.name}__${u.id}`)}if(t.length>0){if(1===t.length){let e=t[0][1];return Promise.reject(e instanceof Error?e:Error(String(e)))}throw Error(`BUG: multiple errors found for task ${u.name}__${u.id}`)}return}{let t=uP(u,a.retry,{[sq]:uM.bind(this,e,u)});return this.executingTasksMap[u.id]=t,this.barrier.next(),t.then(({result:e,error:t})=>t?Promise.reject(t):e)}}var uL=class extends Error{constructor(e){super(e),this.name="GraphValidationError"}};function uZ({nodes:e,channels:t,inputChannels:r,outputChannels:n,streamChannels:i,interruptAfterNodes:a,interruptBeforeNodes:s}){if(!t)throw new uL("Channels not provided");let o=new Set,l=new Set;for(let[t,r]of Object.entries(e)){if(t===s8)throw new uL(`"Node name ${s8} is reserved"`);if(r.constructor===lO)r.triggers.forEach(e=>o.add(e));else throw new uL(`Invalid node type ${typeof r}, expected PregelNode`)}for(let e of o)if(!(e in t))throw new uL(`Subscribed channel '${String(e)}' not in channels`);if(Array.isArray(r)){if(r.every(e=>!o.has(e)))throw new uL(`None of the input channels ${r} are subscribed to by any node`)}else if(!o.has(r))throw new uL(`Input channel ${String(r)} is not subscribed to by any node`);for(let e of(Array.isArray(n)?n.forEach(e=>l.add(e)):l.add(n),i&&!Array.isArray(i)?l.add(i):Array.isArray(i)&&i.forEach(e=>l.add(e)),l))if(!(e in t))throw new uL(`Output channel '${String(e)}' not in channels`);if(a&&"*"!==a){for(let t of a)if(!(t in e))throw new uL(`Node ${String(t)} not in nodes`)}if(s&&"*"!==s){for(let t of s)if(!(t in e))throw new uL(`Node ${String(t)} not in nodes`)}}function uD(e,t){if(Array.isArray(e)){for(let r of e)if(!(r in t))throw Error(`Key ${String(r)} not found in channels`)}else if(!(e in t))throw Error(`Key ${String(e)} not found in channels`)}var uU=class e extends sO{lc_graph_name="Topic";unique=!1;accumulate=!1;seen;values;constructor(e){super(),this.unique=e?.unique??this.unique,this.accumulate=e?.accumulate??this.accumulate,this.seen=new Set,this.values=[]}fromCheckpoint(t){let r=new e({unique:this.unique,accumulate:this.accumulate});return void 0!==t&&(r.seen=new Set(t[0]),r.values=t[1]),r}update(e){let t=!1;this.accumulate||(t=this.values.length>0,this.values=[]);let r=e.flat();if(r.length>0)if(this.unique)for(let e of r)this.seen.has(e)||(t=!0,this.seen.add(e),this.values.push(e));else t=!0,this.values.push(...r);return t}get(){if(0===this.values.length)throw new sS;return this.values}checkpoint(){return[[...this.seen],this.values]}isAvailable(){return 0!==this.values.length}},uF=class{static subscribeTo(e,t){let{key:r,tags:n}={key:void 0,tags:void 0,...t??{}};if(Array.isArray(e)&&void 0!==r)throw Error("Can't specify a key when subscribing to multiple channels");return new lO({channels:"string"==typeof e?r?{[r]:e}:[e]:Object.fromEntries(e.map(e=>[e,e])),triggers:Array.isArray(e)?e:[e],tags:n})}static writeTo(e,t){let r=[];for(let t of e)r.push({channel:t,value:lw,skipNone:!1});for(let[e,n]of Object.entries(t??{}))k.YN.isRunnable(n)||"function"==typeof n?r.push({channel:e,value:lw,skipNone:!0,mapper:(0,k.Bp)(n)}):r.push({channel:e,value:n,skipNone:!1});return new l$(r)}},uB=class extends k.YN{lc_namespace=["langgraph","pregel"];invoke(e,t){throw Error("Not implemented")}withConfig(e){return super.withConfig(e)}stream(e,t){return super.stream(e,t)}},uV=class extends uB{static lc_name(){return"LangGraph"}lc_namespace=["langgraph","pregel"];lg_is_pregel=!0;nodes;channels;inputChannels;outputChannels;autoValidate=!0;streamMode=["values"];streamChannels;interruptAfter;interruptBefore;stepTimeout;debug=!1;checkpointer;retryPolicy;config;store;cache;userInterrupt;triggerToNodes={};constructor(e){super(e);let{streamMode:t}=e;if(null==t||Array.isArray(t)||(t=[t]),this.nodes=e.nodes,this.channels=e.channels,os in this.channels&&"lc_graph_name"in this.channels[os]&&"Topic"!==this.channels[os].lc_graph_name)throw Error(`Channel '${os}' is reserved and cannot be used in the graph.`);this.channels[os]=new uU({accumulate:!1}),this.autoValidate=e.autoValidate??this.autoValidate,this.streamMode=t??this.streamMode,this.inputChannels=e.inputChannels,this.outputChannels=e.outputChannels,this.streamChannels=e.streamChannels??this.streamChannels,this.interruptAfter=e.interruptAfter,this.interruptBefore=e.interruptBefore,this.stepTimeout=e.stepTimeout??this.stepTimeout,this.debug=e.debug??this.debug,this.checkpointer=e.checkpointer,this.retryPolicy=e.retryPolicy,this.config=e.config,this.store=e.store,this.cache=e.cache,this.name=e.name,this.triggerToNodes=e.triggerToNodes??this.triggerToNodes,this.userInterrupt=e.userInterrupt,this.autoValidate&&this.validate()}withConfig(e){let t=(0,k.SV)(this.config,e);return new this.constructor({...this,config:t})}validate(){for(let[e,t]of(uZ({nodes:this.nodes,channels:this.channels,outputChannels:this.outputChannels,inputChannels:this.inputChannels,streamChannels:this.streamChannels,interruptAfterNodes:this.interruptAfter,interruptBeforeNodes:this.interruptBefore}),Object.entries(this.nodes)))for(let r of t.triggers)this.triggerToNodes[r]??=[],this.triggerToNodes[r].push(e);return this}get streamChannelsList(){return Array.isArray(this.streamChannels)?this.streamChannels:this.streamChannels?[this.streamChannels]:Object.keys(this.channels)}get streamChannelsAsIs(){return this.streamChannels?this.streamChannels:Object.keys(this.channels)}async getGraphAsync(e){return this.getGraph(e)}*getSubgraphs(e,t){for(let[r,n]of Object.entries(this.nodes))if(void 0===e||e.startsWith(r))for(let i of n.subgraphs?.length?n.subgraphs:[n.bound]){let n=lC(i);if(void 0!==n){if(r===e)return void(yield[r,n]);if(void 0===e&&(yield[r,n]),t){let i=e;for(let[a,s]of(void 0!==e&&(i=e.slice(r.length+1)),n.getSubgraphs(i,t)))yield[`${r}${od}${a}`,s]}}}}async *getSubgraphsAsync(e,t){yield*this.getSubgraphs(e,t)}async _prepareStateSnapshot({config:e,saved:t,subgraphCheckpointer:r,applyPendingWrites:n=!1}){if(void 0===t)return{values:{},next:[],config:e,tasks:[]};let i=sC(this.channels,t.checkpoint);if(t.pendingWrites?.length){let e=t.pendingWrites.filter(([e,t])=>e===ou).map(([e,t,r])=>[String(t),r]);e.length>0&&l4(t.checkpoint,i,[{name:sF,writes:e,triggers:[]}],void 0,this.triggerToNodes)}let a=Object.values(l9(t.checkpoint,t.pendingWrites,this.nodes,i,t.config,!0,{step:(t.metadata?.step??-1)+1,store:this.store})),s=await lm(this.getSubgraphsAsync()),o=t.config.configurable?.checkpoint_ns??"",l={};for(let e of a){let n=s.find(([t])=>t===e.name);if(!n)continue;let i=`${String(e.name)}${op}${e.id}`;if(o&&(i=`${o}${od}${i}`),void 0===r){let r={configurable:{thread_id:t.config.configurable?.thread_id,checkpoint_ns:i}};l[e.id]=r}else{let a={configurable:{[sG]:r,thread_id:t.config.configurable?.thread_id,checkpoint_ns:i}},s=n[1];l[e.id]=await s.getState(a,{subgraphs:!0})}}if(n&&t.pendingWrites?.length){let e=Object.fromEntries(a.map(e=>[e.id,e]));for(let[r,n,i]of t.pendingWrites)![sV,s8,t6].includes(n)&&r in e&&e[r].writes.push([String(n),i]);let r=a.filter(e=>e.writes.length>0);r.length>0&&l4(t.checkpoint,i,r,void 0,this.triggerToNodes)}let u=t?.metadata;u&&t?.config?.configurable?.thread_id&&(u={...u,thread_id:t.config.configurable.thread_id});let c=a.filter(e=>0===e.writes.length).map(e=>e.name);return{values:lj(i,this.streamChannelsAsIs),next:c,tasks:us(a,t?.pendingWrites??[],l,this.streamChannelsAsIs),metadata:u,config:lB(t.config,t.metadata),createdAt:t.checkpoint.ts,parentConfig:t.parentConfig}}async getState(e,t){let r=e.configurable?.[sG]??this.checkpointer;if(!r)throw new sy("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});let n=e.configurable?.checkpoint_ns??"";if(""!==n&&e.configurable?.[sG]===void 0){let i=oE(n);for await(let[n,a]of this.getSubgraphsAsync(i,!0))if(n===i)return await a.getState(ly(e,{[sG]:r}),{subgraphs:t?.subgraphs});throw Error(`Subgraph with namespace "${i}" not found.`)}let i=(0,k.SV)(this.config,e),a=await r.getTuple(e);return await this._prepareStateSnapshot({config:i,saved:a,subgraphCheckpointer:t?.subgraphs?r:void 0,applyPendingWrites:!e.configurable?.checkpoint_id})}async *getStateHistory(e,t){let r=e.configurable?.[sG]??this.checkpointer;if(!r)throw new sy("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});let n=e.configurable?.checkpoint_ns??"";if(""!==n&&e.configurable?.[sG]===void 0){let i=oE(n);for await(let[n,a]of this.getSubgraphsAsync(i,!0))if(n===i)return void(yield*a.getStateHistory(ly(e,{[sG]:r}),t));throw Error(`Subgraph with namespace "${i}" not found.`)}let i=(0,k.SV)(this.config,e,{configurable:{checkpoint_ns:n}});for await(let e of r.list(i,t))yield this._prepareStateSnapshot({config:e.config,saved:e})}async bulkUpdateState(e,t){let r=e.configurable?.[sG]??this.checkpointer;if(!r)throw new sy("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});if(0===t.length)throw Error("No supersteps provided");if(t.some(e=>0===e.updates.length))throw Error("No updates provided");let n=e.configurable?.checkpoint_ns??"";if(""!==n&&e.configurable?.[sG]===void 0){let i=oE(n);for await(let[,n]of this.getSubgraphsAsync(i,!0))return await n.bulkUpdateState(ly(e,{[sG]:r}),t);throw Error(`Subgraph "${i}" not found`)}let i=async(e,t)=>{let n=this.config?(0,k.SV)(this.config,e):e,a=await r.getTuple(n),s=void 0!==a?a7(a.checkpoint):a8(),o={...a?.checkpoint.channel_versions},l=a?.metadata?.step??-1,u=ly(n,{checkpoint_ns:n.configurable?.checkpoint_ns??""}),c=n.metadata??{};a?.config.configurable&&(u=ly(n,a.config.configurable),c={...a.metadata,...c});let{values:d,asNode:p}=t[0];if(null==d&&void 0===p){if(t.length>1)throw new sI("Cannot create empty checkpoint with multiple updates");return lB(await r.put(u,sP(s,void 0,l),{source:"update",step:l+1,parents:a?.metadata?.parents??{}},{}),a?a.metadata:void 0)}let h=sC(this.channels,s);if(null===d&&p===sU){if(t.length>1)throw new sI("Cannot apply multiple updates when clearing state");if(a){let e=l9(s,a.pendingWrites||[],this.nodes,h,a.config,!0,{step:(a.metadata?.step??-1)+1,checkpointer:r,store:this.store}),t=(a.pendingWrites||[]).filter(e=>e[0]===ou).map(e=>e.slice(1));for(let[n,i,o]of(t.length>0&&l4(s,h,[{name:sF,writes:t,triggers:[]}],r.getNextVersion.bind(r),this.triggerToNodes),a.pendingWrites||[]))![sV,s8,t6].includes(i)&&n in e&&e[n].writes.push([i,o]);l4(s,h,Object.values(e),r.getNextVersion.bind(r),this.triggerToNodes)}return lB(await r.put(u,sP(s,h,l),{...c,source:"update",step:l+1,parents:a?.metadata?.parents??{}},lD(o,s.channel_versions)),a?a.metadata:void 0)}if(p===sB){if(t.length>1)throw new sI("Cannot copy checkpoint with multiple updates");if(null==a)throw new sI("Cannot copy a non-existent checkpoint");let e=e=>!!Array.isArray(e)&&0!==e.length&&e.every(e=>Array.isArray(e)&&2===e.length),n=sP(s,void 0,l),o=await r.put(a.parentConfig??ly(a.config,{checkpoint_id:void 0}),n,{source:"fork",step:l+1,parents:a.metadata?.parents??{}},{});if(e(d)){let e=Object.values(l9(n,a.pendingWrites,this.nodes,h,o,!1,{step:l+2})).reduce((e,{name:t,id:r})=>(e[t]??=[],e[t].push({id:r}),e),{}),t=d.reduce((t,r)=>{let[n,i]=r;t[i]??=[];let a=t[i].length,s=e[i]?.[a]?.id;return t[i].push({values:n,asNode:i,taskId:s}),t},{});return i(lB(o,a.metadata),Object.values(t).flat())}return lB(o,a.metadata)}if(p===sF){if(t.length>1)throw new sI("Cannot apply multiple updates when updating as input");let e=await lm(lR(this.inputChannels,d));if(0===e.length)throw new sI(`Received no input writes for ${JSON.stringify(this.inputChannels,null,2)}`);l4(s,h,[{name:sF,writes:e,triggers:[]}],r.getNextVersion.bind(this.checkpointer),this.triggerToNodes);let n=a?.metadata?.step!=null?a.metadata.step+1:-1,i=await r.put(u,sP(s,h,n),{source:"input",step:n,parents:a?.metadata?.parents??{}},lD(o,s.channel_versions));return await r.putWrites(i,e,t2(sF,s.id)),lB(i,a?a.metadata:void 0)}if(n.configurable?.checkpoint_id===void 0&&a?.pendingWrites!==void 0&&a.pendingWrites.length>0){let e=l9(s,a.pendingWrites,this.nodes,h,a.config,!0,{store:this.store,checkpointer:this.checkpointer,step:(a.metadata?.step??-1)+1}),t=(a.pendingWrites??[]).filter(e=>e[0]===ou).map(e=>e.slice(1));for(let[r,n,i]of(t.length>0&&l4(a.checkpoint,h,[{name:sF,writes:t,triggers:[]}],void 0,this.triggerToNodes),a.pendingWrites))[sV,s8,t6].includes(n)||void 0===e[r]||e[r].writes.push([n,i]);let r=Object.values(e).filter(e=>e.writes.length>0);r.length>0&&l4(s,h,r,void 0,this.triggerToNodes)}let f=Object.values(s.versions_seen).map(e=>Object.values(e)).flat().find(e=>!!e),m=[];if(1===t.length){let{values:e,asNode:r,taskId:n}=t[0];if(void 0===r&&1===Object.keys(this.nodes).length)[r]=Object.keys(this.nodes);else if(void 0===r&&void 0===f)"string"==typeof this.inputChannels&&void 0!==this.nodes[this.inputChannels]&&(r=this.inputChannels);else if(void 0===r){let e=Object.entries(s.versions_seen).map(([e,t])=>Object.values(t).map(t=>[t,e])).flat().filter(([e,t])=>t!==s8).sort(([e],[t])=>se(e,t));e&&(1===e.length?r=e[0][1]:e[e.length-1][0]!==e[e.length-2][0]&&(r=e[e.length-1][1]))}if(void 0===r)throw new sI('Ambiguous update, specify "asNode"');m.push({values:e,asNode:r,taskId:n})}else for(let{asNode:e,values:r,taskId:n}of t){if(null==e)throw new sI('"asNode" is required when applying multiple updates');m.push({values:r,asNode:e,taskId:n})}let g=[];for(let{asNode:e,values:t,taskId:r}of m){if(void 0===this.nodes[e])throw new sI(`Node "${e.toString()}" does not exist`);let n=this.nodes[e].getWriters();if(!n.length)throw new sI(`No writers found for node "${e.toString()}"`);g.push({name:e,input:t,proc:n.length>1?k.zZ.from(n,{omitSequenceTags:!0}):n[0],writes:[],triggers:[s8],id:r??t2(s8,s.id),writers:[]})}for(let e of g)await e.proc.invoke(e.input,(0,k.tn)({...n,store:n?.store??this.store},{runName:n.runName??`${this.getName()}UpdateState`,configurable:{[sW]:t=>e.writes.push(...t),[sK]:(t,r=!1)=>l0(s,h,e,t,r)}}));for(let e of g){let t=e.writes.filter(e=>e[0]!==oo);void 0!==a&&t.length>0&&await r.putWrites(u,t,e.id)}l4(s,h,g,r.getNextVersion.bind(this.checkpointer),this.triggerToNodes);let y=lD(o,s.channel_versions),v=await r.put(u,sP(s,h,l+1),{source:"update",step:l+1,parents:a?.metadata?.parents??{}},y);for(let e of g){let t=e.writes.filter(e=>e[0]===oo);t.length>0&&await r.putWrites(v,t,e.id)}return lB(v,a?a.metadata:void 0)},a=e;for(let{updates:e}of t)a=await i(a,e);return a}async updateState(e,t,r){return this.bulkUpdateState(e,[{updates:[{values:t,asNode:r}]}])}_defaults(e){let t,r,{debug:n,streamMode:i,inputKeys:a,outputKeys:s,interruptAfter:o,interruptBefore:l,...u}=e,c=!0,d=void 0!==n?n:this.debug,p=s;void 0===p?p=this.streamChannelsAsIs:uD(p,this.channels);let h=a;void 0===h?h=this.inputChannels:uD(h,this.channels);let f=l??this.interruptBefore??[],m=o??this.interruptAfter??[];if(void 0!==i?(t=Array.isArray(i)?i:[i],c="string"==typeof i):(t=e.configurable?.[sY]!==void 0?["values"]:this.streamMode,c=!0),!1===this.checkpointer)r=void 0;else if(void 0!==e&&e.configurable?.[sG]!==void 0)r=e.configurable[sG];else if(!0===this.checkpointer)throw Error("checkpointer: true cannot be used for root graphs.");else r=this.checkpointer;let g=e.store??this.store,y=e.cache??this.cache;if(null!=e.durability&&null!=e.checkpointDuring)throw Error("Cannot use both `durability` and `checkpointDuring` at the same time.");let v=(()=>{if(null!=e.checkpointDuring)return!1===e.checkpointDuring?"exit":"async"})();return[d,t,h,p,u,f,m,r,g,c,y,e.durability??v??e?.configurable?.[s2]??"async"]}async stream(e,t){let r=new AbortController,n={recursionLimit:this.config?.recursionLimit,...t,signal:lV(t?.signal,r.signal).signal},i=await super.stream(e,n);return new uc(t?.encoding==="text/event-stream"?uv(i):i,r)}streamEvents(e,t,r){let n=new AbortController,i={recursionLimit:this.config?.recursionLimit,...t,callbacks:lJ(this.config?.callbacks,t?.callbacks),signal:lV(t?.signal,n.signal).signal};return new uc(super.streamEvents(e,i,r),n)}async _validateInput(e){return e}async _validateContext(e){return e}async *_streamIterator(e,t){let r,n,i="version"in(t??{})?void 0:t?.encoding??void 0,a=t?.subgraphs,s=oS(this.config,t);if(void 0===s.recursionLimit||s.recursionLimit<1)throw Error('Passed "recursionLimit" must be at least 1.');if(void 0!==this.checkpointer&&!1!==this.checkpointer&&void 0===s.configurable)throw Error('Checkpointer requires one or more of the following "configurable" keys: "thread_id", "checkpoint_ns", "checkpoint_id"');let o=await this._validateInput(e),{runId:l,...u}=s,[c,d,,p,h,f,m,g,y,v,_,b]=this._defaults(u);void 0!==h.context?h.context=await this._validateContext(h.context):h.configurable=await this._validateContext(h.configurable);let w=new ud({modes:new Set(d)});if(!0===this.checkpointer){h.configurable??={};let e=h.configurable[s6]??"";h.configurable[s6]=e.split(od).map(e=>e.split(op)[0]).join(od)}if(d.includes("messages")){let e=new uI(e=>w.push(e)),{callbacks:t}=h;if(void 0===t)h.callbacks=[e];else if(Array.isArray(t))h.callbacks=t.concat(e);else{let r=t.copy();r.addHandler(e,!0),h.callbacks=r}}h.writer??=e=>{if(!d.includes("custom"))return;let t=oI()?.configurable?.[s6]?.split(od).slice(0,-1);w.push([t??[],"custom",e])},h.interrupt??=this.userInterrupt??lp;let x=await (0,k.kJ)(h),$=await x?.handleChainStart(this.toJSON(),lU(e,"input"),l,void 0,void 0,void 0,h?.runName??this.getName()),S=sN(this.channels),I=(async()=>{try{r=await u$.initialize({input:o,config:h,checkpointer:g,nodes:this.nodes,channelSpecs:S,outputKeys:p,streamKeys:this.streamChannelsAsIs,store:y,cache:_,stream:w,interruptAfter:m,interruptBefore:f,manager:$,debug:this.debug,triggerToNodes:this.triggerToNodes,durability:b});let e=new uR({loop:r,nodeFinished:h.configurable?.[s9]});t?.subgraphs&&(r.config.configurable={...r.config.configurable,[sX]:r.stream}),await this._runLoop({loop:r,runner:e,debug:c,config:h}),"sync"===b&&await Promise.all(r?.checkpointerPromises??[])}catch(e){n=e}finally{try{r&&(await r.store?.stop(),await r.cache?.stop()),await Promise.all(r?.checkpointerPromises??[])}catch(e){n=n??e}n?w.error(n):w.close()}})();try{for await(let e of w){if(void 0===e)throw Error("Data structure error.");let[t,r,n]=e;if(d.includes(r)){if("text/event-stream"===i){a?yield[t,r,n]:yield[null,r,n];continue}a&&!v?yield[t,r,n]:v?a?yield[t,n]:yield n:yield[r,n]}}}catch(e){throw await $?.handleChainError(n),e}finally{await I}await $?.handleChainEnd(r?.output??{},l,void 0,void 0,void 0)}async invoke(e,t){let r,n=t?.streamMode??"values",i={...t,outputKeys:t?.outputKeys??this.outputChannels,streamMode:n,encoding:void 0},a=[],s=await this.stream(e,i),o=[];for await(let e of s)"values"===n?ov(e)?o.push(e[s8]):r=e:a.push(e);if("values"===n){if(o.length>0){let e=o.flat(1);if(null==r)return{[s8]:e};if("object"==typeof r)return{...r,[s8]:e}}return r}return a}async _runLoop(e){let t,{loop:r,runner:n,debug:i,config:a}=e;try{for(;await r.tick({inputKeys:this.inputChannels});){for(let{task:e}of(await r._matchCachedWrites()))r._outputWrites(e.id,e.writes,!0);i&&uo(r.checkpointMetadata.step,r.channels,this.streamChannelsList),i&&ul(r.step,Object.values(r.tasks)),await n.tick({timeout:this.stepTimeout,retryPolicy:this.retryPolicy,onStepWrite:(e,t)=>{i&&uu(e,t,this.streamChannelsList)},maxConcurrency:a.maxConcurrency,signal:a.signal})}if("out_of_steps"===r.status)throw new sg(`Recursion limit of ${a.recursionLimit} reached without hitting a stop condition. You can increase the limit by setting the "recursionLimit" config key.`,{lc_error_code:"GRAPH_RECURSION_LIMIT"})}catch(e){if(t=e,!await r.finishAndHandleError(t))throw e}finally{void 0===t&&await r.finishAndHandleError()}}async clearCache(){await this.cache?.clear([])}},uJ=class e extends sO{lc_graph_name="EphemeralValue";guard;value=[];constructor(e=!0){super(),this.guard=e}fromCheckpoint(t){let r=new e(this.guard);return void 0!==t&&(r.value=[t]),r}update(e){if(0===e.length){let e=this.value.length>0;return this.value=[],e}if(1!==e.length&&this.guard)throw new sI("EphemeralValue can only receive one value per step.");return this.value=[e[e.length-1]],!0}get(){if(0===this.value.length)throw new sS;return this.value[0]}checkpoint(){if(0===this.value.length)throw new sS;return this.value[0]}isAvailable(){return 0!==this.value.length}};function uW(e,t,r){function n(r,n){if(r._zod||Object.defineProperty(r,"_zod",{value:{def:n,constr:s,traits:new Set},enumerable:!1}),r._zod.traits.has(e))return;r._zod.traits.add(e),t(r,n);let i=s.prototype,a=Object.keys(i);for(let e=0;e<a.length;e++){let t=a[e];t in r||(r[t]=i[t].bind(r))}}let i=r?.Parent??Object;class a extends i{}function s(e){var t;let i=r?.Parent?new a:this;for(let r of(n(i,e),(t=i._zod).deferred??(t.deferred=[]),i._zod.deferred))r();return i}return Object.defineProperty(a,"name",{value:e}),Object.defineProperty(s,"init",{value:n}),Object.defineProperty(s,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}Object.freeze({status:"aborted"}),Symbol("zod_brand");class uq extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class uK extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}let uG={};function uH(e){return e&&Object.assign(uG,e),uG}function uY(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function uX(e,t="|"){return e.map(e=>cc(e)).join(t)}function uQ(e,t){return"bigint"==typeof t?t.toString():t}function u0(e){let t=!1;return{get value(){if(!t){let t=e();return Object.defineProperty(this,"value",{value:t}),t}throw Error("cached value already set")}}}function u1(e){return null==e}function u2(e){let t=+!!e.startsWith("^"),r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function u4(e,t){let r=(e.toString().split(".")[1]||"").length,n=t.toString(),i=(n.split(".")[1]||"").length;if(0===i&&/\d?e-\d?/.test(n)){let e=n.match(/\d?e-(\d?)/);e?.[1]&&(i=Number.parseInt(e[1]))}let a=r>i?r:i;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}let u6=Symbol("evaluating");function u9(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==u6)return void 0===n&&(n=u6,n=r()),n},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function u3(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function u5(...e){let t={};for(let r of e)Object.assign(t,Object.getOwnPropertyDescriptors(r));return Object.defineProperties({},t)}function u8(e){return JSON.stringify(e)}function u7(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}let ce="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function ct(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let cr=u0(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function cn(e){if(!1===ct(e))return!1;let t=e.constructor;if(void 0===t||"function"!=typeof t)return!0;let r=t.prototype;return!1!==ct(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function ci(e){return cn(e)?{...e}:Array.isArray(e)?[...e]:e}let ca=new Set(["string","number","symbol"]),cs=new Set(["string","number","bigint","boolean","symbol","undefined"]);function co(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function cl(e,t,r){let n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function cu(e){let t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");t.error=t.message}return(delete t.message,"string"==typeof t.error)?{...t,error:()=>t.error}:t}function cc(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function cd(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}let cp={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},ch={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function cf(e,t){let r=e._zod.def,n=r.checks;if(n&&n.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let i=u5(e._zod.def,{get shape(){let e={};for(let n in t){if(!(n in r.shape))throw Error(`Unrecognized key: "${n}"`);t[n]&&(e[n]=r.shape[n])}return u3(this,"shape",e),e},checks:[]});return cl(e,i)}function cm(e,t){let r=e._zod.def,n=r.checks;if(n&&n.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let i=u5(e._zod.def,{get shape(){let n={...e._zod.def.shape};for(let e in t){if(!(e in r.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return u3(this,"shape",n),n},checks:[]});return cl(e,i)}function cg(e,t){if(!cn(t))throw Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0){let r=e._zod.def.shape;for(let e in t)if(void 0!==Object.getOwnPropertyDescriptor(r,e))throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let n=u5(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t};return u3(this,"shape",r),r}});return cl(e,n)}function cy(e,t){if(!cn(t))throw Error("Invalid input to safeExtend: expected a plain object");let r=u5(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t};return u3(this,"shape",r),r}});return cl(e,r)}function cv(e,t){let r=u5(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return u3(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return cl(e,r)}function c_(e,t,r){let n=t._zod.def.checks;if(n&&n.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let i=u5(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(let t in n)i[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return u3(this,"shape",i),i},checks:[]});return cl(t,i)}function cb(e,t,r){let n=u5(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(let t in n)i[t]=new e({type:"nonoptional",innerType:n[t]});return u3(this,"shape",i),i}});return cl(t,n)}function cw(e,t=0){if(!0===e.aborted)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function ck(e,t){return t.map(t=>{var r;return(r=t).path??(r.path=[]),t.path.unshift(e),t})}function cx(e){return"string"==typeof e?e:e?.message}function c$(e,t,r){let n={...e,path:e.path??[]};return e.message||(n.message=cx(e.inst?._zod.def?.error?.(e))??cx(t?.error?.(e))??cx(r.customError?.(e))??cx(r.localeError?.(e))??"Invalid input"),delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function cS(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function cI(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function cE(e){let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"nan":"number";case"object":{if(null===e)return"null";if(Array.isArray(e))return"array";let t=e;if(t&&Object.getPrototypeOf(t)!==Object.prototype&&"constructor"in t&&t.constructor)return t.constructor.name}}return t}function cA(...e){let[t,r,n]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:n}:{...t}}let cO=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,uQ,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},cT=uW("$ZodError",cO),cN=uW("$ZodError",cO,{Parent:Error});function cC(e,t=e=>e.message){let r={},n=[];for(let i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}function cP(e,t=e=>e.message){let r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code&&i.errors.length)i.errors.map(e=>n({issues:e}));else if("invalid_key"===i.code)n({issues:i.issues});else if("invalid_element"===i.code)n({issues:i.issues});else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(e),r}function cj(e){let t=[];for(let r of e.map(e=>"object"==typeof e?e.key:e))"number"==typeof r?t.push(`[${r}]`):"symbol"==typeof r?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}function cz(e){let t=[];for(let r of[...e.issues].sort((e,t)=>(e.path??[]).length-(t.path??[]).length))t.push(` ${r.message}`),r.path?.length&&t.push(`   at ${cj(r.path)}`);return t.join("\n")}let cR=e=>(t,r,n,i)=>{let a=n?Object.assign(n,{async:!1}):{async:!1},s=t._zod.run({value:r,issues:[]},a);if(s instanceof Promise)throw new uq;if(s.issues.length){let t=new(i?.Err??e)(s.issues.map(e=>c$(e,a,uH())));throw ce(t,i?.callee),t}return s.value},cM=cR(cN),cL=e=>async(t,r,n,i)=>{let a=n?Object.assign(n,{async:!0}):{async:!0},s=t._zod.run({value:r,issues:[]},a);if(s instanceof Promise&&(s=await s),s.issues.length){let t=new(i?.Err??e)(s.issues.map(e=>c$(e,a,uH())));throw ce(t,i?.callee),t}return s.value},cZ=cL(cN),cD=e=>(t,r,n)=>{let i=n?{...n,async:!1}:{async:!1},a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new uq;return a.issues.length?{success:!1,error:new(e??cT)(a.issues.map(e=>c$(e,i,uH())))}:{success:!0,data:a.value}},cU=cD(cN),cF=e=>async(t,r,n)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},a=t._zod.run({value:r,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(e=>c$(e,i,uH())))}:{success:!0,data:a.value}},cB=cF(cN),cV=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return cR(e)(t,r,i)},cJ=e=>(t,r,n)=>cR(e)(t,r,n),cW=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return cL(e)(t,r,i)},cq=e=>async(t,r,n)=>cL(e)(t,r,n),cK=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return cD(e)(t,r,i)},cG=e=>(t,r,n)=>cD(e)(t,r,n),cH=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return cF(e)(t,r,i)},cY=e=>async(t,r,n)=>cF(e)(t,r,n),cX=/^[cC][^\s-]{8,}$/,cQ=/^[0-9a-z]+$/,c0=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,c1=/^[0-9a-vA-V]{20}$/,c2=/^[A-Za-z0-9]{27}$/,c4=/^[a-zA-Z0-9_-]{21}$/,c6=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,c9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,c3=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,c5=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,c8=c5(4),c7=c5(6),de=c5(7),dt=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,dr=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,dn=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,di=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,da=di,ds=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,dl="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function du(){return RegExp(dl,"u")}let dc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,dd=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,dp=e=>{let t=co(e??":");return RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},dh=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,df=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dm=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,dg=/^[A-Za-z0-9_-]*$/,dy=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,dv=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,d_=/^\+[1-9]\d{6,14}$/,db="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",dw=RegExp(`^${db}$`);function dk(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function dx(e){return RegExp(`^${dk(e)}$`)}function d$(e){let t=dk({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${t}(?:${r.join("|")})`;return RegExp(`^${db}T(?:${n})$`)}let dS=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},dI=/^-?\d+n?$/,dE=/^-?\d+$/,dA=/^-?\d+(?:\.\d+)?$/,dO=/^(?:true|false)$/i,dT=/^null$/i,dN=/^undefined$/i,dC=/^[^A-Z]*$/,dP=/^[^a-z]*$/,dj=/^[0-9a-fA-F]*$/;function dz(e,t){return RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function dR(e){return RegExp(`^[A-Za-z0-9_-]{${e}}$`)}let dM=/^[0-9a-fA-F]{32}$/,dL=dz(22,"=="),dZ=dR(22),dD=/^[0-9a-fA-F]{40}$/,dU=dz(27,"="),dF=dR(27),dB=/^[0-9a-fA-F]{64}$/,dV=dz(43,"="),dJ=dR(43),dW=/^[0-9a-fA-F]{96}$/,dq=dz(64,""),dK=dR(64),dG=/^[0-9a-fA-F]{128}$/,dH=dz(86,"=="),dY=dR(86),dX=uW("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),dQ={number:"number",bigint:"bigint",object:"date"},d0=uW("$ZodCheckLessThan",(e,t)=>{dX.init(e,t);let r=dQ[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<n&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:"object"==typeof t.value?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),d1=uW("$ZodCheckGreaterThan",(e,t)=>{dX.init(e,t);let r=dQ[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>n&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:"object"==typeof t.value?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),d2=uW("$ZodCheckMultipleOf",(e,t)=>{dX.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===u4(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),d4=uW("$ZodCheckNumberFormat",(e,t)=>{dX.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),n=r?"int":"number",[i,a]=cp[t.format];e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,n.minimum=i,n.maximum=a,r&&(n.pattern=dE)}),e._zod.check=s=>{let o=s.value;if(r){if(!Number.isInteger(o))return void s.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?s.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort}):s.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort}))}o<i&&s.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),o>a&&s.issues.push({origin:"number",input:o,code:"too_big",maximum:a,inclusive:!0,inst:e,continue:!t.abort})}}),d6=uW("$ZodCheckBigIntFormat",(e,t)=>{dX.init(e,t);let[r,n]=ch[t.format];e._zod.onattach.push(e=>{let i=e._zod.bag;i.format=t.format,i.minimum=r,i.maximum=n}),e._zod.check=i=>{let a=i.value;a<r&&i.issues.push({origin:"bigint",input:a,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),a>n&&i.issues.push({origin:"bigint",input:a,code:"too_big",maximum:n,inclusive:!0,inst:e,continue:!t.abort})}}),d9=uW("$ZodCheckMaxSize",(e,t)=>{var r;dX.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!u1(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;n.size<=t.maximum||r.issues.push({origin:cS(n),code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),d3=uW("$ZodCheckMinSize",(e,t)=>{var r;dX.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!u1(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;n.size>=t.minimum||r.issues.push({origin:cS(n),code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),d5=uW("$ZodCheckSizeEquals",(e,t)=>{var r;dX.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!u1(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.size,r.maximum=t.size,r.size=t.size}),e._zod.check=r=>{let n=r.value,i=n.size;if(i===t.size)return;let a=i>t.size;r.issues.push({origin:cS(n),...a?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),d8=uW("$ZodCheckMaxLength",(e,t)=>{var r;dX.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!u1(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;if(n.length<=t.maximum)return;let i=cI(n);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),d7=uW("$ZodCheckMinLength",(e,t)=>{var r;dX.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!u1(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;if(n.length>=t.minimum)return;let i=cI(n);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),pe=uW("$ZodCheckLengthEquals",(e,t)=>{var r;dX.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!u1(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let n=r.value,i=n.length;if(i===t.length)return;let a=cI(n),s=i>t.length;r.issues.push({origin:a,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),pt=uW("$ZodCheckStringFormat",(e,t)=>{var r,n;dX.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),pr=uW("$ZodCheckRegex",(e,t)=>{pt.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),pn=uW("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=dC),pt.init(e,t)}),pi=uW("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=dP),pt.init(e,t)}),pa=uW("$ZodCheckIncludes",(e,t)=>{dX.init(e,t);let r=co(t.includes),n=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),ps=uW("$ZodCheckStartsWith",(e,t)=>{dX.init(e,t);let r=RegExp(`^${co(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),po=uW("$ZodCheckEndsWith",(e,t)=>{dX.init(e,t);let r=RegExp(`.*${co(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});function pl(e,t,r){e.issues.length&&t.issues.push(...ck(r,e.issues))}let pu=uW("$ZodCheckProperty",(e,t)=>{dX.init(e,t),e._zod.check=e=>{let r=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(r instanceof Promise)return r.then(r=>pl(r,e,t.property));pl(r,e,t.property)}}),pc=uW("$ZodCheckMimeType",(e,t)=>{dX.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:t.mime,input:n.value.type,inst:e,continue:!t.abort})}}),pd=uW("$ZodCheckOverwrite",(e,t)=>{dX.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class pp{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}let ph={major:4,minor:3,patch:4},pf=uW("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=ph;let n=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&n.unshift(e),n))for(let r of t._zod.onattach)r(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let n,i=cw(e);for(let a of t){if(a._zod.def.when){if(!a._zod.def.when(e))continue}else if(i)continue;let t=e.issues.length,s=a._zod.check(e);if(s instanceof Promise&&r?.async===!1)throw new uq;if(n||s instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await s,e.issues.length!==t&&(i||(i=cw(e,t)))});else{if(e.issues.length===t)continue;i||(i=cw(e,t))}}return n?n.then(()=>e):e},r=(r,i,a)=>{if(cw(r))return r.aborted=!0,r;let s=t(i,n,a);if(s instanceof Promise){if(!1===a.async)throw new uq;return s.then(t=>e._zod.parse(t,a))}return e._zod.parse(s,a)};e._zod.run=(i,a)=>{if(a.skipChecks)return e._zod.parse(i,a);if("backward"===a.direction){let t=e._zod.parse({value:i.value,issues:[]},{...a,skipChecks:!0});return t instanceof Promise?t.then(e=>r(e,i,a)):r(t,i,a)}let s=e._zod.parse(i,a);if(s instanceof Promise){if(!1===a.async)throw new uq;return s.then(e=>t(e,n,a))}return t(s,n,a)}}u9(e,"~standard",()=>({validate:t=>{try{let r=cU(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return cB(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}))}),pm=uW("$ZodString",(e,t)=>{pf.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??dS(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch(e){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),pg=uW("$ZodStringFormat",(e,t)=>{pt.init(e,t),pm.init(e,t)}),py=uW("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=c3),pg.init(e,t)}),pv=uW("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=c5(e))}else t.pattern??(t.pattern=c5());pg.init(e,t)}),p_=uW("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=dt),pg.init(e,t)}),pb=uW("$ZodURL",(e,t)=>{pg.init(e,t),e._zod.check=r=>{try{let n=r.value.trim(),i=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=i.href:r.value=n;return}catch(n){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),pw=uW("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=du()),pg.init(e,t)}),pk=uW("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=c4),pg.init(e,t)}),px=uW("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=cX),pg.init(e,t)}),p$=uW("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=cQ),pg.init(e,t)}),pS=uW("$ZodULID",(e,t)=>{t.pattern??(t.pattern=c0),pg.init(e,t)}),pI=uW("$ZodXID",(e,t)=>{t.pattern??(t.pattern=c1),pg.init(e,t)}),pE=uW("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=c2),pg.init(e,t)}),pA=uW("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=d$(t)),pg.init(e,t)}),pO=uW("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=dw),pg.init(e,t)}),pT=uW("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=dx(t)),pg.init(e,t)}),pN=uW("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=c6),pg.init(e,t)}),pC=uW("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=dc),pg.init(e,t),e._zod.bag.format="ipv4"}),pP=uW("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=dd),pg.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),pj=uW("$ZodMAC",(e,t)=>{t.pattern??(t.pattern=dp(t.delimiter)),pg.init(e,t),e._zod.bag.format="mac"}),pz=uW("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=dh),pg.init(e,t)}),pR=uW("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=df),pg.init(e,t),e._zod.check=r=>{let n=r.value.split("/");try{if(2!==n.length)throw Error();let[e,t]=n;if(!t)throw Error();let r=Number(t);if(`${r}`!==t||r<0||r>128)throw Error();new URL(`http://[${e}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function pM(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let pL=uW("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=dm),pg.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{pM(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function pZ(e){if(!dg.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return pM(t.padEnd(4*Math.ceil(t.length/4),"="))}let pD=uW("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=dg),pg.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{pZ(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),pU=uW("$ZodE164",(e,t)=>{t.pattern??(t.pattern=d_),pg.init(e,t)});function pF(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[n]=r;if(!n)return!1;let i=JSON.parse(atob(n));if("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))return!1;return!0}catch{return!1}}let pB=uW("$ZodJWT",(e,t)=>{pg.init(e,t),e._zod.check=r=>{pF(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),pV=uW("$ZodCustomStringFormat",(e,t)=>{pg.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),pJ=uW("$ZodNumber",(e,t)=>{pf.init(e,t),e._zod.pattern=e._zod.bag.pattern??dA,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}let i=r.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return r;let a="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...a?{received:a}:{}}),r}}),pW=uW("$ZodNumberFormat",(e,t)=>{d4.init(e,t),pJ.init(e,t)}),pq=uW("$ZodBoolean",(e,t)=>{pf.init(e,t),e._zod.pattern=dO,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch(e){}let i=r.value;return"boolean"==typeof i||r.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),r}}),pK=uW("$ZodBigInt",(e,t)=>{pf.init(e,t),e._zod.pattern=dI,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch(e){}return"bigint"==typeof r.value||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),pG=uW("$ZodBigIntFormat",(e,t)=>{d6.init(e,t),pK.init(e,t)}),pH=uW("$ZodSymbol",(e,t)=>{pf.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return"symbol"==typeof n||t.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:e}),t}}),pY=uW("$ZodUndefined",(e,t)=>{pf.init(e,t),e._zod.pattern=dN,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:e}),t}}),pX=uW("$ZodNull",(e,t)=>{pf.init(e,t),e._zod.pattern=dT,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{let n=t.value;return null===n||t.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),t}}),pQ=uW("$ZodAny",(e,t)=>{pf.init(e,t),e._zod.parse=e=>e}),p0=uW("$ZodUnknown",(e,t)=>{pf.init(e,t),e._zod.parse=e=>e}),p1=uW("$ZodNever",(e,t)=>{pf.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),p2=uW("$ZodVoid",(e,t)=>{pf.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),t}}),p4=uW("$ZodDate",(e,t)=>{pf.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch(e){}let i=r.value,a=i instanceof Date;return a&&!Number.isNaN(i.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:i,...a?{received:"Invalid Date"}:{},inst:e}),r}});function p6(e,t,r){e.issues.length&&t.issues.push(...ck(r,e.issues)),t.value[r]=e.value}let p9=uW("$ZodArray",(e,t)=>{pf.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);let a=[];for(let e=0;e<i.length;e++){let s=i[e],o=t.element._zod.run({value:s,issues:[]},n);o instanceof Promise?a.push(o.then(t=>p6(t,r,e))):p6(o,r,e)}return a.length?Promise.all(a).then(()=>r):r}});function p3(e,t,r,n,i){if(e.issues.length){if(i&&!(r in n))return;t.issues.push(...ck(r,e.issues))}void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function p5(e){let t=Object.keys(e.shape);for(let r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${r}": expected a Zod schema`);let r=cd(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function p8(e,t,r,n,i,a){let s=[],o=i.keySet,l=i.catchall._zod,u=l.def.type,c="optional"===l.optout;for(let i in t){if(o.has(i))continue;if("never"===u){s.push(i);continue}let a=l.run({value:t[i],issues:[]},n);a instanceof Promise?e.push(a.then(e=>p3(e,r,i,t,c))):p3(a,r,i,t,c)}return(s.length&&r.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:a}),e.length)?Promise.all(e).then(()=>r):r}let p7=uW("$ZodObject",(e,t)=>{let r;pf.init(e,t);let n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){let e=t.shape;Object.defineProperty(t,"shape",{get:()=>{let r={...e};return Object.defineProperty(t,"shape",{value:r}),r}})}let i=u0(()=>p5(t));u9(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let n=e[t]._zod;if(n.values)for(let e of(r[t]??(r[t]=new Set),n.values))r[t].add(e)}return r});let a=ct,s=t.catchall;e._zod.parse=(t,n)=>{r??(r=i.value);let o=t.value;if(!a(o))return t.issues.push({expected:"object",code:"invalid_type",input:o,inst:e}),t;t.value={};let l=[],u=r.shape;for(let e of r.keys){let r=u[e],i="optional"===r._zod.optout,a=r._zod.run({value:o[e],issues:[]},n);a instanceof Promise?l.push(a.then(r=>p3(r,t,e,o,i))):p3(a,t,e,o,i)}return s?p8(l,o,t,n,i.value,e):l.length?Promise.all(l).then(()=>t):t}}),he=uW("$ZodObjectJIT",(e,t)=>{let r,n;p7.init(e,t);let i=e._zod.parse,a=u0(()=>p5(t)),s=e=>{let t=new pp(["shape","payload","ctx"]),r=a.value,n=e=>{let t=u8(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let i=Object.create(null),s=0;for(let e of r.keys)i[e]=`key_${s++}`;for(let a of(t.write("const newResult = {};"),r.keys)){let r=i[a],s=u8(a),o=e[a],l=o?._zod?.optout==="optional";t.write(`const ${r} = ${n(a)};`),l?t.write(`
        if (${r}.issues.length) {
          if (${s} in input) {
            payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${s}, ...iss.path] : [${s}]
            })));
          }
        }
        
        if (${r}.value === undefined) {
          if (${s} in input) {
            newResult[${s}] = undefined;
          }
        } else {
          newResult[${s}] = ${r}.value;
        }
        
      `):t.write(`
        if (${r}.issues.length) {
          payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${s}, ...iss.path] : [${s}]
          })));
        }
        
        if (${r}.value === undefined) {
          if (${s} in input) {
            newResult[${s}] = undefined;
          }
        } else {
          newResult[${s}] = ${r}.value;
        }
        
      `)}t.write("payload.value = newResult;"),t.write("return payload;");let o=t.compile();return(t,r)=>o(e,t,r)},o=ct,l=!uG.jitless,u=cr,c=l&&u.value,d=t.catchall;e._zod.parse=(u,p)=>{n??(n=a.value);let h=u.value;return o(h)?l&&c&&p?.async===!1&&!0!==p.jitless?(r||(r=s(t.shape)),u=r(u,p),d)?p8([],h,u,p,n,e):u:i(u,p):(u.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),u)}});function ht(e,t,r,n){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;let i=e.filter(e=>!cw(e));return 1===i.length?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>c$(e,n,uH())))}),t)}let hr=uW("$ZodUnion",(e,t)=>{pf.init(e,t),u9(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),u9(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),u9(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),u9(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>u2(e.source)).join("|")})$`)}});let r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(i,a)=>{if(r)return n(i,a);let s=!1,o=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},a);if(t instanceof Promise)o.push(t),s=!0;else{if(0===t.issues.length)return t;o.push(t)}}return s?Promise.all(o).then(t=>ht(t,i,e,a)):ht(o,i,e,a)}});function hn(e,t,r,n){let i=e.filter(e=>0===e.issues.length);return 1===i.length?t.value=i[0].value:0===i.length?t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>c$(e,n,uH())))}):t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:[],inclusive:!1}),t}let hi=uW("$ZodXor",(e,t)=>{hr.init(e,t),t.inclusive=!1;let r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(i,a)=>{if(r)return n(i,a);let s=!1,o=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},a);t instanceof Promise?(o.push(t),s=!0):o.push(t)}return s?Promise.all(o).then(t=>hn(t,i,e,a)):hn(o,i,e,a)}}),ha=uW("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,hr.init(e,t);let r=e._zod.parse;u9(e._zod,"propValues",()=>{let e={};for(let r of t.options){let n=r._zod.propValues;if(!n||0===Object.keys(n).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(n))for(let n of(e[t]||(e[t]=new Set),r))e[t].add(n)}return e});let n=u0(()=>{let e=t.options,r=new Map;for(let n of e){let e=n._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let t of e){if(r.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,n)}}return r});e._zod.parse=(i,a)=>{let s=i.value;if(!ct(s))return i.issues.push({code:"invalid_type",expected:"object",input:s,inst:e}),i;let o=n.value.get(s?.[t.discriminator]);return o?o._zod.run(i,a):t.unionFallback?r(i,a):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:s,path:[t.discriminator],inst:e}),i)}}),hs=uW("$ZodIntersection",(e,t)=>{pf.init(e,t),e._zod.parse=(e,r)=>{let n=e.value,i=t.left._zod.run({value:n,issues:[]},r),a=t.right._zod.run({value:n,issues:[]},r);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([t,r])=>hl(e,t,r)):hl(e,i,a)}});function ho(e,t){if(e===t||e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(cn(e)&&cn(t)){let r=Object.keys(t),n=Object.keys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(let r of n){let n=ho(e[r],t[r]);if(!n.valid)return{valid:!1,mergeErrorPath:[r,...n.mergeErrorPath]};i[r]=n.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<e.length;n++){let i=ho(e[n],t[n]);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function hl(e,t,r){let n,i=new Map;for(let r of t.issues)if("unrecognized_keys"===r.code)for(let e of(n??(n=r),r.keys))i.has(e)||i.set(e,{}),i.get(e).l=!0;else e.issues.push(r);for(let t of r.issues)if("unrecognized_keys"===t.code)for(let e of t.keys)i.has(e)||i.set(e,{}),i.get(e).r=!0;else e.issues.push(t);let a=[...i].filter(([,e])=>e.l&&e.r).map(([e])=>e);if(a.length&&n&&e.issues.push({...n,keys:a}),cw(e))return e;let s=ho(t.value,r.value);if(!s.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}let hu=uW("$ZodTuple",(e,t)=>{pf.init(e,t);let r=t.items;e._zod.parse=(n,i)=>{let a=n.value;if(!Array.isArray(a))return n.issues.push({input:a,inst:e,expected:"tuple",code:"invalid_type"}),n;n.value=[];let s=[],o=[...r].reverse().findIndex(e=>"optional"!==e._zod.optin),l=-1===o?0:r.length-o;if(!t.rest){let t=a.length>r.length,i=a.length<l-1;if(t||i)return n.issues.push({...t?{code:"too_big",maximum:r.length,inclusive:!0}:{code:"too_small",minimum:r.length},input:a,inst:e,origin:"array"}),n}let u=-1;for(let e of r){if(++u>=a.length&&u>=l)continue;let t=e._zod.run({value:a[u],issues:[]},i);t instanceof Promise?s.push(t.then(e=>hc(e,n,u))):hc(t,n,u)}if(t.rest)for(let e of a.slice(r.length)){u++;let r=t.rest._zod.run({value:e,issues:[]},i);r instanceof Promise?s.push(r.then(e=>hc(e,n,u))):hc(r,n,u)}return s.length?Promise.all(s).then(()=>n):n}});function hc(e,t,r){e.issues.length&&t.issues.push(...ck(r,e.issues)),t.value[r]=e.value}let hd=uW("$ZodRecord",(e,t)=>{pf.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!cn(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),r;let a=[],s=t.keyType._zod.values;if(s){let o;r.value={};let l=new Set;for(let e of s)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){l.add("number"==typeof e?e.toString():e);let s=t.valueType._zod.run({value:i[e],issues:[]},n);s instanceof Promise?a.push(s.then(t=>{t.issues.length&&r.issues.push(...ck(e,t.issues)),r.value[e]=t.value})):(s.issues.length&&r.issues.push(...ck(e,s.issues)),r.value[e]=s.value)}for(let e in i)l.has(e)||(o=o??[]).push(e);o&&o.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:o})}else for(let s of(r.value={},Reflect.ownKeys(i))){if("__proto__"===s)continue;let o=t.keyType._zod.run({value:s,issues:[]},n);if(o instanceof Promise)throw Error("Async schemas not supported in object keys currently");if("string"==typeof s&&dA.test(s)&&o.issues.length&&o.issues.some(e=>"invalid_type"===e.code&&"number"===e.expected)){let e=t.keyType._zod.run({value:Number(s),issues:[]},n);if(e instanceof Promise)throw Error("Async schemas not supported in object keys currently");0===e.issues.length&&(o=e)}if(o.issues.length){"loose"===t.mode?r.value[s]=i[s]:r.issues.push({code:"invalid_key",origin:"record",issues:o.issues.map(e=>c$(e,n,uH())),input:s,path:[s],inst:e});continue}let l=t.valueType._zod.run({value:i[s],issues:[]},n);l instanceof Promise?a.push(l.then(e=>{e.issues.length&&r.issues.push(...ck(s,e.issues)),r.value[o.value]=e.value})):(l.issues.length&&r.issues.push(...ck(s,l.issues)),r.value[o.value]=l.value)}return a.length?Promise.all(a).then(()=>r):r}}),hp=uW("$ZodMap",(e,t)=>{pf.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:i,inst:e}),r;let a=[];for(let[s,o]of(r.value=new Map,i)){let l=t.keyType._zod.run({value:s,issues:[]},n),u=t.valueType._zod.run({value:o,issues:[]},n);l instanceof Promise||u instanceof Promise?a.push(Promise.all([l,u]).then(([t,a])=>{hh(t,a,r,s,i,e,n)})):hh(l,u,r,s,i,e,n)}return a.length?Promise.all(a).then(()=>r):r}});function hh(e,t,r,n,i,a,s){e.issues.length&&(ca.has(typeof n)?r.issues.push(...ck(n,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:i,inst:a,issues:e.issues.map(e=>c$(e,s,uH()))})),t.issues.length&&(ca.has(typeof n)?r.issues.push(...ck(n,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:i,inst:a,key:n,issues:t.issues.map(e=>c$(e,s,uH()))})),r.value.set(e.value,t.value)}let hf=uW("$ZodSet",(e,t)=>{pf.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Set))return r.issues.push({input:i,inst:e,expected:"set",code:"invalid_type"}),r;let a=[];for(let e of(r.value=new Set,i)){let i=t.valueType._zod.run({value:e,issues:[]},n);i instanceof Promise?a.push(i.then(e=>hm(e,r))):hm(i,r)}return a.length?Promise.all(a).then(()=>r):r}});function hm(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}let hg=uW("$ZodEnum",(e,t)=>{pf.init(e,t);let r=uY(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=RegExp(`^(${r.filter(e=>ca.has(typeof e)).map(e=>"string"==typeof e?co(e):e.toString()).join("|")})$`),e._zod.parse=(t,i)=>{let a=t.value;return n.has(a)||t.issues.push({code:"invalid_value",values:r,input:a,inst:e}),t}}),hy=uW("$ZodLiteral",(e,t)=>{if(pf.init(e,t),0===t.values.length)throw Error("Cannot create literal schema with no valid values");let r=new Set(t.values);e._zod.values=r,e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?co(e):e?co(e.toString()):String(e)).join("|")})$`),e._zod.parse=(n,i)=>{let a=n.value;return r.has(a)||n.issues.push({code:"invalid_value",values:t.values,input:a,inst:e}),n}}),hv=uW("$ZodFile",(e,t)=>{pf.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return n instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),t}}),h_=uW("$ZodTransform",(e,t)=>{pf.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new uK(e.constructor.name);let i=t.transform(r.value,r);if(n.async)return(i instanceof Promise?i:Promise.resolve(i)).then(e=>(r.value=e,r));if(i instanceof Promise)throw new uq;return r.value=i,r}});function hb(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}let hw=uW("$ZodOptional",(e,t)=>{pf.init(e,t),e._zod.optin="optional",e._zod.optout="optional",u9(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),u9(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${u2(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>{if("optional"===t.innerType._zod.optin){let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>hb(t,e.value)):hb(n,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,r)}}),hk=uW("$ZodExactOptional",(e,t)=>{hw.init(e,t),u9(e._zod,"values",()=>t.innerType._zod.values),u9(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(e,r)=>t.innerType._zod.run(e,r)}),hx=uW("$ZodNullable",(e,t)=>{pf.init(e,t),u9(e._zod,"optin",()=>t.innerType._zod.optin),u9(e._zod,"optout",()=>t.innerType._zod.optout),u9(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${u2(e.source)}|null)$`):void 0}),u9(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),h$=uW("$ZodDefault",(e,t)=>{pf.init(e,t),e._zod.optin="optional",u9(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);if(void 0===e.value)return e.value=t.defaultValue,e;let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(e=>hS(e,t)):hS(n,t)}});function hS(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let hI=uW("$ZodPrefault",(e,t)=>{pf.init(e,t),e._zod.optin="optional",u9(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>("backward"===r.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),hE=uW("$ZodNonOptional",(e,t)=>{pf.init(e,t),u9(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,n)=>{let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(t=>hA(t,e)):hA(i,e)}});function hA(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let hO=uW("$ZodSuccess",(e,t)=>{pf.init(e,t),e._zod.parse=(e,r)=>{if("backward"===r.direction)throw new uK("ZodSuccess");let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===n.issues.length,e)}}),hT=uW("$ZodCatch",(e,t)=>{pf.init(e,t),u9(e._zod,"optin",()=>t.innerType._zod.optin),u9(e._zod,"optout",()=>t.innerType._zod.optout),u9(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>c$(e,r,uH()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>c$(e,r,uH()))},input:e.value}),e.issues=[]),e)}}),hN=uW("$ZodNaN",(e,t)=>{pf.init(e,t),e._zod.parse=(t,r)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),hC=uW("$ZodPipe",(e,t)=>{pf.init(e,t),u9(e._zod,"values",()=>t.in._zod.values),u9(e._zod,"optin",()=>t.in._zod.optin),u9(e._zod,"optout",()=>t.out._zod.optout),u9(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("backward"===r.direction){let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>hP(e,t.in,r)):hP(n,t.in,r)}let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>hP(e,t.out,r)):hP(n,t.out,r)}});function hP(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}let hj=uW("$ZodCodec",(e,t)=>{pf.init(e,t),u9(e._zod,"values",()=>t.in._zod.values),u9(e._zod,"optin",()=>t.in._zod.optin),u9(e._zod,"optout",()=>t.out._zod.optout),u9(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("forward"===(r.direction||"forward")){let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>hz(e,t,r)):hz(n,t,r)}{let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>hz(e,t,r)):hz(n,t,r)}}});function hz(e,t,r){if(e.issues.length)return e.aborted=!0,e;if("forward"===(r.direction||"forward")){let n=t.transform(e.value,e);return n instanceof Promise?n.then(n=>hR(e,n,t.out,r)):hR(e,n,t.out,r)}{let n=t.reverseTransform(e.value,e);return n instanceof Promise?n.then(n=>hR(e,n,t.in,r)):hR(e,n,t.in,r)}}function hR(e,t,r,n){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},n)}let hM=uW("$ZodReadonly",(e,t)=>{pf.init(e,t),u9(e._zod,"propValues",()=>t.innerType._zod.propValues),u9(e._zod,"values",()=>t.innerType._zod.values),u9(e._zod,"optin",()=>t.innerType?._zod?.optin),u9(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(hL):hL(n)}});function hL(e){return e.value=Object.freeze(e.value),e}let hZ=uW("$ZodTemplateLiteral",(e,t)=>{pf.init(e,t);let r=[];for(let e of t.parts)if("object"==typeof e&&null!==e){if(!e._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);let t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw Error(`Invalid template literal part: ${e._zod.traits}`);let n=+!!t.startsWith("^"),i=t.endsWith("$")?t.length-1:t.length;r.push(t.slice(n,i))}else if(null===e||cs.has(typeof e))r.push(co(`${e}`));else throw Error(`Invalid template literal part: ${e}`);e._zod.pattern=RegExp(`^${r.join("")}$`),e._zod.parse=(r,n)=>("string"!=typeof r.value?r.issues.push({input:r.value,inst:e,expected:"string",code:"invalid_type"}):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source})),r)}),hD=uW("$ZodFunction",(e,t)=>(pf.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if("function"!=typeof t)throw Error("implement() must be called with a function");return function(...r){let n=Reflect.apply(t,this,e._def.input?cM(e._def.input,r):r);return e._def.output?cM(e._def.output,n):n}},e.implementAsync=t=>{if("function"!=typeof t)throw Error("implementAsync() must be called with a function");return async function(...r){let n=e._def.input?await cZ(e._def.input,r):r,i=await Reflect.apply(t,this,n);return e._def.output?await cZ(e._def.output,i):i}},e._zod.parse=(t,r)=>("function"!=typeof t.value?t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:e}):e._def.output&&"promise"===e._def.output._zod.def.type?t.value=e.implementAsync(t.value):t.value=e.implement(t.value),t),e.input=(...t)=>{let r=e.constructor;return new r(Array.isArray(t[0])?{type:"function",input:new hu({type:"tuple",items:t[0],rest:t[1]}),output:e._def.output}:{type:"function",input:t[0],output:e._def.output})},e.output=t=>new e.constructor({type:"function",input:e._def.input,output:t}),e)),hU=uW("$ZodPromise",(e,t)=>{pf.init(e,t),e._zod.parse=(e,r)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},r))}),hF=uW("$ZodLazy",(e,t)=>{pf.init(e,t),u9(e._zod,"innerType",()=>t.getter()),u9(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),u9(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),u9(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),u9(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(t,r)=>e._zod.innerType._zod.run(t,r)}),hB=uW("$ZodCustom",(e,t)=>{dX.init(e,t),pf.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(t=>hV(t,r,n,e));hV(i,r,n,e)}});function hV(e,t,r,n){if(!e){let e={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(cA(e))}}function hJ(e,t,r,n){let i=Math.abs(e),a=i%10,s=i%100;return s>=11&&s<=19?n:1===a?t:a>=2&&a<=4?r:n}let hW=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}};function t(t){return e[t]??null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},n={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let t=n[e.expected]??e.expected,r=cE(e.input),i=n[r]??r;return`Invalid input: expected ${t}, received ${i}`}case"invalid_value":if(1===e.values.length)return`Invalid input: expected ${cc(e.values[0])}`;return`Invalid option: expected one of ${uX(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Too big: expected ${e.origin??"value"} to have ${r}${e.maximum.toString()} ${n.unit??"elements"}`;return`Too big: expected ${e.origin??"value"} to be ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Too small: expected ${e.origin} to have ${r}${e.minimum.toString()} ${n.unit}`;return`Too small: expected ${e.origin} to be ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Invalid string: must start with "${t.prefix}"`;if("ends_with"===t.format)return`Invalid string: must end with "${t.suffix}"`;if("includes"===t.format)return`Invalid string: must include "${t.includes}"`;if("regex"===t.format)return`Invalid string: must match pattern ${t.pattern}`;return`Invalid ${r[t.format]??e.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${e.divisor}`;case"unrecognized_keys":return`Unrecognized key${e.keys.length>1?"s":""}: ${uX(e.keys,", ")}`;case"invalid_key":return`Invalid key in ${e.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${e.origin}`}}};function hq(){return{localeError:hW()}}function hK(e,t,r){return 1===Math.abs(e)?t:r}function hG(e){if(!e)return"";let t=["","","","","","",""],r=e[e.length-1];return e+(t.includes(r)?"":"")}let hH=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:" base64",base64url:" base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""},n={nan:"NaN",number:"",array:" (Array)",null:" (null)"};return e=>{switch(e.code){case"invalid_type":{let t=n[e.expected]??e.expected,r=cE(e.input),i=n[r]??r;if(/^[A-Z]/.test(e.expected))return`  instanceof ${e.expected}  ${i}`;return`  ${t}  ${i}`}case"invalid_value":if(1===e.values.length)return`  ${cc(e.values[0])}`;return`  ${uX(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`  ${e.origin??""} ${r} ${e.maximum.toString()} ${n.unit??""}`;return`  ${e.origin??""} ${r} ${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`  ${e.origin} ${r} ${e.minimum.toString()} ${n.unit}`;return`  ${e.origin} ${r} ${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`  "${t.prefix}"`;if("ends_with"===t.format)return`  "${t.suffix}"`;if("includes"===t.format)return`  "${t.includes}"`;if("regex"===t.format)return`  ${t.pattern}`;return` ${r[t.format]??e.format}`}case"not_multiple_of":return`  ${e.divisor}`;case"unrecognized_keys":return` ${uX(e.keys,", ")}`;case"invalid_key":return` ${e.origin}`;case"invalid_union":default:return``;case"invalid_element":return` ${e.origin}`}}},hY=e=>e.charAt(0).toUpperCase()+e.slice(1);function hX(e){let t=Math.abs(e),r=t%10,n=t%100;return n>=11&&n<=19||0===r?"many":1===r?"one":"few"}function hQ(e,t,r,n){let i=Math.abs(e),a=i%10,s=i%100;return s>=11&&s<=19?n:1===a?t:a>=2&&a<=4?r:n}let h0=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:" ",email:"  ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"   base64",base64url:"   base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:" "},n={nan:"NaN",number:"",array:""};return e=>{switch(e.code){case"invalid_type":{let t=n[e.expected]??e.expected,r=cE(e.input),i=n[r]??r;if(/^[A-Z]/.test(e.expected))return`  :  instanceof ${e.expected},  ${i}`;return`  :  ${t},  ${i}`}case"invalid_value":if(1===e.values.length)return`  :  ${cc(e.values[0])}`;return` :    ${uX(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return` : ,  ${e.origin??""} ${n.verb} ${r}${e.maximum.toString()} ${n.unit??""}`;return` : ,  ${e.origin??""}  ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return` : ,  ${e.origin} ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`;return` : ,  ${e.origin}  ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return` :    "${t.prefix}"`;if("ends_with"===t.format)return` :    "${t.suffix}"`;if("includes"===t.format)return` :   "${t.includes}"`;if("regex"===t.format)return` :    ${t.pattern}`;return` ${r[t.format]??e.format}`}case"not_multiple_of":return` :    ${e.divisor}`;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${uX(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${e.origin}`;default:return`  `}}};Symbol("ZodOutput"),Symbol("ZodInput");class h1{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let r=t[0];return this._map.set(e,r),r&&"object"==typeof r&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};delete r.id;let n={...r,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function h2(){return new h1}(c=globalThis).__zod_globalRegistry??(c.__zod_globalRegistry=h2());let h4=globalThis.__zod_globalRegistry;function h6(e,t){return new e({type:"string",...cu(t)})}function h9(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...cu(t)})}function h3(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...cu(t)})}function h5(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...cu(t)})}function h8(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...cu(t)})}function h7(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...cu(t)})}function fe(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...cu(t)})}function ft(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...cu(t)})}function fr(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...cu(t)})}function fn(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...cu(t)})}function fi(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...cu(t)})}function fa(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...cu(t)})}function fs(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...cu(t)})}function fo(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...cu(t)})}function fl(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...cu(t)})}function fu(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...cu(t)})}function fc(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...cu(t)})}function fd(e,t){return new e({type:"string",format:"mac",check:"string_format",abort:!1,...cu(t)})}function fp(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...cu(t)})}function fh(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...cu(t)})}function ff(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...cu(t)})}function fm(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...cu(t)})}function fg(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...cu(t)})}function fy(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...cu(t)})}function fv(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...cu(t)})}function f_(e,t){return new e({type:"string",format:"date",check:"string_format",...cu(t)})}function fb(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...cu(t)})}function fw(e,t){return new e({type:"string",format:"duration",check:"string_format",...cu(t)})}function fk(e,t){return new e({type:"number",checks:[],...cu(t)})}function fx(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...cu(t)})}function f$(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...cu(t)})}function fS(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...cu(t)})}function fI(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...cu(t)})}function fE(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...cu(t)})}function fA(e,t){return new e({type:"boolean",...cu(t)})}function fO(e,t){return new e({type:"bigint",...cu(t)})}function fT(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...cu(t)})}function fN(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...cu(t)})}function fC(e,t){return new e({type:"symbol",...cu(t)})}function fP(e,t){return new e({type:"undefined",...cu(t)})}function fj(e,t){return new e({type:"null",...cu(t)})}function fz(e){return new e({type:"any"})}function fR(e){return new e({type:"unknown"})}function fM(e,t){return new e({type:"never",...cu(t)})}function fL(e,t){return new e({type:"void",...cu(t)})}function fZ(e,t){return new e({type:"date",...cu(t)})}function fD(e,t){return new e({type:"nan",...cu(t)})}function fU(e,t){return new d0({check:"less_than",...cu(t),value:e,inclusive:!1})}function fF(e,t){return new d0({check:"less_than",...cu(t),value:e,inclusive:!0})}function fB(e,t){return new d1({check:"greater_than",...cu(t),value:e,inclusive:!1})}function fV(e,t){return new d1({check:"greater_than",...cu(t),value:e,inclusive:!0})}function fJ(e){return fB(0,e)}function fW(e){return fU(0,e)}function fq(e){return fF(0,e)}function fK(e){return fV(0,e)}function fG(e,t){return new d2({check:"multiple_of",...cu(t),value:e})}function fH(e,t){return new d9({check:"max_size",...cu(t),maximum:e})}function fY(e,t){return new d3({check:"min_size",...cu(t),minimum:e})}function fX(e,t){return new d5({check:"size_equals",...cu(t),size:e})}function fQ(e,t){return new d8({check:"max_length",...cu(t),maximum:e})}function f0(e,t){return new d7({check:"min_length",...cu(t),minimum:e})}function f1(e,t){return new pe({check:"length_equals",...cu(t),length:e})}function f2(e,t){return new pr({check:"string_format",format:"regex",...cu(t),pattern:e})}function f4(e){return new pn({check:"string_format",format:"lowercase",...cu(e)})}function f6(e){return new pi({check:"string_format",format:"uppercase",...cu(e)})}function f9(e,t){return new pa({check:"string_format",format:"includes",...cu(t),includes:e})}function f3(e,t){return new ps({check:"string_format",format:"starts_with",...cu(t),prefix:e})}function f5(e,t){return new po({check:"string_format",format:"ends_with",...cu(t),suffix:e})}function f8(e,t,r){return new pu({check:"property",property:e,schema:t,...cu(r)})}function f7(e,t){return new pc({check:"mime_type",mime:e,...cu(t)})}function me(e){return new pd({check:"overwrite",tx:e})}function mt(e){return me(t=>t.normalize(e))}function mr(){return me(e=>e.trim())}function mn(){return me(e=>e.toLowerCase())}function mi(){return me(e=>e.toUpperCase())}function ma(){return me(e=>u7(e))}function ms(e,t,r){return new e({type:"array",element:t,...cu(r)})}function mo(e,t){return new e({type:"file",...cu(t)})}function ml(e,t,r){let n=cu(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function mu(e,t,r){return new e({type:"custom",check:"custom",fn:t,...cu(r)})}function mc(e){let t=md(r=>(r.addIssue=e=>{if("string"==typeof e)r.issues.push(cA(e,r.value,t._zod.def));else{let n=e;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=t),n.continue??(n.continue=!t._zod.def.abort),r.issues.push(cA(n))}},e(r.value,r)));return t}function md(e,t){let r=new dX({check:"custom",...cu(t)});return r._zod.check=e,r}function mp(e){let t=new dX({check:"describe"});return t._zod.onattach=[t=>{let r=h4.get(t)??{};h4.add(t,{...r,description:e})}],t._zod.check=()=>{},t}function mh(e){let t=new dX({check:"meta"});return t._zod.onattach=[t=>{let r=h4.get(t)??{};h4.add(t,{...r,...e})}],t._zod.check=()=>{},t}function mf(e,t){let r=cu(t),n=r.truthy??["true","1","yes","on","y","enabled"],i=r.falsy??["false","0","no","off","n","disabled"];"sensitive"!==r.case&&(n=n.map(e=>"string"==typeof e?e.toLowerCase():e),i=i.map(e=>"string"==typeof e?e.toLowerCase():e));let a=new Set(n),s=new Set(i),o=e.Codec??hj,l=e.Boolean??pq,u=new o({type:"pipe",in:new(e.String??pm)({type:"string",error:r.error}),out:new l({type:"boolean",error:r.error}),transform:(e,t)=>{let n=e;return"sensitive"!==r.case&&(n=n.toLowerCase()),!!a.has(n)||!s.has(n)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...a,...s],input:t.value,inst:u,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?n[0]||"true":i[0]||"false",error:r.error});return u}function mm(e,t,r,n={}){let i=cu(n),a={...cu(n),check:"string_format",type:"string",format:t,fn:"function"==typeof r?r:e=>r.test(e),...i};return r instanceof RegExp&&(a.pattern=r),new e(a)}function mg(e){let t=e?.target??"draft-2020-12";return"draft-4"===t&&(t="draft-04"),"draft-7"===t&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??h4,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function my(e,t,r={path:[],schemaPath:[]}){var n;let i=e._zod.def,a=t.seen.get(e);if(a)return a.count++,r.schemaPath.includes(e)&&(a.cycle=r.path),a.schema;let s={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,s);let o=e._zod.toJSONSchema?.();if(o)s.schema=o;else{let n={...r,schemaPath:[...r.schemaPath,e],path:r.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,s.schema,n);else{let r=s.schema,a=t.processors[i.type];if(!a)throw Error(`[toJSONSchema]: Non-representable type encountered: ${i.type}`);a(e,t,r,n)}let a=e._zod.parent;a&&(s.ref||(s.ref=a),my(a,t,n),t.seen.get(a).isParent=!0)}let l=t.metadataRegistry.get(e);return l&&Object.assign(s.schema,l),"input"===t.io&&mb(e)&&(delete s.schema.examples,delete s.schema.default),"input"===t.io&&s.schema._prefault&&((n=s.schema).default??(n.default=s.schema._prefault)),delete s.schema._prefault,t.seen.get(e).schema}function mv(e,t){let r=e.seen.get(t);if(!r)throw Error("Unprocessed schema. This is a bug in Zod.");let n=new Map;for(let t of e.seen.entries()){let r=e.metadataRegistry.get(t[0])?.id;if(r){let e=n.get(r);if(e&&e!==t[0])throw Error(`Duplicate schema id "${r}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);n.set(r,t[0])}}let i=t=>{let n="draft-2020-12"===e.target?"$defs":"definitions";if(e.external){let r=e.external.registry.get(t[0])?.id,i=e.external.uri??(e=>e);if(r)return{ref:i(r)};let a=t[1].defId??t[1].schema.id??`schema${e.counter++}`;return t[1].defId=a,{defId:a,ref:`${i("__shared")}#/${n}/${a}`}}if(t[1]===r)return{ref:"#"};let i="#",a=`${i}/${n}/`,s=t[1].schema.id??`__schema${e.counter++}`;return{defId:s,ref:a+s}},a=e=>{if(e[1].schema.$ref)return;let t=e[1],{ref:r,defId:n}=i(e);t.def={...t.schema},n&&(t.defId=n);let a=t.schema;for(let e in a)delete a[e];a.$ref=r};if("throw"===e.cycles)for(let t of e.seen.entries()){let e=t[1];if(e.cycle)throw Error(`Cycle detected: #/${e.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let r of e.seen.entries()){let n=r[1];if(t===r[0]){a(r);continue}if(e.external){let n=e.external.registry.get(r[0])?.id;if(t!==r[0]&&n){a(r);continue}}if(e.metadataRegistry.get(r[0])?.id||n.cycle||n.count>1&&"ref"===e.reused){a(r);continue}}}function m_(e,t){let r=e.seen.get(t);if(!r)throw Error("Unprocessed schema. This is a bug in Zod.");let n=t=>{let r=e.seen.get(t);if(null===r.ref)return;let i=r.def??r.schema,a={...i},s=r.ref;if(r.ref=null,s){n(s);let r=e.seen.get(s),o=r.schema;if(o.$ref&&("draft-07"===e.target||"draft-04"===e.target||"openapi-3.0"===e.target)?(i.allOf=i.allOf??[],i.allOf.push(o)):Object.assign(i,o),Object.assign(i,a),t._zod.parent===s)for(let e in i)"$ref"!==e&&"allOf"!==e&&(e in a||delete i[e]);if(o.$ref)for(let e in i)"$ref"!==e&&"allOf"!==e&&e in r.def&&JSON.stringify(i[e])===JSON.stringify(r.def[e])&&delete i[e]}let o=t._zod.parent;if(o&&o!==s){n(o);let t=e.seen.get(o);if(t?.schema.$ref&&(i.$ref=t.schema.$ref,t.def))for(let e in i)"$ref"!==e&&"allOf"!==e&&e in t.def&&JSON.stringify(i[e])===JSON.stringify(t.def[e])&&delete i[e]}e.override({zodSchema:t,jsonSchema:i,path:r.path??[]})};for(let t of[...e.seen.entries()].reverse())n(t[0]);let i={};if("draft-2020-12"===e.target?i.$schema="https://json-schema.org/draft/2020-12/schema":"draft-07"===e.target?i.$schema="http://json-schema.org/draft-07/schema#":"draft-04"===e.target?i.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){let r=e.external.registry.get(t)?.id;if(!r)throw Error("Schema is missing an `id` property");i.$id=e.external.uri(r)}Object.assign(i,r.def??r.schema);let a=e.external?.defs??{};for(let t of e.seen.entries()){let e=t[1];e.def&&e.defId&&(a[e.defId]=e.def)}e.external||Object.keys(a).length>0&&("draft-2020-12"===e.target?i.$defs=a:i.definitions=a);try{let r=JSON.parse(JSON.stringify(i));return Object.defineProperty(r,"~standard",{value:{...t["~standard"],jsonSchema:{input:mk(t,"input",e.processors),output:mk(t,"output",e.processors)}},enumerable:!1,writable:!1}),r}catch(e){throw Error("Error converting schema to JSON.")}}function mb(e,t){let r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);let n=e._zod.def;if("transform"===n.type)return!0;if("array"===n.type)return mb(n.element,r);if("set"===n.type)return mb(n.valueType,r);if("lazy"===n.type)return mb(n.getter(),r);if("promise"===n.type||"optional"===n.type||"nonoptional"===n.type||"nullable"===n.type||"readonly"===n.type||"default"===n.type||"prefault"===n.type)return mb(n.innerType,r);if("intersection"===n.type)return mb(n.left,r)||mb(n.right,r);if("record"===n.type||"map"===n.type)return mb(n.keyType,r)||mb(n.valueType,r);if("pipe"===n.type)return mb(n.in,r)||mb(n.out,r);if("object"===n.type){for(let e in n.shape)if(mb(n.shape[e],r))return!0;return!1}if("union"===n.type){for(let e of n.options)if(mb(e,r))return!0;return!1}if("tuple"===n.type){for(let e of n.items)if(mb(e,r))return!0;if(n.rest&&mb(n.rest,r))return!0}return!1}let mw=(e,t={})=>r=>{let n=mg({...r,processors:t});return my(e,n),mv(n,e),m_(n,e)},mk=(e,t,r={})=>n=>{let{libraryOptions:i,target:a}=n??{},s=mg({...i??{},target:a,io:t,processors:r});return my(e,s),mv(s,e),m_(s,e)},mx={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},m$=(e,t,r,n)=>{let i=r;i.type="string";let{minimum:a,maximum:s,format:o,patterns:l,contentEncoding:u}=e._zod.bag;if("number"==typeof a&&(i.minLength=a),"number"==typeof s&&(i.maxLength=s),o&&(i.format=mx[o]??o,""===i.format&&delete i.format,"time"===o&&delete i.format),u&&(i.contentEncoding=u),l&&l.size>0){let e=[...l];1===e.length?i.pattern=e[0].source:e.length>1&&(i.allOf=[...e.map(e=>({..."draft-07"===t.target||"draft-04"===t.target||"openapi-3.0"===t.target?{type:"string"}:{},pattern:e.source}))])}},mS=(e,t,r,n)=>{let i=r,{minimum:a,maximum:s,format:o,multipleOf:l,exclusiveMaximum:u,exclusiveMinimum:c}=e._zod.bag;"string"==typeof o&&o.includes("int")?i.type="integer":i.type="number","number"==typeof c&&("draft-04"===t.target||"openapi-3.0"===t.target?(i.minimum=c,i.exclusiveMinimum=!0):i.exclusiveMinimum=c),"number"==typeof a&&(i.minimum=a,"number"==typeof c&&"draft-04"!==t.target&&(c>=a?delete i.minimum:delete i.exclusiveMinimum)),"number"==typeof u&&("draft-04"===t.target||"openapi-3.0"===t.target?(i.maximum=u,i.exclusiveMaximum=!0):i.exclusiveMaximum=u),"number"==typeof s&&(i.maximum=s,"number"==typeof u&&"draft-04"!==t.target&&(u<=s?delete i.maximum:delete i.exclusiveMaximum)),"number"==typeof l&&(i.multipleOf=l)},mI=(e,t,r,n)=>{r.type="boolean"},mE=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema")},mA=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema")},mO=(e,t,r,n)=>{"openapi-3.0"===t.target?(r.type="string",r.nullable=!0,r.enum=[null]):r.type="null"},mT=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema")},mN=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Void cannot be represented in JSON Schema")},mC=(e,t,r,n)=>{r.not={}},mP=(e,t,r,n)=>{},mj=(e,t,r,n)=>{},mz=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Date cannot be represented in JSON Schema")},mR=(e,t,r,n)=>{let i=uY(e._zod.def.entries);i.every(e=>"number"==typeof e)&&(r.type="number"),i.every(e=>"string"==typeof e)&&(r.type="string"),r.enum=i},mM=(e,t,r,n)=>{let i=e._zod.def,a=[];for(let e of i.values)if(void 0===e){if("throw"===t.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof e)if("throw"===t.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else a.push(Number(e));else a.push(e);if(0===a.length);else if(1===a.length){let e=a[0];r.type=null===e?"null":typeof e,"draft-04"===t.target||"openapi-3.0"===t.target?r.enum=[e]:r.const=e}else a.every(e=>"number"==typeof e)&&(r.type="number"),a.every(e=>"string"==typeof e)&&(r.type="string"),a.every(e=>"boolean"==typeof e)&&(r.type="boolean"),a.every(e=>null===e)&&(r.type="null"),r.enum=a},mL=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("NaN cannot be represented in JSON Schema")},mZ=(e,t,r,n)=>{let i=r,a=e._zod.pattern;if(!a)throw Error("Pattern not found in template literal");i.type="string",i.pattern=a.source},mD=(e,t,r,n)=>{let i=r,a={type:"string",format:"binary",contentEncoding:"binary"},{minimum:s,maximum:o,mime:l}=e._zod.bag;void 0!==s&&(a.minLength=s),void 0!==o&&(a.maxLength=o),l?1===l.length?(a.contentMediaType=l[0],Object.assign(i,a)):(Object.assign(i,a),i.anyOf=l.map(e=>({contentMediaType:e}))):Object.assign(i,a)},mU=(e,t,r,n)=>{r.type="boolean"},mF=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")},mB=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")},mV=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema")},mJ=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Map cannot be represented in JSON Schema")},mW=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Set cannot be represented in JSON Schema")},mq=(e,t,r,n)=>{let i=r,a=e._zod.def,{minimum:s,maximum:o}=e._zod.bag;"number"==typeof s&&(i.minItems=s),"number"==typeof o&&(i.maxItems=o),i.type="array",i.items=my(a.element,t,{...n,path:[...n.path,"items"]})},mK=(e,t,r,n)=>{let i=r,a=e._zod.def;i.type="object",i.properties={};let s=a.shape;for(let e in s)i.properties[e]=my(s[e],t,{...n,path:[...n.path,"properties",e]});let o=new Set([...new Set(Object.keys(s))].filter(e=>{let r=a.shape[e]._zod;return"input"===t.io?void 0===r.optin:void 0===r.optout}));o.size>0&&(i.required=Array.from(o)),a.catchall?._zod.def.type==="never"?i.additionalProperties=!1:a.catchall?a.catchall&&(i.additionalProperties=my(a.catchall,t,{...n,path:[...n.path,"additionalProperties"]})):"output"===t.io&&(i.additionalProperties=!1)},mG=(e,t,r,n)=>{let i=e._zod.def,a=!1===i.inclusive,s=i.options.map((e,r)=>my(e,t,{...n,path:[...n.path,a?"oneOf":"anyOf",r]}));a?r.oneOf=s:r.anyOf=s},mH=(e,t,r,n)=>{let i=e._zod.def,a=my(i.left,t,{...n,path:[...n.path,"allOf",0]}),s=my(i.right,t,{...n,path:[...n.path,"allOf",1]}),o=e=>"allOf"in e&&1===Object.keys(e).length;r.allOf=[...o(a)?a.allOf:[a],...o(s)?s.allOf:[s]]},mY=(e,t,r,n)=>{let i=r,a=e._zod.def;i.type="array";let s="draft-2020-12"===t.target?"prefixItems":"items",o="draft-2020-12"===t.target||"openapi-3.0"===t.target?"items":"additionalItems",l=a.items.map((e,r)=>my(e,t,{...n,path:[...n.path,s,r]})),u=a.rest?my(a.rest,t,{...n,path:[...n.path,o,..."openapi-3.0"===t.target?[a.items.length]:[]]}):null;"draft-2020-12"===t.target?(i.prefixItems=l,u&&(i.items=u)):"openapi-3.0"===t.target?(i.items={anyOf:l},u&&i.items.anyOf.push(u),i.minItems=l.length,u||(i.maxItems=l.length)):(i.items=l,u&&(i.additionalItems=u));let{minimum:c,maximum:d}=e._zod.bag;"number"==typeof c&&(i.minItems=c),"number"==typeof d&&(i.maxItems=d)},mX=(e,t,r,n)=>{let i=r,a=e._zod.def;i.type="object";let s=a.keyType,o=s._zod.bag,l=o?.patterns;if("loose"===a.mode&&l&&l.size>0){let e=my(a.valueType,t,{...n,path:[...n.path,"patternProperties","*"]});for(let t of(i.patternProperties={},l))i.patternProperties[t.source]=e}else("draft-07"===t.target||"draft-2020-12"===t.target)&&(i.propertyNames=my(a.keyType,t,{...n,path:[...n.path,"propertyNames"]})),i.additionalProperties=my(a.valueType,t,{...n,path:[...n.path,"additionalProperties"]});let u=s._zod.values;if(u){let e=[...u].filter(e=>"string"==typeof e||"number"==typeof e);e.length>0&&(i.required=e)}},mQ=(e,t,r,n)=>{let i=e._zod.def,a=my(i.innerType,t,n),s=t.seen.get(e);"openapi-3.0"===t.target?(s.ref=i.innerType,r.nullable=!0):r.anyOf=[a,{type:"null"}]},m0=(e,t,r,n)=>{let i=e._zod.def;my(i.innerType,t,n),t.seen.get(e).ref=i.innerType},m1=(e,t,r,n)=>{let i=e._zod.def;my(i.innerType,t,n),t.seen.get(e).ref=i.innerType,r.default=JSON.parse(JSON.stringify(i.defaultValue))},m2=(e,t,r,n)=>{let i=e._zod.def;my(i.innerType,t,n),t.seen.get(e).ref=i.innerType,"input"===t.io&&(r._prefault=JSON.parse(JSON.stringify(i.defaultValue)))},m4=(e,t,r,n)=>{let i,a=e._zod.def;my(a.innerType,t,n),t.seen.get(e).ref=a.innerType;try{i=a.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}r.default=i},m6=(e,t,r,n)=>{let i=e._zod.def,a="input"===t.io?"transform"===i.in._zod.def.type?i.out:i.in:i.out;my(a,t,n),t.seen.get(e).ref=a},m9=(e,t,r,n)=>{let i=e._zod.def;my(i.innerType,t,n),t.seen.get(e).ref=i.innerType,r.readOnly=!0},m3=(e,t,r,n)=>{let i=e._zod.def;my(i.innerType,t,n),t.seen.get(e).ref=i.innerType},m5=(e,t,r,n)=>{let i=e._zod.def;my(i.innerType,t,n),t.seen.get(e).ref=i.innerType},m8=(e,t,r,n)=>{let i=e._zod.innerType;my(i,t,n),t.seen.get(e).ref=i},m7=uW("ZodISODateTime",(e,t)=>{pA.init(e,t),gS.init(e,t)});function ge(e){return fv(m7,e)}let gt=uW("ZodISODate",(e,t)=>{pO.init(e,t),gS.init(e,t)});function gr(e){return f_(gt,e)}let gn=uW("ZodISOTime",(e,t)=>{pT.init(e,t),gS.init(e,t)});function gi(e){return fb(gn,e)}let ga=uW("ZodISODuration",(e,t)=>{pN.init(e,t),gS.init(e,t)});function gs(e){return fw(ga,e)}let go=(e,t)=>{cT.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>cP(e,t)},flatten:{value:t=>cC(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,uQ,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,uQ,2)}},isEmpty:{get:()=>0===e.issues.length}})};uW("ZodError",go);let gl=uW("ZodError",go,{Parent:Error}),gu=cR(gl),gc=cL(gl),gd=cD(gl),gp=cF(gl),gh=cV(gl),gf=cJ(gl),gm=cW(gl),gg=cq(gl),gy=cK(gl),gv=cG(gl),g_=cH(gl),gb=cY(gl),gw=uW("ZodType",(e,t)=>(pf.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:mk(e,"input"),output:mk(e,"output")}}),e.toJSONSchema=mw(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(u5(t,{checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),{parent:!0}),e.with=e.check,e.clone=(t,r)=>cl(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>gu(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>gd(e,t,r),e.parseAsync=async(t,r)=>gc(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>gp(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>gh(e,t,r),e.decode=(t,r)=>gf(e,t,r),e.encodeAsync=async(t,r)=>gm(e,t,r),e.decodeAsync=async(t,r)=>gg(e,t,r),e.safeEncode=(t,r)=>gy(e,t,r),e.safeDecode=(t,r)=>gv(e,t,r),e.safeEncodeAsync=async(t,r)=>g_(e,t,r),e.safeDecodeAsync=async(t,r)=>gb(e,t,r),e.refine=(t,r)=>e.check(vK(t,r)),e.superRefine=t=>e.check(vG(t)),e.overwrite=t=>e.check(me(t)),e.optional=()=>vh(e),e.exactOptional=()=>vm(e),e.nullable=()=>vy(e),e.nullish=()=>vh(vy(e)),e.nonoptional=t=>v$(e,t),e.array=()=>yB(e),e.or=t=>yH([e,t]),e.and=t=>y2(e,t),e.transform=t=>vC(e,vd(t)),e.default=t=>vb(e,t),e.prefault=t=>vk(e,t),e.catch=t=>vA(e,t),e.pipe=t=>vC(e,t),e.readonly=()=>vR(e),e.describe=t=>{let r=e.clone();return h4.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>h4.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return h4.get(e);let r=e.clone();return h4.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=t=>t(e),e)),gk=uW("_ZodString",(e,t)=>{pm.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>m$(e,t,r,n);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(f2(...t)),e.includes=(...t)=>e.check(f9(...t)),e.startsWith=(...t)=>e.check(f3(...t)),e.endsWith=(...t)=>e.check(f5(...t)),e.min=(...t)=>e.check(f0(...t)),e.max=(...t)=>e.check(fQ(...t)),e.length=(...t)=>e.check(f1(...t)),e.nonempty=(...t)=>e.check(f0(1,...t)),e.lowercase=t=>e.check(f4(t)),e.uppercase=t=>e.check(f6(t)),e.trim=()=>e.check(mr()),e.normalize=(...t)=>e.check(mt(...t)),e.toLowerCase=()=>e.check(mn()),e.toUpperCase=()=>e.check(mi()),e.slugify=()=>e.check(ma())}),gx=uW("ZodString",(e,t)=>{pm.init(e,t),gk.init(e,t),e.email=t=>e.check(h9(gI,t)),e.url=t=>e.check(ft(gz,t)),e.jwt=t=>e.check(fy(yi,t)),e.emoji=t=>e.check(fr(gL,t)),e.guid=t=>e.check(h3(gA,t)),e.uuid=t=>e.check(h5(gT,t)),e.uuidv4=t=>e.check(h8(gT,t)),e.uuidv6=t=>e.check(h7(gT,t)),e.uuidv7=t=>e.check(fe(gT,t)),e.nanoid=t=>e.check(fn(gD,t)),e.guid=t=>e.check(h3(gA,t)),e.cuid=t=>e.check(fi(gF,t)),e.cuid2=t=>e.check(fa(gV,t)),e.ulid=t=>e.check(fs(gW,t)),e.base64=t=>e.check(ff(g8,t)),e.base64url=t=>e.check(fm(ye,t)),e.xid=t=>e.check(fo(gK,t)),e.ksuid=t=>e.check(fl(gH,t)),e.ipv4=t=>e.check(fu(gX,t)),e.ipv6=t=>e.check(fc(g2,t)),e.cidrv4=t=>e.check(fp(g6,t)),e.cidrv6=t=>e.check(fh(g3,t)),e.e164=t=>e.check(fg(yr,t)),e.datetime=t=>e.check(ge(t)),e.date=t=>e.check(gr(t)),e.time=t=>e.check(gi(t)),e.duration=t=>e.check(gs(t))});function g$(e){return h6(gx,e)}let gS=uW("ZodStringFormat",(e,t)=>{pg.init(e,t),gk.init(e,t)}),gI=uW("ZodEmail",(e,t)=>{p_.init(e,t),gS.init(e,t)});function gE(e){return h9(gI,e)}let gA=uW("ZodGUID",(e,t)=>{py.init(e,t),gS.init(e,t)});function gO(e){return h3(gA,e)}let gT=uW("ZodUUID",(e,t)=>{pv.init(e,t),gS.init(e,t)});function gN(e){return h5(gT,e)}function gC(e){return h8(gT,e)}function gP(e){return h7(gT,e)}function gj(e){return fe(gT,e)}let gz=uW("ZodURL",(e,t)=>{pb.init(e,t),gS.init(e,t)});function gR(e){return ft(gz,e)}function gM(e){return ft(gz,{protocol:/^https?$/,hostname:dv,...cu(e)})}let gL=uW("ZodEmoji",(e,t)=>{pw.init(e,t),gS.init(e,t)});function gZ(e){return fr(gL,e)}let gD=uW("ZodNanoID",(e,t)=>{pk.init(e,t),gS.init(e,t)});function gU(e){return fn(gD,e)}let gF=uW("ZodCUID",(e,t)=>{px.init(e,t),gS.init(e,t)});function gB(e){return fi(gF,e)}let gV=uW("ZodCUID2",(e,t)=>{p$.init(e,t),gS.init(e,t)});function gJ(e){return fa(gV,e)}let gW=uW("ZodULID",(e,t)=>{pS.init(e,t),gS.init(e,t)});function gq(e){return fs(gW,e)}let gK=uW("ZodXID",(e,t)=>{pI.init(e,t),gS.init(e,t)});function gG(e){return fo(gK,e)}let gH=uW("ZodKSUID",(e,t)=>{pE.init(e,t),gS.init(e,t)});function gY(e){return fl(gH,e)}let gX=uW("ZodIPv4",(e,t)=>{pC.init(e,t),gS.init(e,t)});function gQ(e){return fu(gX,e)}let g0=uW("ZodMAC",(e,t)=>{pj.init(e,t),gS.init(e,t)});function g1(e){return fd(g0,e)}let g2=uW("ZodIPv6",(e,t)=>{pP.init(e,t),gS.init(e,t)});function g4(e){return fc(g2,e)}let g6=uW("ZodCIDRv4",(e,t)=>{pz.init(e,t),gS.init(e,t)});function g9(e){return fp(g6,e)}let g3=uW("ZodCIDRv6",(e,t)=>{pR.init(e,t),gS.init(e,t)});function g5(e){return fh(g3,e)}let g8=uW("ZodBase64",(e,t)=>{pL.init(e,t),gS.init(e,t)});function g7(e){return ff(g8,e)}let ye=uW("ZodBase64URL",(e,t)=>{pD.init(e,t),gS.init(e,t)});function yt(e){return fm(ye,e)}let yr=uW("ZodE164",(e,t)=>{pU.init(e,t),gS.init(e,t)});function yn(e){return fg(yr,e)}let yi=uW("ZodJWT",(e,t)=>{pB.init(e,t),gS.init(e,t)});function ya(e){return fy(yi,e)}let ys=uW("ZodCustomStringFormat",(e,t)=>{pV.init(e,t),gS.init(e,t)});function yo(e,t,r={}){return mm(ys,e,t,r)}function yl(e){return mm(ys,"hostname",dy,e)}function yu(e){return mm(ys,"hex",dj,e)}function yc(e,t){let r=t?.enc??"hex",n=`${e}_${r}`,i=p[n];if(!i)throw Error(`Unrecognized hash format: ${n}`);return mm(ys,n,i,t)}let yd=uW("ZodNumber",(e,t)=>{pJ.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mS(e,t,r,n),e.gt=(t,r)=>e.check(fB(t,r)),e.gte=(t,r)=>e.check(fV(t,r)),e.min=(t,r)=>e.check(fV(t,r)),e.lt=(t,r)=>e.check(fU(t,r)),e.lte=(t,r)=>e.check(fF(t,r)),e.max=(t,r)=>e.check(fF(t,r)),e.int=t=>e.check(yf(t)),e.safe=t=>e.check(yf(t)),e.positive=t=>e.check(fB(0,t)),e.nonnegative=t=>e.check(fV(0,t)),e.negative=t=>e.check(fU(0,t)),e.nonpositive=t=>e.check(fF(0,t)),e.multipleOf=(t,r)=>e.check(fG(t,r)),e.step=(t,r)=>e.check(fG(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function yp(e){return fk(yd,e)}let yh=uW("ZodNumberFormat",(e,t)=>{pW.init(e,t),yd.init(e,t)});function yf(e){return fx(yh,e)}function ym(e){return f$(yh,e)}function yg(e){return fS(yh,e)}function yy(e){return fI(yh,e)}function yv(e){return fE(yh,e)}let y_=uW("ZodBoolean",(e,t)=>{pq.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mI(e,t,r,n)});function yb(e){return fA(y_,e)}let yw=uW("ZodBigInt",(e,t)=>{pK.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mE(e,t,r,n),e.gte=(t,r)=>e.check(fV(t,r)),e.min=(t,r)=>e.check(fV(t,r)),e.gt=(t,r)=>e.check(fB(t,r)),e.gte=(t,r)=>e.check(fV(t,r)),e.min=(t,r)=>e.check(fV(t,r)),e.lt=(t,r)=>e.check(fU(t,r)),e.lte=(t,r)=>e.check(fF(t,r)),e.max=(t,r)=>e.check(fF(t,r)),e.positive=t=>e.check(fB(BigInt(0),t)),e.negative=t=>e.check(fU(BigInt(0),t)),e.nonpositive=t=>e.check(fF(BigInt(0),t)),e.nonnegative=t=>e.check(fV(BigInt(0),t)),e.multipleOf=(t,r)=>e.check(fG(t,r));let r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null});function yk(e){return fO(yw,e)}let yx=uW("ZodBigIntFormat",(e,t)=>{pG.init(e,t),yw.init(e,t)});function y$(e){return fT(yx,e)}function yS(e){return fN(yx,e)}let yI=uW("ZodSymbol",(e,t)=>{pH.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mA(e,t,r,n)});function yE(e){return fC(yI,e)}let yA=uW("ZodUndefined",(e,t)=>{pY.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mT(e,t,r,n)});function yO(e){return fP(yA,e)}let yT=uW("ZodNull",(e,t)=>{pX.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mO(e,t,r,n)});function yN(e){return fj(yT,e)}let yC=uW("ZodAny",(e,t)=>{pQ.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mP(e,t,r,n)});function yP(){return fz(yC)}let yj=uW("ZodUnknown",(e,t)=>{p0.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mj(e,t,r,n)});function yz(){return fR(yj)}let yR=uW("ZodNever",(e,t)=>{p1.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mC(e,t,r,n)});function yM(e){return fM(yR,e)}let yL=uW("ZodVoid",(e,t)=>{p2.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mN(e,t,r,n)});function yZ(e){return fL(yL,e)}let yD=uW("ZodDate",(e,t)=>{p4.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mz(e,t,r,n),e.min=(t,r)=>e.check(fV(t,r)),e.max=(t,r)=>e.check(fF(t,r));let r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function yU(e){return fZ(yD,e)}let yF=uW("ZodArray",(e,t)=>{p9.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mq(e,t,r,n),e.element=t.element,e.min=(t,r)=>e.check(f0(t,r)),e.nonempty=t=>e.check(f0(1,t)),e.max=(t,r)=>e.check(fQ(t,r)),e.length=(t,r)=>e.check(f1(t,r)),e.unwrap=()=>e.element});function yB(e,t){return ms(yF,e,t)}function yV(e){return vi(Object.keys(e._zod.def.shape))}let yJ=uW("ZodObject",(e,t)=>{he.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mK(e,t,r,n),u9(e,"shape",()=>t.shape),e.keyof=()=>vi(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:yz()}),e.loose=()=>e.clone({...e._zod.def,catchall:yz()}),e.strict=()=>e.clone({...e._zod.def,catchall:yM()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>cg(e,t),e.safeExtend=t=>cy(e,t),e.merge=t=>cv(e,t),e.pick=t=>cf(e,t),e.omit=t=>cm(e,t),e.partial=(...t)=>c_(vp,e,t[0]),e.required=(...t)=>cb(vx,e,t[0])});function yW(e,t){return new yJ({type:"object",shape:e??{},...cu(t)})}function yq(e,t){return new yJ({type:"object",shape:e,catchall:yM(),...cu(t)})}function yK(e,t){return new yJ({type:"object",shape:e,catchall:yz(),...cu(t)})}let yG=uW("ZodUnion",(e,t)=>{hr.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mG(e,t,r,n),e.options=t.options});function yH(e,t){return new yG({type:"union",options:e,...cu(t)})}let yY=uW("ZodXor",(e,t)=>{yG.init(e,t),hi.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mG(e,t,r,n),e.options=t.options});function yX(e,t){return new yY({type:"union",options:e,inclusive:!1,...cu(t)})}let yQ=uW("ZodDiscriminatedUnion",(e,t)=>{yG.init(e,t),ha.init(e,t)});function y0(e,t,r){return new yQ({type:"union",options:t,discriminator:e,...cu(r)})}let y1=uW("ZodIntersection",(e,t)=>{hs.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mH(e,t,r,n)});function y2(e,t){return new y1({type:"intersection",left:e,right:t})}let y4=uW("ZodTuple",(e,t)=>{hu.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mY(e,t,r,n),e.rest=t=>e.clone({...e._zod.def,rest:t})});function y6(e,t,r){let n=t instanceof pf,i=n?r:t;return new y4({type:"tuple",items:e,rest:n?t:null,...cu(i)})}let y9=uW("ZodRecord",(e,t)=>{hd.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mX(e,t,r,n),e.keyType=t.keyType,e.valueType=t.valueType});function y3(e,t,r){return new y9({type:"record",keyType:e,valueType:t,...cu(r)})}function y5(e,t,r){let n=cl(e);return n._zod.values=void 0,new y9({type:"record",keyType:n,valueType:t,...cu(r)})}function y8(e,t,r){return new y9({type:"record",keyType:e,valueType:t,mode:"loose",...cu(r)})}let y7=uW("ZodMap",(e,t)=>{hp.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mJ(e,t,r,n),e.keyType=t.keyType,e.valueType=t.valueType,e.min=(...t)=>e.check(fY(...t)),e.nonempty=t=>e.check(fY(1,t)),e.max=(...t)=>e.check(fH(...t)),e.size=(...t)=>e.check(fX(...t))});function ve(e,t,r){return new y7({type:"map",keyType:e,valueType:t,...cu(r)})}let vt=uW("ZodSet",(e,t)=>{hf.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mW(e,t,r,n),e.min=(...t)=>e.check(fY(...t)),e.nonempty=t=>e.check(fY(1,t)),e.max=(...t)=>e.check(fH(...t)),e.size=(...t)=>e.check(fX(...t))});function vr(e,t){return new vt({type:"set",valueType:e,...cu(t)})}let vn=uW("ZodEnum",(e,t)=>{hg.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mR(e,t,r,n),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,n)=>{let i={};for(let n of e)if(r.has(n))i[n]=t.entries[n];else throw Error(`Key ${n} not found in enum`);return new vn({...t,checks:[],...cu(n),entries:i})},e.exclude=(e,n)=>{let i={...t.entries};for(let t of e)if(r.has(t))delete i[t];else throw Error(`Key ${t} not found in enum`);return new vn({...t,checks:[],...cu(n),entries:i})}});function vi(e,t){return new vn({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...cu(t)})}function va(e,t){return new vn({type:"enum",entries:e,...cu(t)})}let vs=uW("ZodLiteral",(e,t)=>{hy.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mM(e,t,r,n),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function vo(e,t){return new vs({type:"literal",values:Array.isArray(e)?e:[e],...cu(t)})}let vl=uW("ZodFile",(e,t)=>{hv.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mD(e,t,r,n),e.min=(t,r)=>e.check(fY(t,r)),e.max=(t,r)=>e.check(fH(t,r)),e.mime=(t,r)=>e.check(f7(Array.isArray(t)?t:[t],r))});function vu(e){return mo(vl,e)}let vc=uW("ZodTransform",(e,t)=>{h_.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mV(e,t,r,n),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new uK(e.constructor.name);r.addIssue=n=>{if("string"==typeof n)r.issues.push(cA(n,r.value,t));else{let t=n;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=r.value),t.inst??(t.inst=e),r.issues.push(cA(t))}};let i=t.transform(r.value,r);return i instanceof Promise?i.then(e=>(r.value=e,r)):(r.value=i,r)}});function vd(e){return new vc({type:"transform",transform:e})}let vp=uW("ZodOptional",(e,t)=>{hw.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>m5(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function vh(e){return new vp({type:"optional",innerType:e})}let vf=uW("ZodExactOptional",(e,t)=>{hk.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>m5(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function vm(e){return new vf({type:"optional",innerType:e})}let vg=uW("ZodNullable",(e,t)=>{hx.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mQ(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function vy(e){return new vg({type:"nullable",innerType:e})}function vv(e){return vh(vy(e))}let v_=uW("ZodDefault",(e,t)=>{h$.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>m1(e,t,r,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function vb(e,t){return new v_({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():ci(t)}})}let vw=uW("ZodPrefault",(e,t)=>{hI.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>m2(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function vk(e,t){return new vw({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():ci(t)}})}let vx=uW("ZodNonOptional",(e,t)=>{hE.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>m0(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function v$(e,t){return new vx({type:"nonoptional",innerType:e,...cu(t)})}let vS=uW("ZodSuccess",(e,t)=>{hO.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mU(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function vI(e){return new vS({type:"success",innerType:e})}let vE=uW("ZodCatch",(e,t)=>{hT.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>m4(e,t,r,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function vA(e,t){return new vE({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}let vO=uW("ZodNaN",(e,t)=>{hN.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mL(e,t,r,n)});function vT(e){return fD(vO,e)}let vN=uW("ZodPipe",(e,t)=>{hC.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>m6(e,t,r,n),e.in=t.in,e.out=t.out});function vC(e,t){return new vN({type:"pipe",in:e,out:t})}let vP=uW("ZodCodec",(e,t)=>{vN.init(e,t),hj.init(e,t)});function vj(e,t,r){return new vP({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}let vz=uW("ZodReadonly",(e,t)=>{hM.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>m9(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function vR(e){return new vz({type:"readonly",innerType:e})}let vM=uW("ZodTemplateLiteral",(e,t)=>{hZ.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mZ(e,t,r,n)});function vL(e,t){return new vM({type:"template_literal",parts:e,...cu(t)})}let vZ=uW("ZodLazy",(e,t)=>{hF.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>m8(e,t,r,n),e.unwrap=()=>e._zod.def.getter()});function vD(e){return new vZ({type:"lazy",getter:e})}let vU=uW("ZodPromise",(e,t)=>{hU.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>m3(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function vF(e){return new vU({type:"promise",innerType:e})}let vB=uW("ZodFunction",(e,t)=>{hD.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mB(e,t,r,n)});function vV(e){return new vB({type:"function",input:Array.isArray(e?.input)?y6(e?.input):e?.input??yB(yz()),output:e?.output??yz()})}let vJ=uW("ZodCustom",(e,t)=>{hB.init(e,t),gw.init(e,t),e._zod.processJSONSchema=(t,r,n)=>mF(e,t,r,n)});function vW(e){let t=new dX({check:"custom"});return t._zod.check=e,t}function vq(e,t){return ml(vJ,e??(()=>!0),t)}function vK(e,t={}){return mu(vJ,e,t)}function vG(e){return mc(e)}let vH=mp,vY=mh;function vX(e,t={}){let r=new vJ({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...cu(t)});return r._zod.bag.Class=e,r._zod.check=t=>{t.value instanceof e||t.issues.push({code:"invalid_type",expected:e.name,input:t.value,inst:r,path:[...r._zod.def.path??[]]})},r}let vQ=(...e)=>mf({Codec:vP,Boolean:y_,String:gx},...e);function v0(e){let t=vD(()=>yH([g$(e),yp(),yb(),yN(),yB(t),y3(g$(),t)]));return t}function v1(e,t){return vC(vd(e),t)}d||(d={});let v2={...m,...h,iso:f},v4=new Set(["$schema","$ref","$defs","definitions","$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor","type","enum","const","anyOf","oneOf","allOf","not","properties","required","additionalProperties","patternProperties","propertyNames","minProperties","maxProperties","items","prefixItems","additionalItems","minItems","maxItems","uniqueItems","contains","minContains","maxContains","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","description","default","contentEncoding","contentMediaType","contentSchema","unevaluatedItems","unevaluatedProperties","if","then","else","dependentSchemas","dependentRequired","nullable","readOnly"]);function v6(e,t){if(!e.startsWith("#"))throw Error("External $ref is not supported, only local refs (#/...) are allowed");let r=e.slice(1).split("/").filter(Boolean);if(0===r.length)return t.rootSchema;let n="draft-2020-12"===t.version?"$defs":"definitions";if(r[0]===n){let n=r[1];if(!n||!t.defs[n])throw Error(`Reference not found: ${e}`);return t.defs[n]}throw Error(`Reference not found: ${e}`)}function v9(e,t){let r;if(void 0!==e.not){if("object"==typeof e.not&&0===Object.keys(e.not).length)return v2.never();throw Error("not is not supported in Zod (except { not: {} } for never)")}if(void 0!==e.unevaluatedItems)throw Error("unevaluatedItems is not supported");if(void 0!==e.unevaluatedProperties)throw Error("unevaluatedProperties is not supported");if(void 0!==e.if||void 0!==e.then||void 0!==e.else)throw Error("Conditional schemas (if/then/else) are not supported");if(void 0!==e.dependentSchemas||void 0!==e.dependentRequired)throw Error("dependentSchemas and dependentRequired are not supported");if(e.$ref){let r=e.$ref;if(t.refs.has(r))return t.refs.get(r);if(t.processing.has(r))return v2.lazy(()=>{if(!t.refs.has(r))throw Error(`Circular reference not resolved: ${r}`);return t.refs.get(r)});t.processing.add(r);let n=v3(v6(r,t),t);return t.refs.set(r,n),t.processing.delete(r),n}if(void 0!==e.enum){let r=e.enum;if("openapi-3.0"===t.version&&!0===e.nullable&&1===r.length&&null===r[0])return v2.null();if(0===r.length)return v2.never();if(1===r.length)return v2.literal(r[0]);if(r.every(e=>"string"==typeof e))return v2.enum(r);let n=r.map(e=>v2.literal(e));return n.length<2?n[0]:v2.union([n[0],n[1],...n.slice(2)])}if(void 0!==e.const)return v2.literal(e.const);let n=e.type;if(Array.isArray(n)){let r=n.map(r=>v9({...e,type:r},t));return 0===r.length?v2.never():1===r.length?r[0]:v2.union(r)}if(!n)return v2.any();switch(n){case"string":{let t=v2.string();if(e.format){let r=e.format;"email"===r?t=t.check(v2.email()):"uri"===r||"uri-reference"===r?t=t.check(v2.url()):"uuid"===r||"guid"===r?t=t.check(v2.uuid()):"date-time"===r?t=t.check(v2.iso.datetime()):"date"===r?t=t.check(v2.iso.date()):"time"===r?t=t.check(v2.iso.time()):"duration"===r?t=t.check(v2.iso.duration()):"ipv4"===r?t=t.check(v2.ipv4()):"ipv6"===r?t=t.check(v2.ipv6()):"mac"===r?t=t.check(v2.mac()):"cidr"===r?t=t.check(v2.cidrv4()):"cidr-v6"===r?t=t.check(v2.cidrv6()):"base64"===r?t=t.check(v2.base64()):"base64url"===r?t=t.check(v2.base64url()):"e164"===r?t=t.check(v2.e164()):"jwt"===r?t=t.check(v2.jwt()):"emoji"===r?t=t.check(v2.emoji()):"nanoid"===r?t=t.check(v2.nanoid()):"cuid"===r?t=t.check(v2.cuid()):"cuid2"===r?t=t.check(v2.cuid2()):"ulid"===r?t=t.check(v2.ulid()):"xid"===r?t=t.check(v2.xid()):"ksuid"===r&&(t=t.check(v2.ksuid()))}"number"==typeof e.minLength&&(t=t.min(e.minLength)),"number"==typeof e.maxLength&&(t=t.max(e.maxLength)),e.pattern&&(t=t.regex(new RegExp(e.pattern))),r=t;break}case"number":case"integer":{let t="integer"===n?v2.number().int():v2.number();"number"==typeof e.minimum&&(t=t.min(e.minimum)),"number"==typeof e.maximum&&(t=t.max(e.maximum)),"number"==typeof e.exclusiveMinimum?t=t.gt(e.exclusiveMinimum):!0===e.exclusiveMinimum&&"number"==typeof e.minimum&&(t=t.gt(e.minimum)),"number"==typeof e.exclusiveMaximum?t=t.lt(e.exclusiveMaximum):!0===e.exclusiveMaximum&&"number"==typeof e.maximum&&(t=t.lt(e.maximum)),"number"==typeof e.multipleOf&&(t=t.multipleOf(e.multipleOf)),r=t;break}case"boolean":r=v2.boolean();break;case"null":r=v2.null();break;case"object":{let n={},i=e.properties||{},a=new Set(e.required||[]);for(let[e,r]of Object.entries(i)){let i=v3(r,t);n[e]=a.has(e)?i:i.optional()}if(e.propertyNames){let i=v3(e.propertyNames,t),a=e.additionalProperties&&"object"==typeof e.additionalProperties?v3(e.additionalProperties,t):v2.any();if(0===Object.keys(n).length){r=v2.record(i,a);break}let s=v2.object(n).passthrough(),o=v2.looseRecord(i,a);r=v2.intersection(s,o);break}if(e.patternProperties){let i=e.patternProperties,a=Object.keys(i),s=[];for(let e of a){let r=v3(i[e],t),n=v2.string().regex(new RegExp(e));s.push(v2.looseRecord(n,r))}let o=[];if(Object.keys(n).length>0&&o.push(v2.object(n).passthrough()),o.push(...s),0===o.length)r=v2.object({}).passthrough();else if(1===o.length)r=o[0];else{let e=v2.intersection(o[0],o[1]);for(let t=2;t<o.length;t++)e=v2.intersection(e,o[t]);r=e}break}let s=v2.object(n);r=!1===e.additionalProperties?s.strict():"object"==typeof e.additionalProperties?s.catchall(v3(e.additionalProperties,t)):s.passthrough();break}case"array":{let n=e.prefixItems,i=e.items;if(n&&Array.isArray(n)){let a=n.map(e=>v3(e,t)),s=i&&"object"==typeof i&&!Array.isArray(i)?v3(i,t):void 0;r=s?v2.tuple(a).rest(s):v2.tuple(a),"number"==typeof e.minItems&&(r=r.check(v2.minLength(e.minItems))),"number"==typeof e.maxItems&&(r=r.check(v2.maxLength(e.maxItems)))}else if(Array.isArray(i)){let n=i.map(e=>v3(e,t)),a=e.additionalItems&&"object"==typeof e.additionalItems?v3(e.additionalItems,t):void 0;r=a?v2.tuple(n).rest(a):v2.tuple(n),"number"==typeof e.minItems&&(r=r.check(v2.minLength(e.minItems))),"number"==typeof e.maxItems&&(r=r.check(v2.maxLength(e.maxItems)))}else if(void 0!==i){let n=v3(i,t),a=v2.array(n);"number"==typeof e.minItems&&(a=a.min(e.minItems)),"number"==typeof e.maxItems&&(a=a.max(e.maxItems)),r=a}else r=v2.array(v2.any());break}default:throw Error(`Unsupported type: ${n}`)}return e.description&&(r=r.describe(e.description)),void 0!==e.default&&(r=r.default(e.default)),r}function v3(e,t){if("boolean"==typeof e)return e?v2.any():v2.never();let r=v9(e,t),n=e.type||void 0!==e.enum||void 0!==e.const;if(e.anyOf&&Array.isArray(e.anyOf)){let i=e.anyOf.map(e=>v3(e,t)),a=v2.union(i);r=n?v2.intersection(r,a):a}if(e.oneOf&&Array.isArray(e.oneOf)){let i=e.oneOf.map(e=>v3(e,t)),a=v2.xor(i);r=n?v2.intersection(r,a):a}if(e.allOf&&Array.isArray(e.allOf))if(0===e.allOf.length)r=n?r:v2.any();else{let i=n?r:v3(e.allOf[0],t),a=+!n;for(let r=a;r<e.allOf.length;r++)i=v2.intersection(i,v3(e.allOf[r],t));r=i}!0===e.nullable&&"openapi-3.0"===t.version&&(r=v2.nullable(r)),!0===e.readOnly&&(r=v2.readonly(r));let i={};for(let t of["$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor"])t in e&&(i[t]=e[t]);for(let t of["contentEncoding","contentMediaType","contentSchema"])t in e&&(i[t]=e[t]);for(let t of Object.keys(e))v4.has(t)||(i[t]=e[t]);return Object.keys(i).length>0&&t.registry.add(r,i),r}uH(hq());var v5=r(18056),v8=class{path;ends;constructor(e){k.YN.isRunnable(e.path)?this.path=e.path:this.path=(0,k.Bp)(e.path).withConfig({runName:"Branch"}),this.ends=Array.isArray(e.pathMap)?e.pathMap.reduce((e,t)=>(e[t]=t,e),{}):e.pathMap}run(e,t){return l$.registerWriter(new lh({name:"<branch_run>",trace:!1,func:async(r,n)=>{try{return await this._route(r,n,e,t)}catch(e){throw e.name===s_.unminifiable_name&&console.warn("[WARN]: 'NodeInterrupt' thrown in conditional edge. This is likely a bug in your graph implementation.\nNodeInterrupt should only be thrown inside a node, not in edge conditions."),e}}}))}async _route(e,t,r,n){let i,a=await this.path.invoke(n?n(t):e,t);if(Array.isArray(a)||(a=[a]),(i=this.ends?a.map(e=>oy(e)?e:this.ends[e]):a).some(e=>!e))throw Error("Branch condition returned unknown or null destination");if(i.filter(oy).some(e=>e.node===sU))throw new sI("Cannot send a packet to the END node");return await r(i,t)??e}},v7=class{nodes;edges;branches;entryPoint;compiled=!1;constructor(){this.nodes={},this.edges=new Set,this.branches={}}warnIfCompiled(e){this.compiled&&console.warn(e)}get allEdges(){return this.edges}addNode(...e){let t=!function(e){return e.length>=1&&"string"!=typeof e[0]}(e)?[[e[0],e[1],e[2]]]:Array.isArray(e[0])?e[0]:Object.entries(e[0]);if(0===t.length)throw Error("No nodes provided in `addNode`");for(let[e,r,n]of t){for(let t of[od,op])if(e.includes(t))throw Error(`"${t}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),e in this.nodes)throw Error(`Node \`${e}\` already present.`);if(e===sU)throw Error(`Node \`${e}\` is reserved.`);let t=(0,k.Bp)(r);this.nodes[e]={runnable:t,metadata:n?.metadata,subgraphs:lN(t)?[t]:n?.subgraphs,ends:n?.ends}}return this}addEdge(e,t){if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),e===sU)throw Error("END cannot be a start node");if(t===sD)throw Error("START cannot be an end node");if(Array.from(this.edges).some(([t])=>t===e)&&!("channels"in this))throw Error(`Already found path for ${e}. For multiple edges, use StateGraph.`);return this.edges.add([e,t]),this}addConditionalEdges(e,t,r){let n="object"==typeof e?e:{source:e,path:t,pathMap:r};if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),!k.YN.isRunnable(n.path)){let e=Array.isArray(n.pathMap)?n.pathMap.join(","):Object.keys(n.pathMap??{}).join(",");n.path=(0,k.Bp)(n.path).withConfig({runName:`Branch<${n.source}${""!==e?`,${e}`:""}>`.slice(0,63)})}let i="RunnableLambda"===n.path.getName()?"condition":n.path.getName();if(this.branches[n.source]&&this.branches[n.source][i])throw Error(`Condition \`${i}\` already present for node \`${e}\``);return this.branches[n.source]??={},this.branches[n.source][i]=new v8(n),this}setEntryPoint(e){return this.warnIfCompiled("Setting the entry point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(sD,e)}setFinishPoint(e){return this.warnIfCompiled("Setting a finish point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(e,sU)}compile({checkpointer:e,interruptBefore:t,interruptAfter:r,name:n}={}){this.validate([...Array.isArray(t)?t:[],...Array.isArray(r)?r:[]]);let i=new _e({builder:this,checkpointer:e,interruptAfter:r,interruptBefore:t,autoValidate:!1,nodes:{},channels:{[sD]:new uJ,[sU]:new uJ},inputChannels:sD,outputChannels:sU,streamChannels:[],streamMode:"values",name:n});for(let[e,t]of Object.entries(this.nodes))i.attachNode(e,t);for(let[e,t]of this.edges)i.attachEdge(e,t);for(let[e,t]of Object.entries(this.branches))for(let[r,n]of Object.entries(t))i.attachBranch(e,r,n);return i.validate()}validate(e){let t=new Set([...this.allEdges].map(([e,t])=>e));for(let[e]of Object.entries(this.branches))t.add(e);for(let e of t)if(e!==sD&&!(e in this.nodes))throw Error(`Found edge starting at unknown node \`${e}\``);let r=new Set([...this.allEdges].map(([e,t])=>t));for(let[e,t]of Object.entries(this.branches))for(let n of Object.values(t))if(null!=n.ends)for(let e of Object.values(n.ends))r.add(e);else for(let t of(r.add(sU),Object.keys(this.nodes)))t!==e&&r.add(t);for(let e of Object.values(this.nodes))for(let t of e.ends??[])r.add(t);for(let e of Object.keys(this.nodes))if(!r.has(e))throw new sE(`Node \`${e}\` is not reachable.

If you are returning Command objects from your node,
make sure you are passing names of potential destination nodes as an "ends" array
into ".addNode(..., { ends: ["node1", "node2"] })".`,{lc_error_code:"UNREACHABLE_NODE"});for(let e of r)if(e!==sU&&!(e in this.nodes))throw Error(`Found edge ending at unknown node \`${e}\``);if(e){for(let t of e)if(!(t in this.nodes))throw Error(`Interrupt node \`${t}\` is not present`)}this.compiled=!0}},_e=class extends uV{builder;constructor({builder:e,...t}){super(t),this.builder=e}attachNode(e,t){this.channels[e]=new uJ,this.nodes[e]=new lO({channels:[],triggers:[],metadata:t.metadata,subgraphs:t.subgraphs,ends:t.ends}).pipe(t.runnable).pipe(new l$([{channel:e,value:lw}],[on])),this.streamChannels.push(e)}attachEdge(e,t){if(t===sU){if(e===sD)throw Error("Cannot have an edge from START to END");this.nodes[e].writers.push(new l$([{channel:sU,value:lw}],[on]))}else this.nodes[t].triggers.push(e),this.nodes[t].channels.push(e)}attachBranch(e,t,r){for(let n of(e!==sD||this.nodes[sD]||(this.nodes[sD]=uF.subscribeTo(sD,{tags:[on]})),this.nodes[e].pipe(r.run(r=>new l$(r.map(r=>oy(r)?r:{channel:r===sU?sU:`branch:${e}:${t}:${r}`,value:lw}),[on]))),r.ends?Object.values(r.ends):Object.keys(this.nodes)))if(n!==sU){let r=`branch:${e}:${t}:${n}`;this.channels[r]=new uJ,this.nodes[n].triggers.push(r),this.nodes[n].channels.push(r)}}async getGraphAsync(e){let t=e?.xray,r=new r$.T,n={[sD]:r.addNode({schema:yP()},sD)},i={},a={};function s(e,t,a,o=!1){if(t===sU&&void 0===i[sU]&&(i[sU]=r.addNode({schema:yP()},sU)),void 0!==n[e]){if(void 0===i[t])throw Error(`End node ${t} not found!`);return r.addEdge(n[e],i[t],a!==t?a:void 0,o)}}for(let[s,u]of(t&&(a=Object.fromEntries((await lm(this.getSubgraphsAsync())).filter(e=>_t(e[1])))),Object.entries(this.builder.nodes))){let c=_r(s),d=u.runnable,p=u.metadata??{};if(this.interruptBefore?.includes(s)&&this.interruptAfter?.includes(s)?p.__interrupt="before,after":this.interruptBefore?.includes(s)?p.__interrupt="before":this.interruptAfter?.includes(s)&&(p.__interrupt="after"),t){let u="number"==typeof t?t-1:t,h=void 0!==a[s]?await a[s].getGraphAsync({...e,xray:u}):d.getGraph(e);if(h.trimFirstNode(),h.trimLastNode(),Object.keys(h.nodes).length>1){let[e,t]=r.extend(h,c);if(void 0===e)throw Error(`Could not extend subgraph "${s}" due to missing entrypoint.`);function o(e){return!!e&&e.lc_runnable}function l(e,t){if(void 0!==e&&!(0,v5.A)(e))return e;if(!o(t))return t.name??"UnknownSchema";try{let e=t.getName();return e=e.startsWith("Runnable")?e.slice(8):e}catch(e){return t.getName()}}void 0!==t&&(n[c]={name:l(t.id,t.data),...t}),i[c]={name:l(e.id,e.data),...e}}else{let e=r.addNode(d,c,p);n[c]=e,i[c]=e}}else{let e=r.addNode(d,c,p);n[c]=e,i[c]=e}}for(let[e,t]of[...this.builder.allEdges].sort(([e],[t])=>e<t?-1:+(t>e)))s(_r(e),_r(t));for(let[e,t]of Object.entries(this.builder.branches)){let r={...Object.fromEntries(Object.keys(this.builder.nodes).filter(t=>t!==e).map(e=>[_r(e),_r(e)])),[sU]:sU};for(let n of Object.values(t)){let t;for(let[i,a]of Object.entries(t=void 0!==n.ends?n.ends:r))s(_r(e),_r(a),i,!0)}}for(let[e,t]of Object.entries(this.builder.nodes))if(void 0!==t.ends)for(let r of t.ends)s(_r(e),_r(r),void 0,!0);return r}getGraph(e){let t=e?.xray,r=new r$.T,n={[sD]:r.addNode({schema:yP()},sD)},i={},a={};function s(e,t,a,o=!1){return t===sU&&void 0===i[sU]&&(i[sU]=r.addNode({schema:yP()},sU)),r.addEdge(n[e],i[t],a!==t?a:void 0,o)}for(let[s,u]of(t&&(a=Object.fromEntries(lg(this.getSubgraphs()).filter(e=>_t(e[1])))),Object.entries(this.builder.nodes))){let c=_r(s),d=u.runnable,p=u.metadata??{};if(this.interruptBefore?.includes(s)&&this.interruptAfter?.includes(s)?p.__interrupt="before,after":this.interruptBefore?.includes(s)?p.__interrupt="before":this.interruptAfter?.includes(s)&&(p.__interrupt="after"),t){let u="number"==typeof t?t-1:t,h=void 0!==a[s]?a[s].getGraph({...e,xray:u}):d.getGraph(e);if(h.trimFirstNode(),h.trimLastNode(),Object.keys(h.nodes).length>1){let[e,t]=r.extend(h,c);if(void 0===e)throw Error(`Could not extend subgraph "${s}" due to missing entrypoint.`);function o(e){return!!e&&e.lc_runnable}function l(e,t){if(void 0!==e&&!(0,v5.A)(e))return e;if(!o(t))return t.name??"UnknownSchema";try{let e=t.getName();return e=e.startsWith("Runnable")?e.slice(8):e}catch(e){return t.getName()}}void 0!==t&&(n[c]={name:l(t.id,t.data),...t}),i[c]={name:l(e.id,e.data),...e}}else{let e=r.addNode(d,c,p);n[c]=e,i[c]=e}}else{let e=r.addNode(d,c,p);n[c]=e,i[c]=e}}for(let[e,t]of[...this.builder.allEdges].sort(([e],[t])=>e<t?-1:+(t>e)))s(_r(e),_r(t));for(let[e,t]of Object.entries(this.builder.branches)){let r={...Object.fromEntries(Object.keys(this.builder.nodes).filter(t=>t!==e).map(e=>[_r(e),_r(e)])),[sU]:sU};for(let n of Object.values(t)){let t;for(let[i,a]of Object.entries(t=void 0!==n.ends?n.ends:r))s(_r(e),_r(a),i,!0)}}return r}};function _t(e){return"function"==typeof e.attachNode&&"function"==typeof e.attachEdge}function _r(e){return"subgraph"===e?`"${e}"`:e}let _n=(e,t)=>e.size===t.size&&[...e].every(e=>t.has(e));var _i=class e extends sO{lc_graph_name="NamedBarrierValue";names;seen;constructor(e){super(),this.names=e,this.seen=new Set}fromCheckpoint(t){let r=new e(this.names);return void 0!==t&&(r.seen=new Set(t)),r}update(e){let t=!1;for(let r of e)if(this.names.has(r))this.seen.has(r)||(this.seen.add(r),t=!0);else throw new sI(`Value ${JSON.stringify(r)} not in names ${JSON.stringify(this.names)}`);return t}get(){if(!_n(this.names,this.seen))throw new sS}checkpoint(){return[...this.seen]}consume(){return!!(this.seen&&this.names&&_n(this.seen,this.names))&&(this.seen=new Set,!0)}isAvailable(){return!!this.names&&_n(this.names,this.seen)}},_a=class e extends sO{lc_graph_name="NamedBarrierValueAfterFinish";names;seen;finished;constructor(e){super(),this.names=e,this.seen=new Set,this.finished=!1}fromCheckpoint(t){let r=new e(this.names);if(void 0!==t){let[e,n]=t;r.seen=new Set(e),r.finished=n}return r}update(e){let t=!1;for(let r of e)if(this.names.has(r)&&!this.seen.has(r))this.seen.add(r),t=!0;else if(!this.names.has(r))throw new sI(`Value ${JSON.stringify(r)} not in names ${JSON.stringify(this.names)}`);return t}get(){if(!this.finished||!_n(this.names,this.seen))throw new sS}checkpoint(){return[[...this.seen],this.finished]}consume(){return!!(this.finished&&this.seen&&this.names&&_n(this.seen,this.names))&&(this.seen=new Set,this.finished=!1,!0)}finish(){return!!(!this.finished&&this.names&&_n(this.names,this.seen))&&(this.finished=!0,!0)}isAvailable(){return this.finished&&!!this.names&&_n(this.names,this.seen)}};let _s="lg:",_o=new class{_map=new WeakMap;_extensionCache=new Map;get(e){return this._map.get(e)}extend(e,t){let r=this.get(e);this._map.set(e,t(r))}remove(e){return this._map.delete(e),this}has(e){return this._map.has(e)}getChannelsForSchema(e){let t={};for(let[r,n]of Object.entries((0,M.PA)(e))){let e=this.get(n);e?.reducer?t[r]=new sj(e.reducer.fn,e.default):t[r]=new sz(e?.default)}return t}getExtendedChannelSchemas(e,t){if(0===Object.keys(t).length)return e;let r=Object.entries(t).filter(([,e])=>!0===e).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>`${e}:${t}`).join("|"),n=this._extensionCache.get(r)??new WeakMap;if(n.has(e))return n.get(e);let i=e;if(t.withReducerSchema||t.withJsonSchemaExtrasAsDescription){let r=Object.entries((0,M.PA)(e)).map(([e,r])=>{let n=this.get(r),i=t.withReducerSchema?n?.reducer?.schema??r:r;if(t.withJsonSchemaExtrasAsDescription&&n?.jsonSchemaExtra){let e=(0,M.cg)(i)??(0,M.cg)(r),t=JSON.stringify({...n.jsonSchemaExtra,description:e});i=i.describe(`${_s}${t}`)}return[e,i]});i=(0,M.W0)(e,Object.fromEntries(r)),(0,M.IU)(i)&&(i._def.unknownKeys="strip")}return t.asPartial&&(i=(0,M.BA)(i)),n.set(e,i),this._extensionCache.set(r,n),i}};function _l(e,t){if(t.reducer&&!t.default){let r=(0,M.RA)(e);null!=r&&(t.default=r)}if(!t.reducer)return _o.extend(e,()=>t),e;{let r=Object.assign(e,{lg_reducer_schema:t.reducer?.schema??e});return _o.extend(r,()=>t),r}}let _u="__root__",_c=Symbol.for("langgraph.state.partial");var _d=class extends v7{channels={};waitingEdges=new Set;_schemaDefinition;_schemaRuntimeDefinition;_inputDefinition;_inputRuntimeDefinition;_outputDefinition;_outputRuntimeDefinition;_schemaDefinitions=new Map;_metaRegistry=_o;_configSchema;_configRuntimeSchema;_interrupt;_writer;constructor(e,t){if(super(),__(e)){let t=this._metaRegistry.getChannelsForSchema(e.state),r=null!=e.input?this._metaRegistry.getChannelsForSchema(e.input):t,n=null!=e.output?this._metaRegistry.getChannelsForSchema(e.output):t;this._schemaDefinition=t,this._schemaRuntimeDefinition=e.state,this._inputDefinition=r,this._inputRuntimeDefinition=e.input??_c,this._outputDefinition=n,this._outputRuntimeDefinition=e.output??e.state}else if((0,M.QV)(e)){let t=this._metaRegistry.getChannelsForSchema(e);this._schemaDefinition=t,this._schemaRuntimeDefinition=e,this._inputDefinition=t,this._inputRuntimeDefinition=_c,this._outputDefinition=t,this._outputRuntimeDefinition=e}else if(_v(e))this._schemaDefinition=e.input.spec,this._inputDefinition=e.input.spec,this._outputDefinition=e.output.spec;else if(_y(e))this._schemaDefinition=e.stateSchema.spec,this._inputDefinition=e.input?.spec??this._schemaDefinition,this._outputDefinition=e.output?.spec??this._schemaDefinition;else if(_f(e)||_m(e)){let t=_m(e)?e.spec:e;this._schemaDefinition=t}else if(_g(e)){let t=_p(e.channels);this._schemaDefinition=t}else throw Error("Invalid StateGraph input. Make sure to pass a valid Annotation.Root or Zod schema.");this._inputDefinition??=this._schemaDefinition,this._outputDefinition??=this._schemaDefinition,this._addSchema(this._schemaDefinition),this._addSchema(this._inputDefinition),this._addSchema(this._outputDefinition),function(e){return"object"==typeof e&&null!=e&&!("spec"in e)&&!(0,M.QV)(e)}(t)?((0,M.QV)(t.context)&&(this._configRuntimeSchema=t.context),this._interrupt=t.interrupt,this._writer=t.writer):(0,M.QV)(t)&&(this._configRuntimeSchema=t)}get allEdges(){return new Set([...this.edges,...Array.from(this.waitingEdges).flatMap(([e,t])=>e.map(e=>[e,t]))])}_addSchema(e){if(!this._schemaDefinitions.has(e))for(let[t,r]of(this._schemaDefinitions.set(e,e),Object.entries(e))){let e;if(e="function"==typeof r?r():r,void 0!==this.channels[t]){if(this.channels[t]!==e&&"LastValue"!==e.lc_graph_name)throw Error(`Channel "${t}" already exists with a different type.`)}else this.channels[t]=e}}addNode(...e){let t=!function(e){return e.length>=1&&"string"!=typeof e[0]}(e)?[[e[0],e[1],e[2]]]:Array.isArray(e[0])?e[0]:Object.entries(e[0]).map(([e,t])=>[e,t]);if(0===t.length)throw Error("No nodes provided in `addNode`");for(let[e,r,n]of t){let t;if(e in this.channels)throw Error(`${e} is already being used as a state attribute (a.k.a. a channel), cannot also be used as a node name.`);for(let t of[od,op])if(e.includes(t))throw Error(`"${t}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),e in this.nodes)throw Error(`Node \`${e}\` already present.`);if(e===sU||e===sD)throw Error(`Node \`${e}\` is reserved.`);let i=this._schemaDefinition;n?.input!==void 0&&((0,M.QV)(n.input)?i=this._metaRegistry.getChannelsForSchema(n.input):void 0!==n.input.spec&&(i=n.input.spec)),void 0!==i&&this._addSchema(i),t=k.YN.isRunnable(r)?r:"function"==typeof r?new lh({func:r,name:e,trace:!1}):(0,k.Bp)(r);let a=n?.cachePolicy;"boolean"==typeof a&&(a=a?{}:void 0);let s={runnable:t,retryPolicy:n?.retryPolicy,cachePolicy:a,metadata:n?.metadata,input:i??this._schemaDefinition,subgraphs:lN(t)?[t]:n?.subgraphs,ends:n?.ends,defer:n?.defer};this.nodes[e]=s}return this}addEdge(e,t){if("string"==typeof e)return super.addEdge(e,t);for(let t of(this.compiled&&console.warn("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),e)){if(t===sU)throw Error("END cannot be a start node");if(!Object.keys(this.nodes).some(e=>e===t))throw Error(`Need to add a node named "${t}" first`)}if(t===sU)throw Error("END cannot be an end node");if(!Object.keys(this.nodes).some(e=>e===t))throw Error(`Need to add a node named "${t}" first`);return this.waitingEdges.add([e,t]),this}addSequence(e){let t,r=Array.isArray(e)?e:Object.entries(e);if(0===r.length)throw Error("Sequence requires at least one node.");for(let[e,n,i]of r){if(e in this.nodes)throw Error(`Node names must be unique: node with the name "${e}" already exists.`);let r=e;this.addNode(r,n,i),null!=t&&this.addEdge(t,r),t=r}return this}compile({checkpointer:e,store:t,cache:r,interruptBefore:n,interruptAfter:i,name:a,description:s}={}){this.validate([...Array.isArray(n)?n:[],...Array.isArray(i)?i:[]]);let o=Object.keys(this._schemaDefinitions.get(this._outputDefinition)),l=1===o.length&&o[0]===_u?_u:o,u=Object.keys(this.channels),c=1===u.length&&u[0]===_u?_u:u,d=this._interrupt,p=new _h({builder:this,checkpointer:e,interruptAfter:i,interruptBefore:n,autoValidate:!1,nodes:{},channels:{...this.channels,[sD]:new uJ},inputChannels:sD,outputChannels:l,streamChannels:c,streamMode:"updates",store:t,cache:r,name:a,description:s,userInterrupt:d});for(let[e,t]of(p.attachNode(sD),Object.entries(this.nodes)))p.attachNode(e,t);for(let[e]of(p.attachBranch(sD,oa,_w(),{withReader:!1}),Object.entries(this.nodes)))p.attachBranch(e,oa,_w(),{withReader:!1});for(let[e,t]of this.edges)p.attachEdge(e,t);for(let[e,t]of this.waitingEdges)p.attachEdge(e,t);for(let[e,t]of Object.entries(this.branches))for(let[r,n]of Object.entries(t))p.attachBranch(e,r,n);return p.validate()}};function _p(e){let t={};for(let[r,n]of Object.entries(e))t[r]=sZ(n);return t}var _h=class extends _e{description;_metaRegistry=_o;constructor({description:e,...t}){super(t),this.description=e}attachNode(e,t){let r;function n(e){if(ob(e))return e.graph===o_.PARENT?null:e._updateAsTuples();if(Array.isArray(e)&&e.length>0&&e.some(e=>ob(e))){let t=[];for(let r of e)if(ob(r)){if(r.graph===o_.PARENT)continue;t.push(...r._updateAsTuples())}else t.push([_u,r]);return t}return null!=e?[[_u,e]]:null}r=e===sD?Object.entries(this.builder._schemaDefinitions.get(this.builder._inputDefinition)).map(([e])=>e):Object.keys(this.builder.channels);let i=e;function a(e){if(!e)return null;if(ob(e))return e.graph===o_.PARENT?null:e._updateAsTuples().filter(([e])=>r.includes(e));if(Array.isArray(e)&&e.length>0&&e.some(ob)){let t=[];for(let n of e)if(ob(n)){if(n.graph===o_.PARENT)continue;t.push(...n._updateAsTuples().filter(([e])=>r.includes(e)))}else{let e=a(n);e&&t.push(...e??[])}return t}{if("object"==typeof e&&!Array.isArray(e))return Object.entries(e).filter(([e])=>r.includes(e));let t=Array.isArray(e)?"array":typeof e;throw new sI(`Expected node "${i.toString()}" to return an object or an array containing at least one Command object, received ${t}`,{lc_error_code:"INVALID_GRAPH_NODE_RETURN_VALUE"})}}let s=[{value:lw,mapper:new lh({func:r.length&&r[0]===_u?n:a,trace:!1,recurse:!1})}];if(e===sD)this.nodes[e]=new lO({tags:[on],triggers:[sD],channels:[sD],writers:[new l$(s,[on])]});else{let r=t?.input??this.builder._schemaDefinition,n=Object.fromEntries(Object.keys(this.builder._schemaDefinitions.get(r)).map(e=>[e,e])),i=1===Object.keys(n).length&&_u in n,a=`branch:to:${e}`;this.channels[a]=t?.defer?new sR:new uJ(!1),this.nodes[e]=new lO({triggers:[a],channels:i?Object.keys(n):n,writers:[new l$(s,[on])],mapper:i?void 0:e=>Object.fromEntries(Object.entries(e).filter(([e])=>e in n)),bound:t?.runnable,metadata:t?.metadata,retryPolicy:t?.retryPolicy,cachePolicy:t?.cachePolicy,subgraphs:t?.subgraphs,ends:t?.ends})}}attachEdge(e,t){if(t!==sU){if("string"==typeof e)this.nodes[e].writers.push(new l$([{channel:`branch:to:${t}`,value:null}],[on]));else if(Array.isArray(e)){let r=`join:${e.join("+")}:${t}`;for(let n of(this.channels[r]=this.builder.nodes[t].defer?new _a(new Set(e)):new _i(new Set(e)),this.nodes[t].triggers.push(r),e))this.nodes[n].writers.push(new l$([{channel:r,value:n}],[on]))}}}attachBranch(e,t,r,n={withReader:!0}){let i=async(t,r)=>{let n=t.filter(e=>e!==sU);if(!n.length)return;let i=n.map(t=>oy(t)?t:{channel:t===sU?t:`branch:to:${t}`,value:e});await l$.doWrite({...r,tags:(r.tags??[]).concat([on])},i)};this.nodes[e].writers.push(r.run(i,n.withReader?e=>lE.doRead(e,this.streamChannels??this.outputChannels,!0):void 0))}async _validateInput(e){if(null==e)return e;let t=(()=>{let e=this.builder._inputRuntimeDefinition,t=this.builder._schemaRuntimeDefinition,r=e=>{if(null!=e)return this._metaRegistry.getExtendedChannelSchemas(e,{withReducerSchema:!0})};return(0,M.QV)(e)?r(e):e===_c?(0,M.BA)(r(t)):void 0})();if(ob(e)){let r=e;return e.update&&null!=t&&(r.update=(0,M.Zu)(t,e.update)),r}return null!=t?(0,M.Zu)(t,e):e}isInterrupted(e){return ov(e)}async _validateContext(e){let t=this.builder._configRuntimeSchema;return(0,M.QV)(t)&&(0,M.Zu)(t,e),e}};function _f(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.values(e).every(e=>"function"==typeof e||sA(e))}function _m(e){return"object"==typeof e&&null!==e&&"lc_graph_name"in e&&"AnnotationRoot"===e.lc_graph_name}function _g(e){return"object"==typeof e&&null!==e&&void 0!==e.channels}function _y(e){return"object"==typeof e&&null!==e&&void 0!==e.stateSchema}function _v(e){return"object"==typeof e&&null!==e&&void 0===e.stateSchema&&void 0!==e.input&&void 0!==e.output}function __(e){return"object"==typeof e&&null!=e&&"state"in e&&!!(0,M.QV)(e.state)&&(!("input"in e)||!!(0,M.QV)(e.input))&&(!("output"in e)||!!(0,M.QV)(e.output))}function _b(e){if(oy(e))return[e];let t=[];ob(e)?t.push(e):Array.isArray(e)&&t.push(...e.filter(ob));let r=[];for(let e of t){if(e.graph===o_.PARENT)throw new sb(e);oy(e.goto)||"string"==typeof e.goto?r.push(e.goto):Array.isArray(e.goto)&&r.push(...e.goto)}return r}function _w(){return new v8({path:new lh({func:_b,tags:[on],trace:!1,recurse:!1,name:"<control_branch>"})})}var _k=r(32197);let _x="__remove_all__";function _$(e,t){let r,n=Array.isArray(e)?e:[e],i=Array.isArray(t)?t:[t],a=n.map(K.K0),s=i.map(K.K0);for(let e of a)(null===e.id||void 0===e.id)&&(e.id=(0,_k.A)(),e.lc_kwargs.id=e.id);for(let e=0;e<s.length;e+=1){let t=s[e];(null===t.id||void 0===t.id)&&(t.id=(0,_k.A)(),t.lc_kwargs.id=t.id),"remove"===t.getType()&&t.id===_x&&(r=e)}if(null!=r)return s.slice(r+1);let o=[...a],l=new Map(o.map((e,t)=>[e.id,t])),u=new Set;for(let e of s){let t=l.get(e.id);if(void 0!==t)"remove"===e.getType()?u.add(e.id):(u.delete(e.id),o[t]=e);else{if("remove"===e.getType())throw Error(`Attempting to delete a message with an ID that doesn't exist ('${e.id}')`);l.set(e.id,o.length),o.push(e)}}return o.filter(e=>!u.has(e.id))}sL.Root({messages:sL({reducer:_$,default:()=>[]})});let _S={reducer:{fn:_$},jsonSchemaExtra:{langgraph_type:"messages"},default:()=>[]},_I=tP({messages:_l(tS(),_S)});sh();let _E=Symbol.for("langgraph-zod");function _A(e){let t=globalThis[_E];t.has(e)||(Object.defineProperty(e,"langgraph",{get(){let e=this;return{metadata:t=>_l(e,{jsonSchemaExtra:t}),reducer(t,r){let n=(0,M.RA)(e);return _l(e,{default:n,reducer:{schema:r,fn:t}})}}}}),t.add(e))}_E in globalThis||(globalThis[_E]=new WeakSet);try{_A(ex.prototype),_A(gw.prototype)}catch(e){throw Error("Failed to extend Zod with LangGraph-related methods. This is most likely a bug, consider opening an issue and/or using `withLangGraph` to augment your Zod schema.",{cause:e})}function _O(e=!0,t,r=[]){let n={jumpTo:tj([tM("model_request"),tM("tools"),tM("end"),tT()]).optional()},i=e=>{for(let[t,r]of Object.entries((0,M.Pq)(e)?(0,M.PA)(e):e.shape))!t.startsWith("_")&&(t in n||(n[t]=(0,M.Pq)(r)?tN():r))};for(let e of(t&&("shape"in t||(0,M.Pq)(t))&&i(t),r))e.stateSchema&&i(e.stateSchema);e&&(n.structuredResponse=tE().optional());let a=_l(tS(),{jsonSchemaExtra:{langgraph_type:"messages"}});return{state:_I.extend(n),input:tP({messages:a,...Object.fromEntries(Object.entries(n).filter(([e])=>!["structuredResponse","jumpTo"].includes(e)))}),output:tP({messages:a,...Object.fromEntries(Object.entries(n).filter(([e])=>"jumpTo"!==e))})}}new class extends h1{constructor(e){super(),this.parent=e,this._map=this.parent._map}add(e,...t){let r=t[0];if(r&&!r?.default){let t=(0,M.RA)(e);null!=t&&(r.default=t)}return super.add(e,...t)}}(_o);let _T=/<name>(.*?)<\/name>/s,_N=/<content>(.*?)<\/content>/s;function _C(e){if(!K.Od.isInstance(e)||K.H.isInstance(e)||!e.name)return e;let{name:t}=e;if("string"==typeof e.content)return new K.Od({...e.lc_kwargs,content:`<name>${t}</name><content>${e.content}</content>`,name:void 0});let r=[],n=0;for(let i of e.content)"string"==typeof i?(n+=1,r.push(`<name>${t}</name><content>${i}</content>`)):"object"==typeof i&&"type"in i&&"text"===i.type?(n+=1,r.push({...i,text:`<name>${t}</name><content>${i.text}</content>`})):r.push(i);return n||r.unshift({type:"text",text:`<name>${t}</name><content></content>`}),new K.Od({...e.lc_kwargs,content:r,name:void 0})}function _P(e){let t;if(!K.Od.isInstance(e)||!e.content)return e;let r=[];if(Array.isArray(e.content))r=e.content.filter(e=>{if("text"===e.type&&"string"==typeof e.text){let r=e.text.match(_T),n=e.text.match(_N);if(r&&(!n||""===n[1]))return t=r[1],!1}return!0}).map(e=>{if("text"===e.type&&"string"==typeof e.text){let r=e.text.match(_T),n=e.text.match(_N);return r&&n?(t=r[1],{...e,text:n[1]}):e}return e});else{let n=e.content,i=n.match(_T),a=n.match(_N);if(!i||!a)return e;t=i[1],r=a[1]}return new K.Od({...Object.keys(e.lc_kwargs??{}).length>0?e.lc_kwargs:e,content:r,name:t})}function _j(e){return k.YN.isRunnable(e)}function _z(e){return!!z(e)&&"bindTools"in e&&"function"==typeof e.bindTools}let _R=(e,t,r={})=>{if(_z(e))return e.bindTools(t,r);if(k.fJ.isRunnableBinding(e)&&_z(e.bound)){let n=e.bound.bindTools(t,r);return new k.fJ(k.fJ.isRunnableBinding(n)?{bound:n.bound,config:{...e.config,...n.config},kwargs:{...e.kwargs,...n.kwargs},configFactories:n.configFactories??e.configFactories}:{bound:n,config:e.config,kwargs:e.kwargs,configFactories:e.configFactories})}return null};function _M(e){if("function"==typeof e)return;let t=e;if(k.zZ.isRunnableSequence(t)&&(t=t.steps.find(e=>k.fJ.isRunnableBinding(e))||t),!R(t)){if(k.fJ.isRunnableBinding(t)){let e=null!=t.kwargs&&"object"==typeof t.kwargs&&"tools"in t.kwargs&&Array.isArray(t.kwargs.tools)&&t.kwargs.tools.length>0,r=null!=t.config&&"object"==typeof t.config&&"tools"in t.config&&Array.isArray(t.config.tools)&&t.config.tools.length>0;if(e||r)throw new N}if("tools"in t&&void 0!==t.tools&&Array.isArray(t.tools)&&t.tools.length>0)throw new N}}function _L(e){return!!(K.Od.isInstance(e)&&e.tool_calls&&e.tool_calls.length>0)}function _Z(e){if(null==e)return new K.tn("");if(K.tn.isInstance(e))return e;if("string"==typeof e)return new K.tn({content:[{type:"text",text:e}]});throw Error(`Invalid systemPrompt type: expected string or SystemMessage, got ${typeof e}`)}async function _D(e,t,r={}){let n=_R(e,t,r);if(n)return n;if(R(e)){let n=_R(await e._getModelInstance(),t,r);if(n)return n}if(k.zZ.isRunnableSequence(e)){let n=e.steps.findIndex(e=>k.fJ.isRunnableBinding(e)||z(e)||R(e));if(n>=0){let i=_R(e.steps[n],t,r);if(i){let t=e.steps.slice();return t.splice(n,1,i),k.zZ.from(t)}}}throw Error(`llm ${e} must define bindTools method.`)}function _U(e){if(0===e.length)return;if(1===e.length)return e[0];function t(e,t){return async(r,n)=>{let i=async()=>t(r,async()=>n(r));return e(r,i)}}let r=e[e.length-1];for(let n=e.length-2;n>=0;n--)r=t(e[n],r);return r}function _F(e){let t=e.filter(e=>e.wrapToolCall);if(0!==t.length)return _U(t.map(e=>{let t=e.wrapToolCall;return async(r,n)=>{try{let i=await t({...r,state:{messages:r.state.messages,...e.stateSchema?(0,M.Zu)(e.stateSchema,{...r.state}):{}}},n);if(!K.uf.isInstance(i)&&!ob(i))throw Error(`Invalid response from "wrapToolCall" in middleware "${e.name}": expected ToolMessage or Command, got ${typeof i}`);return i}catch(t){throw t instanceof Error&&!t.message.includes(`middleware "${e.name}"`)&&(t.message=`Error in middleware "${e.name}": ${t.message}`),t}}}))}async function _B(e,t){let r={};for(let n of e){if(!n.stateSchema)continue;let e=(0,M.zO)(n.stateSchema,e=>e.startsWith("_")),i=await (0,M.K3)(e,t);if(i.success){Object.assign(r,i.data);continue}let a=i.error.issues.filter(e=>"invalid_type"===e.code&&"Required"===e.message).map(e=>`  - ${e.path.join(".")}: ${e.message}`).join("\n");throw Error(`Middleware "${n.name}" has required state fields that must be initialized:
${a}

To fix this, either:
1. Provide default values in your middleware's state schema using .default():
   stateSchema: z.object({
     myField: z.string().default("default value")
   })

2. Or make the fields optional using .optional():
   stateSchema: z.object({
     myField: z.string().optional()
   })

3. Or ensure you pass these values when invoking the agent:
   agent.invoke({
     messages: [...],
     ${i.error.issues[0]?.path.join(".")}: "value"
   })`)}return r}function _V(e){let t={messages:tS(()=>[]),structuredResponse:tN().optional()};if(!e)return tP(t);let{shape:r}=e,n={...t};for(let[e,t]of Object.entries(r))e.startsWith("_")?n[e]=t.optional():n[e]=t;return tP(n)}function _J(e){if(e){if(["model_request","tools",sU].includes(e))return e;if("model"===e)return"model_request";if("tools"===e)return"tools";if("end"===e)return sU;throw Error(`Invalid jump target: ${e}, must be "model", "tools" or "end".`)}}function _W(...e){return AbortSignal.any(e.filter(e=>null!=e&&"object"==typeof e&&"aborted"in e&&"boolean"==typeof e.aborted))}var _q=class extends k.YN{lc_namespace=["langgraph"];func;tags;config;trace=!0;recurse=!0;#e;constructor(e){super(),this.name=e.name??e.func.name,this.func=e.func,this.config=e.tags?{tags:e.tags}:void 0,this.recurse=e.recurse??this.recurse}getState(){return this.#e}setState(e){this.#e={...this.#e,...e}}async invoke(e,t){let r=(0,k.SV)(this.config,t),n=await rb.Nx.runWithConfig(r,async()=>this.func(e,r));return k.YN.isRunnable(n)&&this.recurse?await rb.Nx.runWithConfig(r,async()=>n.invoke(e,r)):(this.#e=n,n)}};function _K(e,t){let r,n;if("inline"===t)r=_C,n=_P;else throw Error(`Invalid agent name mode: ${t}. Needs to be one of: "inline"`);function i(e){return e.map(r)}return k.zZ.from([k.jY.from(i),e,k.jY.from(n)])}function _G(e){return K.Od.isInstance(e)||"object"==typeof e&&null!==e&&"structuredResponse"in e&&"messages"in e}let _H="model_request";var _Y=class extends _q{#t;#r;#n;constructor(e){super({name:e.name??"model",func:(e,t)=>this.#i(e,t)}),this.#t=e,this.#r=e.systemMessage}#a(e){if(!this.#t.responseFormat)return;let t=F(this.#t.responseFormat,void 0,e);return t.every(e=>e instanceof U)?{type:"native",strategy:t[0]}:{type:"tool",tools:t.filter(e=>e instanceof D).reduce((e,t)=>(e[t.name]=t,e),{})}}async #i(e,t){let r=e.messages.at(-1);if(r&&K.uf.isInstance(r)&&r.name&&this.#t.shouldReturnDirect.has(r.name))return{messages:[]};let n=await this.#s(e,t);return"structuredResponse"in n?{messages:[...e.messages,...n.messages||[]],structuredResponse:n.structuredResponse}:n instanceof o_?n:(n.name=this.name,n.lc_kwargs.name=this.name,this.#o(e,n))?{messages:[new K.Od({content:"Sorry, need more steps to process this request.",name:this.name,id:n.id})]}:{messages:[n]}}#l(){if("string"==typeof this.#t.model)return T(this.#t.model);if(this.#t.model)return this.#t.model;throw Error("No model option was provided, either via `model` option.")}async #s(e,t,r={}){let n=await this.#l(),i=t,a=async e=>{_M(e.model);let n=this.#a(e.model),i=await this.#u(e.model,e,n),a=[...""===this.#n.text?[]:[this.#n],...e.messages],s=_W(this.#t.signal,t.signal),o=await (0,k.oL)(i.invoke(a,{...t,signal:s}),s);if(n?.type==="native"){let e=n.strategy.parse(o);return e?{structuredResponse:e,messages:[o]}:o}if(!n||!o.tool_calls)return o;let l=o.tool_calls.filter(e=>e.name in n.tools);if(0===l.length)return o;if(l.length>1)return this.#c(o,l,n);let u=n.tools[l[0].name],c=u?.options?.toolMessageContent;return this.#d(o,l[0],n,c??r.lastMessage)},s=this.#t.wrapModelCallHookMiddleware??[],o=a;for(let t=s.length-1;t>=0;t--){let[r,n]=s[t];if(r.wrapModelCall){let t=o,a=r,s=n;o=async n=>{let o=Object.freeze({context:a.contextSchema?(0,M.Zu)(a.contextSchema,i?.context||{}):i?.context,writer:i.writer,interrupt:i.interrupt,signal:i.signal}),l={...n,state:{...r.stateSchema?(0,M.Zu)((0,M.BA)(r.stateSchema),e):{},...s(),messages:e.messages},runtime:o},u=async e=>{let r=e.tools??[],n=r.filter(e=>_j(e)&&!this.#t.toolClasses.some(t=>t.name===e.name));if(n.length>0)throw Error(`You have added a new tool in "wrapModelCall" hook of middleware "${a.name}": ${n.map(e=>e.name).join(", ")}. This is not supported.`);let i=r.filter(e=>_j(e)&&this.#t.toolClasses.every(t=>t!==e));if(i.length>0)throw Error(`You have modified a tool in "wrapModelCall" hook of middleware "${a.name}": ${i.map(e=>e.name).join(", ")}. This is not supported.`);let s=e,o=e.systemPrompt!==this.#n.text,l=e.systemMessage!==this.#n;if(o&&l)throw Error("Cannot change both systemPrompt and systemMessage in the same request.");return o&&(this.#n=new K.tn({content:[{type:"text",text:e.systemPrompt}]}),s={...e,systemPrompt:this.#n.text,systemMessage:this.#n}),l&&(this.#n=new K.tn({...e.systemMessage}),s={...e,systemPrompt:this.#n.text,systemMessage:this.#n}),t(s)};if(!a.wrapModelCall)return u(l);try{let e=await a.wrapModelCall(l,u);if(!_G(e))throw Error(`Invalid response from "wrapModelCall" in middleware "${a.name}": expected AIMessage, got ${typeof e}`);return e}catch(e){throw e instanceof Error&&!e.message.includes(`middleware "${a.name}"`)&&(e.message=`Error in middleware "${a.name}": ${e.message}`),e}}}}return this.#n=this.#r,o({model:n,systemPrompt:this.#n?.text,systemMessage:this.#n,messages:e.messages,tools:this.#t.toolClasses,state:e,runtime:Object.freeze({context:i?.context,writer:i.writer,interrupt:i.interrupt,signal:i.signal})})}#c(e,t,r){let n=new C(t.map(e=>e.name));return this.#p(n,e,t[0],r)}#d(e,t,r,n){let i=r.tools[t.name];try{let r=i.parse(t.args);return{structuredResponse:r,messages:[e,new K.uf({tool_call_id:t.id??"",content:JSON.stringify(r),name:t.name}),new K.Od(n??`Returning structured response: ${JSON.stringify(r)}`)]}}catch(n){return this.#p(n,e,t,r)}}async #p(e,t,r,n){let i=Object.values(n.tools).at(0)?.options?.handleError,a=r.id;if(!a)throw Error("Tool call ID is required to handle tool output errors. Please provide a tool call ID.");if(!1===i)throw e;if(void 0===i||"boolean"==typeof i&&i||Array.isArray(i)&&i.some(e=>e instanceof C))return new o_({update:{messages:[t,new K.uf({content:e.message,tool_call_id:a})]},goto:_H});if("string"==typeof i)return new o_({update:{messages:[t,new K.uf({content:i,tool_call_id:a})]},goto:_H});if("function"==typeof i){let r=await i(e);if("string"!=typeof r)throw Error("Error handler must return a string.");return new o_({update:{messages:[t,new K.uf({content:r,tool_call_id:a})]},goto:_H})}return new o_({update:{messages:[t,new K.uf({content:e.message,tool_call_id:a})]},goto:_H})}#o(e,t){let r=K.Od.isInstance(t)&&t.tool_calls?.every(e=>this.#t.shouldReturnDirect.has(e.name)),n="remainingSteps"in e?e.remainingSteps:void 0;return!!(n&&(n<1&&r||n<2&&_L(e.messages.at(-1))))}async #u(e,t,r){let n={},i=Object.values(r&&"tools"in r?r.tools:{}),a=[...t?.tools??this.#t.toolClasses,...i.map(e=>e.tool)],s=t?.toolChoice||(i.length>0?"any":void 0);if(r?.type==="native"){let e=t?.modelSettings?.strict??r?.strategy?.strict??!0;Object.assign(n,{response_format:{type:"json_schema",json_schema:{name:r.strategy.schema?.name??"extract",description:(0,M.cg)(r.strategy.schema),schema:r.strategy.schema,strict:e}},output_format:{type:"json_schema",schema:r.strategy.schema},headers:{"anthropic-beta":"structured-outputs-2025-11-13"},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:r.strategy.schema},strict:e})}let o=await _D(e,a,{...n,...t?.modelSettings??{},tool_choice:s});return"inline"===this.#t.includeAgentName?_K(o,this.#t.includeAgentName):o}getState(){let e=super.getState();return{messages:[],...!e||e instanceof o_?{}:e}}};let _X="tools",_Q=e=>Array.isArray(e)&&e.every(K.XQ.isInstance),_0=e=>"object"==typeof e&&null!=e&&"messages"in e&&_Q(e.messages),_1=e=>"object"==typeof e&&null!=e&&"lg_tool_call"in e;function _2(e,t){return new K.uf(e instanceof j?{content:e.message,tool_call_id:t.id,name:t.name}:{content:`${e}
 Please fix your mistakes.`,tool_call_id:t.id,name:t.name})}var _4=class extends _q{tools;trace=!1;signal;handleToolErrors=_2;wrapToolCall;constructor(e,t){let{name:r,tags:n,handleToolErrors:i,signal:a,wrapToolCall:s}=t??{};super({name:r,tags:n,func:(e,t)=>this.run(e,t)}),this.options=t,this.tools=e,this.handleToolErrors=i??this.handleToolErrors,this.signal=a,this.wrapToolCall=s}#h(e,t,r){if(sx(e)||this.signal?.aborted||r&&!0!==this.handleToolErrors||!this.handleToolErrors)throw e;if("function"==typeof this.handleToolErrors){let r=this.handleToolErrors(e,t);if(r&&K.uf.isInstance(r))return r}else if(this.handleToolErrors)return new K.uf({name:t.name,content:`${e}
 Please fix your mistakes.`,tool_call_id:t.id});throw e}async runTool(e,t,r){let n=async e=>{let{toolCall:r}=e,n=this.tools.find(e=>e.name===r.name);if(void 0===n)throw Error(`Tool "${r.name}" not found.`);try{let e=await n.invoke({...r,type:"tool_call"},{...t,config:t,toolCallId:r.id,state:t.configurable?.__pregel_scratchpad?.currentTaskInput,signal:_W(this.signal,t.signal)});if(K.uf.isInstance(e)||ob(e))return e;return new K.uf({name:n.name,content:"string"==typeof e?e:JSON.stringify(e),tool_call_id:r.id})}catch(e){if(e instanceof er.qe)throw new j(e,r);throw e}},i=t,a={context:i?.context,writer:i?.writer,interrupt:i?.interrupt,signal:i?.signal},s=this.tools.find(t=>t.name===e.name);if(!s)throw Error(`Tool "${e.name}" not found.`);let o={toolCall:e,tool:s,state:r,runtime:a};if(this.wrapToolCall)try{return await this.wrapToolCall(o,n)}catch(t){return this.#h(t,e,!0)}try{return await n(o)}catch(t){return this.#h(t,e,!1)}}async run(e,t){let r;if(_1(e)){let{lg_tool_call:n,jumpTo:i,...a}=e;r=[await this.runTool(e.lg_tool_call,t,a)]}else{let n,i;if(_Q(e))n=e;else if(_0(e))n=e.messages;else throw Error("ToolNode only accepts BaseMessage[] or { messages: BaseMessage[] } as input.");let a=new Set(n.filter(e=>"tool"===e.getType()).map(e=>e.tool_call_id));for(let e=n.length-1;e>=0;e-=1){let t=n[e];if(K.Od.isInstance(t)){i=t;break}}if(!K.Od.isInstance(i))throw Error("ToolNode only accepts AIMessages as input.");r=await Promise.all(i.tool_calls?.filter(e=>null==e.id||!a.has(e.id)).map(r=>this.runTool(r,t,e))??[])}if(!r.some(ob))return Array.isArray(e)?r:{messages:r};let n=[],i=null;for(let t of r)ob(t)?t.graph===o_.PARENT&&Array.isArray(t.goto)&&t.goto.every(e=>_6(e))?i?i.goto.push(...t.goto):i=new o_({graph:o_.PARENT,goto:t.goto}):n.push(t):n.push(Array.isArray(e)?[t]:{messages:[t]});return i&&n.push(i),n}};function _6(e){return e instanceof og}var _9=class{},_3=class{},_5=class extends _q{#t;constructor(e,t){super(e),this.#t=t}async invokeMiddleware(e,t){let r,n,i={};if(this.middleware.contextSchema){let e=this.middleware.contextSchema?.shape;if(e){let r={},n=t?.context||{};for(let t of Object.keys(e))t in n&&(r[t]=n[t]);i=(0,M.Zu)(this.middleware.contextSchema,r)}}let a={...this.#t.getState(),...e,messages:e.messages},s={context:i,writer:t?.writer,interrupt:t?.interrupt,signal:t?.signal},o=await this.runHook(a,Object.freeze(Object.assign(new _3,{...s,context:Object.freeze(Object.assign(new _9,i))})));if(!o)return{...a,jumpTo:void 0};if(this.name?.startsWith("BeforeAgentNode_")?(r=H(this.middleware.beforeAgent),n="beforeAgent.canJumpTo"):this.name?.startsWith("BeforeModelNode_")?(r=H(this.middleware.beforeModel),n="beforeModel.canJumpTo"):this.name?.startsWith("AfterAgentNode_")?(r=H(this.middleware.afterAgent),n="afterAgent.canJumpTo"):this.name?.startsWith("AfterModelNode_")&&(r=H(this.middleware.afterModel),n="afterModel.canJumpTo"),"string"==typeof o.jumpTo&&!r?.includes(o.jumpTo)){let e=r&&r.length>0?`must be one of: ${r?.join(", ")}.`:n?`no ${n} defined in middleware ${this.middleware.name}`:"";throw Error(`Invalid jump target: ${o.jumpTo}, ${e}.`)}if("object"==typeof o&&"type"in o){if("terminate"===o.type){if(o.error)throw o.error;return{...a,...o.result||{},jumpTo:o.jumpTo}}throw Error(`Invalid control action: ${JSON.stringify(o)}`)}return{...a,...o,jumpTo:o.jumpTo}}get nodeOptions(){return{input:_V(this.middleware.stateSchema)}}},_8=class extends _5{lc_namespace=["langchain","agents","beforeAgentNodes"];constructor(e,t){super({name:`BeforeAgentNode_${e.name}`,func:async(e,t)=>this.invokeMiddleware(e,t)},t),this.middleware=e}runHook(e,t){return Y(this.middleware.beforeAgent)(e,t)}},_7=class extends _5{lc_namespace=["langchain","agents","beforeModelNodes"];constructor(e,t){super({name:`BeforeModelNode_${e.name}`,func:async(e,t)=>this.invokeMiddleware(e,t)},t),this.middleware=e}runHook(e,t){return Y(this.middleware.beforeModel)(e,t)}},be=class extends _5{lc_namespace=["langchain","agents","afterModelNodes"];constructor(e,t){super({name:`AfterModelNode_${e.name}`,func:async(e,t)=>this.invokeMiddleware(e,t)},t),this.middleware=e}runHook(e,t){return Y(this.middleware.afterModel)(e,t)}},bt=class extends _5{lc_namespace=["langchain","agents","afterAgentNodes"];constructor(e,t){super({name:`AfterAgentNode_${e.name}`,func:async(e,t)=>this.invokeMiddleware(e,t)},t),this.middleware=e}runHook(e,t){return Y(this.middleware.afterAgent)(e,t)}},br=class{#f=new Map;addNode(e,t){this.#f.set(e.name,[...this.#f.get(e.name)??[],t])}getState(e){let t=(this.#f.get(e)??[]).reduce((e,t)=>({...e,...t.getState()??{}}),{});return delete t.jumpTo,t}},bn=class{#m;#g="v2";#y;#v=new br;constructor(e){let t;if(this.options=e,this.#g=e.version??this.#g,!e.model)throw Error("`model` option is required to create an agent.");"string"!=typeof e.model&&_M(e.model);let r=this.options.middleware?.filter(e=>e.tools).flatMap(e=>e.tools)??[],n=[...e.tools??[],...r],i=new Set(n.filter(_j).filter(e=>"returnDirect"in e&&e.returnDirect).map(e=>e.name)),{state:a,input:s,output:o}=_O(void 0!==this.options.responseFormat,this.options.stateSchema,this.options.middleware),l=new _d({state:a,input:s,output:o},this.options.contextSchema),u=[],c=[],d=[],p=[],h=[];this.#y=new _Y({model:this.options.model,systemMessage:_Z(this.options.systemPrompt),includeAgentName:this.options.includeAgentName,name:this.options.name,responseFormat:this.options.responseFormat,middleware:this.options.middleware,toolClasses:n,shouldReturnDirect:i,signal:this.options.signal,wrapModelCallHookMiddleware:h});let f=new Set,m=this.options.middleware??[];for(let e=0;e<m.length;e++){let t,r,n,i,a=m[e];if(f.has(a.name))throw Error(`Middleware ${a.name} is defined multiple times`);if(f.add(a.name),a.beforeAgent){t=new _8(a,{getState:()=>this.#v.getState(a.name)}),this.#v.addNode(a,t);let r=`${a.name}.before_agent`;u.push({index:e,name:r,allowed:H(a.beforeAgent)}),l.addNode(r,t,t.nodeOptions)}if(a.beforeModel){r=new _7(a,{getState:()=>this.#v.getState(a.name)}),this.#v.addNode(a,r);let t=`${a.name}.before_model`;c.push({index:e,name:t,allowed:H(a.beforeModel)}),l.addNode(t,r,r.nodeOptions)}if(a.afterModel){n=new be(a,{getState:()=>this.#v.getState(a.name)}),this.#v.addNode(a,n);let t=`${a.name}.after_model`;d.push({index:e,name:t,allowed:H(a.afterModel)}),l.addNode(t,n,n.nodeOptions)}if(a.afterAgent){i=new bt(a,{getState:()=>this.#v.getState(a.name)}),this.#v.addNode(a,i);let t=`${a.name}.after_agent`;p.push({index:e,name:t,allowed:H(a.afterAgent)}),l.addNode(t,i,i.nodeOptions)}a.wrapModelCall&&h.push([a,()=>this.#v.getState(a.name)])}if(l.addNode(_H,this.#y),n.filter(_j).length>0){let e=new _4(n.filter(_j),{signal:this.options.signal,wrapToolCall:_F(m)});l.addNode(_X,e)}t=u.length>0?u[0].name:c.length>0?c[0].name:_H;let g=c.length>0?c[0].name:_H,y=p.length>0?p[p.length-1].name:sU;l.addEdge(sD,t);let v=n.filter(_j);for(let e=0;e<u.length;e++){let t=u[e],r=t.name,n=e===u.length-1?g:u[e+1].name;if(t.allowed&&t.allowed.length>0){let e=v.length>0,i=Array.from(new Set([n,...t.allowed.map(e=>_J(e)).filter(t=>t!==_X||e).map(e=>e===sU?y:e)]));l.addConditionalEdges(r,this.#_(v,n,y),i)}else l.addEdge(r,n)}for(let e=0;e<c.length;e++){let t=c[e],r=t.name,n=e===c.length-1?_H:c[e+1].name;if(t.allowed&&t.allowed.length>0){let e=v.length>0,i=Array.from(new Set([n,...t.allowed.map(e=>_J(e)).filter(t=>t!==_X||e)]));l.addConditionalEdges(r,this.#b(v,n),i)}else l.addEdge(r,n)}let _=d.at(-1);if(d.length>0&&_)l.addEdge(_H,_.name);else{let e=this.#w(v).map(e=>e===sU?y:e);1===e.length?l.addEdge(_H,e[0]):l.addConditionalEdges(_H,this.#k(y),e)}for(let e=d.length-1;e>0;e--){let t=d[e],r=t.name,n=d[e-1].name;if(t.allowed&&t.allowed.length>0){let e=v.length>0,i=Array.from(new Set([n,...t.allowed.map(e=>_J(e)).filter(t=>t!==_X||e)]));l.addConditionalEdges(r,this.#x(v,t.allowed,n),i)}else l.addEdge(r,n)}if(d.length>0){let e=d[0],t=e.name,r=this.#w(v,!0).filter(e=>e!==_X||n.filter(_j).length>0),i=!!(e.allowed&&e.allowed.length>0),a=r.map(e=>e===sU?y:e);l.addConditionalEdges(t,this.#$(v,i,y),a)}for(let e=p.length-1;e>0;e--){let t=p[e],r=t.name,n=p[e-1].name;if(t.allowed&&t.allowed.length>0){let e=v.length>0,i=Array.from(new Set([n,...t.allowed.map(e=>_J(e)).filter(t=>t!==_X||e)]));l.addConditionalEdges(r,this.#x(v,t.allowed,n),i)}else l.addEdge(r,n)}if(p.length>0){let e=p[0],t=e.name;if(e.allowed&&e.allowed.length>0){let r=v.length>0,n=Array.from(new Set([sU,...e.allowed.map(e=>_J(e)).filter(e=>e!==_X||r)]));l.addConditionalEdges(t,this.#x(v,e.allowed,sU),n)}else l.addEdge(t,sU)}if(v.length>0){let e=g;i.size>0?l.addConditionalEdges(_X,this.#S(i,y),[e,y]):l.addEdge(_X,e)}this.#m=l.compile({checkpointer:this.options.checkpointer,store:this.options.store,name:this.options.name,description:this.options.description})}get graph(){return this.#m}#w(e,t=!1){let r=[];return e.length>0&&r.push(_X),t&&r.push(_H),r.push(sU),r}#S(e,t){return r=>{let n=r.messages,i=n[n.length-1];return K.uf.isInstance(i)&&i.name&&e.has(i.name)?this.options.responseFormat?_H:t:_H}}#k(e=sU){return t=>{let r=t.messages.at(-1);if(!K.Od.isInstance(r)||!r.tool_calls||0===r.tool_calls.length||r.tool_calls.every(e=>e.name.startsWith("extract-")))return e;if("v1"===this.#g)return _X;let n=r.tool_calls.filter(e=>!e.name.startsWith("extract-"));return 0===n.length?e:n.map(e=>new og(_X,{...t,lg_tool_call:e}))}}#$(e,t,r){let n=!!this.options.responseFormat;return i=>{let a=i,s=a.messages,o=s.at(-1);if(K.Od.isInstance(o)&&(!o.tool_calls||0===o.tool_calls.length))return r;if(t&&a.jumpTo)return a.jumpTo===sU?r:a.jumpTo===_X?0===e.length?r:new og(_X,{...i,jumpTo:void 0}):new og(_H,{...i,jumpTo:void 0});let l=s.filter(K.uf.isInstance),u=s.filter(K.Od.isInstance).at(-1),c=u?.tool_calls?.filter(e=>!l.some(t=>t.tool_call_id===e.id));if(c&&c.length>0)return c.map(e=>new og(_X,{...i,lg_tool_call:e}));let d=u?.tool_calls?.some(e=>e.name.startsWith("extract-"));if(c&&0===c.length&&!d&&n)return _H;if(!K.Od.isInstance(o)||!o.tool_calls||0===o.tool_calls.length)return r;let p=o.tool_calls.every(e=>e.name.startsWith("extract-")),h=o.tool_calls.some(e=>!e.name.startsWith("extract-"));return p||!h?r:_X}}#x(e,t,r){let n=new Set(t.map(e=>_J(e)));return t=>{let i=t;if(i.jumpTo){let r=_J(i.jumpTo);if(r===sU&&n.has(sU))return sU;if(r===_X&&n.has(_X))return 0===e.length?sU:new og(_X,{...t,jumpTo:void 0});if(r===_H&&n.has(_H))return new og(_H,{...t,jumpTo:void 0})}return r}}#_(e,t,r){return n=>{let i=n;if(!i.jumpTo)return t;let a=_J(i.jumpTo);return a===sU?r:a===_X?0===e.length?r:new og(_X,{...n,jumpTo:void 0}):new og(_H,{...n,jumpTo:void 0})}}#b(e,t){return r=>{let n=r;if(!n.jumpTo)return t;let i=_J(n.jumpTo);return i===sU?sU:i===_X?0===e.length?sU:new og(_X,{...r,jumpTo:void 0}):new og(_H,{...r,jumpTo:void 0})}}async #I(e,t){if(!this.options.middleware||0===this.options.middleware.length||e instanceof o_||!e)return e;let r=await _B(this.options.middleware,e),n={...(await this.#m.getState(t).catch(()=>({values:{}}))).values,...e};if(!n)return n;for(let[e,t]of Object.entries(r))e in n||(n[e]=t);return n}async invoke(e,t){let r=await this.#I(e,t);return this.#m.invoke(r,t)}async stream(e,t){let r=await this.#I(e,t);return this.#m.stream(r,t)}async drawMermaidPng(e){let t=await this.#m.getGraphAsync(),r=await t.drawMermaidPng(e);return new Uint8Array(await r.arrayBuffer())}async drawMermaid(e){return(await this.#m.getGraphAsync()).drawMermaid(e)}streamEvents(e,t,r){return this.#m.streamEvents(e,{...t,version:t?.version??"v2"},r)}getGraphAsync(e){return this.#m.getGraphAsync(e)}getState(e,t){return this.#m.getState(e,t)}getStateHistory(e,t){return this.#m.getStateHistory(e,t)}getSubgraphs(e,t){return this.#m.getSubgraphs(e,t)}getSubgraphAsync(e,t){return this.#m.getSubgraphsAsync(e,t)}updateState(e,t,r){return this.#m.updateState(e,t,r)}get builder(){return this.#m.builder}};function bi(e){return new bn(e)}let ba=tR().args(tS(),tS(),tS()).returns(tj([tE(),tZ(tE())])),bs=["approve","edit","reject"],bo=tP({allowedDecisions:tC(tL(bs)),description:tj([tE(),ba]).optional(),argsSchema:tz(tN()).optional()}),bl=tP({interruptOn:tz(tj([tO(),bo])).optional(),descriptionPrefix:tE().default("Tool execution requires approval")});function bu(e){let t=async(t,r,n,i)=>{let a,s=t.name,o=t.args,l=r.description;a="function"==typeof l?await l(t,n,i):void 0!==l?l:`${e.descriptionPrefix??"Tool execution requires approval"}

Tool: ${s}
Args: ${JSON.stringify(o,null,2)}`;let u={name:s,args:o,description:a},c={actionName:s,allowedDecisions:r.allowedDecisions};return r.argsSchema&&(c.argsSchema=r.argsSchema),{actionRequest:u,reviewConfig:c}},r=(e,t,r)=>{let n=r.allowedDecisions;if("approve"===e.type&&n.includes("approve"))return{revisedToolCall:t,toolMessage:null};if("edit"===e.type&&n.includes("edit")){let r=e.editedAction;if(!r||"string"!=typeof r.name)throw Error(`Invalid edited action for tool "${t.name}": name must be a string`);if(!r.args||"object"!=typeof r.args)throw Error(`Invalid edited action for tool "${t.name}": args must be an object`);return{revisedToolCall:{type:"tool_call",name:r.name,args:r.args,id:t.id},toolMessage:null}}if("reject"===e.type&&n.includes("reject")){if(void 0!==e.message&&"string"!=typeof e.message)throw Error(`Tool call response for "${t.name}" must be a string, got ${typeof e.message}`);let r=e.message??`User rejected the tool call for \`${t.name}\` with id ${t.id}`,n=new K.uf({content:r,name:t.name,tool_call_id:t.id,status:"error"});return{revisedToolCall:t,toolMessage:n}}throw Error(`Unexpected human decision: ${JSON.stringify(e)}. Decision type '${e.type}' is not allowed for tool '${t.name}'. Expected one of ${JSON.stringify(n)} based on the tool's configuration.`)};return et({name:"HumanInTheLoopMiddleware",contextSchema:bl,afterModel:{canJumpTo:["model"],hook:async(n,i)=>{let a=(0,M.Zu)(bl,{...e,...i.context||{}});if(!a)return;let{messages:s}=n;if(!s.length)return;let o=[...s].reverse().find(e=>K.Od.isInstance(e));if(!o||!o.tool_calls?.length||!a.interruptOn)return;let l={};for(let[e,t]of Object.entries(a.interruptOn))"boolean"==typeof t?!0===t&&(l[e]={allowedDecisions:[...bs]}):t.allowedDecisions&&(l[e]=t);let u=[],c=[];for(let e of o.tool_calls)e.name in l?u.push(e):c.push(e);if(!u.length)return;let d=[],p=[];for(let e of u){let r=l[e.name],{actionRequest:a,reviewConfig:s}=await t(e,r,n,i);d.push(a),p.push(s)}let h={actionRequests:d,reviewConfigs:p},f=(await lp(h)).decisions;if(!f||!Array.isArray(f))throw Error("Invalid HITLResponse: decisions must be a non-empty array");if(f.length!==u.length)throw Error(`Number of human decisions (${f.length}) does not match number of hanging tool calls (${u.length}).`);let m=[...c],g=[],y=f.some(e=>"reject"===e.type);for(let e=0;e<f.length;e++){let t=f[e],n=u[e],i=l[n.name],{revisedToolCall:a,toolMessage:s}=r(t,n,i);a&&(!y||"reject"===t.type)&&m.push(a),s&&g.push(s)}return K.Od.isInstance(o)&&(o.tool_calls=m),{messages:[o,...g],jumpTo:y?"model":void 0}}}})}let bc=`<role>
Context Extraction Assistant
</role>

<primary_objective>
Your sole objective in this task is to extract the highest quality/most relevant context from the conversation history below.
</primary_objective>

<objective_information>
You're nearing the total number of input tokens you can accept, so you must extract the highest quality/most relevant pieces of information from your conversation history.
This context will then overwrite the conversation history presented below. Because of this, ensure the context you extract is only the most important information to your overall goal.
</objective_information>

<instructions>
The conversation history below will be replaced with the context you extract in this step. Because of this, you must do your very best to extract and record all of the most important context from the conversation history.
You want to ensure that you don't repeat any actions you've already completed, so the context you extract from the conversation history should be focused on the most important information to your overall goal.
</instructions>

The user will message you with the full message history you'll be extracting context from, to then replace. Carefully read over it all, and think deeply about what information is most important to your overall goal that should be saved:

With all of this in mind, please carefully read over the entire conversation history, and extract the most important and relevant context to replace it so that you can free up space in the conversation history.
Respond ONLY with the extracted context. Do not include any additional information, or text before or after the extracted context.

<messages>
Messages to summarize:
{messages}
</messages>`,bd="Here is a summary of the conversation to date:",bp=20,bh=4e3,bf=15,bm=5,bg=tR().args(tC(tS())).returns(tj([tA(),tZ(tA())])),by=tP({fraction:tA().gt(0,"Fraction must be greater than 0").max(1,"Fraction must be less than or equal to 1").optional(),tokens:tA().positive("Tokens must be greater than 0").optional(),messages:tA().int("Messages must be an integer").positive("Messages must be greater than 0").optional()}).refine(e=>[e.fraction,e.tokens,e.messages].filter(e=>void 0!==e).length>=1,{message:"At least one of fraction, tokens, or messages must be provided"}),bv=tP({fraction:tA().min(0,"Messages must be non-negative").max(1,"Fraction must be less than or equal to 1").optional(),tokens:tA().min(0,"Tokens must be greater than or equal to 0").optional(),messages:tA().int("Messages must be an integer").min(0,"Messages must be non-negative").optional()}).refine(e=>1===[e.fraction,e.tokens,e.messages].filter(e=>void 0!==e).length,{message:"Exactly one of fraction, tokens, or messages must be provided"}),b_=tP({model:tS(),trigger:tj([by,tC(by)]).optional(),keep:bv.optional(),tokenCounter:bg.optional(),summaryPrompt:tE().default(bc),trimTokensToSummarize:tA().optional(),summaryPrefix:tE().optional(),maxTokensBeforeSummary:tA().optional(),messagesToKeep:tA().optional()});function bb(e){return"profile"in e&&"object"==typeof e.profile&&e.profile&&"maxInputTokens"in e.profile&&("number"==typeof e.profile.maxInputTokens||null==e.profile.maxInputTokens)?e.profile.maxInputTokens??void 0:"model"in e&&"string"==typeof e.model?(0,nb.MU)(e.model):"modelName"in e&&"string"==typeof e.modelName?(0,nb.MU)(e.modelName):void 0}function bw(e){let{data:t,error:r}=(0,M.Yi)(b_,e);if(r)throw Error(`Invalid summarization middleware options: ${cz(r)}`);return et({name:"SummarizationMiddleware",contextSchema:b_.extend({model:tS().optional()}),beforeModel:async(e,r)=>{let n=t.trigger,i=t.keep;void 0!==t.maxTokensBeforeSummary&&(console.warn("maxTokensBeforeSummary is deprecated. Use `trigger: { tokens: value }` instead."),void 0===n&&(n={tokens:t.maxTokensBeforeSummary})),void 0!==t.messagesToKeep&&(console.warn("messagesToKeep is deprecated. Use `keep: { messages: value }` instead."),(!i||i&&"messages"in i&&i.messages===bp)&&(i={messages:t.messagesToKeep}));let a=r.context?.trigger!==void 0?r.context.trigger:n,s=r.context?.keep!==void 0?r.context.keep:i??{messages:bp},o=bv.parse(s),l=[],u=(l=void 0===a?[]:Array.isArray(a)?a.map(e=>by.parse(e)):[by.parse(a)]).some(e=>"fraction"in e)||"fraction"in o,c="string"==typeof t.model?await T(t.model):t.model;if(u&&!bb(c))throw Error("Model profile information is required to use fractional token limits. Use absolute token counts instead.");let d=r.context?.summaryPrompt===bc?t.summaryPrompt??bc:r.context?.summaryPrompt??t.summaryPrompt??bc,p=r.context.summaryPrefix??t.summaryPrefix??bd,h=r.context?.trimTokensToSummarize!==void 0?r.context.trimTokensToSummarize:t.trimTokensToSummarize??bh;bk(e.messages);let f=r.context?.tokenCounter!==void 0?r.context.tokenCounter:t.tokenCounter??G,m=await f(e.messages);if(!await bS(e.messages,m,l,c))return;let{systemPrompt:g,conversationMessages:y}=bx(e.messages),v=await bI(y,o,f,c);if(v<=0)return;let{messagesToSummarize:_,preservedMessages:b}=b$(g,y,v),w=await bC(_,c,d,f,h),k=new K.xc({content:`${p}

${w}`,id:(0,_k.A)()});return{messages:[new K.kN({id:_x}),k,...b]}}})}function bk(e){for(let t of e)t.id||(t.id=(0,_k.A)())}function bx(e){return e.length>0&&K.tn.isInstance(e[0])?{systemPrompt:e[0],conversationMessages:e.slice(1)}:{conversationMessages:e}}function b$(e,t,r){let n=t.slice(0,r),i=t.slice(r);return e&&n.unshift(e),{messagesToSummarize:n,preservedMessages:i}}async function bS(e,t,r,n){if(0===r.length)return!1;for(let i of r){let r=!0,a=!1;if(void 0!==i.messages&&(a=!0,e.length<i.messages&&(r=!1)),void 0!==i.tokens&&(a=!0,t<i.tokens&&(r=!1)),void 0!==i.fraction){a=!0;let e=bb(n);"number"==typeof e?t<Math.floor(e*i.fraction)&&(r=!1):r=!1}if(a&&r)return!0}return!1}async function bI(e,t,r,n){if("tokens"in t||"fraction"in t){let i=await bE(e,t,r,n);return"number"==typeof i?i:bA(e,bp)}return bA(e,t.messages??bp)}async function bE(e,t,r,n){let i;if(0===e.length)return 0;if("fraction"in t&&void 0!==t.fraction){let e=bb(n);if("number"!=typeof e)return;i=Math.floor(e*t.fraction)}else{if(!("tokens"in t)||void 0===t.tokens)return;i=Math.floor(t.tokens)}if(i<=0&&(i=1),await r(e)<=i)return 0;let a=0,s=e.length,o=e.length,l=Math.floor(Math.log2(e.length))+1;for(let t=0;t<l&&!(a>=s);t++){let t=Math.floor((a+s)/2);await r(e.slice(t))<=i?(o=t,s=t):a=t+1}if(o===e.length&&(o=a),o>=e.length){if(1===e.length)return 0;o=e.length-1}for(let t=o;t>=0;t--)if(bO(e,t))return t;return 0}function bA(e,t){if(e.length<=t)return 0;let r=e.length-t;for(let t=r;t>=0;t--)if(bO(e,t))return t;return 0}function bO(e,t){if(t>=e.length)return!0;if(t<e.length&&K.Od.isInstance(e[t])&&_L(e[t]))return!1;let r=Math.max(0,t-bm),n=Math.min(e.length,t+bm);for(let i=r;i<n;i++){if(!_L(e[i]))continue;let r=bT(e[i]);if(bN(e,i,t,r))return!1}return!0}function bT(e){let t=new Set;if(e.tool_calls)for(let r of e.tool_calls){let e="object"==typeof r&&"id"in r?r.id:null;e&&t.add(e)}return t}function bN(e,t,r,n){for(let i=t+1;i<e.length;i++){let a=e[i];if(K.uf.isInstance(a)&&n.has(a.tool_call_id)&&t<r!=i<r)return!0}return!1}async function bC(e,t,r,n,i){if(!e.length)return"No previous conversation history.";let a=await bP(e,n,i);if(!a.length)return"Previous conversation was too long to summarize.";try{let e=r.replace("{messages}",JSON.stringify(a,null,2)),n=(await t.invoke(e,{callbacks:[]})).content;if("string"==typeof n)return n.trim();if(Array.isArray(n))return n.map(e=>"string"==typeof e?e:"object"==typeof e&&null!==e&&"text"in e?e.text:"").join("").trim();return"Error generating summary: Invalid response format"}catch(e){return`Error generating summary: ${e}`}}async function bP(e,t,r){if(void 0===r)return e;try{return await (0,K.dK)(e,{maxTokens:r,tokenCounter:async e=>t(e),strategy:"last",allowPartial:!0,includeSystem:!0})}catch{return e.slice(-bf)}}function bj(e){return et({name:"DynamicSystemPromptMiddleware",wrapModelCall:async(t,r)=>{let n=await e(t.state,t.runtime);if(!("string"==typeof n||K.tn.isInstance(n)))throw Error("dynamicSystemPromptMiddleware function must return a string or SystemMessage");return r({...t,systemMessage:t.systemMessage.concat(n)})}})}let bz="Your goal is to select the most relevant tools for answering the user's query.";function bR(e){if(!e||0===e.length)throw Error("Invalid usage: tools must be non-empty");return tP({tools:tC(tj(e.map(e=>tM(e.name)))).describe("Tools to use. Place the most relevant tools first.")})}let bM=tP({model:tE().or(tI(nb.j_)).optional(),systemPrompt:tE().optional(),maxTools:tA().optional(),alwaysInclude:tC(tE()).optional()});function bL(e){return et({name:"LLMToolSelector",contextSchema:bM,async wrapModelCall(t,r){let n=await bZ(t,e,t.runtime);if(!n)return r(t);let i=bR(n.availableTools),a=await n.model.withStructuredOutput?.(i),s=await a?.invoke([{role:"system",content:n.systemMessage},n.lastUserMessage]);if(!s||"object"!=typeof s||!("tools"in s))throw Error(`Expected object response with tools array, got ${typeof s}`);return r(bD(s,n.availableTools,n.validToolNames,t,e))}})}async function bZ(e,t,r){let n,i=r.context.model??t.model,a=r.context.maxTools??t.maxTools,s=r.context.alwaysInclude??t.alwaysInclude??[],o=r.context.systemPrompt??t.systemPrompt??bz;if(!e.tools||0===e.tools.length)return;let l=e.tools.filter(e=>"object"==typeof e&&"name"in e&&"description"in e&&"string"==typeof e.name);if(s.length>0){let e=new Set(l.map(e=>e.name)),t=s.filter(t=>!e.has(t));if(t.length>0)throw Error(`Tools in alwaysInclude not found in request: ${t.join(", ")}. Available tools: ${Array.from(e).sort().join(", ")}`)}let u=l.filter(e=>!s.includes(e.name));if(0===u.length)return;let c=o;for(let t of(void 0!==a&&(c+=`
IMPORTANT: List the tool names in order of relevance, with the most relevant first. If you exceed the maximum number of tools, only the first ${a} will be used.`),e.messages))K.xc.isInstance(t)&&(n=t);if(!n)throw Error("No user message found in request messages");let d=i?"string"==typeof i?await T(i):i:e.model,p=u.map(e=>e.name);return{availableTools:u,systemMessage:c,lastUserMessage:n,model:d,validToolNames:p}}function bD(e,t,r,n,i){let a=i.maxTools,s=i.alwaysInclude??[],o=[],l=[];for(let t of e.tools){if(!r.includes(t)){l.push(t);continue}!o.includes(t)&&(void 0===a||o.length<a)&&o.push(t)}if(l.length>0)throw Error(`Model selected invalid tools: ${l.join(", ")}`);let u=t.filter(e=>o.includes(e.name)),c=(n.tools??[]).filter(e=>"object"==typeof e&&"name"in e&&"string"==typeof e.name&&s.includes(e.name));u.push(...c);let d=(n.tools??[]).filter(e=>!("object"==typeof e&&"name"in e&&"description"in e&&"string"==typeof e.name));return{...n,tools:[...u,...d]}}var bU=class extends Error{constructor(e,t){super(`PII detected: ${e} found ${t.length} occurrence(s)`),this.piiType=e,this.matches=t,this.name="PIIDetectionError"}};let bF=/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}\b/g,bB=/\b(?:\d{4}[-\s]?){3}\d{4}\b/g,bV=/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/g,bJ=/\b(?:[0-9A-Fa-f]{2}[:-]){5}(?:[0-9A-Fa-f]{2})\b/g,bW=/(?:https?:\/\/|www\.)[^\s<>"{}|\\^`[\]]+/gi;function bq(e){let t=e.replace(/\D/g,""),r=0,n=!1;for(let e=t.length-1;e>=0;e--){let i=parseInt(t[e],10);n&&(i*=2)>9&&(i-=9),r+=i,n=!n}return r%10==0}function bK(e){return{text:e[0],start:e.index??0,end:(e.index??0)+e[0].length}}function bG(e){let t,r=[],n=new RegExp(bF);for(;null!==(t=n.exec(e));)r.push(bK(t));return r}function bH(e){let t,r=[],n=new RegExp(bB);for(;null!==(t=n.exec(e));){let e=t[0].replace(/\D/g,"");e.length>=13&&e.length<=19&&bq(e)&&r.push(bK(t))}return r}function bY(e){let t,r=[],n=new RegExp(bV);for(;null!==(t=n.exec(e));){let e=t[0].split(".");4===e.length&&e.every(e=>{let t=parseInt(e,10);return t>=0&&t<=255})&&r.push(bK(t))}return r}function bX(e){let t,r=[],n=new RegExp(bJ);for(;null!==(t=n.exec(e));)r.push(bK(t));return r}function bQ(e){let t,r=[],n=new RegExp(bW);for(;null!==(t=n.exec(e));)r.push(bK(t));return r}let b0={email:bG,credit_card:bH,ip:bY,mac_address:bX,url:bQ};function b1(e){let t;if(e.detector)if("string"==typeof e.detector){let r=RegExp(e.detector,"g");t=e=>{let t,n=[],i=new RegExp(r);for(;null!==(t=i.exec(e));)n.push(bK(t));return n}}else t=e.detector instanceof RegExp?t=>{let r;if(!(e.detector instanceof RegExp))throw Error("Detector is required");let n=[];for(;null!==(r=e.detector.exec(t));)n.push(bK(r));return n}:e.detector;else{let r=e.piiType;if(!b0[r])throw Error(`Unknown PII type: ${e.piiType}. Must be one of: ${Object.keys(b0).join(", ")}, or provide a custom detector.`);t=b0[r]}return{piiType:e.piiType,strategy:e.strategy,detector:t}}function b2(e,t,r){let n=e;for(let e=t.length-1;e>=0;e--){let i=t[e],a=`[REDACTED_${r.toUpperCase()}]`;n=n.slice(0,i.start)+a+n.slice(i.end)}return n}function b4(e,t,r){let n=e;for(let e=t.length-1;e>=0;e--){let i,a=t[e],s=a.text;if("credit_card"===r){let e=s.replace(/\D/g,"").slice(-4);i=`****-****-****-${e}`}else if("email"===r){let[e,t]=s.split("@");i=e&&t?`${e[0]}***@${t}`:"***"}else{let e=Math.min(4,s.length);i=`${"*".repeat(Math.max(0,s.length-e))}${s.slice(-e)}`}n=n.slice(0,a.start)+i+n.slice(a.end)}return n}function b6(e,t,r){let n=e;for(let e=t.length-1;e>=0;e--){let i=t[e],a=(0,rY.s)(i.text).slice(0,8),s=`<${r}_hash:${a}>`;n=n.slice(0,i.start)+s+n.slice(i.end)}return n}function b9(e,t,r,n){if(0===t.length)return e;switch(r){case"block":throw new bU(n,t);case"redact":return b2(e,t,n);case"mask":return b4(e,t,n);case"hash":return b6(e,t,n);default:throw Error(`Unknown strategy: ${r}`)}}let b3=tP({applyToInput:tO().optional(),applyToOutput:tO().optional(),applyToToolResults:tO().optional()});function b5(e,t){let r=t.detector(e);return 0===r.length?{content:e,matches:[]}:{content:b9(e,r,t.strategy,t.piiType),matches:r}}function b8(e,t={}){let{strategy:r="redact",detector:n}=t,i=b1({piiType:e,strategy:r,detector:n});return et({name:`PIIMiddleware[${i.piiType}]`,contextSchema:b3,beforeModel:async(e,r)=>{let n=r.context.applyToInput??t.applyToInput??!0,a=r.context.applyToToolResults??t.applyToToolResults??!1;if(!n&&!a)return;let s=e.messages;if(!s||0===s.length)return;let o=[...s],l=!1;if(n){let e=null;for(let t=s.length-1;t>=0;t--)if(K.xc.isInstance(s[t])){e=t;break}if(null!==e){let t=s[e];if(t&&t.content){let{content:r,matches:n}=b5(String(t.content),i);n.length>0&&(o[e]=new K.xc({content:r,id:t.id,name:t.name}),l=!0)}}}if(a){let e=null;for(let t=s.length-1;t>=0;t--)if(K.Od.isInstance(s[t])){e=t;break}if(null!==e)for(let t=e+1;t<s.length;t++){let e=s[t];if(K.uf.isInstance(e)){if(!e.content)continue;let{content:r,matches:n}=b5(String(e.content),i);n.length>0&&(o[t]=new K.uf({content:r,id:e.id,name:e.name,tool_call_id:e.tool_call_id}),l=!0)}}}if(l)return{messages:o}},afterModel:async(e,r)=>{if(!(r.context.applyToOutput??t.applyToOutput))return;let n=e.messages;if(!n||0===n.length)return;let a=null,s=null;for(let e=n.length-1;e>=0;e--)if(K.Od.isInstance(n[e])){s=n[e],a=e;break}if(null===a||!s||!s.content)return;let{content:o,matches:l}=b5(String(s.content),i);if(0===l.length)return;let u=new K.Od({content:o,id:s.id,name:s.name,tool_calls:s.tool_calls}),c=[...n];return c[a]=u,{messages:c}}})}let b7=tP({rules:tz(tE(),tI(RegExp).describe("Regular expression pattern to match PII")).optional()});function we(){return Math.random().toString(36).substring(2,11)}function wt(e,t,r){let n=e;for(let[e,i]of Object.entries(t)){let t=e.toUpperCase().replace(/[^a-zA-Z0-9_-]/g,"");n=n.replace(i,e=>{let n=we();return r[n]=e,`[REDACTED_${t}_${n}]`})}return n}async function wr(e,t){if(K.xc.isInstance(e)||K.uf.isInstance(e)||K.tn.isInstance(e)){let r=e.content,n=await wt(r,t.rules,t.redactionMap);return n!==r?new(Object.getPrototypeOf(e)).constructor({...e,content:n}):e}if(K.Od.isInstance(e)){let r="string"==typeof e.content?e.content:JSON.stringify(e.content),n=JSON.stringify(e.tool_calls),i=await wt(r,t.rules,t.redactionMap),a=await wt(n,t.rules,t.redactionMap);return i!==r||a!==n?new K.Od({...e,content:"string"==typeof e.content?i:JSON.parse(i),tool_calls:JSON.parse(a)}):e}throw Error(`Unsupported message type: ${e.type}`)}function wn(e,t){let r=e,n=/\[REDACTED_[A-Z_]+_(\w+)\]/g;return r.replace(n,(e,r)=>t[r]?t[r]:e)}function wi(e,t){if(K.xc.isInstance(e)||K.uf.isInstance(e)||K.tn.isInstance(e)){let r=e.content,n=wn(r,t);return n!==r?{message:new(Object.getPrototypeOf(e)).constructor({...e,content:n}),changed:!0}:{message:e,changed:!1}}if(K.Od.isInstance(e)){let r="string"==typeof e.content?e.content:JSON.stringify(e.content),n=JSON.stringify(e.tool_calls),i=wn(r,t),a=wn(n,t);return i!==r||a!==n?{message:new K.Od({...e,content:"string"==typeof e.content?i:JSON.parse(i),tool_calls:JSON.parse(a)}),changed:!0}:{message:e,changed:!1}}throw Error(`Unsupported message type: ${e.type}`)}function wa(e={}){let t={};return console.warn("DEPRECATED: piiRedactionMiddleware is deprecated. Please use piiMiddleware instead, go to https://docs.langchain.com/oss/javascript/langchain/middleware/built-in#pii-detection for more information."),et({name:"PIIRedactionMiddleware",contextSchema:b7,wrapModelCall:async(r,n)=>{let i=r.runtime.context.rules??e.rules??{};if(0===Object.keys(i).length)return n(r);let a=await Promise.all(r.state.messages.map(e=>wr(e,{rules:i,redactionMap:t})));return n({...r,messages:a})},afterModel:async e=>{let r;if(0===Object.keys(t).length)return;let n=e.messages.at(-1);if(!K.Od.isInstance(n))return;let i=e.messages.at(-2),{message:a,changed:s}=wi(n,t);if(s){if(K.Od.isInstance(n)&&n?.tool_calls?.length===0&&"string"==typeof n.content&&n.content.startsWith("{")&&n.content.endsWith("}"))try{r=JSON.parse(wn(n.content,t))}catch{}if(K.Od.isInstance(i)&&i?.tool_calls?.length!==0&&i?.tool_calls?.some(e=>e.name.startsWith("extract-"))){let{message:r,changed:o}=wi(i,t),l=i.tool_calls?.find(e=>e.name.startsWith("extract-"))?.args,u=l?JSON.parse(wn(JSON.stringify(l),t)):void 0;if(s||o)return{...e,...u?{structuredResponse:u}:{},messages:[new K.kN({id:i.id}),new K.kN({id:n.id}),r,a]}}return{...e,...r?{structuredResponse:r}:{},messages:[new K.kN({id:n.id}),a]}}}})}let ws="[cleared]",wo=1e5,wl=3;var wu=class{#E;trigger;keep;clearToolInputs;excludeTools;placeholder;model;clearAtLeast;constructor(e={}){let t=e.trigger;void 0!==e.triggerTokens&&(console.warn("triggerTokens is deprecated. Use `trigger: { tokens: value }` instead."),void 0===t&&(t={tokens:e.triggerTokens}));let r=e.keep;if(void 0!==e.keepMessages&&(console.warn("keepMessages is deprecated. Use `keep: { messages: value }` instead."),void 0===r&&(r={messages:e.keepMessages})),void 0===t&&(t={tokens:wo}),void 0===r&&(r={messages:wl}),Array.isArray(t))this.#E=t.map(e=>by.parse(e)),this.trigger=this.#E;else{let e=by.parse(t);this.#E=[e],this.trigger=e}let n=bv.parse(r);this.keep=n,void 0!==e.clearAtLeast&&console.warn("clearAtLeast is deprecated and will be removed in a future version. It conflicts with the `keep` property. Use `keep: { tokens: value }` or `keep: { messages: value }` instead to control retention."),this.clearAtLeast=e.clearAtLeast??0,this.clearToolInputs=e.clearToolInputs??!1,this.excludeTools=new Set(e.excludeTools??[]),this.placeholder=e.placeholder??ws}async apply(e){let{messages:t,model:r,countTokens:n}=e,i=await n(t),a=[];for(let e=0;e<t.length;e++){let r=t[e];if(K.uf.isInstance(r)){let n=this.#A(t.slice(0,e),r.tool_call_id);n&&n.tool_calls?.find(e=>e.id===r.tool_call_id)||a.push(e)}}for(let e=a.length-1;e>=0;e--)t.splice(a[e],1);let s=i;if(a.length>0&&(s=await n(t)),!this.#O(t,s,r))return;let o=[];for(let e=0;e<t.length;e++){let r=t[e];K.uf.isInstance(r)&&o.push({idx:e,msg:r})}if(0===o.length)return;let l=await this.#T(o,n,r),u=l>=o.length?[]:l>0?o.slice(0,-l):o,c=0;for(let{idx:e,msg:r}of[...u]){let i=r.response_metadata?.context_editing;if(i?.cleared)continue;let a=this.#A(t.slice(0,e),r.tool_call_id);if(!a)continue;let o=a.tool_calls?.find(e=>e.id===r.tool_call_id);if(!o)continue;let l=r.name||o.name;if(!this.excludeTools.has(l)){if(t[e]=new K.uf({tool_call_id:r.tool_call_id,content:this.placeholder,name:r.name,artifact:void 0,response_metadata:{...r.response_metadata,context_editing:{cleared:!0,strategy:"clear_tool_uses"}}}),this.clearToolInputs){let e=t.indexOf(a);e>=0&&(t[e]=this.#N(a,r.tool_call_id))}c=Math.max(0,s-await n(t))}}if(this.clearAtLeast>0&&c<this.clearAtLeast){let e=l>0&&l<o.length?o.slice(-l):[];for(let r=e.length-1;r>=0&&!(c>=this.clearAtLeast);r--){let{idx:i,msg:a}=e[r],o=a.response_metadata?.context_editing;if(o?.cleared)continue;let l=this.#A(t.slice(0,i),a.tool_call_id);if(!l)continue;let u=l.tool_calls?.find(e=>e.id===a.tool_call_id);if(!u)continue;let d=a.name||u.name;if(!this.excludeTools.has(d)){if(t[i]=new K.uf({tool_call_id:a.tool_call_id,content:this.placeholder,name:a.name,artifact:void 0,response_metadata:{...a.response_metadata,context_editing:{cleared:!0,strategy:"clear_tool_uses"}}}),this.clearToolInputs){let e=t.indexOf(l);e>=0&&(t[e]=this.#N(l,a.tool_call_id))}c=Math.max(0,s-await n(t))}}}}#O(e,t,r){for(let n of this.#E){let i=!0,a=!1;if(void 0!==n.messages&&(a=!0,e.length<n.messages&&(i=!1)),void 0!==n.tokens&&(a=!0,t<n.tokens&&(i=!1)),void 0!==n.fraction){if(a=!0,!r)continue;let e=bb(r);if("number"!=typeof e)continue;{let r=Math.floor(e*n.fraction);if(r<=0)continue;t<r&&(i=!1)}}if(a&&i)return!0}return!1}async #T(e,t,r){if("messages"in this.keep&&void 0!==this.keep.messages)return this.keep.messages;if("tokens"in this.keep&&void 0!==this.keep.tokens){let r=this.keep.tokens,n=0,i=0;for(let a=e.length-1;a>=0;a--){let s=e[a],o=await t([s.msg]);if(n+o<=r)n+=o,i++;else break}return i}if("fraction"in this.keep&&void 0!==this.keep.fraction){if(!r)return wl;let n=bb(r);if("number"==typeof n){let r=Math.floor(n*this.keep.fraction);if(r<=0)return wl;let i=0,a=0;for(let n=e.length-1;n>=0;n--){let s=e[n],o=await t([s.msg]);if(i+o<=r)i+=o,a++;else break}return a}}return wl}#A(e,t){for(let r=e.length-1;r>=0;r--){let n=e[r];if(K.Od.isInstance(n)&&n.tool_calls?.some(e=>e.id===t))return n}return null}#N(e,t){let r=e.tool_calls?.map(e=>e.id===t?{...e,args:{}}:e),n={...e.response_metadata},i={...n.context_editing},a=new Set(i.cleared_tool_inputs);return a.add(t),i.cleared_tool_inputs=Array.from(a).sort(),n.context_editing=i,new K.Od({content:e.content,tool_calls:r,response_metadata:n,id:e.id,name:e.name,additional_kwargs:e.additional_kwargs})}};function wc(e={}){let t=e.edits??[new wu],r=e.tokenCountMethod??"approx";return et({name:"ContextEditingMiddleware",wrapModelCall:async(e,n)=>{if(!e.messages||0===e.messages.length)return n(e);let i=e.systemPrompt?[new K.tn(e.systemPrompt)]:[],a="approx"===r?G:async t=>{let r=[...i,...t];if("getNumTokensFromMessages"in e.model)return e.model.getNumTokensFromMessages(r).then(({totalCount:e})=>e);throw Error(`Model "${e.model.getName()}" does not support token counting`)};for(let r of t)await r.apply({messages:e.messages,model:e.model,countTokens:a});return n(e)}})}function wd(e){return e?`Tool call limit exceeded. Do not call '${e}' again.`:"Tool call limit exceeded. Do not make additional tool calls."}let wp="continue";function wh(e,t,r,n,i){let a=i?`'${i}' tool`:"Tool",s=[];void 0!==r&&e>r&&s.push(`thread limit exceeded (${e}/${r} calls)`),void 0!==n&&t>n&&s.push(`run limit exceeded (${t}/${n} calls)`);let o=s.join(" and ");return`${a} call limit reached: ${o}.`}let wf=tL(["continue","error","end"]).default(wp);var wm=class extends Error{threadCount;runCount;threadLimit;runLimit;toolName;constructor(e,t,r,n,i){super(wh(e,t,r,n,i)),this.name="ToolCallLimitExceededError",this.threadCount=e,this.runCount=t,this.threadLimit=r,this.runLimit=n,this.toolName=i}};tP({toolName:tE().optional(),threadLimit:tA().optional(),runLimit:tA().optional(),exitBehavior:wf});let wg=tP({threadToolCallCount:tz(tE(),tA()).default({}),runToolCallCount:tz(tE(),tA()).default({})}),wy="__all__";function wv(e){if(void 0===e.threadLimit&&void 0===e.runLimit)throw Error("At least one limit must be specified (threadLimit or runLimit)");let t=e.exitBehavior??wp,r=wf.safeParse(t);if(!r.success)throw Error(cz(r.error).slice(2));if(void 0!==e.threadLimit&&void 0!==e.runLimit&&e.runLimit>e.threadLimit)throw Error(`runLimit (${e.runLimit}) cannot exceed threadLimit (${e.threadLimit}). The run limit should be less than or equal to the thread limit.`);return et({name:e.toolName?`ToolCallLimitMiddleware[${e.toolName}]`:"ToolCallLimitMiddleware",stateSchema:wg,afterModel:{canJumpTo:["end"],hook:r=>{let n=[...r.messages].reverse().find(K.Od.isInstance);if(!n||!n.tool_calls)return;let i=(t,r)=>void 0!==e.threadLimit&&t+1>e.threadLimit||void 0!==e.runLimit&&r+1>e.runLimit,a=t=>void 0===e.toolName||t.name===e.toolName,s=(e,t,r)=>{let n=[],s=[],o=t,l=r;for(let t of e)a(t)&&(i(o,l)?s.push(t):(n.push(t),o+=1,l+=1));return{allowed:n,blocked:s,finalThreadCount:o,finalRunCount:l+s.length}},o=e.toolName??wy,l={...r.threadToolCallCount??{}},u={...r.runToolCallCount??{}},c=l[o]??0,d=u[o]??0,{allowed:p,blocked:h,finalThreadCount:f,finalRunCount:m}=s(n.tool_calls,c,d);if(l[o]=f,u[o]=m,0===h.length)return p.length>0?{threadToolCallCount:l,runToolCallCount:u}:void 0;if("error"===t)throw new wm(f+h.length,m,e.threadLimit,e.runLimit,e.toolName);let g=wd(e.toolName),y=h.map(e=>new K.uf({content:g,tool_call_id:e.id,name:e.name,status:"error"}));if("end"===t){let t=[];if(void 0!==e.toolName?t=n.tool_calls.filter(t=>t.name!==e.toolName):new Set(n.tool_calls.map(e=>e.name).filter(Boolean)).size>1&&(t=p.length>0?p:n.tool_calls),t.length>0){let e=Array.from(new Set(t.map(e=>e.name).filter(Boolean))).join(", ");throw Error(`Cannot end execution with other tool calls pending. Found calls to: ${e}. Use 'continue' or 'error' behavior instead.`)}let r=wh(f+h.length,m,e.threadLimit,e.runLimit,e.toolName);return y.push(new K.Od(r)),{threadToolCallCount:l,runToolCallCount:u,jumpTo:"end",messages:y}}return{threadToolCallCount:l,runToolCallCount:u,messages:y}}},afterAgent:()=>({runToolCallCount:{}})})}let w_=`Use this tool to create and manage a structured task list for your current work session. This helps you track progress, organize complex tasks, and demonstrate thoroughness to the user.
It also helps the user understand the progress of the task and overall progress of their requests.
Only use this tool if you think it will be helpful in staying organized. If the user's request is trivial and takes less than 3 steps, it is better to NOT use this tool and just do the taks directly.

## When to Use This Tool
Use this tool in these scenarios:

1. Complex multi-step tasks - When a task requires 3 or more distinct steps or actions
2. Non-trivial and complex tasks - Tasks that require careful planning or multiple operations
3. User explicitly requests todo list - When the user directly asks you to use the todo list
4. User provides multiple tasks - When users provide a list of things to be done (numbered or comma-separated)
5. The plan may need future revisions or updates based on results from the first few steps. Keeping track of this in a list is helpful.

## How to Use This Tool
1. When you start working on a task - Mark it as in_progress BEFORE beginning work.
2. After completing a task - Mark it as completed and add any new follow-up tasks discovered during implementation.
3. You can also update future tasks, such as deleting them if they are no longer necessary, or adding new tasks that are necessary. Don't change previously completed tasks.
4. You can make several updates to the todo list at once. For example, when you complete a task, you can mark the next task you need to start as in_progress.

## When NOT to Use This Tool
It is important to skip using this tool when:
1. There is only a single, straightforward task
2. The task is trivial and tracking it provides no benefit
3. The task can be completed in less than 3 trivial steps
4. The task is purely conversational or informational

## Examples of When to Use the Todo List

<example>
User: I want to add a dark mode toggle to the application settings. Make sure you run the tests and build when you're done!
Assistant: I'll help add a dark mode toggle to your application settings. Let me create a todo list to track this implementation.
*Creates todo list with the following items:*
1. Create dark mode toggle component in Settings page
2. Add dark mode state management (context/store)
3. Implement CSS-in-JS styles for dark theme
4. Update existing components to support theme switching
5. Run tests and build process, addressing any failures or errors that occur
*Begins working on the first task*

<reasoning>
The assistant used the todo list because:
1. Adding dark mode in it of itself is a multi-step feature requiring UI, state management, and styling changes
2. The assistant inferred that tests and build need to pass by adding "Ensure tests and build succeed" as the final task
3. Both of the user's requests are complex and require multiple steps to complete.
</reasoning>
</example>

<example>
User: Help me plan a comprehensive marketing campaign for our new product launch, including social media, email marketing, and press releases.
Assistant: I'll help you plan a comprehensive marketing campaign for your product launch. Let me create a todo list to organize all the components.
*Creates todo list with the following items:*
1. Define target audience and key messaging
2. Create social media content calendar and posting schedule
3. Design email marketing sequence and automation flows
4. Draft press release and identify media contacts
5. Set up tracking and analytics for campaign performance
6. Create visual assets and brand materials
7. Coordinate launch timeline and deliverables
*Begins working on the first task*

<reasoning>
The assistant used the todo list because:
1. Marketing campaign planning involves multiple distinct channels and activities
2. Each component requires careful coordination and planning
3. The systematic approach ensures all aspects of the launch are covered
</reasoning>
</example>

<example>
User: Help me rename the function getCwd to getCurrentWorkingDirectory across my project
Assistant: Let me first search through your codebase to find all occurrences of 'getCwd'.
*Uses search tools to locate all instances of getCwd in the codebase*
Assistant: I've found 15 instances of 'getCwd' across 8 different files. Let me create a todo list to track these changes.
*Creates todo list with specific items for each file that needs updating*

<reasoning>
The assistant used the todo list because:
1. The assistant searched to understand the scope of the task
2. Upon finding multiple occurrences across different files, it determined this was a complex task with multiple steps (>3)
3. The todo list helps ensure every instance is tracked and updated systematically
4. This approach prevents missing any occurrences and maintains consistency.
</reasoning>
</example>

<example>
User: I need help organizing my home office: decluttering the desk, setting up a filing system, organizing digital files, and creating a daily workflow.
Assistant: I'll help you organize your home office systematically. Let me create a todo list to track each area of organization.
*Creates todo list with items like: 1) Sort and declutter desk items, 2) Set up physical filing system for documents, 3) Organize digital files and folders, 4) Create daily workflow and productivity systems, 5) Establish maintenance routines*
Let's start with decluttering your desk space to create a clean foundation for the other organizational systems.

<reasoning>
The assistant used the todo list because:
1. The user provided multiple distinct organizational tasks
2. Each area requires different approaches and careful planning
3. Home organization benefits from systematic, step-by-step completion
4. Progress tracking ensures all areas are addressed thoroughly
</reasoning>
</example>

## Examples of When NOT to Use the Todo List

<example>
User: How do I print 'Hello World' in Python?
Assistant: In Python, you can print "Hello World" with this simple code:

\`\`\`python
print("Hello World")
\`\`\`

This will output the text "Hello World" to the console when executed.</assistant>

<reasoning>
The assistant did not use the todo list because this is a single, trivial task that can be completed in one step. There's no need to track multiple tasks or steps for such a straightforward request.
</reasoning>
</example>

<example>
User: What's the best way to water houseplants?
Assistant: The best way to water houseplants depends on the specific plant type, but here are some general guidelines:

- Check soil moisture by inserting your finger about 1-2 inches into the soil
- Water thoroughly when the top inch feels dry, allowing water to drain from the bottom
- Use room temperature water and water in the morning when possible
- Avoid overwatering, which is more harmful than underwatering for most plants

Different plants have different needs, so it's important to research your specific varieties for optimal care.

<reasoning>
The assistant did not use the todo list because this is an informational request with no actual tasks to complete. The user is simply asking for advice and explanation, not for the assistant to perform multiple steps or activities.
</reasoning>
</example>

<example>
User: Can you add a comment to the calculateTotal function to explain what it does?
Assistant: Sure, let me add a comment to the calculateTotal function to explain what it does.
* Uses the Edit tool to add a comment to the calculateTotal function *

<reasoning>
The assistant did not use the todo list because this is a single, straightforward task confined to one location. Adding a comment doesn't require tracking multiple steps or systematic organization.
</reasoning>
</example>

<example>
User: What time is it in Tokyo right now?
Assistant: I'll check the current time in Tokyo for you.

*Searches for current time in Tokyo*

The current time in Tokyo, Japan is [current time]. Tokyo is in the Japan Standard Time (JST) zone, which is UTC+9.

<reasoning>
The assistant did not use the todo list because this is a single information lookup with immediate results. There are no multiple steps to track or organize, making the todo list unnecessary for this straightforward request.
</reasoning>
</example>

<example>
User: I need to write a function that checks if a number is prime and then test it out.
Assistant: I'll help you write a function that checks if a number is prime and then test it out.
*Writes function that checks if a number is prime*
*Tests the function*

<reasoning>
Even though this is a multi-step task, it is very straightforward and can be completed in two trivial steps (which is less than 3 steps!). Using the todo list here is overkill and wastes time and tokens.
</reasoning>
</example>

<example>
User: I want you to order a pizza from Dominos, order a burger from McDonald's, and order a salad from Subway.
Assistant: I'll help you order a pizza from Dominos, order a burger from McDonald's, and order a salad from Subway.
*Orders a pizza from Dominos*
*Orders a burger from McDonald's*
*Orders a salad from Subway*

<reasoning>
Even though this is a multi-step task, assuming the assistant has the ability to order from these restaurants, it is very straightforward and can be completed in three trivial tool calls. 
Using the todo list here is overkill and wastes time and tokens. These three tool calls should be made in parallel, in fact.
</reasoning>
</example>


## Task States and Management

1. **Task States**: Use these states to track progress:
   - pending: Task not yet started
   - in_progress: Currently working on (you can have multiple tasks in_progress at a time if they are not related to each other and can be run in parallel)
   - completed: Task finished successfully

2. **Task Management**:
   - Update task status in real-time as you work
   - Mark tasks complete IMMEDIATELY after finishing (don't batch completions)
   - Complete current tasks before starting new ones
   - Remove tasks that are no longer relevant from the list entirely
   - IMPORTANT: When you write this todo list, you should mark your first task (or tasks) as in_progress immediately!.
   - IMPORTANT: Unless all tasks are completed, you should always have at least one task in_progress to show the user that you are working on something.

3. **Task Completion Requirements**:
   - ONLY mark a task as completed when you have FULLY accomplished it
   - If you encounter errors, blockers, or cannot finish, keep the task as in_progress
   - When blocked, create a new task describing what needs to be resolved
   - Never mark a task as completed if:
     - There are unresolved issues or errors
     - Work is partial or incomplete
     - You encountered blockers that prevent completion
     - You couldn't find necessary resources or dependencies
     - Quality standards haven't been met

4. **Task Breakdown**:
   - Create specific, actionable items
   - Break complex tasks into smaller, manageable steps
   - Use clear, descriptive task names

Being proactive with task management demonstrates attentiveness and ensures you complete all requirements successfully
Remember: If you only need to make a few tool calls to complete a task, and it is clear what you need to do, it is better to just do the task directly and NOT call this tool at all.`,wb=`## \`write_todos\`

You have access to the \`write_todos\` tool to help you manage and plan complex objectives. 
Use this tool for complex objectives to ensure that you are tracking each necessary step and giving the user visibility into your progress.
This tool is very helpful for planning complex objectives, and for breaking down these larger complex objectives into smaller steps.

It is critical that you mark todos as completed as soon as you are done with a step. Do not batch up multiple steps before marking them as completed.
For simple objectives that only require a few steps, it is better to just complete the objective directly and NOT use this tool.
Writing todos takes time and tokens, use it when it is helpful for managing complex many-step problems! But not for simple few-step requests.

## Important To-Do List Usage Notes to Remember
- The \`write_todos\` tool should never be called multiple times in parallel.
- Don't be afraid to revise the To-Do list as you go. New information may reveal new tasks that need to be done, or old tasks that are irrelevant.`,ww=tL(["pending","in_progress","completed"]).describe("Status of the todo"),wk=tP({content:tE().describe("Content of the todo item"),status:ww}),wx=tP({todos:tC(wk).default([])});function w$(e){return et({name:"todoListMiddleware",stateSchema:wx,tools:[(0,er.z6)(({todos:e},t)=>new o_({update:{todos:e,messages:[new K.uf({content:`Updated todo list to ${JSON.stringify(e)}`,tool_call_id:t.toolCall?.id})]}}),{name:"write_todos",description:e?.toolDescription??w_,schema:tP({todos:tC(wk).describe("List of todo items to update")})})],wrapModelCall:(t,r)=>r({...t,systemMessage:t.systemMessage.concat(`

${e?.systemPrompt??wb}`)})})}let wS="end",wI=tP({threadLimit:tA().optional(),runLimit:tA().optional(),exitBehavior:tL(["error","end"]).optional()}),wE=tP({threadModelCallCount:tA().default(0),runModelCallCount:tA().default(0)});var wA=class extends Error{constructor({threadLimit:e,runLimit:t,threadCount:r,runCount:n}){let i=[];"number"==typeof e&&"number"==typeof r&&i.push(`thread level call limit reached with ${r} model calls`),"number"==typeof t&&"number"==typeof n&&i.push(`run level call limit reached with ${n} model calls`),super(`Model call limits exceeded${i.length>0?`: ${i.join(", ")}`:""}`),this.name="ModelCallLimitMiddlewareError"}};function wO(e){return et({name:"ModelCallLimitMiddleware",contextSchema:wI,stateSchema:wE,beforeModel:{canJumpTo:["end"],hook:(t,r)=>{let n=r.context.exitBehavior??e?.exitBehavior??wS;"throw"===n&&(console.warn("The 'throw' exit behavior is deprecated. Please use 'error' instead."),n="error");let i=r.context.threadLimit??e?.threadLimit,a=r.context.runLimit??e?.runLimit,s=t.threadModelCallCount,o=t.runModelCallCount;if("number"==typeof i&&i<=s){let e=new wA({threadLimit:i,threadCount:s});if("end"===n)return{jumpTo:"end",messages:[new K.Od(e.message)]};throw e}if("number"==typeof a&&a<=o){let e=new wA({runLimit:a,runCount:o});if("end"===n)return{jumpTo:"end",messages:[new K.Od(e.message)]};throw e}return t}},afterModel:e=>({runModelCallCount:e.runModelCallCount+1,threadModelCallCount:e.threadModelCallCount+1}),afterAgent:()=>({runModelCallCount:0})})}function wT(...e){return et({name:"modelFallbackMiddleware",wrapModelCall:async(t,r)=>{try{return await r(t)}catch(n){for(let n=0;n<e.length;n++)try{let i=e[n],a="string"==typeof i?await T(i):i;return await r({...t,model:a})}catch(t){if(n===e.length-1)throw t}throw n}}})}let wN=tP({maxRetries:tA().min(0).default(2),retryOn:tj([tR().args(tI(Error)).returns(tO()),tC(tS())]).default(()=>()=>!0),backoffFactor:tA().min(0).default(2),initialDelayMs:tA().min(0).default(1e3),maxDelayMs:tA().min(0).default(6e4),jitter:tO().default(!0)});var wC=class extends Error{cause;constructor(e){super(cz(e).slice(2)),this.name="InvalidRetryConfigError",this.cause=e}};let wP=tP({onFailure:tj([tM("error"),tM("continue"),tR().args(tI(Error)).returns(tE())]).default("continue")}).merge(wN);function wj(e={}){let{success:t,error:r,data:n}=wP.safeParse(e);if(!t)throw new wC(r);let{maxRetries:i,retryOn:a,onFailure:s,backoffFactor:o,initialDelayMs:l,maxDelayMs:u,jitter:c}=n,d=e=>"function"==typeof a?a(e):a.some(t=>e.constructor===t),p={backoffFactor:o,initialDelayMs:l,maxDelayMs:u,jitter:c},h=(e,t)=>{let r=e.constructor.name,n=1===t?"attempt":"attempts";return`Model call failed after ${t} ${n} with ${r}: ${e.message}`},f=(e,t)=>{let r;if("error"===s)throw e;return r="function"==typeof s?s(e):h(e,t),new K.Od({content:r})};return et({name:"modelRetryMiddleware",contextSchema:wP,wrapModelCall:async(e,t)=>{for(let r=0;r<=i;r++)try{return await t(e)}catch(n){let e=r+1,t=n&&"object"==typeof n&&"message"in n?n:Error(String(n));if(!d(t)||!(r<i))return f(t,e);{let e=Q(p,r);e>0&&await X(e)}}throw Error("Unexpected: retry loop completed without returning")}})}let wz=tP({tools:tC(tj([tS(),tS(),tE()])).optional(),onFailure:tj([tM("error"),tM("continue"),tM("raise"),tM("return_message"),tR().args(tI(Error)).returns(tE())]).default("continue")}).merge(wN);function wR(e={}){let{success:t,error:r,data:n}=wz.safeParse(e);if(!t)throw new wC(r);let{maxRetries:i,tools:a,retryOn:s,onFailure:o,backoffFactor:l,initialDelayMs:u,maxDelayMs:c,jitter:d}=n,p=o;"raise"===o?(console.warn(" `onFailure: 'raise'` is deprecated. Use `onFailure: 'error'` instead."),p="error"):"return_message"===o&&(console.warn(" `onFailure: 'return_message'` is deprecated. Use `onFailure: 'continue'` instead."),p="continue");let h=[];for(let e of a??[])if("string"==typeof e)h.push(e);else if("name"in e&&"string"==typeof e.name)h.push(e.name);else throw TypeError("Expected a tool name string or tool instance to be passed to toolRetryMiddleware");let f=e=>0===h.length||h.includes(e),m=e=>"function"==typeof s?s(e):s.some(t=>e instanceof t),g={backoffFactor:l,initialDelayMs:u,maxDelayMs:c,jitter:d},y=(e,t,r)=>{let n=t.constructor.name,i=1===r?"attempt":"attempts";return`Tool '${e}' failed after ${r} ${i} with ${n}`},v=(e,t,r,n)=>{let i;if("error"===p)throw r;return i="function"==typeof p?p(r):y(e,r,n),new K.uf({content:i,tool_call_id:t,name:e,status:"error"})};return et({name:"toolRetryMiddleware",contextSchema:wz,wrapToolCall:async(e,t)=>{let r=e.tool?.name??e.toolCall.name;if(!f(r))return t(e);let n=e.toolCall.id??"";for(let a=0;a<=i;a++)try{return await t(e)}catch(s){let e=a+1,t=s&&"object"==typeof s&&"message"in s?s:Error(String(s));if(!m(t)||!(a<i))return v(r,n,t,e);{let e=Q(g,a);e>0&&await X(e)}}throw Error("Unexpected: retry loop completed without returning")}})}function wM(e={}){let t,r,{tools:n,model:i}=e,a=!n||0===n.length,s=new Set;if(!a&&n)for(let e of n)if("string"==typeof e)s.add(e);else{let t="string"==typeof e.name?e.name:String(e.name);s.add(t)}let o=async()=>"object"==typeof i?i:"string"==typeof i?r=r??await T(i,{temperature:1}).catch(e=>(console.error("Error initializing emulator model, using agent model:",e),t)):t;return et({name:"ToolEmulatorMiddleware",wrapModelCall:async(e,r)=>(t=e.model,r(e)),wrapToolCall:async(e,t)=>{let r=e.toolCall.name;if(!(a||s.has(r)))return t(e);let n=e.toolCall.args,i=e.tool.description||"No description available",l="string"==typeof n?n:JSON.stringify(n),u=`You are emulating a tool call for testing purposes.

Tool: ${r}
Description: ${i}
Arguments: ${l}

Generate a realistic response that this tool would return given these arguments.
Return ONLY the tool's output, no explanation or preamble. Introduce variation into your responses.`,c=await o(),d=await c.invoke([new K.xc(u)]),p="string"==typeof d.content?d.content:JSON.stringify(d.content);return new K.uf({content:p,tool_call_id:e.toolCall.id??"",name:r})}})}function wL(e){return!!e&&"object"==typeof e&&null!==e&&"client"in e&&"_getClientOptions"in e&&"function"==typeof e._getClientOptions&&(e._getClientOptions(),"object"==typeof e.client&&null!==e.client&&"moderations"in e.client&&"object"==typeof e.client.moderations&&null!==e.client.moderations&&"create"in e.client.moderations&&"function"==typeof e.client.moderations.create)}let wZ="I'm sorry, but I can't comply with that request. It was flagged for {categories}.";var wD=class extends Error{content;stage;result;originalMessage;constructor({content:e,stage:t,result:r,message:n}){super(n),this.name="OpenAIModerationError",this.content=e,this.stage=t,this.result=r,this.originalMessage=n}};function wU(e){let t,{model:r,moderationModel:n="omni-moderation-latest",checkInput:i=!0,checkOutput:a=!0,checkToolResults:s=!1,exitBehavior:o="end",violationMessage:l}=e,u=async()=>{if(t)return t;let e="string"==typeof r?await T(r):r;if(!e.getName().includes("ChatOpenAI"))throw Error(`Model must be an OpenAI model to use moderation middleware. Got: ${e.getName()}`);if(!wL(e))throw Error("Model must support moderation to use moderation middleware.");return t=e},c=e=>null==e.content?null:e.text||null,d=(e,t)=>{for(let r=e.length-1;r>=0;r--)if(t.isInstance(e[r]))return r;return null},p=(e,t)=>{let r=[];for(let[e,n]of Object.entries(t.categories))n&&r.push(e.replace(/_/g," "));let n=r.length>0?r.join(", "):"OpenAI's safety policies",i=l||wZ,a=JSON.stringify(t.category_scores,null,2);try{return i.replace("{categories}",n).replace("{category_scores}",a).replace("{original_content}",e)}catch{return i}};function h(e,r){let n=t?._getClientOptions?.(),i={input:e,model:r?.model??"omni-moderation-latest"};return t.client.moderations.create(i,n)}let f=(e,t,r,n,i)=>{let a=p(n,i);if("error"===o)throw new wD({content:n,stage:r,result:i,message:a});if("end"===o)return{jumpTo:"end",messages:[new K.Od({content:a})]};if(null==t)return;let s=[...e],l=s[t],u=Object.getPrototypeOf(l).constructor;return s[t]=new u({...l,content:a}),{messages:s}},m=async e=>{let t=d(e,K.xc);if(null==t)return null;let r=c(e[t]);if(!r)return null;await u();let i=(await h(r,{model:n})).results.find(e=>e.flagged);return i?f(e,t,"input",r,i):null},g=async e=>{let t=d(e,K.Od);if(null==t)return null;let r=[...e],i=!1;for(let e=t+1;e<r.length;e++){let t=r[e];if(!K.uf.isInstance(t))continue;let a=c(t);if(!a)continue;await u();let s=(await h(a,{model:n})).results.find(e=>e.flagged);if(!s)continue;let o=f(r,e,"tool",a,s);if(o){if("jumpTo"in o)return o;"messages"in o&&(r.splice(0,r.length,...o.messages),i=!0)}}return i?{messages:r}:null},y=async e=>{let t=d(e,K.Od);if(null==t)return null;let r=c(e[t]);if(!r)return null;await u();let i=(await h(r,{model:n})).results.find(e=>e.flagged);return i?f(e,t,"output",r,i):null},v=async e=>{let t=[...e],r=!1;if(s){let e=await g(t);if(e){if("jumpTo"in e)return e;"messages"in e&&(t.splice(0,t.length,...e.messages),r=!0)}}if(i){let e=await m(t);if(e){if("jumpTo"in e)return e;"messages"in e&&(t.splice(0,t.length,...e.messages),r=!0)}}return r?{messages:t}:null};return et({name:"OpenAIModerationMiddleware",beforeModel:{hook:async e=>{if(!i&&!s)return;let t=e.messages||[];if(0!==t.length)return await v(t)??void 0},canJumpTo:["end"]},afterModel:{hook:async e=>{if(!a)return;let t=e.messages||[];if(0!==t.length)return await y(t)??void 0},canJumpTo:["end"]}})}let wF=!0,wB="5m",wV=3,wJ="warn",wW=tP({enableCaching:tO().optional(),ttl:tL(["5m","1h"]).optional(),minMessagesToCache:tA().optional(),unsupportedModelBehavior:tL(["ignore","warn","raise"]).optional()});var wq=class extends Error{constructor(e){super(e),this.name="PromptCachingMiddlewareError"}};function wK(e){return et({name:"PromptCachingMiddleware",contextSchema:wW,wrapModelCall:(t,r)=>{let n=t.runtime.context.enableCaching??e?.enableCaching??wF,i=t.runtime.context.ttl??e?.ttl??wB,a=t.runtime.context.minMessagesToCache??e?.minMessagesToCache??wV,s=t.runtime.context.unsupportedModelBehavior??e?.unsupportedModelBehavior??wJ;if(!n||!t.model)return r(t);if("ChatAnthropic"!==t.model.getName()&&("ConfigurableModel"!==t.model.getName()||t.model._defaultConfig?.modelProvider!=="anthropic")){let e=t.model.getName(),n="ConfigurableModel"===t.model.getName()?`${e} (${t.model._defaultConfig?.modelProvider})`:e,i=`Unsupported model '${n}'. Prompt caching requires an Anthropic model`;if("raise"===s)throw new wq(`${i} (e.g., 'anthropic:claude-4-0-sonnet').`);return"warn"===s&&console.warn(`PromptCachingMiddleware: Skipping caching for ${e}. Consider switching to an Anthropic model for caching benefits.`),r(t)}if(t.state.messages.length+ +!!t.systemPrompt<a)return r(t);let o=t.messages.at(-1);if(!o)return r(t);let l=Object.getPrototypeOf(o).constructor;if(Array.isArray(o.content)){let e=new l({...o,content:[...o.content.slice(0,-1),{...o.content.at(-1),cache_control:{type:"ephemeral",ttl:i}}]});return r({...t,messages:[...t.messages.slice(0,-1),e]})}if("string"==typeof o.content){let e=new l({...o,content:[{type:"text",text:o.content,cache_control:{type:"ephemeral",ttl:i}}]});return r({...t,messages:[...t.messages.slice(0,-1),e]})}throw new wq("Last message content is not a string or array")}})}b({},{AIMessage:()=>K.Od,AIMessageChunk:()=>K.H,BaseMessage:()=>K.XQ,BaseMessageChunk:()=>K.gj,ClearToolUsesEdit:()=>wu,Document:()=>r9,DynamicStructuredTool:()=>er.XW,DynamicTool:()=>er.gd,FakeToolCallingModel:()=>sd,HumanMessage:()=>K.xc,HumanMessageChunk:()=>K.a7,InMemoryStore:()=>rF,MIDDLEWARE_BRAND:()=>ee,MultipleStructuredOutputsError:()=>C,MultipleToolsBoundError:()=>N,PIIDetectionError:()=>bU,ProviderStrategy:()=>U,StructuredOutputParsingError:()=>P,StructuredTool:()=>er.Ou,SystemMessage:()=>K.tn,SystemMessageChunk:()=>K.uU,TODO_LIST_MIDDLEWARE_SYSTEM_PROMPT:()=>wb,Tool:()=>er.NL,ToolCallLimitExceededError:()=>wm,ToolInvocationError:()=>j,ToolMessage:()=>K.uf,ToolMessageChunk:()=>K.dr,ToolStrategy:()=>D,anthropicPromptCachingMiddleware:()=>wK,applyStrategy:()=>b9,context:()=>iU,contextEditingMiddleware:()=>wc,countTokensApproximately:()=>G,createAgent:()=>bi,createMiddleware:()=>et,detectCreditCard:()=>bH,detectEmail:()=>bG,detectIP:()=>bY,detectMacAddress:()=>bX,detectUrl:()=>bQ,dynamicSystemPromptMiddleware:()=>bj,filterMessages:()=>K.XI,humanInTheLoopMiddleware:()=>bu,initChatModel:()=>T,llmToolSelectorMiddleware:()=>bL,modelCallLimitMiddleware:()=>wO,modelFallbackMiddleware:()=>wT,modelRetryMiddleware:()=>wj,openAIModerationMiddleware:()=>wU,piiMiddleware:()=>b8,piiRedactionMiddleware:()=>wa,providerStrategy:()=>V,resolveRedactionRule:()=>b1,summarizationMiddleware:()=>bw,todoListMiddleware:()=>w$,tool:()=>er.z6,toolCallLimitMiddleware:()=>wv,toolEmulatorMiddleware:()=>wM,toolRetryMiddleware:()=>wR,toolStrategy:()=>B,trimMessages:()=>K.dK})},50696:(e,t,r)=>{"use strict";function n(e,t){return i(e)&&e.type===t}function i(e){return"object"==typeof e&&null!==e}function a(e){return Array.isArray(e)}function s(e){return"string"==typeof e}function o(e){return"number"==typeof e}function l(e){return e instanceof Uint8Array}function u(e){try{return JSON.parse(e)}catch{return}}r.d(t,{MP:()=>n,MS:()=>l,NS:()=>u,V3:()=>a,iD:()=>c,jM:()=>o,nD:()=>i,vQ:()=>s});let c=e=>e()},50766:(e,t,r)=>{"use strict";r.d(t,{IH:()=>d,PI:()=>c,Vo:()=>u});var n=r(67893),i=r(72716),a=r(55452),s=r(87150),o=r(23294),l=r(61115),u={};(0,n.V)(u,{BaseLLM:()=>c,LLM:()=>d});var c=class e extends l.j_{lc_namespace=["langchain","llms",this._llmType()];async invoke(t,r){let n=e._convertInputToPromptValue(t);return(await this.generatePrompt([n],r,r?.callbacks)).generations[0][0].text}async *_streamResponseChunks(e,t,r){throw Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(e){let[t,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=t.signal,[t,r]}async *_streamIterator(t,r){if(this._streamResponseChunks===e.prototype._streamResponseChunks)yield this.invoke(t,r);else{let n=e._convertInputToPromptValue(t),[i,s]=this._separateRunnableConfigFromCallOptionsCompat(r),l=await a.Td.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),u={options:s,invocation_params:this?.invocationParams(s),batch_size:1},c=await l?.handleLLMStart(this.toJSON(),[n.toString()],i.runId,void 0,u,void 0,void 0,i.runName),d=new o.mu({text:""});try{for await(let e of this._streamResponseChunks(n.toString(),s,c?.[0]))d=d?d.concat(e):e,"string"==typeof e.text&&(yield e.text)}catch(e){throw await Promise.all((c??[]).map(t=>t?.handleLLMError(e))),e}await Promise.all((c??[]).map(e=>e?.handleLLMEnd({generations:[[d]]})))}}async generatePrompt(e,t,r){let n=e.map(e=>e.toString());return this.generate(n,t,r)}invocationParams(e){return{}}_flattenLLMResult(e){let t=[];for(let r=0;r<e.generations.length;r+=1){let n=e.generations[r];if(0===r)t.push({generations:[n],llmOutput:e.llmOutput});else{let r=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;t.push({generations:[n],llmOutput:r})}}return t}async _generateUncached(t,r,n,l){let u,c;if(void 0!==l&&l.length===t.length)u=l;else{let e=await a.Td.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),i={options:r,invocation_params:this?.invocationParams(r),batch_size:t.length};u=await e?.handleLLMStart(this.toJSON(),t,n.runId,void 0,i,void 0,void 0,n?.runName)}if(u?.[0].handlers.find(i.xL)&&1===t.length&&this._streamResponseChunks!==e.prototype._streamResponseChunks)try{let e;for await(let n of(await this._streamResponseChunks(t[0],r,u?.[0])))e=void 0===e?n:(0,s.xW)(e,n);if(void 0===e)throw Error("Received empty response from chat model call.");c={generations:[[e]],llmOutput:{}},await u?.[0].handleLLMEnd(c)}catch(e){throw await u?.[0].handleLLMError(e),e}else{try{c=await this._generate(t,r,u?.[0])}catch(e){throw await Promise.all((u??[]).map(t=>t?.handleLLMError(e))),e}let e=this._flattenLLMResult(c);await Promise.all((u??[]).map((t,r)=>t?.handleLLMEnd(e[r])))}let d=u?.map(e=>e.runId)||void 0;return Object.defineProperty(c,o.SP,{value:d?{runIds:d}:void 0,configurable:!0}),c}async _generateCached({prompts:e,cache:t,llmStringKey:r,parsedOptions:n,handledOptions:i,runId:s}){let l=await a.Td.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),u={options:n,invocation_params:this?.invocationParams(n),batch_size:e.length},c=await l?.handleLLMStart(this.toJSON(),e,s,void 0,u,void 0,void 0,i?.runName),d=[],p=(await Promise.allSettled(e.map(async(e,n)=>{let i=await t.lookup(e,r);return null==i&&d.push(n),i}))).map((e,t)=>({result:e,runManager:c?.[t]})).filter(({result:e})=>"fulfilled"===e.status&&null!=e.value||"rejected"===e.status),h=[];await Promise.all(p.map(async({result:e,runManager:t},r)=>{if("fulfilled"!==e.status)return await t?.handleLLMError(e.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(e.reason);{let n=e.value;return h[r]=n.map(e=>(e.generationInfo={...e.generationInfo,tokenUsage:{}},e)),n.length&&await t?.handleLLMNewToken(n[0].text),t?.handleLLMEnd({generations:[n]},void 0,void 0,void 0,{cached:!0})}}));let f={generations:h,missingPromptIndices:d,startedRunManagers:c};return Object.defineProperty(f,o.SP,{value:c?{runIds:c?.map(e=>e.runId)}:void 0,configurable:!0}),f}async generate(e,t,r){let n;if(!Array.isArray(e))throw Error("Argument 'prompts' is expected to be a string[]");n=Array.isArray(t)?{stop:t}:t;let[i,a]=this._separateRunnableConfigFromCallOptionsCompat(n);if(i.callbacks=i.callbacks??r,!this.cache)return this._generateUncached(e,a,i);let{cache:s}=this,o=this._getSerializedCacheKeyParametersForCall(a),{generations:l,missingPromptIndices:u,startedRunManagers:c}=await this._generateCached({prompts:e,cache:s,llmStringKey:o,parsedOptions:a,handledOptions:i,runId:i.runId}),d={};if(u.length>0){let t=await this._generateUncached(u.map(t=>e[t]),a,i,void 0!==c?u.map(e=>c?.[e]):void 0);await Promise.all(t.generations.map(async(t,r)=>{let n=u[r];return l[n]=t,s.update(e[n],o,t)})),d=t.llmOutput??{}}return{generations:l,llmOutput:d}}_identifyingParams(){return{}}_modelType(){return"base_llm"}},d=class extends c{async _generate(e,t,r){return{generations:await Promise.all(e.map((e,n)=>this._call(e,{...t,promptIndex:n},r).then(e=>[{text:e}])))}}}},51017:(e,t,r)=>{"use strict";let n=r(98566);e.exports=(e,t,r)=>0!==n(e,t,r)},51389:(e,t,r)=>{"use strict";let n=r(98566);e.exports=(e,t,r)=>0===n(e,t,r)},51595:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});var n=r(12115),i=r(39033);function a(e,t=globalThis?.document){let r=(0,i.c)(e);n.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}},51628:(e,t,r)=>{"use strict";r.d(t,{N:()=>u,z:()=>s});var n=r(44768),i=r(55452),a=r(82926),s=class{getStore(){}run(e,t){return t()}enterWith(e){}};let o=new s,l=Symbol.for("lc:child_config"),u=new class{getInstance(){return(0,n.X0)()??o}getRunnableConfig(){let e=this.getInstance();return e.getStore()?.extra?.[l]}runWithConfig(e,t,r){let s,o=i.Td._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),u=this.getInstance(),c=u.getStore(),d=o?.getParentRunId(),p=o?.handlers?.find(e=>e?.name==="langchain_tracer");return p&&d?s=p.getRunTreeWithTracingConfig(d):r||(s=new a.gk({name:"<runnable_lambda>",tracingEnabled:!1})),s&&(s.extra={...s.extra,[l]:e}),void 0!==c&&void 0!==c[n.hr]&&(void 0===s&&(s={}),s[n.hr]=c[n.hr]),u.run(s,t)}initializeGlobalInstance(e){void 0===(0,n.X0)()&&(0,n.pH)(e)}}},51797:(e,t,r)=>{"use strict";let n;r.d(t,{_:()=>c,u:()=>u});var i=r(23698),a=r(44768),s=r(52435);function o(){return new(0,s.default)({autoStart:!0,concurrency:1})}function l(){return void 0===n&&(n=o()),n}async function u(e,t){if(!0===t){let t=(0,a.X0)();void 0!==t?await t.run(void 0,async()=>e()):await e()}else(n=l()).add(async()=>{let t=(0,a.X0)();void 0!==t?await t.run(void 0,async()=>e()):await e()})}async function c(){let e=(0,i.h)();await Promise.allSettled([void 0!==n?n.onIdle():Promise.resolve(),e.awaitPendingTraceBatches()])}},52330:(e,t,r)=>{"use strict";r.d(t,{XW:()=>rM,gd:()=>rR,Ou:()=>rj,NL:()=>rz,qe:()=>u.qe,z6:()=>rZ,on:()=>rP});var n,i={};r.r(i),r.d(i,{endsWith:()=>b._endsWith,gt:()=>b._gt,gte:()=>b._gte,includes:()=>b._includes,length:()=>b._length,lowercase:()=>b._lowercase,lt:()=>b._lt,lte:()=>b._lte,maxLength:()=>b._maxLength,maxSize:()=>b._maxSize,mime:()=>b._mime,minLength:()=>b._minLength,minSize:()=>b._minSize,multipleOf:()=>b._multipleOf,negative:()=>b._negative,nonnegative:()=>b._nonnegative,nonpositive:()=>b._nonpositive,normalize:()=>b._normalize,overwrite:()=>b._overwrite,positive:()=>b._positive,property:()=>b._property,regex:()=>b._regex,size:()=>b._size,slugify:()=>b._slugify,startsWith:()=>b._startsWith,toLowerCase:()=>b._toLowerCase,toUpperCase:()=>b._toUpperCase,trim:()=>b._trim,uppercase:()=>b._uppercase});var a={};r.r(a),r.d(a,{ZodISODate:()=>S,ZodISODateTime:()=>x,ZodISODuration:()=>O,ZodISOTime:()=>E,date:()=>I,datetime:()=>$,duration:()=>T,time:()=>A});var s={};r.r(s),r.d(s,{ZodAny:()=>tn,ZodArray:()=>th,ZodBase64:()=>eP,ZodBase64URL:()=>ez,ZodBigInt:()=>e2,ZodBigIntFormat:()=>e6,ZodBoolean:()=>e0,ZodCIDRv4:()=>eO,ZodCIDRv6:()=>eN,ZodCUID:()=>eh,ZodCUID2:()=>em,ZodCatch:()=>t8,ZodCodec:()=>ri,ZodCustom:()=>rg,ZodCustomStringFormat:()=>eU,ZodDate:()=>td,ZodDefault:()=>t0,ZodDiscriminatedUnion:()=>t$,ZodE164:()=>eM,ZodEmail:()=>Y,ZodEmoji:()=>eu,ZodEnum:()=>tL,ZodExactOptional:()=>tG,ZodFile:()=>tB,ZodFunction:()=>rf,ZodGUID:()=>Q,ZodIPv4:()=>ex,ZodIPv6:()=>eE,ZodIntersection:()=>tI,ZodJWT:()=>eZ,ZodKSUID:()=>ew,ZodLazy:()=>rc,ZodLiteral:()=>tU,ZodMAC:()=>eS,ZodMap:()=>tj,ZodNaN:()=>re,ZodNanoID:()=>ed,ZodNever:()=>to,ZodNonOptional:()=>t6,ZodNull:()=>tt,ZodNullable:()=>tY,ZodNumber:()=>eW,ZodNumberFormat:()=>eK,ZodObject:()=>tg,ZodOptional:()=>tq,ZodPipe:()=>rr,ZodPrefault:()=>t2,ZodPromise:()=>rp,ZodReadonly:()=>rs,ZodRecord:()=>tT,ZodSet:()=>tR,ZodString:()=>K,ZodStringFormat:()=>H,ZodSuccess:()=>t3,ZodSymbol:()=>e5,ZodTemplateLiteral:()=>rl,ZodTransform:()=>tJ,ZodTuple:()=>tA,ZodType:()=>W,ZodULID:()=>ey,ZodURL:()=>es,ZodUUID:()=>et,ZodUndefined:()=>e7,ZodUnion:()=>tb,ZodUnknown:()=>ta,ZodVoid:()=>tu,ZodXID:()=>e_,ZodXor:()=>tk,_ZodString:()=>q,_default:()=>t1,_function:()=>rm,any:()=>ti,array:()=>tf,base64:()=>ej,base64url:()=>eR,bigint:()=>e4,boolean:()=>e1,catch:()=>t7,check:()=>ry,cidrv4:()=>eT,cidrv6:()=>eC,codec:()=>ra,cuid:()=>ef,cuid2:()=>eg,custom:()=>rv,date:()=>tp,describe:()=>rw,discriminatedUnion:()=>tS,e164:()=>eL,email:()=>X,emoji:()=>ec,enum:()=>tZ,exactOptional:()=>tH,file:()=>tV,float32:()=>eH,float64:()=>eY,function:()=>rm,guid:()=>ee,hash:()=>eJ,hex:()=>eV,hostname:()=>eB,httpUrl:()=>el,instanceof:()=>rx,int:()=>eG,int32:()=>eX,int64:()=>e9,intersection:()=>tE,ipv4:()=>e$,ipv6:()=>eA,json:()=>rS,jwt:()=>eD,keyof:()=>tm,ksuid:()=>ek,lazy:()=>rd,literal:()=>tF,looseObject:()=>t_,looseRecord:()=>tP,mac:()=>eI,map:()=>tz,meta:()=>rk,nan:()=>rt,nanoid:()=>ep,nativeEnum:()=>tD,never:()=>tl,nonoptional:()=>t9,null:()=>tr,nullable:()=>tX,nullish:()=>tQ,number:()=>eq,object:()=>ty,optional:()=>tK,partialRecord:()=>tC,pipe:()=>rn,prefault:()=>t4,preprocess:()=>rI,promise:()=>rh,readonly:()=>ro,record:()=>tN,refine:()=>r_,set:()=>tM,strictObject:()=>tv,string:()=>G,stringFormat:()=>eF,stringbool:()=>r$,success:()=>t5,superRefine:()=>rb,symbol:()=>e8,templateLiteral:()=>ru,transform:()=>tW,tuple:()=>tO,uint32:()=>eQ,uint64:()=>e3,ulid:()=>ev,undefined:()=>te,union:()=>tw,unknown:()=>ts,url:()=>eo,uuid:()=>er,uuidv4:()=>en,uuidv6:()=>ei,uuidv7:()=>ea,void:()=>tc,xid:()=>eb,xor:()=>tx});var o=r(67893),l=r(27231),u=r(28809),c=r(55452),d=r(51628);r(73897);var p=r(92173),h=r(67146),f=r(34497),m=r(25720),g=r(61115),y=r(23229),v=r(4556),_=r(70014),b=r(47075),w=r(86985),k=r(42299);let x=b.$constructor("ZodISODateTime",(e,t)=>{b.$ZodISODateTime.init(e,t),H.init(e,t)});function $(e){return b._isoDateTime(x,e)}let S=b.$constructor("ZodISODate",(e,t)=>{b.$ZodISODate.init(e,t),H.init(e,t)});function I(e){return b._isoDate(S,e)}let E=b.$constructor("ZodISOTime",(e,t)=>{b.$ZodISOTime.init(e,t),H.init(e,t)});function A(e){return b._isoTime(E,e)}let O=b.$constructor("ZodISODuration",(e,t)=>{b.$ZodISODuration.init(e,t),H.init(e,t)});function T(e){return b._isoDuration(O,e)}var N=r(64845);let C=(e,t)=>{b.$ZodError.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>b.formatError(e,t)},flatten:{value:t=>b.flattenError(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,N.jsonStringifyReplacer,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,N.jsonStringifyReplacer,2)}},isEmpty:{get:()=>0===e.issues.length}})};b.$constructor("ZodError",C);let P=b.$constructor("ZodError",C,{Parent:Error}),j=b._parse(P),z=b._parseAsync(P),R=b._safeParse(P),M=b._safeParseAsync(P),L=b._encode(P),Z=b._decode(P),D=b._encodeAsync(P),U=b._decodeAsync(P),F=b._safeEncode(P),B=b._safeDecode(P),V=b._safeEncodeAsync(P),J=b._safeDecodeAsync(P),W=b.$constructor("ZodType",(e,t)=>(b.$ZodType.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:(0,k.uE)(e,"input"),output:(0,k.uE)(e,"output")}}),e.toJSONSchema=(0,k.OA)(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(b.util.mergeDefs(t,{checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),{parent:!0}),e.with=e.check,e.clone=(t,r)=>b.clone(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>j(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>R(e,t,r),e.parseAsync=async(t,r)=>z(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>M(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>L(e,t,r),e.decode=(t,r)=>Z(e,t,r),e.encodeAsync=async(t,r)=>D(e,t,r),e.decodeAsync=async(t,r)=>U(e,t,r),e.safeEncode=(t,r)=>F(e,t,r),e.safeDecode=(t,r)=>B(e,t,r),e.safeEncodeAsync=async(t,r)=>V(e,t,r),e.safeDecodeAsync=async(t,r)=>J(e,t,r),e.refine=(t,r)=>e.check(r_(t,r)),e.superRefine=t=>e.check(rb(t)),e.overwrite=t=>e.check(b._overwrite(t)),e.optional=()=>tK(e),e.exactOptional=()=>tH(e),e.nullable=()=>tX(e),e.nullish=()=>tK(tX(e)),e.nonoptional=t=>t9(e,t),e.array=()=>tf(e),e.or=t=>tw([e,t]),e.and=t=>tE(e,t),e.transform=t=>rn(e,tW(t)),e.default=t=>t1(e,t),e.prefault=t=>t4(e,t),e.catch=t=>t7(e,t),e.pipe=t=>rn(e,t),e.readonly=()=>ro(e),e.describe=t=>{let r=e.clone();return b.globalRegistry.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>b.globalRegistry.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return b.globalRegistry.get(e);let r=e.clone();return b.globalRegistry.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=t=>t(e),e)),q=b.$constructor("_ZodString",(e,t)=>{b.$ZodString.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.SW(e,t,r,n);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(b._regex(...t)),e.includes=(...t)=>e.check(b._includes(...t)),e.startsWith=(...t)=>e.check(b._startsWith(...t)),e.endsWith=(...t)=>e.check(b._endsWith(...t)),e.min=(...t)=>e.check(b._minLength(...t)),e.max=(...t)=>e.check(b._maxLength(...t)),e.length=(...t)=>e.check(b._length(...t)),e.nonempty=(...t)=>e.check(b._minLength(1,...t)),e.lowercase=t=>e.check(b._lowercase(t)),e.uppercase=t=>e.check(b._uppercase(t)),e.trim=()=>e.check(b._trim()),e.normalize=(...t)=>e.check(b._normalize(...t)),e.toLowerCase=()=>e.check(b._toLowerCase()),e.toUpperCase=()=>e.check(b._toUpperCase()),e.slugify=()=>e.check(b._slugify())}),K=b.$constructor("ZodString",(e,t)=>{b.$ZodString.init(e,t),q.init(e,t),e.email=t=>e.check(b._email(Y,t)),e.url=t=>e.check(b._url(es,t)),e.jwt=t=>e.check(b._jwt(eZ,t)),e.emoji=t=>e.check(b._emoji(eu,t)),e.guid=t=>e.check(b._guid(Q,t)),e.uuid=t=>e.check(b._uuid(et,t)),e.uuidv4=t=>e.check(b._uuidv4(et,t)),e.uuidv6=t=>e.check(b._uuidv6(et,t)),e.uuidv7=t=>e.check(b._uuidv7(et,t)),e.nanoid=t=>e.check(b._nanoid(ed,t)),e.guid=t=>e.check(b._guid(Q,t)),e.cuid=t=>e.check(b._cuid(eh,t)),e.cuid2=t=>e.check(b._cuid2(em,t)),e.ulid=t=>e.check(b._ulid(ey,t)),e.base64=t=>e.check(b._base64(eP,t)),e.base64url=t=>e.check(b._base64url(ez,t)),e.xid=t=>e.check(b._xid(e_,t)),e.ksuid=t=>e.check(b._ksuid(ew,t)),e.ipv4=t=>e.check(b._ipv4(ex,t)),e.ipv6=t=>e.check(b._ipv6(eE,t)),e.cidrv4=t=>e.check(b._cidrv4(eO,t)),e.cidrv6=t=>e.check(b._cidrv6(eN,t)),e.e164=t=>e.check(b._e164(eM,t)),e.datetime=t=>e.check($(t)),e.date=t=>e.check(I(t)),e.time=t=>e.check(A(t)),e.duration=t=>e.check(T(t))});function G(e){return b._string(K,e)}let H=b.$constructor("ZodStringFormat",(e,t)=>{b.$ZodStringFormat.init(e,t),q.init(e,t)}),Y=b.$constructor("ZodEmail",(e,t)=>{b.$ZodEmail.init(e,t),H.init(e,t)});function X(e){return b._email(Y,e)}let Q=b.$constructor("ZodGUID",(e,t)=>{b.$ZodGUID.init(e,t),H.init(e,t)});function ee(e){return b._guid(Q,e)}let et=b.$constructor("ZodUUID",(e,t)=>{b.$ZodUUID.init(e,t),H.init(e,t)});function er(e){return b._uuid(et,e)}function en(e){return b._uuidv4(et,e)}function ei(e){return b._uuidv6(et,e)}function ea(e){return b._uuidv7(et,e)}let es=b.$constructor("ZodURL",(e,t)=>{b.$ZodURL.init(e,t),H.init(e,t)});function eo(e){return b._url(es,e)}function el(e){return b._url(es,{protocol:/^https?$/,hostname:b.regexes.domain,...b.util.normalizeParams(e)})}let eu=b.$constructor("ZodEmoji",(e,t)=>{b.$ZodEmoji.init(e,t),H.init(e,t)});function ec(e){return b._emoji(eu,e)}let ed=b.$constructor("ZodNanoID",(e,t)=>{b.$ZodNanoID.init(e,t),H.init(e,t)});function ep(e){return b._nanoid(ed,e)}let eh=b.$constructor("ZodCUID",(e,t)=>{b.$ZodCUID.init(e,t),H.init(e,t)});function ef(e){return b._cuid(eh,e)}let em=b.$constructor("ZodCUID2",(e,t)=>{b.$ZodCUID2.init(e,t),H.init(e,t)});function eg(e){return b._cuid2(em,e)}let ey=b.$constructor("ZodULID",(e,t)=>{b.$ZodULID.init(e,t),H.init(e,t)});function ev(e){return b._ulid(ey,e)}let e_=b.$constructor("ZodXID",(e,t)=>{b.$ZodXID.init(e,t),H.init(e,t)});function eb(e){return b._xid(e_,e)}let ew=b.$constructor("ZodKSUID",(e,t)=>{b.$ZodKSUID.init(e,t),H.init(e,t)});function ek(e){return b._ksuid(ew,e)}let ex=b.$constructor("ZodIPv4",(e,t)=>{b.$ZodIPv4.init(e,t),H.init(e,t)});function e$(e){return b._ipv4(ex,e)}let eS=b.$constructor("ZodMAC",(e,t)=>{b.$ZodMAC.init(e,t),H.init(e,t)});function eI(e){return b._mac(eS,e)}let eE=b.$constructor("ZodIPv6",(e,t)=>{b.$ZodIPv6.init(e,t),H.init(e,t)});function eA(e){return b._ipv6(eE,e)}let eO=b.$constructor("ZodCIDRv4",(e,t)=>{b.$ZodCIDRv4.init(e,t),H.init(e,t)});function eT(e){return b._cidrv4(eO,e)}let eN=b.$constructor("ZodCIDRv6",(e,t)=>{b.$ZodCIDRv6.init(e,t),H.init(e,t)});function eC(e){return b._cidrv6(eN,e)}let eP=b.$constructor("ZodBase64",(e,t)=>{b.$ZodBase64.init(e,t),H.init(e,t)});function ej(e){return b._base64(eP,e)}let ez=b.$constructor("ZodBase64URL",(e,t)=>{b.$ZodBase64URL.init(e,t),H.init(e,t)});function eR(e){return b._base64url(ez,e)}let eM=b.$constructor("ZodE164",(e,t)=>{b.$ZodE164.init(e,t),H.init(e,t)});function eL(e){return b._e164(eM,e)}let eZ=b.$constructor("ZodJWT",(e,t)=>{b.$ZodJWT.init(e,t),H.init(e,t)});function eD(e){return b._jwt(eZ,e)}let eU=b.$constructor("ZodCustomStringFormat",(e,t)=>{b.$ZodCustomStringFormat.init(e,t),H.init(e,t)});function eF(e,t,r={}){return b._stringFormat(eU,e,t,r)}function eB(e){return b._stringFormat(eU,"hostname",b.regexes.hostname,e)}function eV(e){return b._stringFormat(eU,"hex",b.regexes.hex,e)}function eJ(e,t){let r=t?.enc??"hex",n=`${e}_${r}`,i=b.regexes[n];if(!i)throw Error(`Unrecognized hash format: ${n}`);return b._stringFormat(eU,n,i,t)}let eW=b.$constructor("ZodNumber",(e,t)=>{b.$ZodNumber.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.Wg(e,t,r,n),e.gt=(t,r)=>e.check(b._gt(t,r)),e.gte=(t,r)=>e.check(b._gte(t,r)),e.min=(t,r)=>e.check(b._gte(t,r)),e.lt=(t,r)=>e.check(b._lt(t,r)),e.lte=(t,r)=>e.check(b._lte(t,r)),e.max=(t,r)=>e.check(b._lte(t,r)),e.int=t=>e.check(eG(t)),e.safe=t=>e.check(eG(t)),e.positive=t=>e.check(b._gt(0,t)),e.nonnegative=t=>e.check(b._gte(0,t)),e.negative=t=>e.check(b._lt(0,t)),e.nonpositive=t=>e.check(b._lte(0,t)),e.multipleOf=(t,r)=>e.check(b._multipleOf(t,r)),e.step=(t,r)=>e.check(b._multipleOf(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function eq(e){return b._number(eW,e)}let eK=b.$constructor("ZodNumberFormat",(e,t)=>{b.$ZodNumberFormat.init(e,t),eW.init(e,t)});function eG(e){return b._int(eK,e)}function eH(e){return b._float32(eK,e)}function eY(e){return b._float64(eK,e)}function eX(e){return b._int32(eK,e)}function eQ(e){return b._uint32(eK,e)}let e0=b.$constructor("ZodBoolean",(e,t)=>{b.$ZodBoolean.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.dO(e,t,r,n)});function e1(e){return b._boolean(e0,e)}let e2=b.$constructor("ZodBigInt",(e,t)=>{b.$ZodBigInt.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.Y8(e,t,r,n),e.gte=(t,r)=>e.check(b._gte(t,r)),e.min=(t,r)=>e.check(b._gte(t,r)),e.gt=(t,r)=>e.check(b._gt(t,r)),e.gte=(t,r)=>e.check(b._gte(t,r)),e.min=(t,r)=>e.check(b._gte(t,r)),e.lt=(t,r)=>e.check(b._lt(t,r)),e.lte=(t,r)=>e.check(b._lte(t,r)),e.max=(t,r)=>e.check(b._lte(t,r)),e.positive=t=>e.check(b._gt(BigInt(0),t)),e.negative=t=>e.check(b._lt(BigInt(0),t)),e.nonpositive=t=>e.check(b._lte(BigInt(0),t)),e.nonnegative=t=>e.check(b._gte(BigInt(0),t)),e.multipleOf=(t,r)=>e.check(b._multipleOf(t,r));let r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null});function e4(e){return b._bigint(e2,e)}let e6=b.$constructor("ZodBigIntFormat",(e,t)=>{b.$ZodBigIntFormat.init(e,t),e2.init(e,t)});function e9(e){return b._int64(e6,e)}function e3(e){return b._uint64(e6,e)}let e5=b.$constructor("ZodSymbol",(e,t)=>{b.$ZodSymbol.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.fg(e,t,r,n)});function e8(e){return b._symbol(e5,e)}let e7=b.$constructor("ZodUndefined",(e,t)=>{b.$ZodUndefined.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.BU(e,t,r,n)});function te(e){return b._undefined(e7,e)}let tt=b.$constructor("ZodNull",(e,t)=>{b.$ZodNull.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.In(e,t,r,n)});function tr(e){return b._null(tt,e)}let tn=b.$constructor("ZodAny",(e,t)=>{b.$ZodAny.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.NX(e,t,r,n)});function ti(){return b._any(tn)}let ta=b.$constructor("ZodUnknown",(e,t)=>{b.$ZodUnknown.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.NV(e,t,r,n)});function ts(){return b._unknown(ta)}let to=b.$constructor("ZodNever",(e,t)=>{b.$ZodNever.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.RH(e,t,r,n)});function tl(e){return b._never(to,e)}let tu=b.$constructor("ZodVoid",(e,t)=>{b.$ZodVoid.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.vn(e,t,r,n)});function tc(e){return b._void(tu,e)}let td=b.$constructor("ZodDate",(e,t)=>{b.$ZodDate.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.Fl(e,t,r,n),e.min=(t,r)=>e.check(b._gte(t,r)),e.max=(t,r)=>e.check(b._lte(t,r));let r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function tp(e){return b._date(td,e)}let th=b.$constructor("ZodArray",(e,t)=>{b.$ZodArray.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.cY(e,t,r,n),e.element=t.element,e.min=(t,r)=>e.check(b._minLength(t,r)),e.nonempty=t=>e.check(b._minLength(1,t)),e.max=(t,r)=>e.check(b._maxLength(t,r)),e.length=(t,r)=>e.check(b._length(t,r)),e.unwrap=()=>e.element});function tf(e,t){return b._array(th,e,t)}function tm(e){return tZ(Object.keys(e._zod.def.shape))}let tg=b.$constructor("ZodObject",(e,t)=>{b.$ZodObjectJIT.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.Ec(e,t,r,n),b.util.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>tZ(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ts()}),e.loose=()=>e.clone({...e._zod.def,catchall:ts()}),e.strict=()=>e.clone({...e._zod.def,catchall:tl()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>b.util.extend(e,t),e.safeExtend=t=>b.util.safeExtend(e,t),e.merge=t=>b.util.merge(e,t),e.pick=t=>b.util.pick(e,t),e.omit=t=>b.util.omit(e,t),e.partial=(...t)=>b.util.partial(tq,e,t[0]),e.required=(...t)=>b.util.required(t6,e,t[0])});function ty(e,t){return new tg({type:"object",shape:e??{},...b.util.normalizeParams(t)})}function tv(e,t){return new tg({type:"object",shape:e,catchall:tl(),...b.util.normalizeParams(t)})}function t_(e,t){return new tg({type:"object",shape:e,catchall:ts(),...b.util.normalizeParams(t)})}let tb=b.$constructor("ZodUnion",(e,t)=>{b.$ZodUnion.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.iC(e,t,r,n),e.options=t.options});function tw(e,t){return new tb({type:"union",options:e,...b.util.normalizeParams(t)})}let tk=b.$constructor("ZodXor",(e,t)=>{tb.init(e,t),b.$ZodXor.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.iC(e,t,r,n),e.options=t.options});function tx(e,t){return new tk({type:"union",options:e,inclusive:!1,...b.util.normalizeParams(t)})}let t$=b.$constructor("ZodDiscriminatedUnion",(e,t)=>{tb.init(e,t),b.$ZodDiscriminatedUnion.init(e,t)});function tS(e,t,r){return new t$({type:"union",options:t,discriminator:e,...b.util.normalizeParams(r)})}let tI=b.$constructor("ZodIntersection",(e,t)=>{b.$ZodIntersection.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.i_(e,t,r,n)});function tE(e,t){return new tI({type:"intersection",left:e,right:t})}let tA=b.$constructor("ZodTuple",(e,t)=>{b.$ZodTuple.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.CN(e,t,r,n),e.rest=t=>e.clone({...e._zod.def,rest:t})});function tO(e,t,r){let n=t instanceof b.$ZodType,i=n?r:t;return new tA({type:"tuple",items:e,rest:n?t:null,...b.util.normalizeParams(i)})}let tT=b.$constructor("ZodRecord",(e,t)=>{b.$ZodRecord.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.GC(e,t,r,n),e.keyType=t.keyType,e.valueType=t.valueType});function tN(e,t,r){return new tT({type:"record",keyType:e,valueType:t,...b.util.normalizeParams(r)})}function tC(e,t,r){let n=b.clone(e);return n._zod.values=void 0,new tT({type:"record",keyType:n,valueType:t,...b.util.normalizeParams(r)})}function tP(e,t,r){return new tT({type:"record",keyType:e,valueType:t,mode:"loose",...b.util.normalizeParams(r)})}let tj=b.$constructor("ZodMap",(e,t)=>{b.$ZodMap.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.jq(e,t,r,n),e.keyType=t.keyType,e.valueType=t.valueType,e.min=(...t)=>e.check(b._minSize(...t)),e.nonempty=t=>e.check(b._minSize(1,t)),e.max=(...t)=>e.check(b._maxSize(...t)),e.size=(...t)=>e.check(b._size(...t))});function tz(e,t,r){return new tj({type:"map",keyType:e,valueType:t,...b.util.normalizeParams(r)})}let tR=b.$constructor("ZodSet",(e,t)=>{b.$ZodSet.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.zH(e,t,r,n),e.min=(...t)=>e.check(b._minSize(...t)),e.nonempty=t=>e.check(b._minSize(1,t)),e.max=(...t)=>e.check(b._maxSize(...t)),e.size=(...t)=>e.check(b._size(...t))});function tM(e,t){return new tR({type:"set",valueType:e,...b.util.normalizeParams(t)})}let tL=b.$constructor("ZodEnum",(e,t)=>{b.$ZodEnum.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.C0(e,t,r,n),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,n)=>{let i={};for(let n of e)if(r.has(n))i[n]=t.entries[n];else throw Error(`Key ${n} not found in enum`);return new tL({...t,checks:[],...b.util.normalizeParams(n),entries:i})},e.exclude=(e,n)=>{let i={...t.entries};for(let t of e)if(r.has(t))delete i[t];else throw Error(`Key ${t} not found in enum`);return new tL({...t,checks:[],...b.util.normalizeParams(n),entries:i})}});function tZ(e,t){return new tL({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...b.util.normalizeParams(t)})}function tD(e,t){return new tL({type:"enum",entries:e,...b.util.normalizeParams(t)})}let tU=b.$constructor("ZodLiteral",(e,t)=>{b.$ZodLiteral.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.Yv(e,t,r,n),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function tF(e,t){return new tU({type:"literal",values:Array.isArray(e)?e:[e],...b.util.normalizeParams(t)})}let tB=b.$constructor("ZodFile",(e,t)=>{b.$ZodFile.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.H1(e,t,r,n),e.min=(t,r)=>e.check(b._minSize(t,r)),e.max=(t,r)=>e.check(b._maxSize(t,r)),e.mime=(t,r)=>e.check(b._mime(Array.isArray(t)?t:[t],r))});function tV(e){return b._file(tB,e)}let tJ=b.$constructor("ZodTransform",(e,t)=>{b.$ZodTransform.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.xi(e,t,r,n),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new b.$ZodEncodeError(e.constructor.name);r.addIssue=n=>{if("string"==typeof n)r.issues.push(b.util.issue(n,r.value,t));else{let t=n;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=r.value),t.inst??(t.inst=e),r.issues.push(b.util.issue(t))}};let i=t.transform(r.value,r);return i instanceof Promise?i.then(e=>(r.value=e,r)):(r.value=i,r)}});function tW(e){return new tJ({type:"transform",transform:e})}let tq=b.$constructor("ZodOptional",(e,t)=>{b.$ZodOptional.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.$k(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function tK(e){return new tq({type:"optional",innerType:e})}let tG=b.$constructor("ZodExactOptional",(e,t)=>{b.$ZodExactOptional.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.$k(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function tH(e){return new tG({type:"optional",innerType:e})}let tY=b.$constructor("ZodNullable",(e,t)=>{b.$ZodNullable.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.yq(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function tX(e){return new tY({type:"nullable",innerType:e})}function tQ(e){return tK(tX(e))}let t0=b.$constructor("ZodDefault",(e,t)=>{b.$ZodDefault.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.mh(e,t,r,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function t1(e,t){return new t0({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():b.util.shallowClone(t)}})}let t2=b.$constructor("ZodPrefault",(e,t)=>{b.$ZodPrefault.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.A(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function t4(e,t){return new t2({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():b.util.shallowClone(t)}})}let t6=b.$constructor("ZodNonOptional",(e,t)=>{b.$ZodNonOptional.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.cR(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function t9(e,t){return new t6({type:"nonoptional",innerType:e,...b.util.normalizeParams(t)})}let t3=b.$constructor("ZodSuccess",(e,t)=>{b.$ZodSuccess.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.aw(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function t5(e){return new t3({type:"success",innerType:e})}let t8=b.$constructor("ZodCatch",(e,t)=>{b.$ZodCatch.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.Q9(e,t,r,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function t7(e,t){return new t8({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}let re=b.$constructor("ZodNaN",(e,t)=>{b.$ZodNaN.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.Kj(e,t,r,n)});function rt(e){return b._nan(re,e)}let rr=b.$constructor("ZodPipe",(e,t)=>{b.$ZodPipe.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.fs(e,t,r,n),e.in=t.in,e.out=t.out});function rn(e,t){return new rr({type:"pipe",in:e,out:t})}let ri=b.$constructor("ZodCodec",(e,t)=>{rr.init(e,t),b.$ZodCodec.init(e,t)});function ra(e,t,r){return new ri({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}let rs=b.$constructor("ZodReadonly",(e,t)=>{b.$ZodReadonly.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.$X(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function ro(e){return new rs({type:"readonly",innerType:e})}let rl=b.$constructor("ZodTemplateLiteral",(e,t)=>{b.$ZodTemplateLiteral.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.Cv(e,t,r,n)});function ru(e,t){return new rl({type:"template_literal",parts:e,...b.util.normalizeParams(t)})}let rc=b.$constructor("ZodLazy",(e,t)=>{b.$ZodLazy.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.Tr(e,t,r,n),e.unwrap=()=>e._zod.def.getter()});function rd(e){return new rc({type:"lazy",getter:e})}let rp=b.$constructor("ZodPromise",(e,t)=>{b.$ZodPromise.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.CX(e,t,r,n),e.unwrap=()=>e._zod.def.innerType});function rh(e){return new rp({type:"promise",innerType:e})}let rf=b.$constructor("ZodFunction",(e,t)=>{b.$ZodFunction.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.bq(e,t,r,n)});function rm(e){return new rf({type:"function",input:Array.isArray(e?.input)?tO(e?.input):e?.input??tf(ts()),output:e?.output??ts()})}let rg=b.$constructor("ZodCustom",(e,t)=>{b.$ZodCustom.init(e,t),W.init(e,t),e._zod.processJSONSchema=(t,r,n)=>w.A6(e,t,r,n)});function ry(e){let t=new b.$ZodCheck({check:"custom"});return t._zod.check=e,t}function rv(e,t){return b._custom(rg,e??(()=>!0),t)}function r_(e,t={}){return b._refine(rg,e,t)}function rb(e){return b._superRefine(e)}let rw=b.describe,rk=b.meta;function rx(e,t={}){let r=new rg({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...b.util.normalizeParams(t)});return r._zod.bag.Class=e,r._zod.check=t=>{t.value instanceof e||t.issues.push({code:"invalid_type",expected:e.name,input:t.value,inst:r,path:[...r._zod.def.path??[]]})},r}let r$=(...e)=>b._stringbool({Codec:ri,Boolean:e0,String:K},...e);function rS(e){let t=rd(()=>tw([G(e),eq(),e1(),tr(),tf(t),tN(G(),t)]));return t}function rI(e,t){return rn(tW(e),t)}n||(n={});var rE=r(56032);r(78982);let rA={...s,...i,iso:a},rO=new Set(["$schema","$ref","$defs","definitions","$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor","type","enum","const","anyOf","oneOf","allOf","not","properties","required","additionalProperties","patternProperties","propertyNames","minProperties","maxProperties","items","prefixItems","additionalItems","minItems","maxItems","uniqueItems","contains","minContains","maxContains","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","description","default","contentEncoding","contentMediaType","contentSchema","unevaluatedItems","unevaluatedProperties","if","then","else","dependentSchemas","dependentRequired","nullable","readOnly"]);function rT(e,t){if(!e.startsWith("#"))throw Error("External $ref is not supported, only local refs (#/...) are allowed");let r=e.slice(1).split("/").filter(Boolean);if(0===r.length)return t.rootSchema;let n="draft-2020-12"===t.version?"$defs":"definitions";if(r[0]===n){let n=r[1];if(!n||!t.defs[n])throw Error(`Reference not found: ${e}`);return t.defs[n]}throw Error(`Reference not found: ${e}`)}function rN(e,t){let r;if(void 0!==e.not){if("object"==typeof e.not&&0===Object.keys(e.not).length)return rA.never();throw Error("not is not supported in Zod (except { not: {} } for never)")}if(void 0!==e.unevaluatedItems)throw Error("unevaluatedItems is not supported");if(void 0!==e.unevaluatedProperties)throw Error("unevaluatedProperties is not supported");if(void 0!==e.if||void 0!==e.then||void 0!==e.else)throw Error("Conditional schemas (if/then/else) are not supported");if(void 0!==e.dependentSchemas||void 0!==e.dependentRequired)throw Error("dependentSchemas and dependentRequired are not supported");if(e.$ref){let r=e.$ref;if(t.refs.has(r))return t.refs.get(r);if(t.processing.has(r))return rA.lazy(()=>{if(!t.refs.has(r))throw Error(`Circular reference not resolved: ${r}`);return t.refs.get(r)});t.processing.add(r);let n=rC(rT(r,t),t);return t.refs.set(r,n),t.processing.delete(r),n}if(void 0!==e.enum){let r=e.enum;if("openapi-3.0"===t.version&&!0===e.nullable&&1===r.length&&null===r[0])return rA.null();if(0===r.length)return rA.never();if(1===r.length)return rA.literal(r[0]);if(r.every(e=>"string"==typeof e))return rA.enum(r);let n=r.map(e=>rA.literal(e));return n.length<2?n[0]:rA.union([n[0],n[1],...n.slice(2)])}if(void 0!==e.const)return rA.literal(e.const);let n=e.type;if(Array.isArray(n)){let r=n.map(r=>rN({...e,type:r},t));return 0===r.length?rA.never():1===r.length?r[0]:rA.union(r)}if(!n)return rA.any();switch(n){case"string":{let t=rA.string();if(e.format){let r=e.format;"email"===r?t=t.check(rA.email()):"uri"===r||"uri-reference"===r?t=t.check(rA.url()):"uuid"===r||"guid"===r?t=t.check(rA.uuid()):"date-time"===r?t=t.check(rA.iso.datetime()):"date"===r?t=t.check(rA.iso.date()):"time"===r?t=t.check(rA.iso.time()):"duration"===r?t=t.check(rA.iso.duration()):"ipv4"===r?t=t.check(rA.ipv4()):"ipv6"===r?t=t.check(rA.ipv6()):"mac"===r?t=t.check(rA.mac()):"cidr"===r?t=t.check(rA.cidrv4()):"cidr-v6"===r?t=t.check(rA.cidrv6()):"base64"===r?t=t.check(rA.base64()):"base64url"===r?t=t.check(rA.base64url()):"e164"===r?t=t.check(rA.e164()):"jwt"===r?t=t.check(rA.jwt()):"emoji"===r?t=t.check(rA.emoji()):"nanoid"===r?t=t.check(rA.nanoid()):"cuid"===r?t=t.check(rA.cuid()):"cuid2"===r?t=t.check(rA.cuid2()):"ulid"===r?t=t.check(rA.ulid()):"xid"===r?t=t.check(rA.xid()):"ksuid"===r&&(t=t.check(rA.ksuid()))}"number"==typeof e.minLength&&(t=t.min(e.minLength)),"number"==typeof e.maxLength&&(t=t.max(e.maxLength)),e.pattern&&(t=t.regex(new RegExp(e.pattern))),r=t;break}case"number":case"integer":{let t="integer"===n?rA.number().int():rA.number();"number"==typeof e.minimum&&(t=t.min(e.minimum)),"number"==typeof e.maximum&&(t=t.max(e.maximum)),"number"==typeof e.exclusiveMinimum?t=t.gt(e.exclusiveMinimum):!0===e.exclusiveMinimum&&"number"==typeof e.minimum&&(t=t.gt(e.minimum)),"number"==typeof e.exclusiveMaximum?t=t.lt(e.exclusiveMaximum):!0===e.exclusiveMaximum&&"number"==typeof e.maximum&&(t=t.lt(e.maximum)),"number"==typeof e.multipleOf&&(t=t.multipleOf(e.multipleOf)),r=t;break}case"boolean":r=rA.boolean();break;case"null":r=rA.null();break;case"object":{let n={},i=e.properties||{},a=new Set(e.required||[]);for(let[e,r]of Object.entries(i)){let i=rC(r,t);n[e]=a.has(e)?i:i.optional()}if(e.propertyNames){let i=rC(e.propertyNames,t),a=e.additionalProperties&&"object"==typeof e.additionalProperties?rC(e.additionalProperties,t):rA.any();if(0===Object.keys(n).length){r=rA.record(i,a);break}let s=rA.object(n).passthrough(),o=rA.looseRecord(i,a);r=rA.intersection(s,o);break}if(e.patternProperties){let i=e.patternProperties,a=Object.keys(i),s=[];for(let e of a){let r=rC(i[e],t),n=rA.string().regex(new RegExp(e));s.push(rA.looseRecord(n,r))}let o=[];if(Object.keys(n).length>0&&o.push(rA.object(n).passthrough()),o.push(...s),0===o.length)r=rA.object({}).passthrough();else if(1===o.length)r=o[0];else{let e=rA.intersection(o[0],o[1]);for(let t=2;t<o.length;t++)e=rA.intersection(e,o[t]);r=e}break}let s=rA.object(n);r=!1===e.additionalProperties?s.strict():"object"==typeof e.additionalProperties?s.catchall(rC(e.additionalProperties,t)):s.passthrough();break}case"array":{let n=e.prefixItems,i=e.items;if(n&&Array.isArray(n)){let a=n.map(e=>rC(e,t)),s=i&&"object"==typeof i&&!Array.isArray(i)?rC(i,t):void 0;r=s?rA.tuple(a).rest(s):rA.tuple(a),"number"==typeof e.minItems&&(r=r.check(rA.minLength(e.minItems))),"number"==typeof e.maxItems&&(r=r.check(rA.maxLength(e.maxItems)))}else if(Array.isArray(i)){let n=i.map(e=>rC(e,t)),a=e.additionalItems&&"object"==typeof e.additionalItems?rC(e.additionalItems,t):void 0;r=a?rA.tuple(n).rest(a):rA.tuple(n),"number"==typeof e.minItems&&(r=r.check(rA.minLength(e.minItems))),"number"==typeof e.maxItems&&(r=r.check(rA.maxLength(e.maxItems)))}else if(void 0!==i){let n=rC(i,t),a=rA.array(n);"number"==typeof e.minItems&&(a=a.min(e.minItems)),"number"==typeof e.maxItems&&(a=a.max(e.maxItems)),r=a}else r=rA.array(rA.any());break}default:throw Error(`Unsupported type: ${n}`)}return e.description&&(r=r.describe(e.description)),void 0!==e.default&&(r=r.default(e.default)),r}function rC(e,t){if("boolean"==typeof e)return e?rA.any():rA.never();let r=rN(e,t),n=e.type||void 0!==e.enum||void 0!==e.const;if(e.anyOf&&Array.isArray(e.anyOf)){let i=e.anyOf.map(e=>rC(e,t)),a=rA.union(i);r=n?rA.intersection(r,a):a}if(e.oneOf&&Array.isArray(e.oneOf)){let i=e.oneOf.map(e=>rC(e,t)),a=rA.xor(i);r=n?rA.intersection(r,a):a}if(e.allOf&&Array.isArray(e.allOf))if(0===e.allOf.length)r=n?r:rA.any();else{let i=n?r:rC(e.allOf[0],t),a=+!n;for(let r=a;r<e.allOf.length;r++)i=rA.intersection(i,rC(e.allOf[r],t));r=i}!0===e.nullable&&"openapi-3.0"===t.version&&(r=rA.nullable(r)),!0===e.readOnly&&(r=rA.readonly(r));let i={};for(let t of["$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor"])t in e&&(i[t]=e[t]);for(let t of["contentEncoding","contentMediaType","contentSchema"])t in e&&(i[t]=e[t]);for(let t of Object.keys(e))rO.has(t)||(i[t]=e[t]);return Object.keys(i).length>0&&t.registry.add(r,i),r}r(68133),(0,b.config)((0,rE.A)());var rP={};(0,o.V)(rP,{BaseToolkit:()=>rL,DynamicStructuredTool:()=>rM,DynamicTool:()=>rR,StructuredTool:()=>rj,Tool:()=>rz,ToolInputParsingException:()=>u.qe,isLangChainTool:()=>y.qG,isRunnableToolLike:()=>y.Lx,isStructuredTool:()=>y.Yn,isStructuredToolParams:()=>y.Am,tool:()=>rZ});var rj=class extends g.ZE{extras;returnDirect=!1;verboseParsingErrors=!1;get lc_namespace(){return["langchain","tools"]}responseFormat="content";defaultConfig;constructor(e){super(e??{}),this.verboseParsingErrors=e?.verboseParsingErrors??this.verboseParsingErrors,this.responseFormat=e?.responseFormat??this.responseFormat,this.defaultConfig=e?.defaultConfig??this.defaultConfig,this.metadata=e?.metadata??this.metadata,this.extras=e?.extras??this.extras}async invoke(e,t){let r,n=(0,p.ZI)((0,p.SV)(this.defaultConfig,t));return(0,u.Ky)(e)?(r=e.args,n={...n,toolCall:e}):r=e,this.call(r,n)}async call(e,t,r){let n,i,a,s,o,l=(0,u.Ky)(e)?e.args:e;if((0,f.c9)(this.schema))try{n=await (0,f.hZ)(this.schema,l)}catch(r){let t="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(t=`${t}
Details: ${r.message}`),(0,f.BZ)(r)&&(t=`${t}

${b.prettifyError(r)}`),new u.qe(t,JSON.stringify(e))}else{let t=(0,_.tf)(l,this.schema);if(!t.valid){let r="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(r=`${r}
Details: ${t.errors.map(e=>`${e.keywordLocation}: ${e.error}`).join("\n")}`),new u.qe(r,JSON.stringify(e))}n=l}let d=(0,c.H_)(t),p=c.Td.configure(d.callbacks,this.callbacks,d.tags||r,this.tags,d.metadata,this.metadata,{verbose:this.verbose}),h=await p?.handleToolStart(this.toJSON(),"string"==typeof e?e:JSON.stringify(e),d.runId,void 0,void 0,void 0,d.runName);delete d.runId;try{i=await this._call(n,h,d)}catch(e){throw await h?.handleToolError(e),e}if("content_and_artifact"===this.responseFormat)if(Array.isArray(i)&&2===i.length)[a,s]=i;else throw Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(i)}`);else a=i;(0,u.Ky)(e)&&(o=e.id),!o&&(0,u.hR)(d)&&(o=d.toolCall.id);let m=rD({content:a,artifact:s,toolCallId:o,name:this.name,metadata:this.metadata});return await h?.handleToolEnd(m),m}},rz=class extends rj{schema=v.z.object({input:v.z.string().optional()}).transform(e=>e.input);constructor(e){super(e)}call(e,t){let r="string"==typeof e||null==e?{input:e}:e;return super.call(r,t)}},rR=class extends rz{static lc_name(){return"DynamicTool"}name;description;func;constructor(e){super(e),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect}async call(e,t){let r=(0,c.H_)(t);return void 0===r.runName&&(r.runName=this.name),super.call(e,r)}async _call(e,t,r){return this.func(e,t,r)}},rM=class extends rj{static lc_name(){return"DynamicStructuredTool"}name;description;func;schema;constructor(e){super(e),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect,this.schema=e.schema}async call(e,t,r){let n=(0,c.H_)(t);return void 0===n.runName&&(n.runName=this.name),super.call(e,n,r)}_call(e,t,r){return this.func(e,t,r)}},rL=class{getTools(){return this.tools}};function rZ(e,t){let r=(0,f.yQ)(t.schema),n=(0,m.y0)(t.schema);if(!t.schema||r||n)return new rR({...t,description:t.description??t.schema?.description??`${t.name} tool`,func:async(t,r,n)=>new Promise((i,a)=>{let s=(0,p.tn)(n,{callbacks:r?.getChild()});d.N.runWithConfig((0,p.DY)(s),async()=>{try{i(e(t,s))}catch(e){a(e)}})})});let i=t.schema,a=t.description??t.schema.description??`${t.name} tool`;return new rM({...t,description:a,schema:i,func:async(t,r,n)=>new Promise((i,a)=>{let s,o=()=>{n?.signal&&s&&n.signal.removeEventListener("abort",s)};n?.signal&&(s=()=>{o(),a((0,h.F)(n.signal))},n.signal.addEventListener("abort",s));let l=(0,p.tn)(n,{callbacks:r?.getChild()});d.N.runWithConfig((0,p.DY)(l),async()=>{try{let r=await e(t,l);if(n?.signal?.aborted)return void o();o(),i(r)}catch(e){o(),a(e)}})})})}function rD(e){let{content:t,artifact:r,toolCallId:n,metadata:i}=e;return!n||(0,l.fK)(t)?t:new l.uf("string"==typeof t||Array.isArray(t)&&t.every(e=>"object"==typeof e)?{status:"success",content:t,artifact:r,tool_call_id:n,name:e.name,metadata:i}:{status:"success",content:rU(t),artifact:r,tool_call_id:n,name:e.name,metadata:i})}function rU(e){try{return JSON.stringify(e,null,2)??""}catch(t){return`${e}`}}},52412:(e,t,r)=>{"use strict";var n=r(49509);e.exports="object"==typeof n&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}},52435:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(82661),i=r(46520),a=r(64951),s=()=>{},o=new i.TimeoutError;class l extends n{constructor(e){var t,r,n,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=s,this._resolveIdle=s,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:a.default},e)).intervalCap&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!=(r=null==(t=e.intervalCap)?void 0:t.toString())?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!=(i=null==(n=e.interval)?void 0:n.toString())?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=s,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=s,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(void 0===this._intervalId){let t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((r,n)=>{let a=async()=>{this._pendingCount++,this._intervalCount++;try{let a=void 0===this._timeout&&void 0===t.timeout?e():i.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&n(o)});r(await a)}catch(e){n(e)}this._next()};this._queue.enqueue(a,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused&&(this._isPaused=!1,this._processQueue()),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}t.default=l},52712:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var n=r(12115),i=globalThis?.document?n.useLayoutEffect:()=>{}},54416:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(19946);let i=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],a=(0,n.A)("x",i)},54808:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i,n:()=>l});var n=r(79271);function i(e,t){return(0,n.ns)(e??{},t??{})}function a(e,t){let r={};return(e?.audio!==void 0||t?.audio!==void 0)&&(r.audio=(e?.audio??0)+(t?.audio??0)),(e?.image!==void 0||t?.image!==void 0)&&(r.image=(e?.image??0)+(t?.image??0)),(e?.video!==void 0||t?.video!==void 0)&&(r.video=(e?.video??0)+(t?.video??0)),(e?.document!==void 0||t?.document!==void 0)&&(r.document=(e?.document??0)+(t?.document??0)),(e?.text!==void 0||t?.text!==void 0)&&(r.text=(e?.text??0)+(t?.text??0)),r}function s(e,t){let r={...a(e,t)};return(e?.cache_read!==void 0||t?.cache_read!==void 0)&&(r.cache_read=(e?.cache_read??0)+(t?.cache_read??0)),(e?.cache_creation!==void 0||t?.cache_creation!==void 0)&&(r.cache_creation=(e?.cache_creation??0)+(t?.cache_creation??0)),r}function o(e,t){let r={...a(e,t)};return(e?.reasoning!==void 0||t?.reasoning!==void 0)&&(r.reasoning=(e?.reasoning??0)+(t?.reasoning??0)),r}function l(e,t){return{input_tokens:(e?.input_tokens??0)+(t?.input_tokens??0),output_tokens:(e?.output_tokens??0)+(t?.output_tokens??0),total_tokens:(e?.total_tokens??0)+(t?.total_tokens??0),input_token_details:s(e?.input_token_details,t?.input_token_details),output_token_details:o(e?.output_token_details,t?.output_token_details)}}},55165:(e,t,r)=>{"use strict";r.d(t,{m:()=>i});let n={};function i(e){n[e]||(console.warn(e),n[e]=!0)}},55452:(e,t,r)=>{"use strict";r.d(t,{Td:()=>S,tW:()=>I,u8:()=>y,H_:()=>v});var n=r(67893),i=r(90338),a=r(4397),s=r(72716),o=r(25050),l=r(47096),u=r(16208),c=r(51797);r(46935);let d=e=>void 0!==e?e:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(e=>"true"===(0,a.Az)(e));var p=r(44768);function h(e){let t=(0,p.X0)();if(void 0===t)return;let r=t.getStore();return r?.[p.hr]?.[e]}r(57437);let f=Symbol("lc:configure_hooks"),m=()=>h(f)||[];var g=r(31926),y={};function v(e){return e?Array.isArray(e)||"name"in e?{callbacks:e}:e:{}}(0,n.V)(y,{BaseCallbackManager:()=>_,BaseRunManager:()=>b,CallbackManager:()=>S,CallbackManagerForChainRun:()=>x,CallbackManagerForLLMRun:()=>k,CallbackManagerForRetrieverRun:()=>w,CallbackManagerForToolRun:()=>$,ensureHandler:()=>I,parseCallbackConfigArg:()=>v});var _=class{setHandler(e){return this.setHandlers([e])}},b=class{constructor(e,t,r,n,i,a,s,o){this.runId=e,this.handlers=t,this.inheritableHandlers=r,this.tags=n,this.inheritableTags=i,this.metadata=a,this.inheritableMetadata=s,this._parentRunId=o}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>(0,c.u)(async()=>{try{await t.handleText?.(e,this.runId,this._parentRunId,this.tags)}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleCustomEvent(e,t,r,n,i){await Promise.all(this.handlers.map(r=>(0,c.u)(async()=>{try{await r.handleCustomEvent?.(e,t,this.runId,this.tags,this.metadata)}catch(e){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleCustomEvent: ${e}`),r.raiseError)throw e}},r.awaitHandlers)))}},w=class extends b{getChild(e){let t=new S(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>(0,c.u)(async()=>{if(!t.ignoreRetriever)try{await t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw e}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>(0,c.u)(async()=>{if(!t.ignoreRetriever)try{await t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags)}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${r}`),t.raiseError)throw e}},t.awaitHandlers)))}},k=class extends b{async handleLLMNewToken(e,t,r,n,i,a){await Promise.all(this.handlers.map(r=>(0,c.u)(async()=>{if(!r.ignoreLLM)try{await r.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a)}catch(e){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMNewToken: ${e}`),r.raiseError)throw e}},r.awaitHandlers)))}async handleLLMError(e,t,r,n,i){await Promise.all(this.handlers.map(t=>(0,c.u)(async()=>{if(!t.ignoreLLM)try{await t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags,i)}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMError: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleLLMEnd(e,t,r,n,i){await Promise.all(this.handlers.map(t=>(0,c.u)(async()=>{if(!t.ignoreLLM)try{await t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags,i)}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMEnd: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}},x=class extends b{getChild(e){let t=new S(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,r,n,i){await Promise.all(this.handlers.map(t=>(0,c.u)(async()=>{if(!t.ignoreChain)try{await t.handleChainError?.(e,this.runId,this._parentRunId,this.tags,i)}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainError: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleChainEnd(e,t,r,n,i){await Promise.all(this.handlers.map(t=>(0,c.u)(async()=>{if(!t.ignoreChain)try{await t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,i)}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainEnd: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>(0,c.u)(async()=>{if(!t.ignoreAgent)try{await t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags)}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>(0,c.u)(async()=>{if(!t.ignoreAgent)try{await t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}},$=class extends b{getChild(e){let t=new S(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>(0,c.u)(async()=>{if(!t.ignoreAgent)try{await t.handleToolError?.(e,this.runId,this._parentRunId,this.tags)}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>(0,c.u)(async()=>{if(!t.ignoreAgent)try{await t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}},S=class e extends _{handlers=[];inheritableHandlers=[];tags=[];inheritableTags=[];metadata={};inheritableMetadata={};name="callback_manager";_parentRunId;constructor(e,t){super(),this.handlers=t?.handlers??this.handlers,this.inheritableHandlers=t?.inheritableHandlers??this.inheritableHandlers,this.tags=t?.tags??this.tags,this.inheritableTags=t?.inheritableTags??this.inheritableTags,this.metadata=t?.metadata??this.metadata,this.inheritableMetadata=t?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t,r,n,i,a,s,l){return Promise.all(t.map(async(t,n)=>{let a=0===n&&r?r:(0,g.A)();return await Promise.all(this.handlers.map(r=>{if(!r.ignoreLLM)return(0,o.j7)(r)&&r._createRunForLLMStart(e,[t],a,this._parentRunId,i,this.tags,this.metadata,l),(0,c.u)(async()=>{try{await r.handleLLMStart?.(e,[t],a,this._parentRunId,i,this.tags,this.metadata,l)}catch(e){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMStart: ${e}`),r.raiseError)throw e}},r.awaitHandlers)})),new k(a,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,r,n,a,s,l,u){return Promise.all(t.map(async(t,n)=>{let s=0===n&&r?r:(0,g.A)();return await Promise.all(this.handlers.map(r=>{if(!r.ignoreLLM)return(0,o.j7)(r)&&r._createRunForChatModelStart(e,[t],s,this._parentRunId,a,this.tags,this.metadata,u),(0,c.u)(async()=>{try{if(r.handleChatModelStart)await r.handleChatModelStart?.(e,[t],s,this._parentRunId,a,this.tags,this.metadata,u);else if(r.handleLLMStart){let n=(0,i.Sw)(t);await r.handleLLMStart?.(e,[n],s,this._parentRunId,a,this.tags,this.metadata,u)}}catch(e){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMStart: ${e}`),r.raiseError)throw e}},r.awaitHandlers)})),new k(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,r=(0,g.A)(),n,i,a,s,l,u){return await Promise.all(this.handlers.map(i=>{if(!i.ignoreChain)return(0,o.j7)(i)&&i._createRunForChainStart(e,t,r,this._parentRunId,this.tags,this.metadata,n,s,u),(0,c.u)(async()=>{try{await i.handleChainStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,n,s,u)}catch(e){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleChainStart: ${e}`),i.raiseError)throw e}},i.awaitHandlers)})),new x(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=(0,g.A)(),n,i,a,s){return await Promise.all(this.handlers.map(n=>{if(!n.ignoreAgent)return(0,o.j7)(n)&&n._createRunForToolStart(e,t,r,this._parentRunId,this.tags,this.metadata,s),(0,c.u)(async()=>{try{await n.handleToolStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,s)}catch(e){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolStart: ${e}`),n.raiseError)throw e}},n.awaitHandlers)})),new $(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,r=(0,g.A)(),n,i,a,s){return await Promise.all(this.handlers.map(n=>{if(!n.ignoreRetriever)return(0,o.j7)(n)&&n._createRunForRetrieverStart(e,t,r,this._parentRunId,this.tags,this.metadata,s),(0,c.u)(async()=>{try{await n.handleRetrieverStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,s)}catch(e){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverStart: ${e}`),n.raiseError)throw e}},n.awaitHandlers)})),new w(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,t,r,n,i){await Promise.all(this.handlers.map(n=>(0,c.u)(async()=>{if(!n.ignoreCustomEvent)try{await n.handleCustomEvent?.(e,t,r,this.tags,this.metadata)}catch(e){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleCustomEvent: ${e}`),n.raiseError)throw e}},n.awaitHandlers)))}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){for(let r of(this.handlers=[],this.inheritableHandlers=[],e))this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(let t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(t=[],r=!0){let n=new e(this._parentRunId);for(let e of this.handlers){let t=this.inheritableHandlers.includes(e);n.addHandler(e,t)}for(let e of this.tags){let t=this.inheritableTags.includes(e);n.addTags([e],t)}for(let e of Object.keys(this.metadata)){let t=Object.keys(this.inheritableMetadata).includes(e);n.addMetadata({[e]:this.metadata[e]},t)}for(let e of t)n.handlers.filter(e=>"console_callback_handler"===e.name).some(t=>t.name===e.name)||n.addHandler(e,r);return n}static fromHandlers(e){class t extends s.NK{name=(0,g.A)();constructor(){super(),Object.assign(this,e)}}let r=new this;return r.addHandler(new t),r}static configure(e,t,r,n,i,a,s){return this._configureSync(e,t,r,n,i,a,s)}static _configureSync(t,r,n,i,o,c,p){let f;(t||r)&&(Array.isArray(t)||!t?(f=new e).setHandlers(t?.map(I)??[],!0):f=t,f=f.copy(Array.isArray(r)?r.map(I):r?.handlers,!1));let g="true"===(0,a.Az)("LANGCHAIN_VERBOSE")||p?.verbose,y=u.l.getTraceableRunTree()?.tracingEnabled||d(),v=y||((0,a.Az)("LANGCHAIN_TRACING")??!1);if(g||v){if(f||(f=new e),g&&!f.handlers.some(e=>e.name===l.b.prototype.name)){let e=new l.b;f.addHandler(e,!0)}if(v&&!f.handlers.some(e=>"langchain_tracer"===e.name)&&y){let e=new u.l;f.addHandler(e,!0)}if(y){let e=u.l.getTraceableRunTree();if(e&&void 0===f._parentRunId){f._parentRunId=e.id;let t=f.handlers.find(e=>"langchain_tracer"===e.name);t?.updateFromRunTree(e)}}}for(let{contextVar:t,inheritable:r=!0,handlerClass:n,envVar:i}of m()){let o,l=i&&"true"===(0,a.Az)(i)&&n,u=void 0!==t?h(t):void 0;u&&(0,s.zr)(u)?o=u:l&&(o=new n({})),void 0!==o&&(f||(f=new e),f.handlers.some(e=>e.name===o.name)||f.addHandler(o,r))}return(n||i)&&f&&(f.addTags(n??[]),f.addTags(i??[],!1)),(o||c)&&f&&(f.addMetadata(o??{}),f.addMetadata(c??{},!1)),f}};function I(e){return"name"in e?e:s.NK.fromMethods(e)}},55463:(e,t,r)=>{"use strict";let n=r(78768);e.exports=(e,t,r)=>{let i=new n(e,r),a=new n(t,r);return i.compare(a)||i.compareBuild(a)}},55853:(e,t,r)=>{"use strict";r.d(t,{l:()=>a,y:()=>i});var n=r(67893),i={};(0,n.V)(i,{chunkArray:()=>a});let a=(e,t)=>e.reduce((e,r,n)=>{let i=Math.floor(n/t),a=e[i]||[];return e[i]=a.concat([r]),e},[])},55870:(e,t,r)=>{"use strict";r.d(t,{MG:()=>u,Sg:()=>l,py:()=>s});let n="__lc_escaped__";function i(e){return"lc"in e||1===Object.keys(e).length&&n in e}function a(e){return{[n]:e}}function s(e){return 1===Object.keys(e).length&&n in e}function o(e){return null!==e&&"object"==typeof e&&"lc_serializable"in e&&"function"==typeof e.toJSON}function l(e){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){if(o(e))return e;let t=e;if(i(t))return a(t);let r={};for(let[e,n]of Object.entries(t))r[e]=l(n);return r}return Array.isArray(e)?e.map(e=>l(e)):e}function u(e){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let t=e;if(s(t))return t[n];let r={};for(let[e,n]of Object.entries(t))r[e]=u(n);return r}return Array.isArray(e)?e.map(e=>u(e)):e}},56032:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(64845);let i=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}};function t(t){return e[t]??null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},i={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;return`Invalid input: expected ${t}, received ${a}`}case"invalid_value":if(1===e.values.length)return`Invalid input: expected ${n.stringifyPrimitive(e.values[0])}`;return`Invalid option: expected one of ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Too big: expected ${e.origin??"value"} to have ${r}${e.maximum.toString()} ${n.unit??"elements"}`;return`Too big: expected ${e.origin??"value"} to be ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Too small: expected ${e.origin} to have ${r}${e.minimum.toString()} ${n.unit}`;return`Too small: expected ${e.origin} to be ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Invalid string: must start with "${t.prefix}"`;if("ends_with"===t.format)return`Invalid string: must end with "${t.suffix}"`;if("includes"===t.format)return`Invalid string: must include "${t.includes}"`;if("regex"===t.format)return`Invalid string: must match pattern ${t.pattern}`;return`Invalid ${r[t.format]??e.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${e.divisor}`;case"unrecognized_keys":return`Unrecognized key${e.keys.length>1?"s":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Invalid key in ${e.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${e.origin}`}}};function a(){return{localeError:i()}}},57437:(e,t,r)=>{"use strict";r.d(t,{gk:()=>n.gk,sh:()=>n.sh});var n=r(95829)},57719:(e,t)=>{"use strict";t.byteLength=u,t.toByteArray=d,t.fromByteArray=f;for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=a.length;s<o;++s)r[s]=a[s],n[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function u(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n}function c(e,t,r){return(t+r)*3/4-r}function d(e){var t,r,a=l(e),s=a[0],o=a[1],u=new i(c(e,s,o)),d=0,p=o>0?s-4:s;for(r=0;r<p;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[d++]=t>>16&255,u[d++]=t>>8&255,u[d++]=255&t;return 2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[d++]=255&t),1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[d++]=t>>8&255,u[d++]=255&t),u}function p(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function h(e,t,r){for(var n=[],i=t;i<r;i+=3)n.push(p((e[i]<<16&0xff0000)+(e[i+1]<<8&65280)+(255&e[i+2])));return n.join("")}function f(e){for(var t,n=e.length,i=n%3,a=[],s=16383,o=0,l=n-i;o<l;o+=s)a.push(h(e,o,o+s>l?l:o+s));return 1===i?a.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&a.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),a.join("")}n[45]=62,n[95]=63},58036:(e,t,r)=>{"use strict";function n(e,t=a){let r=(e=e.trim()).indexOf("```");if(-1===r)return t(e);let i=e.substring(r+3);i.startsWith("json\n")?i=i.substring(5):i.startsWith("json")?i=i.substring(4):i.startsWith("\n")&&(i=i.substring(1));let s=i.indexOf("```"),o=i;return -1!==s&&(o=i.substring(0,s)),t(o.trim())}function i(e){try{return JSON.parse(e)}catch{}let t=e.trim();if(0===t.length)throw Error("Unexpected end of JSON input");let r=0;function n(){for(;r<t.length&&/\s/.test(t[r]);)r+=1}function i(){if('"'!==t[r])throw Error(`Expected '"' at position ${r}, got '${t[r]}'`);r+=1;let e="",n=!1;for(;r<t.length;){let i=t[r];if(n){if("n"===i)e+="\n";else if("t"===i)e+="	";else if("r"===i)e+="\r";else if("\\"===i)e+="\\";else if('"'===i)e+='"';else if("b"===i)e+="\b";else if("f"===i)e+="\f";else if("/"===i)e+="/";else if("u"===i){let n=t.substring(r+1,r+5);if(/^[0-9A-Fa-f]{0,4}$/.test(n))4===n.length?e+=String.fromCharCode(Number.parseInt(n,16)):e+=`u${n}`,r+=n.length;else throw Error(`Invalid unicode escape sequence '\\u${n}' at position ${r}`)}else throw Error(`Invalid escape sequence '\\${i}' at position ${r}`);n=!1}else if("\\"===i)n=!0;else{if('"'===i)return r+=1,e;e+=i}r+=1}return n&&(e+="\\"),e}function a(){let e=r,n="";if("-"===t[r]&&(n+="-",r+=1),r<t.length&&"0"===t[r]&&(n+="0",t[r+=1]>="0"&&t[r]<="9"))throw Error(`Invalid number at position ${e}`);if(r<t.length&&t[r]>="1"&&t[r]<="9")for(;r<t.length&&t[r]>="0"&&t[r]<="9";)n+=t[r],r+=1;if(r<t.length&&"."===t[r])for(n+=".",r+=1;r<t.length&&t[r]>="0"&&t[r]<="9";)n+=t[r],r+=1;if(r<t.length&&("e"===t[r]||"E"===t[r]))for(n+=t[r],(r+=1)<t.length&&("+"===t[r]||"-"===t[r])&&(n+=t[r],r+=1);r<t.length&&t[r]>="0"&&t[r]<="9";)n+=t[r],r+=1;if("-"===n)return -0;let i=Number.parseFloat(n);if(Number.isNaN(i))throw r=e,Error(`Invalid number '${n}' at position ${e}`);return i}function s(){if(n(),r>=t.length)throw Error(`Unexpected end of input at position ${r}`);let e=t[r];if("{"===e)return l();if("["===e)return o();if('"'===e)return i();if("null".startsWith(t.substring(r,r+4)))return r+=Math.min(4,t.length-r),null;if("true".startsWith(t.substring(r,r+4)))return r+=Math.min(4,t.length-r),!0;if("false".startsWith(t.substring(r,r+5)))return r+=Math.min(5,t.length-r),!1;if("-"===e||e>="0"&&e<="9")return a();throw Error(`Unexpected character '${e}' at position ${r}`)}function o(){if("["!==t[r])throw Error(`Expected '[' at position ${r}, got '${t[r]}'`);let e=[];if(r+=1,n(),r>=t.length)return e;if("]"===t[r])return r+=1,e;for(;r<t.length&&(n(),!(r>=t.length))&&(e.push(s()),n(),!(r>=t.length));){;if("]"===t[r]){r+=1;break}if(","===t[r]){r+=1;continue}throw Error(`Expected ',' or ']' at position ${r}, got '${t[r]}'`)}return e}function l(){if("{"!==t[r])throw Error(`Expected '{' at position ${r}, got '${t[r]}'`);let e={};if(r+=1,n(),r>=t.length)return e;if("}"===t[r])return r+=1,e;for(;r<t.length&&(n(),!(r>=t.length));){let a=i();if(n(),r>=t.length)break;if(":"!==t[r])throw Error(`Expected ':' at position ${r}, got '${t[r]}'`);if(r+=1,n(),r>=t.length||(e[a]=s(),n(),r>=t.length))break;if("}"===t[r]){r+=1;break}if(","===t[r]){r+=1;continue}throw Error(`Expected ',' or '}' at position ${r}, got '${t[r]}'`)}return e}let u=s();if(n(),r<t.length)throw Error(`Unexpected character '${t[r]}' at position ${r}`);return u}function a(e){try{if(void 0===e)return null;return i(e)}catch{return null}}r.d(t,{D:()=>n,d:()=>a})},59305:(e,t,r)=>{"use strict";r.d(t,{T:()=>u,k:()=>l});var n=r(79271),i=r(90338),a=r(23294),s=r(14654),o=r(70014),l=class extends s.mJ{async *_transform(e){for await(let t of e)"string"==typeof t?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async *transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}},u=class extends l{diff=!1;constructor(e){super(e),this.diff=e?.diff??this.diff}async *_transform(e){let t,r;for await(let s of e){let e;if("string"!=typeof s&&"string"!=typeof s.content)throw Error("Cannot handle non-string output.");if((0,n.AJ)(s)){if("string"!=typeof s.content)throw Error("Cannot handle non-string message output.");e=new a.Cf({message:s,text:s.content})}else if((0,n.ny)(s)){if("string"!=typeof s.content)throw Error("Cannot handle non-string message output.");e=new a.Cf({message:(0,i.ih)(s),text:s.content})}else e=new a.mu({text:s});r=void 0===r?e:r.concat(e);let l=await this.parsePartialResult([r]);null==l||(0,o.rA)(l,t)||(this.diff?yield this._diff(t,l):yield l,t=l)}}getFormatInstructions(){return""}}},59362:(e,t,r)=>{"use strict";r.d(t,{pe:()=>i});let{Axios:n,AxiosError:i,CanceledError:a,isCancel:s,CancelToken:o,VERSION:l,all:u,Cancel:c,isAxiosError:d,spread:p,toFormData:h,AxiosHeaders:f,HttpStatusCode:m,formToJSON:g,getAdapter:y,mergeConfig:v}=r(23464).A},59520:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(18056);let i=function(e){if(!(0,n.A)(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/0x10000000000&255,r[11]=t/0x100000000&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}},59621:(e,t,r)=>{"use strict";r.d(t,{Qw:()=>s,fL:()=>l,qG:()=>a.qG});var n=r(67893),i=r(25720),a=r(23229),s={};function o(e,t){let r="number"==typeof t?void 0:t;return{name:e.name,description:e.description,parameters:(0,i.PF)(e.schema),...r?.strict!==void 0?{strict:r.strict}:{}}}function l(e,t){let r,n="number"==typeof t?void 0:t;return r=(0,a.qG)(e)?{type:"function",function:o(e)}:e,n?.strict!==void 0&&(r.function.strict=n.strict),r}(0,n.V)(s,{convertToOpenAIFunction:()=>o,convertToOpenAITool:()=>l,isLangChainTool:()=>a.qG,isRunnableToolLike:()=>a.Lx,isStructuredTool:()=>a.Yn,isStructuredToolParams:()=>a.Am})},59754:(e,t,r)=>{"use strict";let n=r(78768),i=r(27681);e.exports=(e,t,r)=>{let a=null,s=null,o=null;try{o=new i(t,r)}catch(e){return null}return e.forEach(e=>{o.test(e)&&(!a||-1===s.compare(e))&&(s=new n(a=e,r))}),a}},61115:(e,t,r)=>{"use strict";r.d(t,{MU:()=>h,VC:()=>f,Z2:()=>m,ZE:()=>y,eY:()=>c,j_:()=>v});var n=r(67893),i=r(90338),a=r(65408),s=r(41180),o=r(91481),l=r(14672),u=r(49573),c={};(0,n.V)(c,{BaseLangChain:()=>y,BaseLanguageModel:()=>v,calculateMaxTokens:()=>m,getEmbeddingContextSize:()=>p,getModelContextSize:()=>h,getModelNameForTiktoken:()=>d,isOpenAITool:()=>f});let d=e=>e.startsWith("gpt-5")?"gpt-5":e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e.startsWith("gpt-4o")?"gpt-4o":e,p=e=>"text-embedding-ada-002"===e?8191:2046,h=e=>{switch(d(e)){case"gpt-5":case"gpt-5-turbo":case"gpt-5-turbo-preview":return 4e5;case"gpt-4o":case"gpt-4o-mini":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4-turbo":case"gpt-4-turbo-preview":case"gpt-4-turbo-2024-04-09":case"gpt-4-0125-preview":case"gpt-4-1106-preview":return 128e3;case"gpt-4-32k":case"gpt-4-32k-0314":case"gpt-4-32k-0613":case"gemini-pro":case"gemini-pro-vision":return 32768;case"gpt-4":case"gpt-4-0314":case"gpt-4-0613":return 8192;case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-16k-0613":return 16384;case"gpt-3.5-turbo":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-1106":case"gpt-3.5-turbo-0125":return 4096;case"text-davinci-003":case"text-davinci-002":default:return 4097;case"text-davinci-001":return 2049;case"text-curie-001":case"text-babbage-001":case"text-ada-001":case"code-cushman-001":return 2048;case"code-davinci-002":case"code-davinci-001":return 8e3;case"claude-3-5-sonnet-20241022":case"claude-3-5-sonnet-20240620":case"claude-3-opus-20240229":case"claude-3-sonnet-20240229":case"claude-3-haiku-20240307":case"claude-2.1":return 2e5;case"claude-2.0":case"claude-instant-1.2":return 1e5;case"gemini-1.5-pro":case"gemini-1.5-pro-latest":case"gemini-1.5-flash":case"gemini-1.5-flash-latest":return 1e6}};function f(e){return"object"==typeof e&&!!e&&("type"in e&&"function"===e.type&&"function"in e&&"object"==typeof e.function&&!!e.function&&"name"in e.function&&"parameters"in e.function||!1)}let m=async({prompt:e,modelName:t})=>{let r;try{r=(await (0,u.kN)(d(t))).encode(e).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),r=Math.ceil(e.length/4)}return h(t)-r},g=()=>!1;var y=class extends s.YN{verbose;callbacks;tags;metadata;get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),this.verbose=e.verbose??g(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}},v=class extends y{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}caller;cache;constructor({callbacks:e,callbackManager:t,...r}){let{cache:n,...i}=r;super({callbacks:e??t,...i}),"object"==typeof n?this.cache=n:n?this.cache=l.D9.global():this.cache=void 0,this.caller=new a.g(r??{})}_encoding;async getNumTokens(e){let t,r=Math.ceil((t="string"==typeof e?e:e.map(e=>"string"==typeof e?e:"text"===e.type&&"text"in e?e.text:"").join("")).length/4);if(!this._encoding)try{this._encoding=await (0,u.kN)("modelName"in this?d(this.modelName):"gpt2")}catch(e){console.warn("Failed to calculate number of tokens, falling back to approximate count",e)}if(this._encoding)try{r=this._encoding.encode(t).length}catch(e){console.warn("Failed to calculate number of tokens, falling back to approximate count",e)}return r}static _convertInputToPromptValue(e){return"string"==typeof e?new o.HY(e):Array.isArray(e)?new o.aB(e.map(i.K0)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...t}){return Object.entries({...this._identifyingParams(),...t,_type:this._llmType(),_model:this._modelType()}).filter(([e,t])=>void 0!==t).map(([e,t])=>`${e}:${JSON.stringify(t)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw Error("Use .toJSON() instead")}get profile(){return{}}}},61285:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});var n,i=r(12115),a=r(52712),s=(n||(n=r.t(i,2)))[" useId ".trim().toString()]||(()=>void 0),o=0;function l(e){let[t,r]=i.useState(s());return(0,a.N)(()=>{e||r(e=>e??String(o++))},[e]),e||(t?`radix-${t}`:"")}},61375:(e,t,r)=>{"use strict";let n=r(78768);e.exports=(e,t)=>new n(e,t).patch},61612:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u});var n={};r.r(n),r.d(n,{BRAND:()=>o.qt,DIRTY:()=>a.jm,EMPTY_PATH:()=>a.I3,INVALID:()=>a.uY,NEVER:()=>o.tm,OK:()=>a.OK,ParseStatus:()=>a.MY,Schema:()=>o.Sj,ZodAny:()=>o.Ml,ZodArray:()=>o.n,ZodBigInt:()=>o.Lr,ZodBoolean:()=>o.WF,ZodBranded:()=>o.eN,ZodCatch:()=>o.hw,ZodDate:()=>o.aP,ZodDefault:()=>o.Xi,ZodDiscriminatedUnion:()=>o.jv,ZodEffects:()=>o.k1,ZodEnum:()=>o.Vb,ZodError:()=>l.G,ZodFirstPartyTypeKind:()=>o.kY,ZodFunction:()=>o.CZ,ZodIntersection:()=>o.Jv,ZodIssueCode:()=>l.eq,ZodLazy:()=>o.Ih,ZodLiteral:()=>o.DN,ZodMap:()=>o.Ut,ZodNaN:()=>o.Tq,ZodNativeEnum:()=>o.WM,ZodNever:()=>o.iS,ZodNull:()=>o.PQ,ZodNullable:()=>o.l1,ZodNumber:()=>o.rS,ZodObject:()=>o.bv,ZodOptional:()=>o.Ii,ZodParsedType:()=>s.Zp,ZodPipeline:()=>o._c,ZodPromise:()=>o.$i,ZodReadonly:()=>o.EV,ZodRecord:()=>o.b8,ZodSchema:()=>o.lK,ZodSet:()=>o.Kz,ZodString:()=>o.ND,ZodSymbol:()=>o.K5,ZodTransformer:()=>o.BG,ZodTuple:()=>o.y0,ZodType:()=>o.aR,ZodUndefined:()=>o._Z,ZodUnion:()=>o.fZ,ZodUnknown:()=>o._,ZodVoid:()=>o.a0,addIssueToContext:()=>a.zn,any:()=>o.bz,array:()=>o.YO,bigint:()=>o.o,boolean:()=>o.zM,coerce:()=>o.au,custom:()=>o.Ie,date:()=>o.p6,datetimeRegex:()=>o.fm,defaultErrorMap:()=>i.su,discriminatedUnion:()=>o.gM,effect:()=>o.QZ,enum:()=>o.k5,function:()=>o.fH,getErrorMap:()=>i.$W,getParsedType:()=>s.CR,instanceof:()=>o.Nl,intersection:()=>o.E$,isAborted:()=>a.G4,isAsync:()=>a.xP,isDirty:()=>a.DM,isValid:()=>a.fn,late:()=>o.fn,lazy:()=>o.RZ,literal:()=>o.eu,makeIssue:()=>a.y7,map:()=>o.Tj,nan:()=>o.oi,nativeEnum:()=>o.fc,never:()=>o.Zm,null:()=>o.ch,nullable:()=>o.me,number:()=>o.ai,object:()=>o.Ik,objectUtil:()=>s.o6,oboolean:()=>o.yN,onumber:()=>o.p7,optional:()=>o.lq,ostring:()=>o.Di,pipeline:()=>o.Tk,preprocess:()=>o.vk,promise:()=>o.iv,quotelessJson:()=>l.WI,record:()=>o.g1,set:()=>o.hZ,setErrorMap:()=>i.pJ,strictObject:()=>o.re,string:()=>o.Yj,symbol:()=>o.HR,transformer:()=>o.Gu,tuple:()=>o.PV,undefined:()=>o.Vx,union:()=>o.KC,unknown:()=>o.L5,util:()=>s.ZS,void:()=>o.rI});var i=r(85722),a=r(43454),s=r(16227),o=r(74556),l=r(4028);let u=n},61928:(e,t,r)=>{"use strict";let n=r(78768),i=r(27681);e.exports=(e,t,r)=>{let a=null,s=null,o=null;try{o=new i(t,r)}catch(e){return null}return e.forEach(e=>{o.test(e)&&(!a||1===s.compare(e))&&(s=new n(a=e,r))}),a}},62531:(e,t,r)=>{"use strict";r.d(t,{E6:()=>a,X6:()=>h});var n=r(67893),i=r(74281),a={};(0,n.V)(a,{JsonPatchError:()=>s,_areEquals:()=>y,applyOperation:()=>p,applyPatch:()=>h,applyReducer:()=>f,deepClone:()=>o,getValueByPointer:()=>d,validate:()=>g,validator:()=>m});let s=i.DF,o=i.LH;function l(e){return Object.getOwnPropertyNames(Object.prototype).includes(e)}let u={add:function(e,t,r){if(l(t))throw TypeError("JSON-Patch: modifying `__proto__`, `constructor`, or `prototype` prop is banned for security reasons");return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){if(l(t))throw TypeError("JSON-Patch: modifying `__proto__`, `constructor`, or `prototype` prop is banned for security reasons");var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){if(l(t))throw TypeError("JSON-Patch: modifying `__proto__`, `constructor`, or `prototype` prop is banned for security reasons");var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){let n=d(r,this.path);n&&(n=(0,i.LH)(n));let a=p(r,{op:"remove",path:this.from}).removed;return p(r,{op:"add",path:this.path,value:a}),{newDocument:r,removed:n}},copy:function(e,t,r){let n=d(r,this.from);return p(r,{op:"add",path:this.path,value:(0,i.LH)(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:y(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}};var c={add:function(e,t,r){return(0,i.Fq)(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:u.move,copy:u.copy,test:u.test,_get:u._get};function d(e,t){if(""==t)return e;var r={op:"_get",path:t};return p(e,r),r.value}function p(e,t,r=!1,n=!0,a=!0,o=0){if(r&&("function"==typeof r?r(t,0,e,t.path):m(t,0)),""===t.path){let n={newDocument:e};if("add"===t.op)return n.newDocument=t.value,n;if("replace"===t.op)return n.newDocument=t.value,n.removed=e,n;if("move"===t.op||"copy"===t.op)return n.newDocument=d(e,t.from),"move"===t.op&&(n.removed=e),n;else if("test"===t.op){if(n.test=y(e,t.value),!1===n.test)throw new s("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return n.newDocument=e,n}else if("remove"===t.op)return n.removed=e,n.newDocument=null,n;else if("_get"===t.op)return t.value=e,n;else if(!r)return n;else throw new s("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e)}{let l,d,p;n||(e=(0,i.LH)(e));let h=(t.path||"").split("/"),f=e,g=1,y=h.length;for(d="function"==typeof r?r:m;;){if((l=h[g])&&-1!=l.indexOf("~")&&(l=(0,i.nF)(l)),a&&("__proto__"==l||"prototype"==l&&g>0&&"constructor"==h[g-1]))throw TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&void 0===p&&(void 0===f[l]?p=h.slice(0,g).join("/"):g==y-1&&(p=t.path),void 0!==p&&d(t,0,e,p)),g++,Array.isArray(f)){if("-"===l)l=f.length;else if(r&&!(0,i.Fq)(l))throw new s("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);else(0,i.Fq)(l)&&(l=~~l);if(g>=y){if(r&&"add"===t.op&&l>f.length)throw new s("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);let n=c[t.op].call(t,f,l,e);if(!1===n.test)throw new s("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return n}}else if(g>=y){let r=u[t.op].call(t,f,l,e);if(!1===r.test)throw new s("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return r}if(f=f[l],r&&g<y&&(!f||"object"!=typeof f))throw new s("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function h(e,t,r,n=!0,a=!0){if(r&&!Array.isArray(t))throw new s("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=(0,i.LH)(e));let o=Array(t.length);for(let n=0,i=t.length;n<i;n++)o[n]=p(e,t[n],r,!0,a,n),e=o[n].newDocument;return o.newDocument=e,o}function f(e,t,r){let n=p(e,t);if(!1===n.test)throw new s("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return n.newDocument}function m(e,t,r,n){if("object"!=typeof e||null===e||Array.isArray(e))throw new s("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(u[e.op]){if("string"!=typeof e.path)throw new s("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);else if(0!==e.path.indexOf("/")&&e.path.length>0)throw new s('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);else if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new s("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);else if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new s("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);else if(("add"===e.op||"replace"===e.op||"test"===e.op)&&(0,i.Lb)(e.value))throw new s("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);else if(r){if("add"==e.op){var a=e.path.split("/").length,o=n.split("/").length;if(a!==o+1&&a!==o)throw new s("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==n)throw new s("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if("move"===e.op||"copy"===e.op){var l=g([{op:"_get",path:e.from,value:void 0}],r);if(l&&"OPERATION_PATH_UNRESOLVABLE"===l.name)throw new s("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}}else throw new s("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r)}function g(e,t,r){try{if(!Array.isArray(e))throw new s("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)h((0,i.LH)(t),(0,i.LH)(e),r||!0);else{r=r||m;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(e){if(e instanceof s)return e;throw e}}function y(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,i,a=Array.isArray(e),s=Array.isArray(t);if(a&&s){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!y(e[r],t[r]))return!1;return!0}if(a!=s)return!1;var o=Object.keys(e);if((n=o.length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!t.hasOwnProperty(o[r]))return!1;for(r=n;0!=r--;)if(!y(e[i=o[r]],t[i]))return!1;return!0}return e!=e&&t!=t}},62886:(e,t,r)=>{"use strict";r.d(t,{GZ:()=>o,a7:()=>a,di:()=>s,xc:()=>i});var n=r(79271),i=class extends n.XQ{static lc_name(){return"HumanMessage"}type="human";constructor(e){super(e)}static isInstance(e){return super.isInstance(e)&&"human"===e.type}},a=class extends n.gj{static lc_name(){return"HumanMessageChunk"}type="human";constructor(e){super(e)}concat(e){return new this.constructor({content:(0,n._I)(this.content,e.content),additional_kwargs:(0,n.ns)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n.ns)(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&"human"===e.type}};function s(e){return"human"===e.getType()}function o(e){return"human"===e.getType()}},63946:(e,t,r)=>{"use strict";let n,i,a,s,o;function l(e,t){return e.lc_error_code=t,e.message=`${e.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${t}/
`,e}function u(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function c(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}r.d(t,{Db:()=>s6});let d=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return d=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),r=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^r()&15>>e/4).toString(16))};function p(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}let h=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){let t=Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return Error(JSON.stringify(e))}catch{}}return Error(e)};class f extends Error{}class m extends f{constructor(e,t,r,n){super(`${m.makeMessage(e,t,r)}`),this.status=e,this.headers=n,this.requestID=n?.get("x-request-id"),this.error=t;let i=t;this.code=i?.code,this.param=i?.param,this.type=i?.type}static makeMessage(e,t,r){let n=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,n){if(!e||!n)return new y({message:r,cause:h(t)});let i=t?.error;return 400===e?new _(e,i,r,n):401===e?new b(e,i,r,n):403===e?new w(e,i,r,n):404===e?new k(e,i,r,n):409===e?new x(e,i,r,n):422===e?new $(e,i,r,n):429===e?new S(e,i,r,n):e>=500?new I(e,i,r,n):new m(e,i,r,n)}}class g extends m{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class y extends m{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class v extends y{constructor({message:e}={}){super({message:e??"Request timed out."})}}class _ extends m{}class b extends m{}class w extends m{}class k extends m{}class x extends m{}class $ extends m{}class S extends m{}class I extends m{}class E extends f{constructor(){super("Could not parse response content as the length limit was reached")}}class A extends f{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class O extends Error{constructor(e){super(e)}}let T=/^[a-z][a-z0-9+.-]*:/i,N=e=>T.test(e),C=e=>(C=Array.isArray)(e),P=C;function j(e){return"object"!=typeof e?{}:e??{}}function z(e){if(!e)return!0;for(let t in e)return!1;return!0}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}let L=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new f(`${e} must be an integer`);if(t<0)throw new f(`${e} must be a positive integer`);return t},Z=e=>{try{return JSON.parse(e)}catch(e){return}},D=e=>new Promise(t=>setTimeout(t,e)),U="6.15.0",F=()=>"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator;function B(){return"undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown"}let V=()=>{let e=B();if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U,"X-Stainless-OS":q(Deno.build.os),"X-Stainless-Arch":W(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U,"X-Stainless-OS":q(globalThis.process.platform??"unknown"),"X-Stainless-Arch":W(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let t=J();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function J(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let r=t.exec(navigator.userAgent);if(r){let t=r[1]||0,n=r[2]||0,i=r[3]||0;return{browser:e,version:`${t}.${n}.${i}`}}}return null}let W=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",q=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown",K=()=>n??(n=V());function G(){if("undefined"!=typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function H(...e){let t=globalThis.ReadableStream;if(void 0===t)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function Y(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return H({start(){},async pull(e){let{done:r,value:n}=await t.next();r?e.close():e.enqueue(n)},async cancel(){await t.return?.()}})}function X(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Q(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void await e[Symbol.asyncIterator]().return?.();let t=e.getReader(),r=t.cancel();t.releaseLock(),await r}let ee=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),et="RFC3986",er=e=>String(e),en={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:er},ei="RFC1738",ea=(e,t)=>(ea=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty))(e,t),es=(()=>{let e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),eo=1024;function el(e){return!!e&&"object"==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function eu(e,t){if(C(e)){let r=[];for(let n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)}let ec={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},ed=function(e,t){Array.prototype.push.apply(e,C(t)?t:[t])},ep={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,r,n,i)=>{if(0===e.length)return e;let a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let s="";for(let e=0;e<a.length;e+=eo){let t=a.length>=eo?a.slice(e,e+eo):a,r=[];for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||i===ei&&(40===n||41===n)){r[r.length]=t.charAt(e);continue}if(n<128){r[r.length]=es[n];continue}if(n<2048){r[r.length]=es[192|n>>6]+es[128|63&n];continue}if(n<55296||n>=57344){r[r.length]=es[224|n>>12]+es[128|n>>6&63]+es[128|63&n];continue}e+=1,n=65536+((1023&n)<<10|1023&t.charCodeAt(e)),r[r.length]=es[240|n>>18]+es[128|n>>12&63]+es[128|n>>6&63]+es[128|63&n]}s+=r.join("")}return s},encodeValuesOnly:!1,format:et,formatter:er,indices:!1,serializeDate:e=>(i??(i=Function.prototype.call.bind(Date.prototype.toISOString)))(e),skipNulls:!1,strictNullHandling:!1};function eh(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e}let ef={};function em(e,t,r,n,i,a,s,o,l,u,c,d,p,h,f,m,g,y){let v,_=e,b=y,w=0,k=!1;for(;void 0!==(b=b.get(ef))&&!k;){let t=b.get(e);if(w+=1,void 0!==t)if(t===w)throw RangeError("Cyclic object value");else k=!0;void 0===b.get(ef)&&(w=0)}if("function"==typeof u?_=u(t,_):_ instanceof Date?_=p?.(_):"comma"===r&&C(_)&&(_=eu(_,function(e){return e instanceof Date?p?.(e):e})),null===_){if(a)return l&&!m?l(t,ep.encoder,g,"key",h):t;_=""}if(eh(_)||el(_)){if(l){let e=m?t:l(t,ep.encoder,g,"key",h);return[f?.(e)+"="+f?.(l(_,ep.encoder,g,"value",h))]}return[f?.(t)+"="+f?.(String(_))]}let x=[];if(void 0===_)return x;if("comma"===r&&C(_))m&&l&&(_=eu(_,l)),v=[{value:_.length>0?_.join(",")||null:void 0}];else if(C(u))v=u;else{let e=Object.keys(_);v=c?e.sort(c):e}let $=o?String(t).replace(/\./g,"%2E"):String(t),S=n&&C(_)&&1===_.length?$+"[]":$;if(i&&C(_)&&0===_.length)return S+"[]";for(let t=0;t<v.length;++t){let b=v[t],k="object"==typeof b&&void 0!==b.value?b.value:_[b];if(s&&null===k)continue;let $=d&&o?b.replace(/\./g,"%2E"):b,I=C(_)?"function"==typeof r?r(S,$):S:S+(d?"."+$:"["+$+"]");y.set(e,w);let E=new WeakMap;E.set(ef,y),ed(x,em(k,I,r,n,i,a,s,o,"comma"===r&&m&&C(_)?null:l,u,c,d,p,h,f,m,g,E))}return x}function eg(e=ep){let t;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw TypeError("Encoder has to be a function.");let r=e.charset||ep.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=et;if(void 0!==e.format){if(!ea(en,e.format))throw TypeError("Unknown format option provided.");n=e.format}let i=en[n],a=ep.filter;if(("function"==typeof e.filter||C(e.filter))&&(a=e.filter),t=e.arrayFormat&&e.arrayFormat in ec?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":ep.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");let s=void 0===e.allowDots?!0==!!e.encodeDotInKeys||ep.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:ep.addQueryPrefix,allowDots:s,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:ep.allowEmptyArrays,arrayFormat:t,charset:r,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:ep.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?ep.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:ep.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:ep.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:ep.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:ep.encodeValuesOnly,filter:a,format:n,formatter:i,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:ep.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:ep.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:ep.strictNullHandling}}function ey(e,t={}){let r,n,i=e,a=eg(t);"function"==typeof a.filter?i=(n=a.filter)("",i):C(a.filter)&&(r=n=a.filter);let s=[];if("object"!=typeof i||null===i)return"";let o=ec[a.arrayFormat],l="comma"===o&&a.commaRoundTrip;r||(r=Object.keys(i)),a.sort&&r.sort(a.sort);let u=new WeakMap;for(let e=0;e<r.length;++e){let t=r[e];a.skipNulls&&null===i[t]||ed(s,em(i[t],t,o,l,a.allowEmptyArrays,a.strictNullHandling,a.skipNulls,a.encodeDotInKeys,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.format,a.formatter,a.encodeValuesOnly,a.charset,u))}let c=s.join(a.delimiter),d=!0===a.addQueryPrefix?"?":"";return a.charsetSentinel&&("iso-8859-1"===a.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}function ev(e){let t=0;for(let r of e)t+=r.length;let r=new Uint8Array(t),n=0;for(let t of e)r.set(t,n),n+=t.length;return r}function e_(e){let t;return(a??(a=(t=new globalThis.TextEncoder).encode.bind(t)))(e)}function eb(e){let t;return(s??(s=(t=new globalThis.TextDecoder).decode.bind(t)))(e)}class ew{constructor(){tQ.set(this,void 0),t0.set(this,void 0),u(this,tQ,new Uint8Array,"f"),u(this,t0,null,"f")}decode(e){let t;if(null==e)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?e_(e):e;u(this,tQ,ev([c(this,tQ,"f"),r]),"f");let n=[];for(;null!=(t=ek(c(this,tQ,"f"),c(this,t0,"f")));){if(t.carriage&&null==c(this,t0,"f")){u(this,t0,t.index,"f");continue}if(null!=c(this,t0,"f")&&(t.index!==c(this,t0,"f")+1||t.carriage)){n.push(eb(c(this,tQ,"f").subarray(0,c(this,t0,"f")-1))),u(this,tQ,c(this,tQ,"f").subarray(c(this,t0,"f")),"f"),u(this,t0,null,"f");continue}let e=null!==c(this,t0,"f")?t.preceding-1:t.preceding,r=eb(c(this,tQ,"f").subarray(0,e));n.push(r),u(this,tQ,c(this,tQ,"f").subarray(t.index),"f"),u(this,t0,null,"f")}return n}flush(){return c(this,tQ,"f").length?this.decode("\n"):[]}}function ek(e,t){let r=10,n=13;for(let i=t??0;i<e.length;i++){if(e[i]===r)return{preceding:i,index:i+1,carriage:!1};if(e[i]===n)return{preceding:i,index:i+1,carriage:!0}}return null}function ex(e){let t=10,r=13;for(let n=0;n<e.length-1;n++){if(e[n]===t&&e[n+1]===t||e[n]===r&&e[n+1]===r)return n+2;if(e[n]===r&&e[n+1]===t&&n+3<e.length&&e[n+2]===r&&e[n+3]===t)return n+4}return -1}tQ=new WeakMap,t0=new WeakMap,ew.NEWLINE_CHARS=new Set(["\n","\r"]),ew.NEWLINE_REGEXP=/\r\n|[\n\r]/g;let e$={off:0,error:200,warn:300,info:400,debug:500},eS=(e,t,r)=>{if(e){if(R(e$,e))return e;eT(r).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(e$))}`)}};function eI(){}function eE(e,t,r){return!t||e$[e]>e$[r]?eI:t[e].bind(t)}let eA={error:eI,warn:eI,info:eI,debug:eI},eO=new WeakMap;function eT(e){let t=e.logger,r=e.logLevel??"off";if(!t)return eA;let n=eO.get(t);if(n&&n[0]===r)return n[1];let i={error:eE("error",t,r),warn:eE("warn",t,r),info:eE("info",t,r),debug:eE("debug",t,r)};return eO.set(t,[r,i]),i}let eN=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class eC{constructor(e,t,r){this.iterator=e,t1.set(this,void 0),this.controller=t,u(this,t1,r,"f")}static fromSSEResponse(e,t,r){let n=!1,i=r?eT(r):console;async function*a(){if(n)throw new f("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(let n of eP(e,t))if(!r){if(n.data.startsWith("[DONE]")){r=!0;continue}if(null!==n.event&&n.event.startsWith("thread.")){let e;try{e=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if("error"==n.event)throw new m(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}else{let t;try{t=JSON.parse(n.data)}catch(e){throw i.error("Could not parse message into JSON:",n.data),i.error("From chunk:",n.raw),e}if(t&&t.error)throw new m(void 0,t.error,void 0,e.headers);yield t}}r=!0}catch(e){if(p(e))return;throw e}finally{r||t.abort()}}return new eC(a,t,r)}static fromReadableStream(e,t,r){let n=!1;async function*i(){let t=new ew;for await(let r of X(e))for(let e of t.decode(r))yield e;for(let e of t.flush())yield e}return new eC(async function*(){if(n)throw new f("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let e=!1;try{for await(let t of i())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(p(e))return;throw e}finally{e||t.abort()}},t,r)}[(t1=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],t=[],r=this.iterator(),n=n=>({next:()=>{if(0===n.length){let n=r.next();e.push(n),t.push(n)}return n.shift()}});return[new eC(()=>n(e),this.controller,c(this,t1,"f")),new eC(()=>n(t),this.controller,c(this,t1,"f"))]}toReadableStream(){let e,t=this;return H({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:r,done:n}=await e.next();if(n)return t.close();let i=e_(JSON.stringify(r)+"\n");t.enqueue(i)}catch(e){t.error(e)}},async cancel(){await e.return?.()}})}}async function*eP(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new f("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new f("Attempted to iterate over a response with no body")}let r=new ez,n=new ew;for await(let t of ej(X(e.body)))for(let e of n.decode(t)){let t=r.decode(e);t&&(yield t)}for(let e of n.flush()){let t=r.decode(e);t&&(yield t)}}async function*ej(e){let t=new Uint8Array;for await(let r of e){let e;if(null==r)continue;let n=r instanceof ArrayBuffer?new Uint8Array(r):"string"==typeof r?e_(r):r,i=new Uint8Array(t.length+n.length);for(i.set(t),i.set(n,t.length),t=i;-1!==(e=ex(t));)yield t.slice(0,e),t=t.slice(e)}t.length>0&&(yield t)}class ez{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=eR(e,":");return n.startsWith(" ")&&(n=n.substring(1)),"event"===t?this.event=n:"data"===t&&this.data.push(n),null}}function eR(e,t){let r=e.indexOf(t);return -1!==r?[e.substring(0,r),t,e.substring(r+t.length)]:[e,"",""]}async function eM(e,t){let{response:r,requestLogID:n,retryOfRequestLogID:i,startTime:a}=t,s=await (async()=>{if(t.options.stream)return(eT(e).debug("response",r.status,r.url,r.headers,r.body),t.options.__streamClass)?t.options.__streamClass.fromSSEResponse(r,t.controller,e):eC.fromSSEResponse(r,t.controller,e);if(204===r.status)return null;if(t.options.__binaryResponse)return r;let n=r.headers.get("content-type"),i=n?.split(";")[0]?.trim();return i?.includes("application/json")||i?.endsWith("+json")?eL(await r.json(),r):await r.text()})();return eT(e).debug(`[${n}] response parsed`,eN({retryOfRequestLogID:i,url:r.url,status:r.status,body:s,durationMs:Date.now()-a})),s}function eL(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class eZ extends Promise{constructor(e,t,r=eM){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=r,t2.set(this,void 0),u(this,t2,e,"f")}_thenUnwrap(e){return new eZ(c(this,t2,"f"),this.responsePromise,async(t,r)=>eL(e(await this.parseResponse(t,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(c(this,t2,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}t2=new WeakMap;class eD{constructor(e,t,r,n){t4.set(this,void 0),u(this,t4,e,"f"),this.options=n,this.response=t,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new f("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await c(this,t4,"f").requestAPIList(this.constructor,e)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(t4=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}}class eU extends eZ{constructor(e,t,r){super(e,t,async(e,t)=>new r(e,t.response,await eM(e,t),t.options))}async *[Symbol.asyncIterator](){for await(let e of(await this))yield e}}class eF extends eD{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class eB extends eD{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){let e=this.getPaginatedItems(),t=e[e.length-1]?.id;return t?{...this.options,query:{...j(this.options.query),after:t}}:null}}class eV extends eD{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){let e=this.last_id;return e?{...this.options,query:{...j(this.options.query),after:e}}:null}}let eJ=()=>{if("undefined"==typeof File){let{process:e}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof e?.versions?.node&&20>parseInt(e.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function eW(e,t,r){return eJ(),new File(e,t??"unknown_file",r)}function eq(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}let eK=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],eG=async(e,t)=>e2(e.body)?{...e,body:await eQ(e.body,t)}:e,eH=async(e,t)=>({...e,body:await eQ(e.body,t)}),eY=new WeakMap;function eX(e){let t="function"==typeof e?e:e.fetch,r=eY.get(t);if(r)return r;let n=(async()=>{try{let e="Response"in t?t.Response:(await t("data:,")).constructor,r=new FormData;if(r.toString()===await new e(r).text())return!1;return!0}catch{return!0}})();return eY.set(t,n),n}let eQ=async(e,t)=>{if(!await eX(t))throw TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let r=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>e4(r,e,t))),r},e0=e=>e instanceof Blob&&"name"in e,e1=e=>"object"==typeof e&&null!==e&&(e instanceof Response||eK(e)||e0(e)),e2=e=>{if(e1(e))return!0;if(Array.isArray(e))return e.some(e2);if(e&&"object"==typeof e){for(let t in e)if(e2(e[t]))return!0}return!1},e4=async(e,t,r)=>{if(void 0!==r){if(null==r)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if(r instanceof Response)e.append(t,eW([await r.blob()],eq(r)));else if(eK(r))e.append(t,eW([await new Response(Y(r)).blob()],eq(r)));else if(e0(r))e.append(t,r,eq(r));else if(Array.isArray(r))await Promise.all(r.map(r=>e4(e,t+"[]",r)));else if("object"==typeof r)await Promise.all(Object.entries(r).map(([r,n])=>e4(e,`${t}[${r}]`,n)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}},e6=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,e9=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&e6(e),e3=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob;async function e5(e,t,r){if(eJ(),e9(e=await e))return e instanceof File?e:eW([await e.arrayBuffer()],e.name);if(e3(e)){let n=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),eW(await e8(n),t,r)}let n=await e8(e);if(t||(t=eq(e)),!r?.type){let e=n.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(r={...r,type:e})}return eW(n,t,r)}async function e8(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(e6(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(eK(e))for await(let r of e)t.push(...await e8(r));else{let t=e?.constructor?.name;throw Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${e7(e)}`)}return t}function e7(e){if("object"!=typeof e||null===e)return"";let t=Object.getOwnPropertyNames(e);return`; props: [${t.map(e=>`"${e}"`).join(", ")}]`}class te{constructor(e){this._client=e}}function tt(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}let tr=Object.freeze(Object.create(null)),tn=((e=tt)=>function(t,...r){let n;if(1===t.length)return t[0];let i=!1,a=[],s=t.reduce((t,n,s)=>{/[?#]/.test(n)&&(i=!0);let o=r[s],l=(i?encodeURIComponent:e)(""+o);return s!==r.length&&(null==o||"object"==typeof o&&o.toString===Object.getPrototypeOf(Object.getPrototypeOf(o.hasOwnProperty??tr)??tr)?.toString)&&(l=o+"",a.push({start:t.length+n.length,length:l.length,error:`Value of type ${Object.prototype.toString.call(o).slice(8,-1)} is not a valid path parameter`})),t+n+(s===r.length?"":l)},""),o=s.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(n=l.exec(o));)a.push({start:n.index,length:n[0].length,error:`Value "${n[0]}" can't be safely passed as a path parameter`});if(a.sort((e,t)=>e.start-t.start),a.length>0){let e=0,t=a.reduce((t,r)=>{let n=" ".repeat(r.start-e),i="^".repeat(r.length);return e=r.start+r.length,t+n+i},"");throw new f(`Path parameters result in path with invalid segments:
${a.map(e=>e.error).join("\n")}
${s}
${t}`)}return s})(tt);class ti extends te{list(e,t={},r){return this._client.getAPIList(tn`/chat/completions/${e}/messages`,eB,{query:t,...r})}}function ta(e){return void 0!==e&&"function"in e&&void 0!==e.function}function ts(e,t){let r={...e};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),r}function to(e){return e?.$brand==="auto-parseable-response-format"}function tl(e){return e?.$brand==="auto-parseable-tool"}function tu(e,t){return t&&tf(t)?tc(e,t):{...e,choices:e.choices.map(e=>(tm(e.message.tool_calls),{...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}}function tc(e,t){let r=e.choices.map(e=>{if("length"===e.finish_reason)throw new E;if("content_filter"===e.finish_reason)throw new A;return tm(e.message.tool_calls),{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>tp(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?td(t,e.message.content):null}}});return{...e,choices:r}}function td(e,t){return e.response_format?.type!=="json_schema"?null:e.response_format?.type==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function tp(e,t){let r=e.tools?.find(e=>ta(e)&&e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:tl(r)?r.$parseRaw(t.function.arguments):r?.function.strict?JSON.parse(t.function.arguments):null}}}function th(e,t){if(!e||!("tools"in e)||!e.tools)return!1;let r=e.tools?.find(e=>ta(e)&&e.function?.name===t.function.name);return ta(r)&&(tl(r)||r?.function.strict||!1)}function tf(e){return!!to(e.response_format)||(e.tools?.some(e=>tl(e)||"function"===e.type&&!0===e.function.strict)??!1)}function tm(e){for(let t of e||[])if("function"!==t.type)throw new f(`Currently only \`function\` tool calls are supported; Received \`${t.type}\``)}function tg(e){for(let t of e??[]){if("function"!==t.type)throw new f(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new f(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}let ty=e=>e?.role==="assistant",tv=e=>e?.role==="tool";class t_{constructor(){t6.add(this),this.controller=new AbortController,t9.set(this,void 0),t3.set(this,()=>{}),t5.set(this,()=>{}),t8.set(this,void 0),t7.set(this,()=>{}),re.set(this,()=>{}),rt.set(this,{}),rr.set(this,!1),rn.set(this,!1),ri.set(this,!1),ra.set(this,!1),u(this,t9,new Promise((e,t)=>{u(this,t3,e,"f"),u(this,t5,t,"f")}),"f"),u(this,t8,new Promise((e,t)=>{u(this,t7,e,"f"),u(this,re,t,"f")}),"f"),c(this,t9,"f").catch(()=>{}),c(this,t8,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},c(this,t6,"m",rs).bind(this))},0)}_connected(){this.ended||(c(this,t3,"f").call(this),this._emit("connect"))}get ended(){return c(this,rr,"f")}get errored(){return c(this,rn,"f")}get aborted(){return c(this,ri,"f")}abort(){this.controller.abort()}on(e,t){return(c(this,rt,"f")[e]||(c(this,rt,"f")[e]=[])).push({listener:t}),this}off(e,t){let r=c(this,rt,"f")[e];if(!r)return this;let n=r.findIndex(e=>e.listener===t);return n>=0&&r.splice(n,1),this}once(e,t){return(c(this,rt,"f")[e]||(c(this,rt,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{u(this,ra,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){u(this,ra,!0,"f"),await c(this,t8,"f")}_emit(e,...t){if(c(this,rr,"f"))return;"end"===e&&(u(this,rr,!0,"f"),c(this,t7,"f").call(this));let r=c(this,rt,"f")[e];if(r&&(c(this,rt,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];c(this,ra,"f")||r?.length||Promise.reject(e),c(this,t5,"f").call(this,e),c(this,re,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];c(this,ra,"f")||r?.length||Promise.reject(e),c(this,t5,"f").call(this,e),c(this,re,"f").call(this,e),this._emit("end")}}_emitFinal(){}}function tb(e){return"function"==typeof e.parse}t9=new WeakMap,t3=new WeakMap,t5=new WeakMap,t8=new WeakMap,t7=new WeakMap,re=new WeakMap,rt=new WeakMap,rr=new WeakMap,rn=new WeakMap,ri=new WeakMap,ra=new WeakMap,t6=new WeakSet,rs=function(e){if(u(this,rn,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new g),e instanceof g)return u(this,ri,!0,"f"),this._emit("abort",e);if(e instanceof f)return this._emit("error",e);if(e instanceof Error){let t=new f(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new f(String(e)))};let tw=10;class tk extends t_{constructor(){super(...arguments),ro.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);let t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),tv(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(ty(e)&&e.tool_calls)for(let t of e.tool_calls)"function"===t.type&&this._emit("functionToolCall",t.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new f("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),c(this,ro,"m",rl).call(this)}async finalMessage(){return await this.done(),c(this,ro,"m",ru).call(this)}async finalFunctionToolCall(){return await this.done(),c(this,ro,"m",rc).call(this)}async finalFunctionToolCallResult(){return await this.done(),c(this,ro,"m",rd).call(this)}async totalUsage(){return await this.done(),c(this,ro,"m",rp).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let t=c(this,ro,"m",ru).call(this);t&&this._emit("finalMessage",t);let r=c(this,ro,"m",rl).call(this);r&&this._emit("finalContent",r);let n=c(this,ro,"m",rc).call(this);n&&this._emit("finalFunctionToolCall",n);let i=c(this,ro,"m",rd).call(this);null!=i&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",c(this,ro,"m",rp).call(this))}async _createChatCompletion(e,t,r){let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),c(this,ro,"m",rh).call(this,t);let i=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(tc(i,t))}async _runChatCompletion(e,t,r){for(let e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,r)}async _runTools(e,t,r){let n="tool",{tool_choice:i="auto",stream:a,...s}=t,o="string"!=typeof i&&"function"===i.type&&i?.function?.name,{maxChatCompletions:l=tw}=r||{},u=t.tools.map(e=>{if(tl(e)){if(!e.$callback)throw new f("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),d={};for(let e of u)"function"===e.type&&(d[e.function.name||e.function.function.name]=e.function);let p="tools"in t?u.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){let t=await this._createChatCompletion(e,{...s,tool_choice:i,tools:p,messages:[...this.messages]},r),a=t.choices[0]?.message;if(!a)throw new f("missing message in ChatCompletion response");if(!a.tool_calls?.length)break;for(let e of a.tool_calls){let t;if("function"!==e.type)continue;let r=e.id,{name:i,arguments:a}=e.function,s=d[i];if(s){if(o&&o!==i){let e=`Invalid tool_call: ${JSON.stringify(i)}. ${JSON.stringify(o)} requested. Please try again`;this._addMessage({role:n,tool_call_id:r,content:e});continue}}else{let e=`Invalid tool_call: ${JSON.stringify(i)}. Available options are: ${Object.keys(d).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:r,content:e});continue}try{t=tb(s)?await s.parse(a):a}catch(t){let e=t instanceof Error?t.message:String(t);this._addMessage({role:n,tool_call_id:r,content:e});continue}let l=await s.function(t,this),u=c(this,ro,"m",rf).call(this,l);if(this._addMessage({role:n,tool_call_id:r,content:u}),o)return}}}}ro=new WeakSet,rl=function(){return c(this,ro,"m",ru).call(this).content??null},ru=function(){let e=this.messages.length;for(;e-- >0;){let t=this.messages[e];if(ty(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new f("stream ended without producing a ChatCompletionMessage with role=assistant")},rc=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(ty(t)&&t?.tool_calls?.length)return t.tool_calls.filter(e=>"function"===e.type).at(-1)?.function}},rd=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(tv(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},rp=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},rh=function(e){if(null!=e.n&&e.n>1)throw new f("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},rf=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class tx extends tk{static runTools(e,t,r){let n=new tx,i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,i)),n}_addMessage(e,t=!0){super._addMessage(e,t),ty(e)&&e.content&&this._emit("content",e.content)}}let t$={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,ALL:511};class tS extends Error{}class tI extends Error{}function tE(e,t=t$.ALL){if("string"!=typeof e)throw TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw Error(`${e} is empty`);return tA(e.trim(),t)}let tA=(e,t)=>{let r=e.length,n=0,i=e=>{throw new tS(`${e} at position ${n}`)},a=e=>{throw new tI(`${e} at position ${n}`)},s=()=>(d(),n>=r&&i("Unexpected end of input"),'"'===e[n])?o():"{"===e[n]?l():"["===e[n]?u():"null"===e.substring(n,n+4)||t$.NULL&t&&r-n<4&&"null".startsWith(e.substring(n))?(n+=4,null):"true"===e.substring(n,n+4)||t$.BOOL&t&&r-n<4&&"true".startsWith(e.substring(n))?(n+=4,!0):"false"===e.substring(n,n+5)||t$.BOOL&t&&r-n<5&&"false".startsWith(e.substring(n))?(n+=5,!1):"Infinity"===e.substring(n,n+8)||t$.INFINITY&t&&r-n<8&&"Infinity".startsWith(e.substring(n))?(n+=8,1/0):"-Infinity"===e.substring(n,n+9)||t$.MINUS_INFINITY&t&&1<r-n&&r-n<9&&"-Infinity".startsWith(e.substring(n))?(n+=9,-1/0):"NaN"===e.substring(n,n+3)||t$.NAN&t&&r-n<3&&"NaN".startsWith(e.substring(n))?(n+=3,NaN):c(),o=()=>{let s=n,o=!1;for(n++;n<r&&('"'!==e[n]||o&&"\\"===e[n-1]);)o="\\"===e[n]&&!o,n++;if('"'==e.charAt(n))try{return JSON.parse(e.substring(s,++n-Number(o)))}catch(e){a(String(e))}else if(t$.STR&t)try{return JSON.parse(e.substring(s,n-Number(o))+'"')}catch(t){return JSON.parse(e.substring(s,e.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{n++,d();let a={};try{for(;"}"!==e[n];){if(d(),n>=r&&t$.OBJ&t)return a;let i=o();d(),n++;try{let e=s();Object.defineProperty(a,i,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(t$.OBJ&t)return a;throw e}d(),","===e[n]&&n++}}catch(e){if(t$.OBJ&t)return a;i("Expected '}' at end of object")}return n++,a},u=()=>{n++;let r=[];try{for(;"]"!==e[n];)r.push(s()),d(),","===e[n]&&n++}catch(e){if(t$.ARR&t)return r;i("Expected ']' at end of array")}return n++,r},c=()=>{if(0===n){"-"===e&&t$.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(e)}catch(r){if(t$.NUM&t)try{if("."===e[e.length-1])return JSON.parse(e.substring(0,e.lastIndexOf(".")));return JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}a(String(r))}}let s=n;for("-"===e[n]&&n++;e[n]&&!",]}".includes(e[n]);)n++;n!=r||t$.NUM&t||i("Unterminated number literal");try{return JSON.parse(e.substring(s,n))}catch(r){"-"===e.substring(s,n)&&t$.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(e.substring(s,e.lastIndexOf("e")))}catch(e){a(String(e))}}},d=()=>{for(;n<r&&" \n\r	".includes(e[n]);)n++};return s()},tO=e=>tE(e,t$.ALL^t$.NUM);class tT extends tk{constructor(e){super(),rm.add(this),rg.set(this,void 0),ry.set(this,void 0),rv.set(this,void 0),u(this,rg,e,"f"),u(this,ry,[],"f")}get currentChatCompletionSnapshot(){return c(this,rv,"f")}static fromReadableStream(e){let t=new tT(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){let n=new tT(t);return n._run(()=>n._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(e,t,r){super._createChatCompletion;let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),c(this,rm,"m",r_).call(this);let i=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});for await(let e of(this._connected(),i))c(this,rm,"m",rw).call(this,e);if(i.controller.signal?.aborted)throw new g;return this._addChatCompletion(c(this,rm,"m",r$).call(this))}async _fromReadableStream(e,t){let r,n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),c(this,rm,"m",r_).call(this),this._connected();let i=eC.fromReadableStream(e,this.controller);for await(let e of i)r&&r!==e.id&&this._addChatCompletion(c(this,rm,"m",r$).call(this)),c(this,rm,"m",rw).call(this,e),r=e.id;if(i.controller.signal?.aborted)throw new g;return this._addChatCompletion(c(this,rm,"m",r$).call(this))}[(rg=new WeakMap,ry=new WeakMap,rv=new WeakMap,rm=new WeakSet,r_=function(){this.ended||u(this,rv,void 0,"f")},rb=function(e){let t=c(this,ry,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},c(this,ry,"f")[e.index]=t),t},rw=function(e){if(this.ended)return;let t=c(this,rm,"m",rI).call(this,e);for(let r of(this._emit("chunk",e,t),e.choices)){let e=t.choices[r.index];null!=r.delta.content&&e.message?.role==="assistant"&&e.message?.content&&(this._emit("content",r.delta.content,e.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=r.delta.refusal&&e.message?.role==="assistant"&&e.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:e.message.refusal}),r.logprobs?.content!=null&&e.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:e.logprobs?.content??[]}),r.logprobs?.refusal!=null&&e.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});let n=c(this,rm,"m",rb).call(this,e);for(let t of(e.finish_reason&&(c(this,rm,"m",rx).call(this,e),null!=n.current_tool_call_index&&c(this,rm,"m",rk).call(this,e,n.current_tool_call_index)),r.delta.tool_calls??[]))n.current_tool_call_index!==t.index&&(c(this,rm,"m",rx).call(this,e),null!=n.current_tool_call_index&&c(this,rm,"m",rk).call(this,e,n.current_tool_call_index)),n.current_tool_call_index=t.index;for(let t of r.delta.tool_calls??[]){let r=e.message.tool_calls?.[t.index];r?.type&&(r?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:r.function?.name,index:t.index,arguments:r.function.arguments,parsed_arguments:r.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):r?.type)}}},rk=function(e,t){if(c(this,rm,"m",rb).call(this,e).done_tool_calls.has(t))return;let r=e.message.tool_calls?.[t];if(!r)throw Error("no tool call snapshot");if(!r.type)throw Error("tool call snapshot missing `type`");if("function"===r.type){let e=c(this,rg,"f")?.tools?.find(e=>ta(e)&&e.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:t,arguments:r.function.arguments,parsed_arguments:tl(e)?e.$parseRaw(r.function.arguments):e?.function.strict?JSON.parse(r.function.arguments):null})}else r.type},rx=function(e){let t=c(this,rm,"m",rb).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;let r=c(this,rm,"m",rS).call(this);this._emit("content.done",{content:e.message.content,parsed:r?r.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},r$=function(){if(this.ended)throw new f("stream has ended, this shouldn't happen");let e=c(this,rv,"f");if(!e)throw new f("request ended without sending any chunks");return u(this,rv,void 0,"f"),u(this,ry,[],"f"),tN(e,c(this,rg,"f"))},rS=function(){let e=c(this,rg,"f")?.response_format;return to(e)?e:null},rI=function(e){var t,r,n,i;let a=c(this,rv,"f"),{choices:s,...o}=e;for(let{delta:s,finish_reason:l,index:d,logprobs:p=null,...h}of(a?Object.assign(a,o):a=u(this,rv,{...o,choices:[]},"f"),e.choices)){let e=a.choices[d];if(e||(e=a.choices[d]={finish_reason:l,index:d,message:{},logprobs:p,...h}),p)if(e.logprobs){let{content:n,refusal:i,...a}=p;Object.assign(e.logprobs,a),n&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...n)),i&&((r=e.logprobs).refusal??(r.refusal=[]),e.logprobs.refusal.push(...i))}else e.logprobs=Object.assign({},p);if(l&&(e.finish_reason=l,c(this,rg,"f")&&tf(c(this,rg,"f")))){if("length"===l)throw new E;if("content_filter"===l)throw new A}if(Object.assign(e,h),!s)continue;let{content:o,refusal:u,function_call:f,role:m,tool_calls:g,...y}=s;if(Object.assign(e.message,y),u&&(e.message.refusal=(e.message.refusal||"")+u),m&&(e.message.role=m),f&&(e.message.function_call?(f.name&&(e.message.function_call.name=f.name),f.arguments&&((n=e.message.function_call).arguments??(n.arguments=""),e.message.function_call.arguments+=f.arguments)):e.message.function_call=f),o&&(e.message.content=(e.message.content||"")+o,!e.message.refusal&&c(this,rm,"m",rS).call(this)&&(e.message.parsed=tO(e.message.content))),g)for(let{index:t,id:r,type:n,function:a,...s}of(e.message.tool_calls||(e.message.tool_calls=[]),g)){let o=(i=e.message.tool_calls)[t]??(i[t]={});Object.assign(o,s),r&&(o.id=r),n&&(o.type=n),a&&(o.function??(o.function={name:a.name??"",arguments:""})),a?.name&&(o.function.name=a.name),a?.arguments&&(o.function.arguments+=a.arguments,th(c(this,rg,"f"),o)&&(o.function.parsed_arguments=tO(o.function.arguments)))}}return a},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("chunk",r=>{let n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{for(let e of(r=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),this.on("error",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new eC(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function tN(e,t){let{id:r,choices:n,created:i,model:a,system_fingerprint:s,...o}=e;return tu({...o,id:r,choices:n.map(({message:t,finish_reason:r,index:n,logprobs:i,...a})=>{if(!r)throw new f(`missing finish_reason for choice ${n}`);let{content:s=null,function_call:o,tool_calls:l,...u}=t,c=t.role;if(!c)throw new f(`missing role for choice ${n}`);if(o){let{arguments:e,name:l}=o;if(null==e)throw new f(`missing function_call.arguments for choice ${n}`);if(!l)throw new f(`missing function_call.name for choice ${n}`);return{...a,message:{content:s,function_call:{arguments:e,name:l},role:c,refusal:t.refusal??null},finish_reason:r,index:n,logprobs:i}}return l?{...a,index:n,finish_reason:r,logprobs:i,message:{...u,role:c,content:s,refusal:t.refusal??null,tool_calls:l.map((t,r)=>{let{function:i,type:a,id:s,...o}=t,{arguments:l,name:u,...c}=i||{};if(null==s)throw new f(`missing choices[${n}].tool_calls[${r}].id
${tC(e)}`);if(null==a)throw new f(`missing choices[${n}].tool_calls[${r}].type
${tC(e)}`);if(null==u)throw new f(`missing choices[${n}].tool_calls[${r}].function.name
${tC(e)}`);if(null==l)throw new f(`missing choices[${n}].tool_calls[${r}].function.arguments
${tC(e)}`);return{...o,id:s,type:a,function:{...c,name:u,arguments:l}}})}}:{...a,message:{...u,content:s,role:c,refusal:t.refusal??null},finish_reason:r,index:n,logprobs:i}}),created:i,model:a,object:"chat.completion",...s?{system_fingerprint:s}:{}},t)}function tC(e){return JSON.stringify(e)}class tP extends tT{static fromReadableStream(e){let t=new tP(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,r){let n=new tP(t),i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,i)),n}}class tj extends te{constructor(){super(...arguments),this.messages=new ti(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(tn`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(tn`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/chat/completions",eB,{query:e,...t})}delete(e,t){return this._client.delete(tn`/chat/completions/${e}`,t)}parse(e,t){return tg(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(t=>tc(t,e))}runTools(e,t){return e.stream?tP.runTools(this._client,e,t):tx.runTools(this._client,e,t)}stream(e,t){return tT.createChatCompletion(this._client,e,t)}}tj.Messages=ti;class tz extends te{constructor(){super(...arguments),this.completions=new tj(this._client)}}tz.Completions=tj;let tR=Symbol("brand.privateNullableHeaders");function*tM(e){let t;if(!e)return;if(tR in e){let{values:t,nulls:r}=e;for(let e of(yield*t.entries(),r))yield[e,null];return}let r=!1;for(let n of(e instanceof Headers?t=e.entries():P(e)?t=e:(r=!0,t=Object.entries(e??{})),t)){let e=n[0];if("string"!=typeof e)throw TypeError("expected header name to be a string");let t=P(n[1])?n[1]:[n[1]],i=!1;for(let n of t)void 0!==n&&(r&&!i&&(i=!0,yield[e,null]),yield[e,n])}}let tL=e=>{let t=new Headers,r=new Set;for(let n of e){let e=new Set;for(let[i,a]of tM(n)){let n=i.toLowerCase();e.has(n)||(t.delete(i),e.add(n)),null===a?(t.delete(i),r.add(n)):(t.append(i,a),r.delete(n))}}return{[tR]:!0,values:t,nulls:r}};class tZ extends te{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:tL([{Accept:"application/octet-stream"},t?.headers]),__binaryResponse:!0})}}class tD extends te{create(e,t){return this._client.post("/audio/transcriptions",eH({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class tU extends te{create(e,t){return this._client.post("/audio/translations",eH({body:e,...t,__metadata:{model:e.model}},this._client))}}class tF extends te{constructor(){super(...arguments),this.transcriptions=new tD(this._client),this.translations=new tU(this._client),this.speech=new tZ(this._client)}}tF.Transcriptions=tD,tF.Translations=tU,tF.Speech=tZ;class tB extends te{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(tn`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",eB,{query:e,...t})}cancel(e,t){return this._client.post(tn`/batches/${e}/cancel`,t)}}class tV extends te{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(tn`/assistants/${e}`,{...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,r){return this._client.post(tn`/assistants/${e}`,{body:t,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},t){return this._client.getAPIList("/assistants",eB,{query:e,...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(tn`/assistants/${e}`,{...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class tJ extends te{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class tW extends te{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class tq extends te{constructor(){super(...arguments),this.sessions=new tJ(this._client),this.transcriptionSessions=new tW(this._client)}}tq.Sessions=tJ,tq.TranscriptionSessions=tW;class tK extends te{create(e,t){return this._client.post("/chatkit/sessions",{body:e,...t,headers:tL([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}cancel(e,t){return this._client.post(tn`/chatkit/sessions/${e}/cancel`,{...t,headers:tL([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}}class tG extends te{retrieve(e,t){return this._client.get(tn`/chatkit/threads/${e}`,{...t,headers:tL([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}list(e={},t){return this._client.getAPIList("/chatkit/threads",eV,{query:e,...t,headers:tL([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}delete(e,t){return this._client.delete(tn`/chatkit/threads/${e}`,{...t,headers:tL([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}listItems(e,t={},r){return this._client.getAPIList(tn`/chatkit/threads/${e}/items`,eV,{query:t,...r,headers:tL([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}}class tH extends te{constructor(){super(...arguments),this.sessions=new tK(this._client),this.threads=new tG(this._client)}}tH.Sessions=tK,tH.Threads=tG;class tY extends te{create(e,t,r){return this._client.post(tn`/threads/${e}/messages`,{body:t,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,t,r){let{thread_id:n}=t;return this._client.get(tn`/threads/${n}/messages/${e}`,{...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,t,r){let{thread_id:n,...i}=t;return this._client.post(tn`/threads/${n}/messages/${e}`,{body:i,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t={},r){return this._client.getAPIList(tn`/threads/${e}/messages`,eB,{query:t,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,t,r){let{thread_id:n}=t;return this._client.delete(tn`/threads/${n}/messages/${e}`,{...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class tX extends te{retrieve(e,t,r){let{thread_id:n,run_id:i,...a}=t;return this._client.get(tn`/threads/${n}/runs/${i}/steps/${e}`,{query:a,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t,r){let{thread_id:n,...i}=t;return this._client.getAPIList(tn`/threads/${n}/runs/${e}/steps`,eB,{query:i,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}var tQ,t0,t1,t2,t4,t6,t9,t3,t5,t8,t7,re,rt,rr,rn,ri,ra,rs,ro,rl,ru,rc,rd,rp,rh,rf,rm,rg,ry,rv,r_,rb,rw,rk,rx,r$,rS,rI,rE,rA,rO,rT,rN,rC,rP,rj,rz,rR,rM,rL,rZ,rD,rU,rF,rB,rV,rJ,rW,rq,rK,rG,rH,rY,rX,rQ,r0,r1,r2,r4,r6,r9,r3,r5,r8,r7,ne,nt=r(49641).Buffer;let nr=e=>{if(void 0!==nt){let t=nt.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}{let t=atob(e),r=t.length,n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=t.charCodeAt(e);return Array.from(new Float32Array(n.buffer))}},nn=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0;class ni extends t_{constructor(){super(...arguments),rE.add(this),rO.set(this,[]),rT.set(this,{}),rN.set(this,{}),rC.set(this,void 0),rP.set(this,void 0),rj.set(this,void 0),rz.set(this,void 0),rR.set(this,void 0),rM.set(this,void 0),rL.set(this,void 0),rZ.set(this,void 0),rD.set(this,void 0)}[(rO=new WeakMap,rT=new WeakMap,rN=new WeakMap,rC=new WeakMap,rP=new WeakMap,rj=new WeakMap,rz=new WeakMap,rR=new WeakMap,rM=new WeakMap,rL=new WeakMap,rZ=new WeakMap,rD=new WeakMap,rE=new WeakSet,Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("event",r=>{let n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{for(let e of(r=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),this.on("error",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let t=new rA;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){let r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();let n=eC.fromReadableStream(e,this.controller);for await(let e of n)c(this,rE,"m",rU).call(this,e);if(n.controller.signal?.aborted)throw new g;return this._addRun(c(this,rE,"m",rF).call(this))}toReadableStream(){return new eC(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,n){let i=new rA;return i._run(()=>i._runToolAssistantStream(e,t,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,t,r,n){let i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let a={...r,stream:!0},s=await e.submitToolOutputs(t,a,{...n,signal:this.controller.signal});for await(let e of(this._connected(),s))c(this,rE,"m",rU).call(this,e);if(s.controller.signal?.aborted)throw new g;return this._addRun(c(this,rE,"m",rF).call(this))}static createThreadAssistantStream(e,t,r){let n=new rA;return n._run(()=>n._threadAssistantStream(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(e,t,r,n){let i=new rA;return i._run(()=>i._runAssistantStream(e,t,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return c(this,rL,"f")}currentRun(){return c(this,rZ,"f")}currentMessageSnapshot(){return c(this,rC,"f")}currentRunStepSnapshot(){return c(this,rD,"f")}async finalRunSteps(){return await this.done(),Object.values(c(this,rT,"f"))}async finalMessages(){return await this.done(),Object.values(c(this,rN,"f"))}async finalRun(){if(await this.done(),!c(this,rP,"f"))throw Error("Final run was not received.");return c(this,rP,"f")}async _createThreadAssistantStream(e,t,r){let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));let i={...t,stream:!0},a=await e.createAndRun(i,{...r,signal:this.controller.signal});for await(let e of(this._connected(),a))c(this,rE,"m",rU).call(this,e);if(a.controller.signal?.aborted)throw new g;return this._addRun(c(this,rE,"m",rF).call(this))}async _createAssistantStream(e,t,r,n){let i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let a={...r,stream:!0},s=await e.create(t,a,{...n,signal:this.controller.signal});for await(let e of(this._connected(),s))c(this,rE,"m",rU).call(this,e);if(s.controller.signal?.aborted)throw new g;return this._addRun(c(this,rE,"m",rF).call(this))}static accumulateDelta(e,t){for(let[r,n]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=n;continue}let t=e[r];if(null==t||"index"===r||"type"===r){e[r]=n;continue}if("string"==typeof t&&"string"==typeof n)t+=n;else if("number"==typeof t&&"number"==typeof n)t+=n;else if(M(t)&&M(n))t=this.accumulateDelta(t,n);else if(Array.isArray(t)&&Array.isArray(n)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...n);continue}for(let e of n){if(!M(e))throw Error(`Expected array delta entry to be an object but got: ${e}`);let r=e.index;if(null==r)throw console.error(e),Error("Expected array delta entry to have an `index` property");if("number"!=typeof r)throw Error(`Expected array delta entry \`index\` property to be a number but got ${r}`);let n=t[r];null==n?t.push(e):t[r]=this.accumulateDelta(n,e)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${n}, accValue: ${t}`);e[r]=t}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,n){return await this._createAssistantStream(t,e,r,n)}async _runToolAssistantStream(e,t,r,n){return await this._createToolAssistantStream(t,e,r,n)}}rA=ni,rU=function(e){if(!this.ended)switch(u(this,rL,e,"f"),c(this,rE,"m",rJ).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":c(this,rE,"m",rG).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":c(this,rE,"m",rV).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":c(this,rE,"m",rB).call(this,e);break;case"error":throw Error("Encountered an error event in event processing - errors should be processed earlier")}},rF=function(){if(this.ended)throw new f("stream has ended, this shouldn't happen");if(!c(this,rP,"f"))throw Error("Final run has not been received");return c(this,rP,"f")},rB=function(e){let[t,r]=c(this,rE,"m",rq).call(this,e,c(this,rC,"f"));for(let e of(u(this,rC,t,"f"),c(this,rN,"f")[t.id]=t,r)){let r=t.content[e.index];r?.type=="text"&&this._emit("textCreated",r.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(let r of e.data.delta.content){if("text"==r.type&&r.text){let e=r.text,n=t.content[r.index];if(n&&"text"==n.type)this._emit("textDelta",e,n.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=c(this,rj,"f")){if(c(this,rz,"f"))switch(c(this,rz,"f").type){case"text":this._emit("textDone",c(this,rz,"f").text,c(this,rC,"f"));break;case"image_file":this._emit("imageFileDone",c(this,rz,"f").image_file,c(this,rC,"f"))}u(this,rj,r.index,"f")}u(this,rz,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==c(this,rj,"f")){let t=e.data.content[c(this,rj,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,c(this,rC,"f"));break;case"text":this._emit("textDone",t.text,c(this,rC,"f"))}}c(this,rC,"f")&&this._emit("messageDone",e.data),u(this,rC,void 0,"f")}},rV=function(e){let t=c(this,rE,"m",rW).call(this,e);switch(u(this,rD,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let r=e.data.delta;if(r.step_details&&"tool_calls"==r.step_details.type&&r.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(let e of r.step_details.tool_calls)e.index==c(this,rR,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(c(this,rM,"f")&&this._emit("toolCallDone",c(this,rM,"f")),u(this,rR,e.index,"f"),u(this,rM,t.step_details.tool_calls[e.index],"f"),c(this,rM,"f")&&this._emit("toolCallCreated",c(this,rM,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":u(this,rD,void 0,"f"),"tool_calls"==e.data.step_details.type&&c(this,rM,"f")&&(this._emit("toolCallDone",c(this,rM,"f")),u(this,rM,void 0,"f")),this._emit("runStepDone",e.data,t)}},rJ=function(e){c(this,rO,"f").push(e),this._emit("event",e)},rW=function(e){switch(e.event){case"thread.run.step.created":return c(this,rT,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=c(this,rT,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){let n=rA.accumulateDelta(t,r.delta);c(this,rT,"f")[e.data.id]=n}return c(this,rT,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":c(this,rT,"f")[e.data.id]=e.data}if(c(this,rT,"f")[e.data.id])return c(this,rT,"f")[e.data.id];throw Error("No snapshot available")},rq=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let n=e.data;if(n.delta.content)for(let e of n.delta.content)if(e.index in t.content){let r=t.content[e.index];t.content[e.index]=c(this,rE,"m",rK).call(this,e,r)}else t.content[e.index]=e,r.push(e);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},rK=function(e,t){return rA.accumulateDelta(t,e)},rG=function(e){switch(u(this,rZ,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":u(this,rP,e.data,"f"),c(this,rM,"f")&&(this._emit("toolCallDone",c(this,rM,"f")),u(this,rM,void 0,"f"))}};class na extends te{constructor(){super(...arguments),this.steps=new tX(this._client)}create(e,t,r){let{include:n,...i}=t;return this._client.post(tn`/threads/${e}/runs`,{query:{include:n},body:i,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:t.stream??!1})}retrieve(e,t,r){let{thread_id:n}=t;return this._client.get(tn`/threads/${n}/runs/${e}`,{...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,t,r){let{thread_id:n,...i}=t;return this._client.post(tn`/threads/${n}/runs/${e}`,{body:i,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t={},r){return this._client.getAPIList(tn`/threads/${e}/runs`,eB,{query:t,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,t,r){let{thread_id:n}=t;return this._client.post(tn`/threads/${n}/runs/${e}/cancel`,{...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,t,r){let n=await this.create(e,t,r);return await this.poll(n.id,{thread_id:e},r)}createAndStream(e,t,r){return ni.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){let n=tL([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:i,response:a}=await this.retrieve(e,t,{...r,headers:{...r?.headers,...n}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let s=5e3;if(r?.pollIntervalMs)s=r.pollIntervalMs;else{let e=a.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(s=t)}}await D(s);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,t,r){return ni.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r){let{thread_id:n,...i}=t;return this._client.post(tn`/threads/${n}/runs/${e}/submit_tool_outputs`,{body:i,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,r){let n=await this.submitToolOutputs(e,t,r);return await this.poll(n.id,t,r)}submitToolOutputsStream(e,t,r){return ni.createToolAssistantStream(e,this._client.beta.threads.runs,t,r)}}na.Steps=tX;class ns extends te{constructor(){super(...arguments),this.runs=new na(this._client),this.messages=new tY(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(tn`/threads/${e}`,{...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,r){return this._client.post(tn`/threads/${e}`,{body:t,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,t){return this._client.delete(tn`/threads/${e}`,{...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){let r=await this.createAndRun(e,t);return await this.runs.poll(r.id,{thread_id:r.thread_id},t)}createAndRunStream(e,t){return ni.createThreadAssistantStream(e,this._client.beta.threads,t)}}ns.Runs=na,ns.Messages=tY;class no extends te{constructor(){super(...arguments),this.realtime=new tq(this._client),this.chatkit=new tH(this._client),this.assistants=new tV(this._client),this.threads=new ns(this._client)}}no.Realtime=tq,no.ChatKit=tH,no.Assistants=tV,no.Threads=ns;class nl extends te{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class nu extends te{retrieve(e,t,r){let{container_id:n}=t;return this._client.get(tn`/containers/${n}/files/${e}/content`,{...r,headers:tL([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}class nc extends te{constructor(){super(...arguments),this.content=new nu(this._client)}create(e,t,r){return this._client.post(tn`/containers/${e}/files`,eH({body:t,...r},this._client))}retrieve(e,t,r){let{container_id:n}=t;return this._client.get(tn`/containers/${n}/files/${e}`,r)}list(e,t={},r){return this._client.getAPIList(tn`/containers/${e}/files`,eB,{query:t,...r})}delete(e,t,r){let{container_id:n}=t;return this._client.delete(tn`/containers/${n}/files/${e}`,{...r,headers:tL([{Accept:"*/*"},r?.headers])})}}nc.Content=nu;class nd extends te{constructor(){super(...arguments),this.files=new nc(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(tn`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",eB,{query:e,...t})}delete(e,t){return this._client.delete(tn`/containers/${e}`,{...t,headers:tL([{Accept:"*/*"},t?.headers])})}}nd.Files=nc;class np extends te{create(e,t,r){let{include:n,...i}=t;return this._client.post(tn`/conversations/${e}/items`,{query:{include:n},body:i,...r})}retrieve(e,t,r){let{conversation_id:n,...i}=t;return this._client.get(tn`/conversations/${n}/items/${e}`,{query:i,...r})}list(e,t={},r){return this._client.getAPIList(tn`/conversations/${e}/items`,eV,{query:t,...r})}delete(e,t,r){let{conversation_id:n}=t;return this._client.delete(tn`/conversations/${n}/items/${e}`,r)}}class nh extends te{constructor(){super(...arguments),this.items=new np(this._client)}create(e={},t){return this._client.post("/conversations",{body:e,...t})}retrieve(e,t){return this._client.get(tn`/conversations/${e}`,t)}update(e,t,r){return this._client.post(tn`/conversations/${e}`,{body:t,...r})}delete(e,t){return this._client.delete(tn`/conversations/${e}`,t)}}nh.Items=np;class nf extends te{create(e,t){let r=!!e.encoding_format,n=r?e.encoding_format:"base64";r&&eT(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);let i=this._client.post("/embeddings",{body:{...e,encoding_format:n},...t});return r?i:(eT(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{let t=e.embedding;e.embedding=nr(t)}),e)))}}class nm extends te{retrieve(e,t,r){let{eval_id:n,run_id:i}=t;return this._client.get(tn`/evals/${n}/runs/${i}/output_items/${e}`,r)}list(e,t,r){let{eval_id:n,...i}=t;return this._client.getAPIList(tn`/evals/${n}/runs/${e}/output_items`,eB,{query:i,...r})}}class ng extends te{constructor(){super(...arguments),this.outputItems=new nm(this._client)}create(e,t,r){return this._client.post(tn`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){let{eval_id:n}=t;return this._client.get(tn`/evals/${n}/runs/${e}`,r)}list(e,t={},r){return this._client.getAPIList(tn`/evals/${e}/runs`,eB,{query:t,...r})}delete(e,t,r){let{eval_id:n}=t;return this._client.delete(tn`/evals/${n}/runs/${e}`,r)}cancel(e,t,r){let{eval_id:n}=t;return this._client.post(tn`/evals/${n}/runs/${e}`,r)}}ng.OutputItems=nm;class ny extends te{constructor(){super(...arguments),this.runs=new ng(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(tn`/evals/${e}`,t)}update(e,t,r){return this._client.post(tn`/evals/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/evals",eB,{query:e,...t})}delete(e,t){return this._client.delete(tn`/evals/${e}`,t)}}ny.Runs=ng;class nv extends te{create(e,t){return this._client.post("/files",eH({body:e,...t},this._client))}retrieve(e,t){return this._client.get(tn`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",eB,{query:e,...t})}delete(e,t){return this._client.delete(tn`/files/${e}`,t)}content(e,t){return this._client.get(tn`/files/${e}/content`,{...t,headers:tL([{Accept:"application/binary"},t?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=18e5}={}){let n=new Set(["processed","error","deleted"]),i=Date.now(),a=await this.retrieve(e);for(;!a.status||!n.has(a.status);)if(await D(t),a=await this.retrieve(e),Date.now()-i>r)throw new v({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}}class n_ extends te{}class nb extends te{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}}class nw extends te{constructor(){super(...arguments),this.graders=new nb(this._client)}}nw.Graders=nb;class nk extends te{create(e,t,r){return this._client.getAPIList(tn`/fine_tuning/checkpoints/${e}/permissions`,eF,{body:t,method:"post",...r})}retrieve(e,t={},r){return this._client.get(tn`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}delete(e,t,r){let{fine_tuned_model_checkpoint:n}=t;return this._client.delete(tn`/fine_tuning/checkpoints/${n}/permissions/${e}`,r)}}class nx extends te{constructor(){super(...arguments),this.permissions=new nk(this._client)}}nx.Permissions=nk;class n$ extends te{list(e,t={},r){return this._client.getAPIList(tn`/fine_tuning/jobs/${e}/checkpoints`,eB,{query:t,...r})}}class nS extends te{constructor(){super(...arguments),this.checkpoints=new n$(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(tn`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",eB,{query:e,...t})}cancel(e,t){return this._client.post(tn`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return this._client.getAPIList(tn`/fine_tuning/jobs/${e}/events`,eB,{query:t,...r})}pause(e,t){return this._client.post(tn`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(tn`/fine_tuning/jobs/${e}/resume`,t)}}nS.Checkpoints=n$;class nI extends te{constructor(){super(...arguments),this.methods=new n_(this._client),this.jobs=new nS(this._client),this.checkpoints=new nx(this._client),this.alpha=new nw(this._client)}}nI.Methods=n_,nI.Jobs=nS,nI.Checkpoints=nx,nI.Alpha=nw;class nE extends te{}class nA extends te{constructor(){super(...arguments),this.graderModels=new nE(this._client)}}nA.GraderModels=nE;class nO extends te{createVariation(e,t){return this._client.post("/images/variations",eH({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",eH({body:e,...t,stream:e.stream??!1},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t,stream:e.stream??!1})}}class nT extends te{retrieve(e,t){return this._client.get(tn`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",eF,e)}delete(e,t){return this._client.delete(tn`/models/${e}`,t)}}class nN extends te{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class nC extends te{accept(e,t,r){return this._client.post(tn`/realtime/calls/${e}/accept`,{body:t,...r,headers:tL([{Accept:"*/*"},r?.headers])})}hangup(e,t){return this._client.post(tn`/realtime/calls/${e}/hangup`,{...t,headers:tL([{Accept:"*/*"},t?.headers])})}refer(e,t,r){return this._client.post(tn`/realtime/calls/${e}/refer`,{body:t,...r,headers:tL([{Accept:"*/*"},r?.headers])})}reject(e,t={},r){return this._client.post(tn`/realtime/calls/${e}/reject`,{body:t,...r,headers:tL([{Accept:"*/*"},r?.headers])})}}class nP extends te{create(e,t){return this._client.post("/realtime/client_secrets",{body:e,...t})}}class nj extends te{constructor(){super(...arguments),this.clientSecrets=new nP(this._client),this.calls=new nC(this._client)}}function nz(e,t){return t&&nL(t)?nR(e,t):{...e,output_parsed:null,output:e.output.map(e=>"function_call"===e.type?{...e,parsed_arguments:null}:"message"===e.type?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}}function nR(e,t){let r=e.output.map(e=>{if("function_call"===e.type)return{...e,parsed_arguments:nU(t,e)};if("message"===e.type){let r=e.content.map(e=>"output_text"===e.type?{...e,parsed:nM(t,e.text)}:e);return{...e,content:r}}return e}),n=Object.assign({},e,{output:r});return Object.getOwnPropertyDescriptor(e,"output_text")||nF(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(let e of n.output)if("message"===e.type){for(let t of e.content)if("output_text"===t.type&&null!==t.parsed)return t.parsed}return null}}),n}function nM(e,t){return e.text?.format?.type!=="json_schema"?null:"$parseRaw"in e.text?.format?(e.text?.format).$parseRaw(t):JSON.parse(t)}function nL(e){return!!to(e.text?.format)}function nZ(e){return e?.$brand==="auto-parseable-tool"}function nD(e,t){return e.find(e=>"function"===e.type&&e.name===t)}function nU(e,t){let r=nD(e.tools??[],t.name);return{...t,...t,parsed_arguments:nZ(r)?r.$parseRaw(t.arguments):r?.strict?JSON.parse(t.arguments):null}}function nF(e){let t=[];for(let r of e.output)if("message"===r.type)for(let e of r.content)"output_text"===e.type&&t.push(e.text);e.output_text=t.join("")}nj.ClientSecrets=nP,nj.Calls=nC;class nB extends t_{constructor(e){super(),rH.add(this),rY.set(this,void 0),rX.set(this,void 0),rQ.set(this,void 0),u(this,rY,e,"f")}static createResponse(e,t,r){let n=new nB(t);return n._run(()=>n._createOrRetrieveResponse(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createOrRetrieveResponse(e,t,r){let n,i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),c(this,rH,"m",r0).call(this);let a=null;for await(let i of("response_id"in t?(n=await e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),a=t.starting_after??null):n=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal}),this._connected(),n))c(this,rH,"m",r1).call(this,i,a);if(n.controller.signal?.aborted)throw new g;return c(this,rH,"m",r2).call(this)}[(rY=new WeakMap,rX=new WeakMap,rQ=new WeakMap,rH=new WeakSet,r0=function(){this.ended||u(this,rX,void 0,"f")},r1=function(e,t){if(this.ended)return;let r=(e,r)=>{(null==t||r.sequence_number>t)&&this._emit(e,r)},n=c(this,rH,"m",r4).call(this,e);switch(r("event",e),e.type){case"response.output_text.delta":{let t=n.output[e.output_index];if(!t)throw new f(`missing output at index ${e.output_index}`);if("message"===t.type){let n=t.content[e.content_index];if(!n)throw new f(`missing content at index ${e.content_index}`);if("output_text"!==n.type)throw new f(`expected content to be 'output_text', got ${n.type}`);r("response.output_text.delta",{...e,snapshot:n.text})}break}case"response.function_call_arguments.delta":{let t=n.output[e.output_index];if(!t)throw new f(`missing output at index ${e.output_index}`);"function_call"===t.type&&r("response.function_call_arguments.delta",{...e,snapshot:t.arguments});break}default:r(e.type,e)}},r2=function(){if(this.ended)throw new f("stream has ended, this shouldn't happen");let e=c(this,rX,"f");if(!e)throw new f("request ended without sending any events");u(this,rX,void 0,"f");let t=nV(e,c(this,rY,"f"));return u(this,rQ,t,"f"),t},r4=function(e){let t=c(this,rX,"f");if(!t){if("response.created"!==e.type)throw new f(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return u(this,rX,e.response,"f")}switch(e.type){case"response.output_item.added":t.output.push(e.item);break;case"response.content_part.added":{let r=t.output[e.output_index];if(!r)throw new f(`missing output at index ${e.output_index}`);let n=r.type,i=e.part;"message"===n&&"reasoning_text"!==i.type?r.content.push(i):"reasoning"===n&&"reasoning_text"===i.type&&(r.content||(r.content=[]),r.content.push(i));break}case"response.output_text.delta":{let r=t.output[e.output_index];if(!r)throw new f(`missing output at index ${e.output_index}`);if("message"===r.type){let t=r.content[e.content_index];if(!t)throw new f(`missing content at index ${e.content_index}`);if("output_text"!==t.type)throw new f(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case"response.function_call_arguments.delta":{let r=t.output[e.output_index];if(!r)throw new f(`missing output at index ${e.output_index}`);"function_call"===r.type&&(r.arguments+=e.delta);break}case"response.reasoning_text.delta":{let r=t.output[e.output_index];if(!r)throw new f(`missing output at index ${e.output_index}`);if("reasoning"===r.type){let t=r.content?.[e.content_index];if(!t)throw new f(`missing content at index ${e.content_index}`);if("reasoning_text"!==t.type)throw new f(`expected content to be 'reasoning_text', got ${t.type}`);t.text+=e.delta}break}case"response.completed":u(this,rX,e.response,"f")}return t},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("event",r=>{let n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{for(let e of(r=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),this.on("error",e=>{for(let n of(r=!0,t))n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let e=c(this,rQ,"f");if(!e)throw new f("stream ended without producing a ChatCompletion");return e}}function nV(e,t){return nz(e,t)}class nJ extends te{list(e,t={},r){return this._client.getAPIList(tn`/responses/${e}/input_items`,eB,{query:t,...r})}}class nW extends te{count(e={},t){return this._client.post("/responses/input_tokens",{body:e,...t})}}class nq extends te{constructor(){super(...arguments),this.inputItems=new nJ(this._client),this.inputTokens=new nW(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&nF(e),e))}retrieve(e,t={},r){return this._client.get(tn`/responses/${e}`,{query:t,...r,stream:t?.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&nF(e),e))}delete(e,t){return this._client.delete(tn`/responses/${e}`,{...t,headers:tL([{Accept:"*/*"},t?.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>nR(t,e))}stream(e,t){return nB.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(tn`/responses/${e}/cancel`,t)}compact(e,t){return this._client.post("/responses/compact",{body:e,...t})}}nq.InputItems=nJ,nq.InputTokens=nW;class nK extends te{create(e,t,r){return this._client.post(tn`/uploads/${e}/parts`,eH({body:t,...r},this._client))}}class nG extends te{constructor(){super(...arguments),this.parts=new nK(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(tn`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(tn`/uploads/${e}/complete`,{body:t,...r})}}nG.Parts=nK;let nH=async e=>{let t=await Promise.allSettled(e),r=t.filter(e=>"rejected"===e.status);if(r.length){for(let e of r)console.error(e.reason);throw Error(`${r.length} promise(s) failed - see the above errors`)}let n=[];for(let e of t)"fulfilled"===e.status&&n.push(e.value);return n};class nY extends te{create(e,t,r){return this._client.post(tn`/vector_stores/${e}/file_batches`,{body:t,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,t,r){let{vector_store_id:n}=t;return this._client.get(tn`/vector_stores/${n}/file_batches/${e}`,{...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,t,r){let{vector_store_id:n}=t;return this._client.post(tn`/vector_stores/${n}/file_batches/${e}/cancel`,{...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,t,r){let n=await this.create(e,t);return await this.poll(e,n.id,r)}listFiles(e,t,r){let{vector_store_id:n,...i}=t;return this._client.getAPIList(tn`/vector_stores/${n}/file_batches/${e}/files`,eB,{query:i,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,t,r){let n=tL([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:i,response:a}=await this.retrieve(t,{vector_store_id:e},{...r,headers:n}).withResponse();switch(i.status){case"in_progress":let s=5e3;if(r?.pollIntervalMs)s=r.pollIntervalMs;else{let e=a.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(s=t)}}await D(s);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},n){if(null==t||0==t.length)throw Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let i=Math.min(n?.maxConcurrency??5,t.length),a=this._client,s=t.values(),o=[...r];async function l(e){for(let t of e){let e=await a.files.create({file:t,purpose:"assistants"},n);o.push(e.id)}}let u=Array(i).fill(s).map(l);return await nH(u),await this.createAndPoll(e,{file_ids:o})}}class nX extends te{create(e,t,r){return this._client.post(tn`/vector_stores/${e}/files`,{body:t,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,t,r){let{vector_store_id:n}=t;return this._client.get(tn`/vector_stores/${n}/files/${e}`,{...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,t,r){let{vector_store_id:n,...i}=t;return this._client.post(tn`/vector_stores/${n}/files/${e}`,{body:i,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t={},r){return this._client.getAPIList(tn`/vector_stores/${e}/files`,eB,{query:t,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,t,r){let{vector_store_id:n}=t;return this._client.delete(tn`/vector_stores/${n}/files/${e}`,{...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,t,r){let n=await this.create(e,t,r);return await this.poll(e,n.id,r)}async poll(e,t,r){let n=tL([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){let i=await this.retrieve(t,{vector_store_id:e},{...r,headers:n}).withResponse(),a=i.data;switch(a.status){case"in_progress":let s=5e3;if(r?.pollIntervalMs)s=r.pollIntervalMs;else{let e=i.response.headers.get("openai-poll-after-ms");if(e){let t=parseInt(e);isNaN(t)||(s=t)}}await D(s);break;case"failed":case"completed":return a}}}async upload(e,t,r){let n=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:n.id},r)}async uploadAndPoll(e,t,r){let n=await this.upload(e,t,r);return await this.poll(e,n.id,r)}content(e,t,r){let{vector_store_id:n}=t;return this._client.getAPIList(tn`/vector_stores/${n}/files/${e}/content`,eF,{...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class nQ extends te{constructor(){super(...arguments),this.files=new nX(this._client),this.fileBatches=new nY(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(tn`/vector_stores/${e}`,{...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,r){return this._client.post(tn`/vector_stores/${e}`,{body:t,...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",eB,{query:e,...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(tn`/vector_stores/${e}`,{...t,headers:tL([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}search(e,t,r){return this._client.getAPIList(tn`/vector_stores/${e}/search`,eF,{body:t,method:"post",...r,headers:tL([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}nQ.Files=nX,nQ.FileBatches=nY;class n0 extends te{create(e,t){return this._client.post("/videos",eG({body:e,...t},this._client))}retrieve(e,t){return this._client.get(tn`/videos/${e}`,t)}list(e={},t){return this._client.getAPIList("/videos",eV,{query:e,...t})}delete(e,t){return this._client.delete(tn`/videos/${e}`,t)}downloadContent(e,t={},r){return this._client.get(tn`/videos/${e}/content`,{query:t,...r,headers:tL([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,t,r){return this._client.post(tn`/videos/${e}/remix`,eG({body:t,...r},this._client))}}var n1=r(49641).Buffer;class n2 extends te{async unwrap(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._client.webhookSecret,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300;return await this.verifySignature(e,t,r,n),JSON.parse(e)}async verifySignature(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._client.webhookSecret,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300;if("undefined"==typeof crypto||"function"!=typeof crypto.subtle.importKey||"function"!=typeof crypto.subtle.verify)throw Error("Webhook signature verification is only supported when the `crypto` global is defined");c(this,r6,"m",r9).call(this,r);let i=tL([t]).values,a=c(this,r6,"m",r3).call(this,i,"webhook-signature"),s=c(this,r6,"m",r3).call(this,i,"webhook-timestamp"),o=c(this,r6,"m",r3).call(this,i,"webhook-id"),l=parseInt(s,10);if(isNaN(l))throw new O("Invalid webhook timestamp format");let u=Math.floor(Date.now()/1e3);if(u-l>n)throw new O("Webhook timestamp is too old");if(l>u+n)throw new O("Webhook timestamp is too new");let d=a.split(" ").map(e=>e.startsWith("v1,")?e.substring(3):e),p=r.startsWith("whsec_")?n1.from(r.replace("whsec_",""),"base64"):n1.from(r,"utf-8"),h=o?"".concat(o,".").concat(s,".").concat(e):"".concat(s,".").concat(e),f=await crypto.subtle.importKey("raw",p,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(let e of d)try{let t=n1.from(e,"base64");if(await crypto.subtle.verify("HMAC",f,t,new TextEncoder().encode(h)))return}catch(e){continue}throw new O("The given webhook signature does not match the expected signature")}constructor(){super(...arguments),r6.add(this)}}r6=new WeakSet,r9=function(e){if("string"!=typeof e||0===e.length)throw Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},r3=function(e,t){if(!e)throw Error("Headers are required");let r=e.get(t);if(null==r)throw Error("Missing required header: ".concat(t));return r};class n4{constructor({baseURL:e=nn("OPENAI_BASE_URL"),apiKey:t=nn("OPENAI_API_KEY"),organization:r=nn("OPENAI_ORG_ID")??null,project:n=nn("OPENAI_PROJECT_ID")??null,webhookSecret:i=nn("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(r5.add(this),r7.set(this,void 0),this.completions=new nl(this),this.chat=new tz(this),this.embeddings=new nf(this),this.files=new nv(this),this.images=new nO(this),this.audio=new tF(this),this.moderations=new nN(this),this.models=new nT(this),this.fineTuning=new nI(this),this.graders=new nA(this),this.vectorStores=new nQ(this),this.webhooks=new n2(this),this.beta=new no(this),this.batches=new tB(this),this.uploads=new nG(this),this.responses=new nq(this),this.realtime=new nj(this),this.conversations=new nh(this),this.evals=new ny(this),this.containers=new nd(this),this.videos=new n0(this),void 0===t)throw new f("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");let s={apiKey:t,organization:r,project:n,webhookSecret:i,...a,baseURL:e||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&F())throw new f("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");this.baseURL=s.baseURL,this.timeout=s.timeout??r8.DEFAULT_TIMEOUT,this.logger=s.logger??console;let o="warn";this.logLevel=o,this.logLevel=eS(s.logLevel,"ClientOptions.logLevel",this)??eS(nn("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??o,this.fetchOptions=s.fetchOptions,this.maxRetries=s.maxRetries??2,this.fetch=s.fetch??G(),u(this,r7,ee,"f"),this._options=s,this.apiKey="string"==typeof t?t:"Missing Key",this.organization=r,this.project=n,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return tL([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return ey(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${U}`}defaultIdempotencyKey(){return`stainless-node-retry-${d()}`}makeStatusError(e,t,r,n){return m.generate(e,t,r,n)}async _callApiKey(){let e,t=this._options.apiKey;if("function"!=typeof t)return!1;try{e=await t()}catch(e){if(e instanceof f)throw e;throw new f(`Failed to get token from 'apiKey' function: ${e.message}`,{cause:e})}if("string"!=typeof e||!e)throw new f(`Expected 'apiKey' function argument to return a string but it returned ${e}`);return this.apiKey=e,!0}buildURL(e,t,r){let n=!c(this,r5,"m",ne).call(this)&&r||this.baseURL,i=new URL(N(e)?e:n+(n.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return z(a)||(t={...a,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(i.search=this.stringifyQuery(t)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new eZ(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){let n=await e,i=n.maxRetries??this.maxRetries;null==t&&(t=i),await this.prepareOptions(n);let{req:a,url:s,timeout:o}=await this.buildRequest(n,{retryCount:i-t});await this.prepareRequest(a,{url:s,options:n});let l="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),u=void 0===r?"":`, retryOf: ${r}`,c=Date.now();if(eT(this).debug(`[${l}] sending request`,eN({retryOfRequestLogID:r,method:n.method,url:s,options:n,headers:a.headers})),n.signal?.aborted)throw new g;let d=new AbortController,f=await this.fetchWithTimeout(s,a,o,d).catch(h),m=Date.now();if(f instanceof globalThis.Error){let e=`retrying, ${t} attempts remaining`;if(n.signal?.aborted)throw new g;let i=p(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(t)return eT(this).info(`[${l}] connection ${i?"timed out":"failed"} - ${e}`),eT(this).debug(`[${l}] connection ${i?"timed out":"failed"} (${e})`,eN({retryOfRequestLogID:r,url:s,durationMs:m-c,message:f.message})),this.retryRequest(n,t,r??l);if(eT(this).info(`[${l}] connection ${i?"timed out":"failed"} - error; no more retries left`),eT(this).debug(`[${l}] connection ${i?"timed out":"failed"} (error; no more retries left)`,eN({retryOfRequestLogID:r,url:s,durationMs:m-c,message:f.message})),i)throw new v;throw new y({cause:f})}let _=[...f.headers.entries()].filter(([e])=>"x-request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join(""),b=`[${l}${u}${_}] ${a.method} ${s} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${m-c}ms`;if(!f.ok){let e=await this.shouldRetry(f);if(t&&e){let e=`retrying, ${t} attempts remaining`;return await Q(f.body),eT(this).info(`${b} - ${e}`),eT(this).debug(`[${l}] response error (${e})`,eN({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,durationMs:m-c})),this.retryRequest(n,t,r??l,f.headers)}let i=e?"error; no more retries left":"error; not retryable";eT(this).info(`${b} - ${i}`);let a=await f.text().catch(e=>h(e).message),s=Z(a),o=s?void 0:a;throw eT(this).debug(`[${l}] response error (${i})`,eN({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,message:o,durationMs:Date.now()-c})),this.makeStatusError(f.status,s,o,f.headers)}return eT(this).info(b),eT(this).debug(`[${l}] response start`,eN({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,durationMs:m-c})),{response:f,options:n,controller:d,requestLogID:l,retryOfRequestLogID:r,startTime:c}}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}requestAPIList(e,t){return new eU(this,this.makeRequest(t,null,void 0),e)}async fetchWithTimeout(e,t,r,n){let{signal:i,method:a,...s}=t||{};i&&i.addEventListener("abort",()=>n.abort());let o=setTimeout(()=>n.abort(),r),l=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||"object"==typeof s.body&&null!==s.body&&Symbol.asyncIterator in s.body,u={signal:n.signal,...l?{duplex:"half"}:{},method:"GET",...s};a&&(u.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,u)}finally{clearTimeout(o)}}async shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||!!(e.status>=500))}async retryRequest(e,t,r,n){let i,a=n?.get("retry-after-ms");if(a){let e=parseFloat(a);Number.isNaN(e)||(i=e)}let s=n?.get("retry-after");if(s&&!i){let e=parseFloat(s);i=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}if(!(i&&0<=i&&i<6e4)){let r=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,r)}return await D(i),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}async buildRequest(e,{retryCount:t=0}={}){let r={...e},{method:n,path:i,query:a,defaultBaseURL:s}=r,o=this.buildURL(i,a,s);"timeout"in r&&L("timeout",r.timeout),r.timeout=r.timeout??this.timeout;let{bodyHeaders:l,body:u}=this.buildBody({options:r}),c=await this.buildHeaders({options:e,method:n,bodyHeaders:l,retryCount:t});return{req:{method:n,headers:c,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&u instanceof globalThis.ReadableStream&&{duplex:"half"},...u&&{body:u},...this.fetchOptions??{},...r.fetchOptions??{}},url:o,timeout:r.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:n}){let i={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);let a=tL([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(n),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...K(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};let r=tL([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:Y(e)}:c(this,r7,"f").call(this,{body:e,headers:r})}}r8=n4,r7=new WeakMap,r5=new WeakSet,ne=function(){return"https://api.openai.com/v1"!==this.baseURL},n4.OpenAI=r8,n4.DEFAULT_TIMEOUT=6e5,n4.OpenAIError=f,n4.APIError=m,n4.APIConnectionError=y,n4.APIConnectionTimeoutError=v,n4.APIUserAbortError=g,n4.NotFoundError=k,n4.ConflictError=x,n4.RateLimitError=S,n4.BadRequestError=_,n4.AuthenticationError=b,n4.InternalServerError=I,n4.PermissionDeniedError=w,n4.UnprocessableEntityError=$,n4.InvalidWebhookSignatureError=O,n4.toFile=e5,n4.Completions=nl,n4.Chat=tz,n4.Embeddings=nf,n4.Files=nv,n4.Images=nO,n4.Audio=tF,n4.Moderations=nN,n4.Models=nT,n4.FineTuning=nI,n4.Graders=nA,n4.VectorStores=nQ,n4.Webhooks=n2,n4.Beta=no,n4.Batches=tB,n4.Uploads=nG,n4.Responses=nq,n4.Realtime=nj,n4.Conversations=nh,n4.Evals=ny,n4.Containers=nd,n4.Videos=n0;var n6=r(49509);class n9 extends n4{constructor({baseURL:e=nn("OPENAI_BASE_URL"),apiKey:t=nn("AZURE_OPENAI_API_KEY"),apiVersion:r=nn("OPENAI_API_VERSION"),endpoint:n,deployment:i,azureADTokenProvider:a,dangerouslyAllowBrowser:s,...o}={}){if(!r)throw new f("The OPENAI_API_VERSION environment variable is missing or empty; either provide it, or instantiate the AzureOpenAI client with an apiVersion option, like new AzureOpenAI({ apiVersion: 'My API Version' }).");if("function"==typeof a&&(s=!0),!a&&!t)throw new f("Missing credentials. Please pass one of `apiKey` and `azureADTokenProvider`, or set the `AZURE_OPENAI_API_KEY` environment variable.");if(a&&t)throw new f("The `apiKey` and `azureADTokenProvider` arguments are mutually exclusive; only one can be passed at a time.");if(o.defaultQuery={...o.defaultQuery,"api-version":r},e){if(n)throw new f("baseURL and endpoint are mutually exclusive")}else{if(n||(n=n6.env.AZURE_OPENAI_ENDPOINT),!n)throw new f("Must provide one of the `baseURL` or `endpoint` arguments, or the `AZURE_OPENAI_ENDPOINT` environment variable");e=`${n}/openai`}super({apiKey:a??t,baseURL:e,...o,...void 0!==s?{dangerouslyAllowBrowser:s}:{}}),this.apiVersion="",this.apiVersion=r,this.deploymentName=i}async buildRequest(e,t={}){if(n3.has(e.path)&&"post"===e.method&&void 0!==e.body){if(!M(e.body))throw Error("Expected request body to be an object");let t=this.deploymentName||e.body.model||e.__metadata?.model;void 0===t||this.baseURL.includes("/deployments")||(e.path=`/deployments/${t}${e.path}`)}return super.buildRequest(e,t)}async authHeaders(e){return"string"==typeof this._options.apiKey?tL([{"api-key":this.apiKey}]):super.authHeaders(e)}}let n3=new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations","/batches","/images/edits"]);function n5(e){let t;return e&&"object"==typeof e?(e.constructor.name===v.name&&"message"in e&&"string"==typeof e.message?(t=Error(e.message)).name="TimeoutError":e.constructor.name===g.name&&"message"in e&&"string"==typeof e.message?(t=Error(e.message)).name="AbortError":t="status"in e&&400===e.status&&"message"in e&&"string"==typeof e.message&&e.message.includes("tool_calls")?l(e,"INVALID_TOOL_RESULTS"):"status"in e&&401===e.status?l(e,"MODEL_AUTHENTICATION"):"status"in e&&429===e.status?l(e,"MODEL_RATE_LIMIT"):"status"in e&&404===e.status?l(e,"MODEL_NOT_FOUND"):e,t):e}var n8=r(67286);let n7=e=>e();function ie(e){return!!e&&!!(/^o\d/.test(e??"")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat"))}function it(e){return"system"!==e.role&&"developer"!==e.role&&"assistant"!==e.role&&"user"!==e.role&&"function"!==e.role&&"tool"!==e.role&&console.warn(`Unknown message role: ${e.role}`),e.role}function ir(e){let t=e.metadata?.filename??e.metadata?.name??e.metadata?.title;if(!t)throw Error("a filename or name or title is needed via meta-data for OpenAI when working with multimodal blocks");return t}function ii(e){let t=e._getType();switch(t){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!n8.cM.isInstance(e))throw Error("Invalid generic chat message");return it(e);default:throw Error(`Unknown message type: ${t}`)}}function ia(e){return e.includes("gpt-5.2-pro")}var is=r(4397),io=r(49509);function il(e){let{azureOpenAIApiDeploymentName:t,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:i,baseURL:a,azureADTokenProvider:s,azureOpenAIEndpoint:o}=e;if((n||s)&&i&&t)return`${i}/${t}`;if((n||s)&&o&&t)return`${o}/openai/deployments/${t}`;if(n||s){if(!r)throw Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!t)throw Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${t}`}return a}function iu(e){return"undefined"!=typeof Headers&&null!==e&&"object"==typeof e&&"[object Headers]"===Object.prototype.toString.call(e)}function ic(e){return Object.fromEntries(n7(()=>iu(e)?e:Array.isArray(e)?new Headers(e):"object"==typeof e&&null!==e&&"values"in e&&iu(e.values)?e.values:"object"==typeof e&&null!==e?new Headers(Object.entries(e).filter(([,e])=>"string"==typeof e).map(([e,t])=>[e,t])):new Headers).entries())}function id(){let e=(0,is._$)();return("node"===e||"deno"===e)&&(e=`(${e}/${io.version}; ${io.platform}; ${io.arch})`),e}function ip(e,t=!1,r="1.0.0"){let n=ic(e),i=id(),a=`langchainjs${t?"-azure":""}-openai`;return{...n,"User-Agent":n["User-Agent"]?`${a}/${r} (${i})${n["User-Agent"]}`:`${a}/${r} (${i})`}}var ih=r(59621),im=r(8872),ig=r(25720);function iy(e,t){let r;return r=(0,ih.qG)(e)?(0,ih.fL)(e):e,t?.strict!==void 0&&(r.function.strict=t.strict),r}function iv(e){return void 0!==e.anyOf&&Array.isArray(e.anyOf)}function i_(e){let t=["namespace functions {",""];for(let r of e)r.description&&t.push(`// ${r.description}`),Object.keys(r.parameters.properties??{}).length>0?(t.push(`type ${r.name} = (_: {`),t.push(ib(r.parameters,0)),t.push("}) => any;")):t.push(`type ${r.name} = () => any;`),t.push("");return t.push("} // namespace functions"),t.join("\n")}function ib(e,t){let r=[];for(let[n,i]of Object.entries(e.properties??{}))i.description&&t<2&&r.push(`// ${i.description}`),e.required?.includes(n)?r.push(`${n}: ${iw(i,t)},`):r.push(`${n}?: ${iw(i,t)},`);return r.map(e=>" ".repeat(t)+e).join("\n")}function iw(e,t){if(iv(e))return e.anyOf.map(e=>iw(e,t)).join(" | ");switch(e.type){case"string":if(e.enum)return e.enum.map(e=>`"${e}"`).join(" | ");return"string";case"number":if(e.enum)return e.enum.map(e=>`${e}`).join(" | ");return"number";case"integer":if(e.enum)return e.enum.map(e=>`${e}`).join(" | ");return"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",ib(e,t+2),"}"].join("\n");case"array":if(e.items)return`${iw(e.items,t)}[]`;return"any[]";default:return""}}function ik(e){if(e){if("any"===e||"required"===e)return"required";if("auto"===e)return"auto";if("none"===e)return"none";else if("string"==typeof e)return{type:"function",function:{name:e}};else return e}}function ix(e){return"type"in e&&"function"!==e.type}function i$(e){return"object"==typeof e&&null!==e&&"extras"in e&&"object"==typeof e.extras&&null!==e.extras&&"providerToolDefinition"in e.extras&&"object"==typeof e.extras.providerToolDefinition&&null!==e.extras.providerToolDefinition}function iS(e){return null!=e&&"object"==typeof e&&"type"in e&&"function"!==e.type}function iI(e){return"object"==typeof e&&null!==e&&"metadata"in e&&"object"==typeof e.metadata&&null!==e.metadata&&"customTool"in e.metadata&&"object"==typeof e.metadata.customTool&&null!==e.metadata.customTool}function iE(e){return"type"in e&&"custom"===e.type&&"custom"in e&&"object"==typeof e.custom&&null!==e.custom}function iA(e){if("custom_tool_call"===e.type)return{...e,type:"tool_call",call_id:e.id,id:e.call_id,name:e.name,isCustomTool:!0,args:{input:e.input}}}function iO(e){if("computer_call"===e.type)return{...e,type:"tool_call",call_id:e.id,id:e.call_id,name:"computer_use",isComputerTool:!0,args:{action:e.action}}}function iT(e){return"object"==typeof e&&null!==e&&"type"in e&&"tool_call"===e.type&&"isComputerTool"in e&&!0===e.isComputerTool}function iN(e){return"object"==typeof e&&null!==e&&"type"in e&&"tool_call"===e.type&&"isCustomTool"in e&&!0===e.isCustomTool}function iC(e){let t=()=>{if(e.custom.format){if("grammar"===e.custom.format.type)return{type:"grammar",definition:e.custom.format.grammar.definition,syntax:e.custom.format.grammar.syntax};if("text"===e.custom.format.type)return{type:"text"}}};return{type:"custom",name:e.custom.name,description:e.custom.description,format:t()}}function iP(e){let t=()=>{if(e.format){if("grammar"===e.format.type)return{type:"grammar",grammar:{definition:e.format.definition,syntax:e.format.syntax}};if("text"===e.format.type)return{type:"text"}}};return{type:"custom",custom:{name:e.name,description:e.description,format:t()}}}function ij(e,t,r){function n(r,n){var i;for(let a in Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(i=r._zod).traits??(i.traits=new Set),r._zod.traits.add(e),t(r,n),s.prototype)a in r||Object.defineProperty(r,a,{value:s.prototype[a].bind(r)});r._zod.constr=s,r._zod.def=n}let i=r?.Parent??Object;class a extends i{}function s(e){var t;let i=r?.Parent?new a:this;for(let r of(n(i,e),(t=i._zod).deferred??(t.deferred=[]),i._zod.deferred))r();return i}return Object.defineProperty(a,"name",{value:e}),Object.defineProperty(s,"init",{value:n}),Object.defineProperty(s,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}Object.freeze({status:"aborted"}),Symbol("zod_brand");class iz extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}let iR={};function iM(e){return e&&Object.assign(iR,e),iR}function iL(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function iZ(e,t){return"bigint"==typeof t?t.toString():t}function iD(e){let t=!1;return{get value(){if(!t){let t=e();return Object.defineProperty(this,"value",{value:t}),t}throw Error("cached value already set")}}}function iU(e){return null==e}function iF(e){let t=+!!e.startsWith("^"),r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function iB(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}function iV(e,t,r){let n=!1;Object.defineProperty(e,t,{get(){if(!n){let n=r();return e[t]=n,n}throw Error("cached value already set")},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function iJ(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function iW(e){return JSON.stringify(e)}let iq=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function iK(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let iG=iD(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function iH(e){if(!1===iK(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!1!==iK(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}let iY=new Set(["string","number","symbol"]);function iX(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function iQ(e,t,r){let n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function i0(e){let t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");t.error=t.message}return(delete t.message,"string"==typeof t.error)?{...t,error:()=>t.error}:t}function i1(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}let i2={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function i4(e,t){let r={},n=e._zod.def;for(let e in t){if(!(e in n.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&(r[e]=n.shape[e])}return iQ(e,{...e._zod.def,shape:r,checks:[]})}function i6(e,t){let r={...e._zod.def.shape},n=e._zod.def;for(let e in t){if(!(e in n.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return iQ(e,{...e._zod.def,shape:r,checks:[]})}function i9(e,t){if(!iH(t))throw Error("Invalid input to extend: expected a plain object");let r={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return iJ(this,"shape",r),r},checks:[]};return iQ(e,r)}function i3(e,t){return iQ(e,{...e._zod.def,get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return iJ(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function i5(e,t,r){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(let t in n)i[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return iQ(t,{...t._zod.def,shape:i,checks:[]})}function i8(e,t,r){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(let t in n)i[t]=new e({type:"nonoptional",innerType:n[t]});return iQ(t,{...t._zod.def,shape:i,checks:[]})}function i7(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function ae(e,t){return t.map(t=>{var r;return(r=t).path??(r.path=[]),t.path.unshift(e),t})}function at(e){return"string"==typeof e?e:e?.message}function ar(e,t,r){let n={...e,path:e.path??[]};return e.message||(n.message=at(e.inst?._zod.def?.error?.(e))??at(t?.error?.(e))??at(r.customError?.(e))??at(r.localeError?.(e))??"Invalid input"),delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function an(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function ai(...e){let[t,r,n]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:n}:{...t}}let aa=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,iZ,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},as=ij("$ZodError",aa),ao=ij("$ZodError",aa,{Parent:Error});function al(e,t=e=>e.message){let r={},n=[];for(let i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}function au(e,t){let r=t||function(e){return e.message},n={_errors:[]},i=e=>{for(let t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>i({issues:e}));else if("invalid_key"===t.code)i({issues:t.issues});else if("invalid_element"===t.code)i({issues:t.issues});else if(0===t.path.length)n._errors.push(r(t));else{let e=n,i=0;for(;i<t.path.length;){let n=t.path[i];i===t.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(r(t))):e[n]=e[n]||{_errors:[]},e=e[n],i++}}};return i(e),n}let ac=e=>(t,r,n,i)=>{let a=n?Object.assign(n,{async:!1}):{async:!1},s=t._zod.run({value:r,issues:[]},a);if(s instanceof Promise)throw new iz;if(s.issues.length){let t=new(i?.Err??e)(s.issues.map(e=>ar(e,a,iM())));throw iq(t,i?.callee),t}return s.value},ad=ac(ao),ap=e=>async(t,r,n,i)=>{let a=n?Object.assign(n,{async:!0}):{async:!0},s=t._zod.run({value:r,issues:[]},a);if(s instanceof Promise&&(s=await s),s.issues.length){let t=new(i?.Err??e)(s.issues.map(e=>ar(e,a,iM())));throw iq(t,i?.callee),t}return s.value},ah=e=>(t,r,n)=>{let i=n?{...n,async:!1}:{async:!1},a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new iz;return a.issues.length?{success:!1,error:new(e??as)(a.issues.map(e=>ar(e,i,iM())))}:{success:!0,data:a.value}},af=ah(ao),am=e=>async(t,r,n)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},a=t._zod.run({value:r,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(e=>ar(e,i,iM())))}:{success:!0,data:a.value}},ag=am(ao);Symbol("ZodOutput"),Symbol("ZodInput");class ay{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){let r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}let av=function(){return new ay}();class a_{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??av,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var r;let n=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(e);if(a)return a.count++,t.schemaPath.includes(e)&&(a.cycle=t.path),a.schema;let s={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,s);let o=e._zod.toJSONSchema?.();if(o)s.schema=o;else{let r={...t,schemaPath:[...t.schemaPath,e],path:t.path},a=e._zod.parent;if(a)s.ref=a,this.process(a,r),this.seen.get(a).isParent=!0;else{let t=s.schema;switch(n.type){case"string":{let r=t;r.type="string";let{minimum:n,maximum:a,format:o,patterns:l,contentEncoding:u}=e._zod.bag;if("number"==typeof n&&(r.minLength=n),"number"==typeof a&&(r.maxLength=a),o&&(r.format=i[o]??o,""===r.format&&delete r.format),u&&(r.contentEncoding=u),l&&l.size>0){let e=[...l];1===e.length?r.pattern=e[0].source:e.length>1&&(s.schema.allOf=[...e.map(e=>({..."draft-7"===this.target?{type:"string"}:{},pattern:e.source}))])}break}case"number":{let r=t,{minimum:n,maximum:i,format:a,multipleOf:s,exclusiveMaximum:o,exclusiveMinimum:l}=e._zod.bag;"string"==typeof a&&a.includes("int")?r.type="integer":r.type="number","number"==typeof l&&(r.exclusiveMinimum=l),"number"==typeof n&&(r.minimum=n,"number"==typeof l&&(l>=n?delete r.minimum:delete r.exclusiveMinimum)),"number"==typeof o&&(r.exclusiveMaximum=o),"number"==typeof i&&(r.maximum=i,"number"==typeof o&&(o<=i?delete r.maximum:delete r.exclusiveMaximum)),"number"==typeof s&&(r.multipleOf=s);break}case"boolean":case"success":t.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema");break;case"null":t.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw Error("Void cannot be represented in JSON Schema");break;case"never":t.not={};break;case"date":if("throw"===this.unrepresentable)throw Error("Date cannot be represented in JSON Schema");break;case"array":{let i=t,{minimum:a,maximum:s}=e._zod.bag;"number"==typeof a&&(i.minItems=a),"number"==typeof s&&(i.maxItems=s),i.type="array",i.items=this.process(n.element,{...r,path:[...r.path,"items"]});break}case"object":{let e=t;e.type="object",e.properties={};let i=n.shape;for(let t in i)e.properties[t]=this.process(i[t],{...r,path:[...r.path,"properties",t]});let a=new Set([...new Set(Object.keys(i))].filter(e=>{let t=n.shape[e]._zod;return"input"===this.io?void 0===t.optin:void 0===t.optout}));a.size>0&&(e.required=Array.from(a)),n.catchall?._zod.def.type==="never"?e.additionalProperties=!1:n.catchall?n.catchall&&(e.additionalProperties=this.process(n.catchall,{...r,path:[...r.path,"additionalProperties"]})):"output"===this.io&&(e.additionalProperties=!1);break}case"union":t.anyOf=n.options.map((e,t)=>this.process(e,{...r,path:[...r.path,"anyOf",t]}));break;case"intersection":{let e=t,i=this.process(n.left,{...r,path:[...r.path,"allOf",0]}),a=this.process(n.right,{...r,path:[...r.path,"allOf",1]}),s=e=>"allOf"in e&&1===Object.keys(e).length;e.allOf=[...s(i)?i.allOf:[i],...s(a)?a.allOf:[a]];break}case"tuple":{let i=t;i.type="array";let a=n.items.map((e,t)=>this.process(e,{...r,path:[...r.path,"prefixItems",t]}));if("draft-2020-12"===this.target?i.prefixItems=a:i.items=a,n.rest){let e=this.process(n.rest,{...r,path:[...r.path,"items"]});"draft-2020-12"===this.target?i.items=e:i.additionalItems=e}n.rest&&(i.items=this.process(n.rest,{...r,path:[...r.path,"items"]}));let{minimum:s,maximum:o}=e._zod.bag;"number"==typeof s&&(i.minItems=s),"number"==typeof o&&(i.maxItems=o);break}case"record":{let e=t;e.type="object",e.propertyNames=this.process(n.keyType,{...r,path:[...r.path,"propertyNames"]}),e.additionalProperties=this.process(n.valueType,{...r,path:[...r.path,"additionalProperties"]});break}case"map":if("throw"===this.unrepresentable)throw Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw Error("Set cannot be represented in JSON Schema");break;case"enum":{let e=t,r=iL(n.entries);r.every(e=>"number"==typeof e)&&(e.type="number"),r.every(e=>"string"==typeof e)&&(e.type="string"),e.enum=r;break}case"literal":{let e=t,r=[];for(let e of n.values)if(void 0===e){if("throw"===this.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof e)if("throw"===this.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else r.push(Number(e));else r.push(e);if(0===r.length);else if(1===r.length){let t=r[0];e.type=null===t?"null":typeof t,e.const=t}else r.every(e=>"number"==typeof e)&&(e.type="number"),r.every(e=>"string"==typeof e)&&(e.type="string"),r.every(e=>"boolean"==typeof e)&&(e.type="string"),r.every(e=>null===e)&&(e.type="null"),e.enum=r;break}case"file":{let r=t,n={type:"string",format:"binary",contentEncoding:"binary"},{minimum:i,maximum:a,mime:s}=e._zod.bag;void 0!==i&&(n.minLength=i),void 0!==a&&(n.maxLength=a),s?1===s.length?(n.contentMediaType=s[0],Object.assign(r,n)):r.anyOf=s.map(e=>({...n,contentMediaType:e})):Object.assign(r,n);break}case"transform":if("throw"===this.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema");break;case"nullable":t.anyOf=[this.process(n.innerType,r),{type:"null"}];break;case"nonoptional":case"promise":case"optional":this.process(n.innerType,r),s.ref=n.innerType;break;case"default":this.process(n.innerType,r),s.ref=n.innerType,t.default=JSON.parse(JSON.stringify(n.defaultValue));break;case"prefault":this.process(n.innerType,r),s.ref=n.innerType,"input"===this.io&&(t._prefault=JSON.parse(JSON.stringify(n.defaultValue)));break;case"catch":{let e;this.process(n.innerType,r),s.ref=n.innerType;try{e=n.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}t.default=e;break}case"nan":if("throw"===this.unrepresentable)throw Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let r=t,n=e._zod.pattern;if(!n)throw Error("Pattern not found in template literal");r.type="string",r.pattern=n.source;break}case"pipe":{let e="input"===this.io?"transform"===n.in._zod.def.type?n.out:n.in:n.out;this.process(e,r),s.ref=e;break}case"readonly":this.process(n.innerType,r),s.ref=n.innerType,t.readOnly=!0;break;case"lazy":{let t=e._zod.innerType;this.process(t,r),s.ref=t;break}case"custom":if("throw"===this.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")}}}let l=this.metadataRegistry.get(e);return l&&Object.assign(s.schema,l),"input"===this.io&&aw(e)&&(delete s.schema.examples,delete s.schema.default),"input"===this.io&&s.schema._prefault&&((r=s.schema).default??(r.default=s.schema._prefault)),delete s.schema._prefault,this.seen.get(e).schema}emit(e,t){let r={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},n=this.seen.get(e);if(!n)throw Error("Unprocessed schema. This is a bug in Zod.");let i=e=>{let t="draft-2020-12"===this.target?"$defs":"definitions";if(r.external){let n=r.external.registry.get(e[0])?.id,i=r.external.uri??(e=>e);if(n)return{ref:i(n)};let a=e[1].defId??e[1].schema.id??`schema${this.counter++}`;return e[1].defId=a,{defId:a,ref:`${i("__shared")}#/${t}/${a}`}}if(e[1]===n)return{ref:"#"};let i="#",a=`${i}/${t}/`,s=e[1].schema.id??`__schema${this.counter++}`;return{defId:s,ref:a+s}},a=e=>{if(e[1].schema.$ref)return;let t=e[1],{ref:r,defId:n}=i(e);t.def={...t.schema},n&&(t.defId=n);let a=t.schema;for(let e in a)delete a[e];a.$ref=r};if("throw"===r.cycles)for(let e of this.seen.entries()){let t=e[1];if(t.cycle)throw Error(`Cycle detected: #/${t.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let t of this.seen.entries()){let n=t[1];if(e===t[0]){a(t);continue}if(r.external){let n=r.external.registry.get(t[0])?.id;if(e!==t[0]&&n){a(t);continue}}if(this.metadataRegistry.get(t[0])?.id||n.cycle||n.count>1&&"ref"===r.reused){a(t);continue}}let s=(e,t)=>{let r=this.seen.get(e),n=r.def??r.schema,i={...n};if(null===r.ref)return;let a=r.ref;if(r.ref=null,a){s(a,t);let e=this.seen.get(a).schema;e.$ref&&"draft-7"===t.target?(n.allOf=n.allOf??[],n.allOf.push(e)):(Object.assign(n,e),Object.assign(n,i))}r.isParent||this.override({zodSchema:e,jsonSchema:n,path:r.path??[]})};for(let e of[...this.seen.entries()].reverse())s(e[0],{target:this.target});let o={};if("draft-2020-12"===this.target?o.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?o.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),r.external?.uri){let t=r.external.registry.get(e)?.id;if(!t)throw Error("Schema is missing an `id` property");o.$id=r.external.uri(t)}Object.assign(o,n.def);let l=r.external?.defs??{};for(let e of this.seen.entries()){let t=e[1];t.def&&t.defId&&(l[t.defId]=t.def)}r.external||Object.keys(l).length>0&&("draft-2020-12"===this.target?o.$defs=l:o.definitions=l);try{return JSON.parse(JSON.stringify(o))}catch(e){throw Error("Error converting schema to JSON.")}}}function ab(e,t){if(e instanceof ay){let r=new a_(t),n={};for(let t of e._idmap.entries()){let[e,n]=t;r.process(n)}let i={},a={registry:e,uri:t?.uri,defs:n};for(let n of e._idmap.entries()){let[e,s]=n;i[e]=r.emit(s,{...t,external:a})}return Object.keys(n).length>0&&(i.__shared={["draft-2020-12"===r.target?"$defs":"definitions"]:n}),{schemas:i}}let r=new a_(t);return r.process(e),r.emit(e,t)}function aw(e,t){let r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);let n=e._zod.def;switch(n.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":return!1;case"array":return aw(n.element,r);case"object":for(let e in n.shape)if(aw(n.shape[e],r))return!0;return!1;case"union":for(let e of n.options)if(aw(e,r))return!0;return!1;case"intersection":return aw(n.left,r)||aw(n.right,r);case"tuple":for(let e of n.items)if(aw(e,r))return!0;if(n.rest&&aw(n.rest,r))return!0;return!1;case"record":case"map":return aw(n.keyType,r)||aw(n.valueType,r);case"set":return aw(n.valueType,r);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return aw(n.innerType,r);case"lazy":return aw(n.getter(),r);case"transform":return!0;case"pipe":return aw(n.in,r)||aw(n.out,r)}throw Error(`Unknown schema type: ${n.type}`)}let ak=Symbol("Let zodToJsonSchema decide on which parser to use"),ax={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},a$=e=>"string"==typeof e?{...ax,basePath:["#"],definitions:{},name:e}:{...ax,basePath:["#"],definitions:{},...e},aS=e=>"_def"in e?e._def:e;function aI(e){if(!e)return!0;for(let t in e)return!1;return!0}let aE=e=>{let t=a$(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[aS(r),{def:aS(r),path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};var aA=r(74556);function aO(){return{}}function aT(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function aN(e,t,r,n,i){e[t]=r,aT(e,t,n,i)}function aC(e,t){let r={type:"array"};return e.type?._def?.typeName!==aA.kY.ZodAny&&(r.items=so(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&aN(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&aN(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(aN(r,"minItems",e.exactLength.value,e.exactLength.message,t),aN(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function aP(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"min":"jsonSchema7"===t.target?n.inclusive?aN(r,"minimum",n.value,n.message,t):aN(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),aN(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?aN(r,"maximum",n.value,n.message,t):aN(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),aN(r,"maximum",n.value,n.message,t));break;case"multipleOf":aN(r,"multipleOf",n.value,n.message,t)}return r}function aj(){return{type:"boolean"}}function az(e,t){return so(e.type._def,t)}let aR=(e,t)=>so(e.innerType._def,t);function aM(e,t,r){let n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((r,n)=>aM(e,t,r))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return aL(e,t)}}let aL=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let n of e.checks)switch(n.kind){case"min":aN(r,"minimum",n.value,n.message,t);break;case"max":aN(r,"maximum",n.value,n.message,t)}return r};function aZ(e,t){return{...so(e.innerType._def,t),default:e.defaultValue()}}function aD(e,t,r){return"input"===t.effectStrategy?so(e.schema._def,t,r):{}}function aU(e){return{type:"string",enum:[...e.values]}}let aF=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e;function aB(e,t){let r=[so(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),so(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),n="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(e=>{if(aF(e))i.push(...e.allOf),void 0===e.unevaluatedProperties&&(n=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...n}=e;t=n}else n=void 0;i.push(t)}}),i.length?{allOf:i,...n}:void 0}function aV(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}let aJ={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===o&&(o=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),o),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function aW(e,t){let r={type:"string"};function n(e){return"escape"===t.patternStrategy?aq(e):e}if(e.checks)for(let i of e.checks)switch(i.kind){case"min":aN(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,i.value):i.value,i.message,t);break;case"max":aN(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,i.value):i.value,i.message,t);break;case"email":switch(t.emailStrategy){case"format:email":aK(r,"email",i.message,t);break;case"format:idn-email":aK(r,"idn-email",i.message,t);break;case"pattern:zod":aG(r,aJ.email,i.message,t)}break;case"url":aK(r,"uri",i.message,t);break;case"uuid":aK(r,"uuid",i.message,t);break;case"regex":aG(r,i.regex,i.message,t);break;case"cuid":aG(r,aJ.cuid,i.message,t);break;case"cuid2":aG(r,aJ.cuid2,i.message,t);break;case"startsWith":aG(r,RegExp(`^${n(i.value)}`),i.message,t);break;case"endsWith":aG(r,RegExp(`${n(i.value)}$`),i.message,t);break;case"datetime":aK(r,"date-time",i.message,t);break;case"date":aK(r,"date",i.message,t);break;case"time":aK(r,"time",i.message,t);break;case"duration":aK(r,"duration",i.message,t);break;case"length":aN(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,i.value):i.value,i.message,t),aN(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,i.value):i.value,i.message,t);break;case"includes":aG(r,RegExp(n(i.value)),i.message,t);break;case"ip":"v6"!==i.version&&aK(r,"ipv4",i.message,t),"v4"!==i.version&&aK(r,"ipv6",i.message,t);break;case"emoji":aG(r,aJ.emoji,i.message,t);break;case"ulid":aG(r,aJ.ulid,i.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":aK(r,"binary",i.message,t);break;case"contentEncoding:base64":aN(r,"contentEncoding","base64",i.message,t);break;case"pattern:zod":aG(r,aJ.base64,i.message,t)}break;case"nanoid":aG(r,aJ.nanoid,i.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:(e=>{})(0)}return r}let aq=e=>Array.from(e).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),aK=(e,t,r,n)=>{e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):aN(e,"format",t,r,n)},aG=(e,t,r,n)=>{e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:aH(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):aN(e,"pattern",aH(t,n),r,n)},aH=(e,t)=>{let r="function"==typeof e?e():e;if(!t.applyRegexFlags||!r.flags)return r.source;let n={i:r.flags.includes("i"),m:r.flags.includes("m"),s:r.flags.includes("s")},i=n.i?r.source.toLowerCase():r.source,a="",s=!1,o=!1,l=!1;for(let e=0;e<i.length;e++){if(s){a+=i[e],s=!1;continue}if(n.i){if(o){if(i[e].match(/[a-z]/)){l?(a+=i[e],a+=`${i[e-2]}-${i[e]}`.toUpperCase(),l=!1):"-"===i[e+1]&&i[e+2]?.match(/[a-z]/)?(a+=i[e],l=!0):a+=`${i[e]}${i[e].toUpperCase()}`;continue}}else if(i[e].match(/[a-z]/)){a+=`[${i[e]}${i[e].toUpperCase()}]`;continue}}if(n.m){if("^"===i[e]){a+=`(^|(?<=[\r
]))`;continue}else if("$"===i[e]){a+=`($|(?=[\r
]))`;continue}}if(n.s&&"."===i[e]){a+=o?`${i[e]}\r
`:`[${i[e]}\r
]`;continue}a+=i[e],"\\"===i[e]?s=!0:o&&"]"===i[e]?o=!1:o||"["!==i[e]||(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return a};function aY(e,t){if("openApi3"===t.target&&e.keyType?._def.typeName===aA.kY.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:so(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:so(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===aA.kY.ZodString&&e.keyType._def.checks?.length){let n=Object.entries(aW(e.keyType._def,t)).reduce((e,[t,r])=>"type"===t?e:{...e,[t]:r},{});return{...r,propertyNames:n}}return e.keyType?._def.typeName===aA.kY.ZodEnum?{...r,propertyNames:{enum:e.keyType._def.values}}:r}function aX(e,t){return"record"===t.mapStrategy?aY(e,t):{type:"array",maxItems:125,items:{type:"array",items:[so(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},so(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}function aQ(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}function a0(){return{not:{}}}function a1(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}let a2={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function a4(e,t){if("openApi3"===t.target)return a6(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in a2&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=a2[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return a6(e,t)}let a6=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>so(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0};function a9(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target||"property"===t.nullableStrategy?{type:a2[e.innerType._def.typeName],nullable:!0}:{type:[a2[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=so(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=so(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function a3(e,t){let r={type:"number"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"int":r.type="integer",aT(r,"type",n.message,t);break;case"min":"jsonSchema7"===t.target?n.inclusive?aN(r,"minimum",n.value,n.message,t):aN(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),aN(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?aN(r,"maximum",n.value,n.message,t):aN(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),aN(r,"maximum",n.value,n.message,t));break;case"multipleOf":aN(r,"multipleOf",n.value,n.message,t)}return r}function a5(e,t){return"strict"===t.removeAdditionalStrategy?"ZodNever"===e.catchall._def.typeName?"strict"!==e.unknownKeys:so(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:"ZodNever"===e.catchall._def.typeName?"passthrough"===e.unknownKeys:so(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function a8(e,t){let r={type:"object",...Object.entries(e.shape()).reduce((e,[r,n])=>{if(void 0===n||void 0===n._def)return e;let i=[...t.currentPath,"properties",r],a=so(n._def,{...t,currentPath:i,propertyPath:i});if(void 0===a)return e;if(t.openaiStrictMode&&n.isOptional()&&!n.isNullable()&&void 0===n._def?.defaultValue)throw Error(`Zod field at \`${i.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...e.properties,[r]:a},required:n.isOptional()&&!t.openaiStrictMode?e.required:[...e.required,r]}},{properties:{},required:[]}),additionalProperties:a5(e,t)};return r.required.length||delete r.required,r}let a7=(e,t)=>{if(t.propertyPath&&t.currentPath.slice(0,t.propertyPath.length).toString()===t.propertyPath.toString())return so(e.innerType._def,{...t,currentPath:t.currentPath});let r=so(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},se=(e,t)=>{if("input"===t.pipeStrategy)return so(e.in._def,t);if("output"===t.pipeStrategy)return so(e.out._def,t);let r=so(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=so(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(e=>void 0!==e)}};function st(e,t){return so(e.type._def,t)}function sr(e,t){let r={type:"array",uniqueItems:!0,items:so(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&aN(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&aN(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function sn(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>so(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:so(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>so(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}function si(){return{not:{}}}function sa(){return{}}let ss=(e,t)=>so(e.innerType._def,t);function so(e,t,r=!1){let n=t.seen.get(e);if(t.override){let i=t.override?.(e,t,n,r);if(i!==ak)return i}if(n&&!r){let e=sl(n,t);if(void 0!==e)return"$ref"in e&&t.seenRefs.add(e.$ref),e}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let a=sc(e,e.typeName,t,r);return a&&sd(e,t,a),i.jsonSchema=a,a}let sl=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"extract-to-root":let r=e.path.slice(t.basePath.length+1).join("_");return r!==t.name&&"duplicate-ref"===t.nameStrategy&&(t.definitions[r]=e.def),{$ref:[...t.basePath,t.definitionPath,r].join("/")};case"relative":return{$ref:su(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return"seen"===t.$refStrategy?{}:void 0}},su=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},sc=(e,t,r,n)=>{switch(t){case aA.kY.ZodString:return aW(e,r);case aA.kY.ZodNumber:return a3(e,r);case aA.kY.ZodObject:return a8(e,r);case aA.kY.ZodBigInt:return aP(e,r);case aA.kY.ZodBoolean:return aj();case aA.kY.ZodDate:return aM(e,r);case aA.kY.ZodUndefined:return si();case aA.kY.ZodNull:return a1(r);case aA.kY.ZodArray:return aC(e,r);case aA.kY.ZodUnion:case aA.kY.ZodDiscriminatedUnion:return a4(e,r);case aA.kY.ZodIntersection:return aB(e,r);case aA.kY.ZodTuple:return sn(e,r);case aA.kY.ZodRecord:return aY(e,r);case aA.kY.ZodLiteral:return aV(e,r);case aA.kY.ZodEnum:return aU(e);case aA.kY.ZodNativeEnum:return aQ(e);case aA.kY.ZodNullable:return a9(e,r);case aA.kY.ZodOptional:return a7(e,r);case aA.kY.ZodMap:return aX(e,r);case aA.kY.ZodSet:return sr(e,r);case aA.kY.ZodLazy:return so(e.getter()._def,r);case aA.kY.ZodPromise:return st(e,r);case aA.kY.ZodNaN:case aA.kY.ZodNever:return a0();case aA.kY.ZodEffects:return aD(e,r,n);case aA.kY.ZodAny:return aO();case aA.kY.ZodUnknown:return sa();case aA.kY.ZodDefault:return aZ(e,r);case aA.kY.ZodBranded:return az(e,r);case aA.kY.ZodReadonly:return ss(e,r);case aA.kY.ZodCatch:return aR(e,r);case aA.kY.ZodPipeline:return se(e,r);case aA.kY.ZodFunction:case aA.kY.ZodVoid:case aA.kY.ZodSymbol:return;default:let i;return void(i=0)}},sd=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),sp=(e,t)=>{let r=aE(t),n="string"==typeof t?t:t?.nameStrategy==="title"?void 0:t?.name,i=so(e._def,void 0===n?r:{...r,currentPath:[...r.basePath,r.definitionPath,n]},!1)??{},a="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==a&&(i.title=a);let s=(()=>{if(aI(r.definitions))return;let e={},t=new Set;for(let n=0;n<500;n++){let n=Object.entries(r.definitions).filter(([e])=>!t.has(e));if(0===n.length)break;for(let[i,a]of n)e[i]=so(aS(a),{...r,currentPath:[...r.basePath,r.definitionPath,i]},!0)??{},t.add(i)}return e})(),o=void 0===n?s?{...i,[r.definitionPath]:s}:i:"duplicate-ref"===r.nameStrategy?{...i,...s||r.seenRefs.size?{[r.definitionPath]:{...s,...r.seenRefs.size?{[n]:i}:void 0}}:void 0}:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,n].join("/"),[r.definitionPath]:{...s,[n]:i}};return"jsonSchema7"===r.target?o.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"===r.target&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function sh(e){if("object"!==e.type)throw Error(`Root schema must have type: 'object' but got type: ${e.type?`'${e.type}'`:"undefined"}`);let t=structuredClone(e);return sm(t,[],t)}function sf(e){if("boolean"==typeof e)return!1;if("null"===e.type)return!0;for(let t of e.oneOf??[])if(sf(t))return!0;for(let t of e.anyOf??[])if(sf(t))return!0;return!1}function sm(e,t,r){if("boolean"==typeof e)throw TypeError(`Expected object schema but got boolean; path=${t.join("/")}`);if(!sy(e))throw TypeError(`Expected ${JSON.stringify(e)} to be an object; path=${t.join("/")}`);let n=e.$defs;if(sy(n))for(let[e,i]of Object.entries(n))sm(i,[...t,"$defs",e],r);let i=e.definitions;if(sy(i))for(let[e,n]of Object.entries(i))sm(n,[...t,"definitions",e],r);"object"!==e.type||"additionalProperties"in e||(e.additionalProperties=!1);let a=e.required??[],s=e.properties;if(sy(s)){for(let[e,r]of Object.entries(s))if(!sf(r)&&!a.includes(e))throw Error(`Zod field at \`${[...t,"properties",e].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);e.required=Object.keys(s),e.properties=Object.fromEntries(Object.entries(s).map(([e,n])=>[e,sm(n,[...t,"properties",e],r)]))}let o=e.items;sy(o)&&(e.items=sm(o,[...t,"items"],r));let l=e.anyOf;Array.isArray(l)&&(e.anyOf=l.map((e,n)=>sm(e,[...t,"anyOf",String(n)],r)));let u=e.allOf;Array.isArray(u)&&(1===u.length?(Object.assign(e,sm(u[0],[...t,"allOf","0"],r)),delete e.allOf):e.allOf=u.map((e,n)=>sm(e,[...t,"allOf",String(n)],r))),null===e.default&&delete e.default;let c=e.$ref;if(c&&sv(e,1)){if("string"!=typeof c)throw TypeError(`Received non-string $ref - ${c}; path=${t.join("/")}`);let n=sg(r,c);if("boolean"==typeof n)throw Error(`Expected \`$ref: ${c}\` to resolve to an object schema but got boolean`);if(!sy(n))throw Error(`Expected \`$ref: ${c}\` to resolve to an object but got ${JSON.stringify(n)}`);return Object.assign(e,{...n,...e}),delete e.$ref,sm(e,t,r)}return e}function sg(e,t){if(!t.startsWith("#/"))throw Error(`Unexpected $ref format ${JSON.stringify(t)}; Does not start with #/`);let r=t.slice(2).split("/"),n=e;for(let e of r){if(!sy(n))throw Error(`encountered non-object entry while resolving ${t} - ${JSON.stringify(n)}`);let r=n[e];if(void 0===r)throw Error(`Key ${e} not found while resolving ${t}`);n=r}return n}function sy(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function sv(e,t){let r=0;for(let n in e)if(++r>t)return!0;return!1}function s_(e,t){return sp(e,{openaiStrictMode:!0,name:t.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function sb(e){return sh(ab(e,{target:"draft-7"}))}function sw(e){return"_zod"in e}function sk(e,t,r){return ts({type:"json_schema",json_schema:{...r,name:t,strict:!0,schema:sw(e)?sb(e):s_(e,{name:t})}},t=>e.parse(JSON.parse(t)))}let sx=["jsonSchema","functionCalling","jsonMode"];function s$(e,t){if(void 0!==t&&!sx.includes(t))throw Error(`Invalid method: ${t}. Supported methods are: ${sx.join(", ")}`);let r=!e.startsWith("gpt-3")&&!e.startsWith("gpt-4-")&&"gpt-4"!==e;if(r&&!t)return"jsonSchema";if(!r&&"jsonSchema"===t)throw Error(`JSON Schema is not supported for model "${e}". Please use a different method, e.g. "functionCalling" or "jsonMode".`);return t??"functionCalling"}function sS(e,t){let r={...e};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),r}function sI(e,t,r){if((0,im.IU)(e))return sk(e,t,r);if((0,im.Pq)(e))return sS({type:"json_schema",json_schema:{...r,name:t,strict:!0,schema:(0,ig.PF)(e,{cycles:"ref",reused:"ref",override(e){e.jsonSchema.title=t}})}},t=>ad(e,JSON.parse(t)));throw Error("Unsupported schema response format")}function sE(e,t){return t&&"object"==typeof t&&"images"in t&&Array.isArray(t.images)?[{type:"text",text:e},...t.images.filter(e=>"string"==typeof e?.image_url?.url).map(e=>({type:"image",url:e.image_url.url}))]:e}var sA={"gpt-4.1-nano":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-3-small":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-05-13":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-08-06":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1-mini":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-3.5-turbo":{maxInputTokens:16385,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1,imageUrlInputs:!1,pdfToolMessage:!1,imageToolMessage:!1,toolChoice:!0},"text-embedding-3-large":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4-turbo":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-preview":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-mini":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"codex-mini-latest":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-nano":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-codex":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o1:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-mini":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-mini":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-ada-002":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-11-20":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o3:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-chat-latest":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-mini":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-pro":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:272e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0}},sO=r(36984),sT=r(61115),sN=r(1995),sC=r(83461),sP=r(91846),sj=class extends sO.xV{temperature;topP;frequencyPenalty;presencePenalty;n;logitBias;model="gpt-3.5-turbo";modelKwargs;stop;stopSequences;user;timeout;streaming=!1;streamUsage=!0;maxTokens;logprobs;topLogprobs;apiKey;organization;__includeRawResponse;client;clientConfig;supportsStrictToolCalling;audio;modalities;reasoning;zdrEnabled;service_tier;promptCacheKey;promptCacheRetention;verbosity;defaultOptions;_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","service_tier"]}lc_serializable=!0;get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning","promptCacheKey","promptCacheRetention","verbosity"]}getLsParams(e){let t=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}constructor(e){super(e??{});let t="string"==typeof e?.configuration?.apiKey||"function"==typeof e?.configuration?.apiKey?e?.configuration?.apiKey:void 0;this.apiKey=e?.apiKey??t??(0,is.Az)("OPENAI_API_KEY"),this.organization=e?.configuration?.organization??(0,is.Az)("OPENAI_ORGANIZATION"),this.model=e?.model??e?.modelName??this.model,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.logprobs=e?.logprobs,this.topLogprobs=e?.topLogprobs,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.__includeRawResponse=e?.__includeRawResponse,this.audio=e?.audio,this.modalities=e?.modalities,this.reasoning=e?.reasoning,this.maxTokens=e?.maxCompletionTokens??e?.maxTokens,this.promptCacheKey=e?.promptCacheKey??this.promptCacheKey,this.promptCacheRetention=e?.promptCacheRetention??this.promptCacheRetention,this.verbosity=e?.verbosity??this.verbosity,this.disableStreaming=e?.disableStreaming===!0,this.streaming=e?.streaming===!0,this.disableStreaming&&(this.streaming=!1),e?.streaming===!1&&(this.disableStreaming=!0),this.streamUsage=e?.streamUsage??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration},e?.supportsStrictToolCalling!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),e?.service_tier!==void 0&&(this.service_tier=e.service_tier),this.zdrEnabled=e?.zdrEnabled??!1}_getReasoningParams(e){let t;if(ie(this.model))return void 0!==this.reasoning&&(t={...t,...this.reasoning}),e?.reasoning!==void 0&&(t={...t,...e.reasoning}),t}_getResponseFormat(e){return e&&"json_schema"===e.type&&e.json_schema.schema&&(0,im.c9)(e.json_schema.schema)?sI(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}_combineCallOptions(e){return{...this.defaultOptions,...e??{}}}_getClientOptions(e){if(!this.client){let e=il({baseURL:this.clientConfig.baseURL}),t={...this.clientConfig,baseURL:e,timeout:this.timeout,maxRetries:0};t.baseURL||delete t.baseURL,t.defaultHeaders=ip(t.defaultHeaders),this.client=new n4(t)}return{...this.clientConfig,...e}}_convertChatOpenAIToolToCompletionsTool(e,t){return iI(e)?iP(e.metadata.customTool):(0,sT.VC)(e)?t?.strict!==void 0?{...e,function:{...e.function,strict:t.strict}}:e:iy(e,t)}bindTools(e,t){let r;return t?.strict!==void 0?r=t.strict:void 0!==this.supportsStrictToolCalling&&(r=this.supportsStrictToolCalling),this.withConfig({tools:e.map(e=>ix(e)||iI(e)?e:i$(e)?e.extras.providerToolDefinition:this._convertChatOpenAIToolToCompletionsTool(e,{strict:r})),...t})}async stream(e,t){return super.stream(e,this._combineCallOptions(t))}async invoke(e,t){return super.invoke(e,this._combineCallOptions(t))}_combineLLMOutput(...e){return e.reduce((e,t)=>(t&&t.tokenUsage&&(e.tokenUsage.completionTokens+=t.tokenUsage.completionTokens??0,e.tokenUsage.promptTokens+=t.tokenUsage.promptTokens??0,e.tokenUsage.totalTokens+=t.tokenUsage.totalTokens??0),e),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}async getNumTokensFromMessages(e){let t=0,r=0,n=0;"gpt-3.5-turbo-0301"===this.model?(r=4,n=-1):(r=3,n=1);let i=await Promise.all(e.map(async e=>{let i=await this.getNumTokens(e.content),a=await this.getNumTokens(ii(e)),s=void 0!==e.name?n+await this.getNumTokens(e.name):0,o=i+r+a+s,l=e;if("function"===l._getType()&&(o-=2),l.additional_kwargs?.function_call&&(o+=3),l?.additional_kwargs.function_call?.name&&(o+=await this.getNumTokens(l.additional_kwargs.function_call?.name)),l.additional_kwargs.function_call?.arguments)try{o+=await this.getNumTokens(JSON.stringify(JSON.parse(l.additional_kwargs.function_call?.arguments)))}catch(e){console.error("Error parsing function arguments",e,JSON.stringify(l.additional_kwargs.function_call)),o+=await this.getNumTokens(l.additional_kwargs.function_call?.arguments)}return t+=o,o}));return{totalCount:t+=3,countPerMessage:i}}async _getNumTokensFromGenerations(e){return(await Promise.all(e.map(async e=>e.message.additional_kwargs?.function_call?(await this.getNumTokensFromMessages([e.message])).countPerMessage[0]:await this.getNumTokens(e.message.content)))).reduce((e,t)=>e+t,0)}async _getEstimatedTokenCountFromPrompt(e,t,r){let n=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&"auto"!==r){let e=i_(t);n+=await this.getNumTokens(e),n+=9}return t&&e.find(e=>"system"===e._getType())&&(n-=4),"none"===r?n+=1:"object"==typeof r&&(n+=await this.getNumTokens(r.name)+4),n}async moderateContent(e,t){let r=this._getClientOptions(t?.options),n={input:e,model:t?.model??"omni-moderation-latest"};return this.caller.call(async()=>{try{return await this.client.moderations.create(n,r)}catch(e){throw n5(e)}})}get profile(){return sA[this.model]??{}}_getStructuredOutputMethod(e){let t={...e};if(this.model.startsWith("gpt-3")||this.model.startsWith("gpt-4-")||"gpt-4"===this.model)"jsonSchema"===t.method&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`);else if(t?.method===void 0)return"jsonSchema";return t.method}withStructuredOutput(e,t){let r,n,{schema:i,name:a,includeRaw:s}={...t,schema:e};if(t?.strict!==void 0&&"jsonMode"===t.method)throw Error("Argument `strict` is only supported for `method` = 'function_calling'");let o=s$(this.model,t?.method);if("jsonMode"===o){n=(0,im.c9)(i)?sC._6.fromZodSchema(i):new sC.hU;let e=(0,ig.PF)(i);r=this.withConfig({outputVersion:"v0",response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"json_mode"},schema:{title:a??"extract",...e}}})}else if("jsonSchema"===o){let e={name:a??"extract",description:(0,im.cg)(i),schema:i,strict:t?.strict},s=(0,ig.PF)(e.schema);if(r=this.withConfig({outputVersion:"v0",response_format:{type:"json_schema",json_schema:e},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:{title:e.name,description:e.description,...s}}}),(0,im.c9)(i)){let e=sC._6.fromZodSchema(i);n=sN.jY.from(t=>"parsed"in t.additional_kwargs?t.additional_kwargs.parsed:e)}else n=new sC.hU}else{let e=a??"extract";if((0,im.c9)(i)){let a=(0,ig.PF)(i);r=this.withConfig({outputVersion:"v0",tools:[{type:"function",function:{name:e,description:a.description,parameters:a}}],tool_choice:{type:"function",function:{name:e}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:e,...a}},...t?.strict!==void 0?{strict:t.strict}:{}}),n=new sP.dv({returnSingle:!0,keyName:e,zodSchema:i})}else{let a;"string"==typeof i.name&&"object"==typeof i.parameters&&null!=i.parameters?(a=i,e=i.name):a={name:e=i.title??e,description:i.description??"",parameters:i};let s=(0,ig.PF)(i);r=this.withConfig({outputVersion:"v0",tools:[{type:"function",function:a}],tool_choice:{type:"function",function:{name:e}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:e,...s}},...t?.strict!==void 0?{strict:t.strict}:{}}),n=new sP.dv({returnSingle:!0,keyName:e})}}if(!s)return r.pipe(n);let l=sN.kI.assign({parsed:(e,t)=>n.invoke(e.raw,t)}),u=sN.kI.assign({parsed:()=>null}),c=l.withFallbacks({fallbacks:[u]});return sN.zZ.from([{raw:r},c])}};let sz={providerName:"ChatOpenAI",fromStandardTextBlock:e=>({type:"text",text:e.text}),fromStandardImageBlock(e){if("url"===e.source_type)return{type:"image_url",image_url:{url:e.url,...e.metadata?.detail?{detail:e.metadata.detail}:{}}};if("base64"===e.source_type)return{type:"image_url",image_url:{url:`data:${e.mime_type??""};base64,${e.data}`,...e.metadata?.detail?{detail:e.metadata.detail}:{}}};throw Error(`Image content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(e){if("url"===e.source_type){let t,r=(0,n8.Q7)({dataUrl:e.url});if(!r)throw Error(`URL audio blocks with source_type ${e.source_type} must be formatted as a data URL for ChatOpenAI`);let n=r.mime_type||e.mime_type||"";try{t=(0,n8.Ej)(n)}catch{throw Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`)}if("audio"!==t.type||"wav"!==t.subtype&&"mp3"!==t.subtype)throw Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:t.subtype,data:r.data}}}if("base64"===e.source_type){let t;try{t=(0,n8.Ej)(e.mime_type??"")}catch{throw Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`)}if("audio"!==t.type||"wav"!==t.subtype&&"mp3"!==t.subtype)throw Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:t.subtype,data:e.data}}}throw Error(`Audio content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(e){if("url"===e.source_type){let t=(0,n8.Q7)({dataUrl:e.url}),r=ir(e);if(!t)throw Error(`URL file blocks with source_type ${e.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:e.url,...e.metadata?.filename||e.metadata?.name?{filename:r}:{}}}}if("base64"===e.source_type){let t=ir(e);return{type:"file",file:{file_data:`data:${e.mime_type??""};base64,${e.data}`,...e.metadata?.filename||e.metadata?.name||e.metadata?.title?{filename:t}:{}}}}if("id"===e.source_type)return{type:"file",file:{file_id:e.id}};throw Error(`File content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)}},sR=({message:e,rawResponse:t,includeRawResponse:r})=>{let n=e.tool_calls;if("assistant"!==e.role)return new n8.cM(e.content||"",e.role??"unknown");{let i=[],a=[];for(let e of n??[])try{i.push((0,sP.u$)(e,{returnId:!0}))}catch(t){a.push((0,sP.cT)(e,t.message))}let s={function_call:e.function_call,tool_calls:n};void 0!==r&&(s.__raw_response=t);let o={model_provider:"openai",model_name:t.model,...t.system_fingerprint?{usage:{...t.usage},system_fingerprint:t.system_fingerprint}:{}};e.audio&&(s.audio=e.audio);let l=sE(e.content||"",t.choices?.[0]?.message);return new n8.Od({content:l,tool_calls:i,invalid_tool_calls:a,additional_kwargs:s,response_metadata:o,id:t.id})}},sM=({delta:e,rawResponse:t,includeRawResponse:r,defaultRole:n})=>{let i,a=e.role??n,s=e.content??"";i=e.function_call?{function_call:e.function_call}:e.tool_calls?{tool_calls:e.tool_calls}:{},r&&(i.__raw_response=t),e.audio&&(i.audio={...e.audio,index:t.choices[0].index});let o={model_provider:"openai",usage:{...t.usage}};if("user"===a)return new n8.a7({content:s,response_metadata:o});if("assistant"===a){let r=[];if(Array.isArray(e.tool_calls))for(let t of e.tool_calls)r.push({name:t.function?.name,args:t.function?.arguments,id:t.id,index:t.index,type:"tool_call_chunk"});return new n8.H({content:s,tool_call_chunks:r,additional_kwargs:i,id:t.id,response_metadata:o})}if("system"===a)return new n8.uU({content:s,response_metadata:o});if("developer"===a)return new n8.uU({content:s,response_metadata:o,additional_kwargs:{__openai_role__:"developer"}});if("function"===a)return new n8.FK({content:s,additional_kwargs:i,name:e.name,response_metadata:o});else if("tool"===a)return new n8.dr({content:s,additional_kwargs:i,tool_call_id:e.tool_call_id,response_metadata:o});else return new n8.XU({content:s,role:a,response_metadata:o})},sL=e=>{if("image"===e.type){if(e.url)return{type:"image_url",image_url:{url:e.url}};else if(e.data)return{type:"image_url",image_url:{url:`data:${e.mimeType};base64,${e.data}`}}}if("audio"===e.type&&e.data){let t=(0,n8.iD)(()=>{let[,t]=e.mimeType.split("/");return"wav"===t||"mp3"===t?t:"wav"});return{type:"input_audio",input_audio:{data:e.data.toString(),format:t}}}if("file"===e.type){if(e.data){let t=ir(e);return{type:"file",file:{file_data:`data:${e.mimeType};base64,${e.data}`,filename:t}}}if(e.fileId)return{type:"file",file:{file_id:e.fileId}}}},sZ=({message:e,model:t})=>{let r=ii(e);if("system"===r&&ie(t)&&(r="developer"),"developer"===r)return{role:"developer",content:e.contentBlocks.filter(e=>"text"===e.type)};if("system"===r)return{role:"system",content:e.contentBlocks.filter(e=>"text"===e.type)};if("assistant"===r)return{role:"assistant",content:e.contentBlocks.filter(e=>"text"===e.type)};if("tool"===r&&n8.uf.isInstance(e))return{role:"tool",tool_call_id:e.tool_call_id,content:e.contentBlocks.filter(e=>"text"===e.type)};if("function"===r)return{role:"function",name:e.name??"",content:e.contentBlocks.filter(e=>"text"===e.type).join("")};return{role:"user",content:Array.from(function*(e){for(let t of e){"text"===t.type&&(yield{type:"text",text:t.text});let e=sL(t);e&&(yield e)}}(e.contentBlocks))}},sD=({messages:e,model:t})=>e.flatMap(e=>{if("output_version"in e.response_metadata&&e.response_metadata?.output_version==="v1")return sZ({message:e});let r=ii(e);"system"===r&&ie(t)&&(r="developer");let n={role:r,content:"string"==typeof e.content?e.content:e.content.map(e=>(0,n8.Fz)(e)?(0,n8.up)(e,sz):e)};return(null!=e.name&&(n.name=e.name),null!=e.additional_kwargs.function_call&&(n.function_call=e.additional_kwargs.function_call),n8.Od.isInstance(e)&&e.tool_calls?.length?n.tool_calls=e.tool_calls.map(sP.sD):(null!=e.additional_kwargs.tool_calls&&(n.tool_calls=e.additional_kwargs.tool_calls),n8.uf.isInstance(e)&&null!=e.tool_call_id&&(n.tool_call_id=e.tool_call_id)),e.additional_kwargs.audio&&"object"==typeof e.additional_kwargs.audio&&"id"in e.additional_kwargs.audio)?[n,{role:"assistant",audio:{id:e.additional_kwargs.audio.id}}]:n});var sU=r(23294),sF=class extends sj{invocationParams(e,t){let r;e?.strict!==void 0?r=e.strict:void 0!==this.supportsStrictToolCalling&&(r=this.supportsStrictToolCalling);let n={};e?.stream_options!==void 0?n={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t?.streaming)&&(n={stream_options:{include_usage:!0}});let i={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:e?.tools?.length?e.tools.map(e=>this._convertChatOpenAIToolToCompletionsTool(e,{strict:r})):void 0,tool_choice:ik(e?.tool_choice),response_format:this._getResponseFormat(e?.response_format),seed:e?.seed,...n,parallel_tool_calls:e?.parallel_tool_calls,...this.audio||e?.audio?{audio:this.audio||e?.audio}:{},...this.modalities||e?.modalities?{modalities:this.modalities||e?.modalities}:{},...this.modelKwargs,prompt_cache_key:e?.promptCacheKey??this.promptCacheKey,prompt_cache_retention:e?.promptCacheRetention??this.promptCacheRetention,verbosity:e?.verbosity??this.verbosity};e?.prediction!==void 0&&(i.prediction=e.prediction),void 0!==this.service_tier&&(i.service_tier=this.service_tier),e?.service_tier!==void 0&&(i.service_tier=e.service_tier);let a=this._getReasoningParams(e);return void 0!==a&&void 0!==a.effort&&(i.reasoning_effort=a.effort),ie(i.model)?i.max_completion_tokens=-1===this.maxTokens?void 0:this.maxTokens:i.max_tokens=-1===this.maxTokens?void 0:this.maxTokens,i}async _generate(e,t,r){let n={},i=this.invocationParams(t),a=sD({messages:e,model:this.model});if(i.stream){let i=this._streamResponseChunks(e,t,r),a={};for await(let e of i){e.message.response_metadata={...e.generationInfo,...e.message.response_metadata};let t=e.generationInfo?.completion??0;void 0===a[t]?a[t]=e:a[t]=a[t].concat(e)}let s=Object.entries(a).sort(([e],[t])=>parseInt(e,10)-parseInt(t,10)).map(([e,t])=>t),{functions:o,function_call:l}=this.invocationParams(t),u=await this._getEstimatedTokenCountFromPrompt(e,o,l),c=await this._getNumTokensFromGenerations(s);return n.input_tokens=u,n.output_tokens=c,n.total_tokens=u+c,{generations:s,llmOutput:{estimatedTokenUsage:{promptTokens:n.input_tokens,completionTokens:n.output_tokens,totalTokens:n.total_tokens}}}}{let e=await this.completionWithRetry({...i,stream:!1,messages:a},{signal:t?.signal,...t?.options}),{completion_tokens:r,prompt_tokens:s,total_tokens:o,prompt_tokens_details:l,completion_tokens_details:u}=e?.usage??{};r&&(n.output_tokens=(n.output_tokens??0)+r),s&&(n.input_tokens=(n.input_tokens??0)+s),o&&(n.total_tokens=(n.total_tokens??0)+o),(l?.audio_tokens!==null||l?.cached_tokens!==null)&&(n.input_token_details={...l?.audio_tokens!==null&&{audio:l?.audio_tokens},...l?.cached_tokens!==null&&{cache_read:l?.cached_tokens}}),(u?.audio_tokens!==null||u?.reasoning_tokens!==null)&&(n.output_token_details={...u?.audio_tokens!==null&&{audio:u?.audio_tokens},...u?.reasoning_tokens!==null&&{reasoning:u?.reasoning_tokens}});let c=[];for(let t of e?.choices??[]){let r={text:t.message?.content??"",message:this._convertCompletionsMessageToBaseMessage(t.message??{role:"assistant"},e)};r.generationInfo={...t.finish_reason?{finish_reason:t.finish_reason}:{},...t.logprobs?{logprobs:t.logprobs}:{}},(0,n8.KX)(r.message)&&(r.message.usage_metadata=n),r.message=new n8.Od(Object.fromEntries(Object.entries(r.message).filter(([e])=>!e.startsWith("lc_")))),c.push(r)}return{generations:c,llmOutput:{tokenUsage:{promptTokens:n.input_tokens,completionTokens:n.output_tokens,totalTokens:n.total_tokens}}}}}async *_streamResponseChunks(e,t,r){let n,i,a=sD({messages:e,model:this.model}),s={...this.invocationParams(t,{streaming:!0}),messages:a,stream:!0};for await(let e of(await this.completionWithRetry(s,t))){let a=e?.choices?.[0];if(e.usage&&(i=e.usage),!a)continue;let{delta:s}=a;if(!s)continue;let o=this._convertCompletionsDeltaToBaseMessageChunk(s,e,n);n=s.role??n;let l={prompt:t.promptIndex??0,completion:a.index??0};if("string"!=typeof o.content){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}let u={...l};null!=a.finish_reason&&(u.finish_reason=a.finish_reason,u.system_fingerprint=e.system_fingerprint,u.model_name=e.model,u.service_tier=e.service_tier),this.logprobs&&(u.logprobs=a.logprobs);let c=new sU.Cf({message:o,text:o.content,generationInfo:u});yield c,await r?.handleLLMNewToken(c.text??"",l,void 0,void 0,void 0,{chunk:c})}if(i){let e={...i.prompt_tokens_details?.audio_tokens!==null&&{audio:i.prompt_tokens_details?.audio_tokens},...i.prompt_tokens_details?.cached_tokens!==null&&{cache_read:i.prompt_tokens_details?.cached_tokens}},t={...i.completion_tokens_details?.audio_tokens!==null&&{audio:i.completion_tokens_details?.audio_tokens},...i.completion_tokens_details?.reasoning_tokens!==null&&{reasoning:i.completion_tokens_details?.reasoning_tokens}},r=new sU.Cf({message:new n8.H({content:"",response_metadata:{usage:{...i}},usage_metadata:{input_tokens:i.prompt_tokens,output_tokens:i.completion_tokens,total_tokens:i.total_tokens,...Object.keys(e).length>0&&{input_token_details:e},...Object.keys(t).length>0&&{output_token_details:t}}}),text:""});yield r}if(t.signal?.aborted)throw Error("AbortError")}async completionWithRetry(e,t){let r=this._getClientOptions(t),n=e.response_format&&"json_schema"===e.response_format.type;return this.caller.call(async()=>{try{if(n&&!e.stream)return await this.client.chat.completions.parse(e,r);return await this.client.chat.completions.create(e,r)}catch(e){throw n5(e)}})}_convertCompletionsDeltaToBaseMessageChunk(e,t,r){return sM({delta:e,rawResponse:t,includeRawResponse:this.__includeRawResponse,defaultRole:r})}_convertCompletionsMessageToBaseMessage(e,t){return sR({message:e,rawResponse:t,includeRawResponse:this.__includeRawResponse})}};let sB={openAIApiKey:"openai_api_key",openAIApiVersion:"openai_api_version",openAIBasePath:"openai_api_base",deploymentName:"deployment_name",azureOpenAIEndpoint:"azure_endpoint",azureOpenAIApiVersion:"openai_api_version",azureOpenAIBasePath:"openai_api_base",azureOpenAIApiDeploymentName:"deployment_name"},sV={azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"},sJ=["azureOpenAIApiKey","azureOpenAIApiVersion","azureOpenAIBasePath","azureOpenAIEndpoint","azureOpenAIApiInstanceName","azureOpenAIApiDeploymentName","deploymentName","openAIApiKey","openAIApiVersion"];function sW(e){if(this.azureOpenAIApiKey=e?.azureOpenAIApiKey??("string"==typeof e?.openAIApiKey?e?.openAIApiKey:void 0)??("string"==typeof e?.apiKey?e?.apiKey:void 0)??(0,is.Az)("AZURE_OPENAI_API_KEY"),this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??(0,is.Az)("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=e?.azureOpenAIApiDeploymentName??e?.deploymentName??(0,is.Az)("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??e?.openAIApiVersion??(0,is.Az)("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??(0,is.Az)("AZURE_OPENAI_BASE_PATH"),this.azureOpenAIEndpoint=e?.azureOpenAIEndpoint??(0,is.Az)("AZURE_OPENAI_ENDPOINT"),this.azureADTokenProvider=e?.azureADTokenProvider,!this.azureOpenAIApiKey&&!this.apiKey&&!this.azureADTokenProvider)throw Error("Azure OpenAI API key or Token Provider not found")}function sq(e){if(!this.client){let e={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,azureADTokenProvider:this.azureADTokenProvider,baseURL:this.clientConfig.baseURL,azureOpenAIEndpoint:this.azureOpenAIEndpoint},t=il(e),{apiKey:r,...n}=this.clientConfig,i={...n,baseURL:t,timeout:this.timeout,maxRetries:0};this.azureADTokenProvider||(i.apiKey=e.azureOpenAIApiKey),i.baseURL||delete i.baseURL,i.defaultHeaders=ip(i.defaultHeaders,!0,"2.0.0"),this.client=new n9({apiVersion:this.azureOpenAIApiVersion,azureADTokenProvider:this.azureADTokenProvider,deployment:this.azureOpenAIApiDeploymentName,...i})}let t={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.query={"api-version":this.azureOpenAIApiVersion,...t.query}),t}function sK(e){let t=e;function r(e){return"object"==typeof e&&null!=e}if(r(t)&&r(t.kwargs)){if(delete t.kwargs.azure_openai_base_path,delete t.kwargs.azure_openai_api_deployment_name,delete t.kwargs.azure_openai_api_key,delete t.kwargs.azure_openai_api_version,delete t.kwargs.azure_open_ai_base_path,!t.kwargs.azure_endpoint&&this.azureOpenAIEndpoint&&(t.kwargs.azure_endpoint=this.azureOpenAIEndpoint),!t.kwargs.azure_endpoint&&this.azureOpenAIBasePath){let e=this.azureOpenAIBasePath.split("/openai/deployments/");if(2===e.length&&e[0].startsWith("http")){let[r]=e;t.kwargs.azure_endpoint=r}}if(!t.kwargs.azure_endpoint&&this.azureOpenAIApiInstanceName&&(t.kwargs.azure_endpoint=`https://${this.azureOpenAIApiInstanceName}.openai.azure.com/`),!t.kwargs.deployment_name&&this.azureOpenAIApiDeploymentName&&(t.kwargs.deployment_name=this.azureOpenAIApiDeploymentName),!t.kwargs.deployment_name&&this.azureOpenAIBasePath){let e=this.azureOpenAIBasePath.split("/openai/deployments/");if(2===e.length){let[,r]=e;t.kwargs.deployment_name=r}}t.kwargs.azure_endpoint&&t.kwargs.deployment_name&&t.kwargs.openai_api_base&&delete t.kwargs.openai_api_base,t.kwargs.azure_openai_api_instance_name&&t.kwargs.azure_endpoint&&delete t.kwargs.azure_openai_api_instance_name}return t}var sG=r(49641).Buffer;let sH="__openai_function_call_ids__",sY=e=>{let t={...e?.input_tokens_details?.cached_tokens!=null&&{cache_read:e?.input_tokens_details?.cached_tokens}},r={...e?.output_tokens_details?.reasoning_tokens!=null&&{reasoning:e?.output_tokens_details?.reasoning_tokens}};return{input_tokens:e?.input_tokens??0,output_tokens:e?.output_tokens??0,total_tokens:e?.total_tokens??0,input_token_details:t,output_token_details:r}},sX=e=>{let t;if(e.error){let t=Error(e.error.message);throw t.name=e.error.code,t}let r=[],n=[],i=[],a={model_provider:"openai",model:e.model,created_at:e.created_at,id:e.id,incomplete_details:e.incomplete_details,metadata:e.metadata,object:e.object,status:e.status,user:e.user,service_tier:e.service_tier,model_name:e.model},s={};for(let a of e.output)if("message"===a.type)t=a.id,r.push(...a.content.flatMap(e=>"output_text"===e.type?("parsed"in e&&null!=e.parsed&&(s.parsed=e.parsed),{type:"text",text:e.text,annotations:e.annotations}):"refusal"===e.type?(s.refusal=e.refusal,[]):e));else if("function_call"===a.type){let e={function:{name:a.name,arguments:a.arguments},id:a.call_id};try{n.push((0,sP.u$)(e,{returnId:!0}))}catch(r){let t;"object"==typeof r&&null!=r&&"message"in r&&"string"==typeof r.message&&(t=r.message),i.push((0,sP.cT)(e,t))}s[sH]??={},a.id&&(s[sH][a.call_id]=a.id)}else if("reasoning"===a.type)s.reasoning=a;else if("custom_tool_call"===a.type){let e=iA(a);e?n.push(e):i.push((0,sP.cT)(a,"Malformed custom tool call"))}else if("computer_call"===a.type){let e=iO(a);e?n.push(e):i.push((0,sP.cT)(a,"Malformed computer call"))}else s.tool_outputs??=[],s.tool_outputs.push(a);return new n8.Od({id:t,content:r,tool_calls:n,invalid_tool_calls:i,usage_metadata:sY(e.usage),additional_kwargs:s,response_metadata:a})},sQ=e=>{let t=(e.summary.length>1?e.summary.reduce((e,t)=>{let r=e[e.length-1];return r.index===t.index?r.text+=t.text:e.push(t),e},[{...e.summary[0]}]):e.summary).map(e=>Object.fromEntries(Object.entries(e).filter(([e])=>"index"!==e)));return{...e,summary:t}},s0=e=>{let t,r,n=[],i={},a=[],s={model_provider:"openai"},o={};if("response.output_text.delta"===e.type)n.push({type:"text",text:e.delta,index:e.content_index});else if("response.output_text.annotation.added"===e.type)n.push({type:"text",text:"",annotations:[e.annotation],index:e.content_index});else if("response.output_item.added"===e.type&&"message"===e.item.type)r=e.item.id;else if("response.output_item.added"===e.type&&"function_call"===e.item.type)a.push({type:"tool_call_chunk",name:e.item.name,args:e.item.arguments,id:e.item.call_id,index:e.output_index}),o[sH]={[e.item.call_id]:e.item.id};else if("response.output_item.done"===e.type&&"computer_call"===e.item.type)a.push({type:"tool_call_chunk",name:"computer_use",args:JSON.stringify({action:e.item.action}),id:e.item.call_id,index:e.output_index}),o.tool_outputs=[e.item];else if("response.output_item.done"===e.type&&["web_search_call","file_search_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call","custom_tool_call"].includes(e.item.type))o.tool_outputs=[e.item];else if("response.created"===e.type)s.id=e.response.id,s.model_name=e.response.model,s.model=e.response.model;else if("response.completed"===e.type){let r=sX(e.response);for(let[n,i]of(t=sY(e.response.usage),e.response.text?.format?.type==="json_schema"&&(o.parsed??=JSON.parse(r.text)),Object.entries(e.response)))"id"!==n&&(s[n]=i)}else if("response.function_call_arguments.delta"===e.type||"response.custom_tool_call_input.delta"===e.type)a.push({type:"tool_call_chunk",args:e.delta,index:e.output_index});else if("response.web_search_call.completed"===e.type||"response.file_search_call.completed"===e.type)i={tool_outputs:{id:e.item_id,type:e.type.replace("response.","").replace(".completed",""),status:"completed"}};else if("response.refusal.done"===e.type)o.refusal=e.refusal;else if("response.output_item.added"===e.type&&"item"in e&&"reasoning"===e.item.type){let t=e.item.summary?e.item.summary.map((e,t)=>({...e,index:t})):void 0;o.reasoning={id:e.item.id,type:e.item.type,...t?{summary:t}:{}}}else if("response.reasoning_summary_part.added"===e.type)o.reasoning={type:"reasoning",summary:[{...e.part,index:e.summary_index}]};else if("response.reasoning_summary_text.delta"===e.type)o.reasoning={type:"reasoning",summary:[{text:e.delta,type:"summary_text",index:e.summary_index}]};else if("response.image_generation_call.partial_image"===e.type)return null;else return null;return new sU.Cf({text:n.map(e=>e.text).join(""),message:new n8.H({id:r,content:n,tool_call_chunks:a,usage_metadata:t,additional_kwargs:o,response_metadata:s}),generationInfo:i})},s1=e=>{let t=n8.Od.isInstance(e)&&e.response_metadata?.model_provider==="openai";return Array.from(function*(){let r,n=n7(()=>{try{let t=ii(e);if("system"===t||"developer"===t||"assistant"===t||"user"===t)return t;return"assistant"}catch{return"assistant"}}),i=new Set,a=new Set,s=new Map,o=new Map;function*l(){if(!r)return;let e=r.content;("string"==typeof e&&e.length>0||Array.isArray(e)&&e.length>0)&&(yield r),r=void 0}let u=e=>{r||(r={type:"message",role:n,content:[]}),"string"==typeof r.content?r.content=r.content.length>0?[{type:"input_text",text:r.content},...e]:[...e]:r.content.push(...e)},c=e=>{if("string"==typeof e)return e;try{return JSON.stringify(e??{})}catch{return"{}"}},d=e=>{let t=n7(()=>{let t=e.metadata?.detail;return"low"===t||"high"===t||"auto"===t?t:"auto"});if(e.fileId)return{type:"input_image",detail:t,file_id:e.fileId};if(e.url)return{type:"input_image",detail:t,image_url:e.url};if(e.data){let r="string"==typeof e.data?e.data:sG.from(e.data).toString("base64"),n=e.mimeType??"image/png";return{type:"input_image",detail:t,image_url:`data:${n};base64,${r}`}}},p=e=>{let t=ir(e);if(e.fileId&&"string"==typeof t)return{type:"input_file",file_id:e.fileId,...t?{filename:t}:{}};if(e.url&&"string"==typeof t)return{type:"input_file",file_url:e.url,...t?{filename:t}:{}};if(e.data&&"string"==typeof t){let r="string"==typeof e.data?e.data:sG.from(e.data).toString("base64"),n=e.mimeType??"application/octet-stream";return{type:"input_file",file_data:`data:${n};base64,${r}`,...t?{filename:t}:{}}}},h=e=>{let t=n7(()=>{if(Array.isArray(e.summary)){let t=e.summary,r=t?.map(e=>e?.text).filter(e=>"string"==typeof e)??[];if(r.length>0)return r}return e.reasoning?[e.reasoning]:[]}),r=t.length>0?t.map(e=>({type:"summary_text",text:e})):[{type:"summary_text",text:""}],n={type:"reasoning",id:e.id??"",summary:r};return e.reasoning&&(n.content=[{type:"reasoning_text",text:e.reasoning}]),n},f=e=>({type:"function_call",name:e.name??"",call_id:e.id??"",arguments:c(e.args)}),m=e=>{let t=c(e.output),r="success"===e.status?"completed":"error"===e.status?"incomplete":void 0;return{type:"function_call_output",call_id:e.toolCallId??"",output:t,...r?{status:r}:{}}};for(let r of e.contentBlocks)if("text"===r.type)u([{type:"input_text",text:r.text}]);else if("invalid_tool_call"===r.type);else if("reasoning"===r.type)yield*l(),yield h(r);else if("tool_call"===r.type){yield*l();let e=r.id??"";e&&(i.add(e),s.delete(e)),yield f(r)}else if("tool_call_chunk"===r.type){if(r.id){let e=s.get(r.id)??{name:r.name,args:[]};r.name&&(e.name=r.name),r.args&&e.args.push(r.args),s.set(r.id,e)}}else if("server_tool_call"===r.type){yield*l();let e=r.id??"";e&&(a.add(e),o.delete(e)),yield f(r)}else if("server_tool_call_chunk"===r.type){if(r.id){let e=o.get(r.id)??{name:r.name,args:[]};r.name&&(e.name=r.name),r.args&&e.args.push(r.args),o.set(r.id,e)}}else if("server_tool_call_result"===r.type)yield*l(),yield m(r);else if("audio"===r.type);else if("file"===r.type){let e=p(r);e&&u([e])}else if("image"===r.type){let e=d(r);e&&u([e])}else if("video"===r.type){let e=p(r);e&&u([e])}else"text-plain"===r.type?r.text&&u([{type:"input_text",text:r.text}]):"non_standard"===r.type&&t&&(yield*l(),yield r.value);for(let[e,t]of(yield*l(),s)){if(!e||i.has(e))continue;let r=t.args.join("");(t.name||r)&&(yield{type:"function_call",call_id:e,name:t.name??"",arguments:r})}for(let[e,t]of o){if(!e||a.has(e))continue;let r=t.args.join("");(t.name||r)&&(yield{type:"function_call",call_id:e,name:t.name??"",arguments:r})}}())},s2=({messages:e,zdrEnabled:t,model:r})=>e.flatMap(e=>{let n=e.response_metadata;if(n?.output_version==="v1")return s1(e);let i=e.additional_kwargs,a=ii(e);if("system"===a&&ie(r)&&(a="developer"),"function"===a)throw Error("Function messages are not supported in Responses API");if("tool"===a){let t=e;return i?.type==="computer_call_output"?{type:"computer_call_output",output:(()=>{if("string"==typeof t.content)return{type:"input_image",image_url:t.content};if(Array.isArray(t.content)){let e=t.content.find(e=>"input_image"===e.type);if(e)return e;let r=t.content.find(e=>"computer_screenshot"===e.type);if(r)return r;let n=t.content.find(e=>"image_url"===e.type);if(n)return{type:"input_image",image_url:"string"==typeof n.image_url?n.image_url:n.image_url.url}}throw Error("Invalid computer call output")})(),call_id:t.tool_call_id}:t.additional_kwargs?.customTool?{type:"custom_tool_call_output",call_id:t.tool_call_id,output:t.content}:{type:"function_call_output",call_id:t.tool_call_id,id:t.id?.startsWith("fc_")?t.id:void 0,output:"string"!=typeof t.content?JSON.stringify(t.content):t.content}}if("assistant"===a){if(!t&&n?.output!=null&&Array.isArray(n?.output)&&n?.output.length>0&&n?.output.every(e=>"type"in e))return n?.output;let r=[];if(i?.reasoning&&!t){let e=sQ(i.reasoning);r.push(e)}let{content:a}=e;i?.refusal&&("string"==typeof a&&(a=[{type:"output_text",text:a,annotations:[]}]),a=[...a,{type:"refusal",refusal:i.refusal}]),("string"==typeof a||a.length>0)&&r.push({type:"message",role:"assistant",...e.id&&!t&&e.id.startsWith("msg_")?{id:e.id}:{},content:n7(()=>"string"==typeof a?a:a.flatMap(e=>"text"===e.type?{type:"output_text",text:e.text,annotations:e.annotations??[]}:"output_text"===e.type||"refusal"===e.type?e:[]))});let s=i?.[sH];n8.Od.isInstance(e)&&e.tool_calls?.length?r.push(...e.tool_calls.map(e=>iN(e)?{type:"custom_tool_call",id:e.call_id,call_id:e.id??"",input:e.args.input,name:e.name}:iT(e)?{type:"computer_call",id:e.call_id,call_id:e.id??"",action:e.args.action}:{type:"function_call",name:e.name,arguments:JSON.stringify(e.args),call_id:e.id,...!t?{id:s?.[e.id]}:{}})):i?.tool_calls&&r.push(...i.tool_calls.map(e=>({type:"function_call",name:e.function.name,call_id:e.id,arguments:e.function.arguments,...!t?{id:s?.[e.id]}:{}})));let o=n?.output?.length?n?.output:i.tool_outputs,l=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(null!=o){let e=o,t=e?.filter(e=>l.includes(e.type));t.length>0&&r.push(...t)}return r}if("user"===a||"system"===a||"developer"===a){if("string"==typeof e.content)return{type:"message",role:a,content:e.content};let t=[],r=e.content.flatMap(e=>("mcp_approval_response"===e.type&&t.push({type:"mcp_approval_response",approval_request_id:e.approval_request_id,approve:e.approve}),(0,n8.Fz)(e))?(0,n8.up)(e,sz):"text"===e.type?{type:"input_text",text:e.text}:"image_url"===e.type?{type:"input_image",image_url:n7(()=>"string"==typeof e.image_url?e.image_url:"object"==typeof e.image_url&&null!==e.image_url&&"url"in e.image_url?e.image_url.url:void 0),detail:n7(()=>"string"==typeof e.image_url?"auto":"object"==typeof e.image_url&&null!==e.image_url&&"detail"in e.image_url?e.image_url.detail:void 0)}:"input_text"===e.type||"input_image"===e.type||"input_file"===e.type?e:[]);return r.length>0&&t.push({type:"message",role:a,content:r}),t}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${a}`),[]});var s4=class extends sj{invocationParams(e){let t;e?.strict!==void 0&&(t=e.strict),void 0===t&&void 0!==this.supportsStrictToolCalling&&(t=this.supportsStrictToolCalling);let r={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e?.previous_response_id,truncation:e?.truncation,include:e?.include,tools:e?.tools?.length?this._reduceChatOpenAITools(e.tools,{stream:this.streaming,strict:t}):void 0,tool_choice:iS(e?.tool_choice)?e?.tool_choice:(()=>{let t=ik(e?.tool_choice);if("object"==typeof t&&"type"in t){if("function"===t.type)return{type:"function",name:t.function.name};else if("allowed_tools"===t.type)return{type:"allowed_tools",mode:t.allowed_tools.mode,tools:t.allowed_tools.tools};else if("custom"===t.type)return{type:"custom",name:t.custom.name}}})(),text:(()=>{if(e?.text)return e.text;let t=this._getResponseFormat(e?.response_format);return t?.type==="json_schema"?null!=t.json_schema.schema?{format:{type:"json_schema",schema:t.json_schema.schema,description:t.json_schema.description,name:t.json_schema.name,strict:t.json_schema.strict},verbosity:e?.verbosity}:void 0:{format:t,verbosity:e?.verbosity}})(),parallel_tool_calls:e?.parallel_tool_calls,max_output_tokens:-1===this.maxTokens?void 0:this.maxTokens,prompt_cache_key:e?.promptCacheKey??this.promptCacheKey,prompt_cache_retention:e?.promptCacheRetention??this.promptCacheRetention,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},n=this._getReasoningParams(e);return void 0!==n&&(r.reasoning=n),r}async _generate(e,t){let r=this.invocationParams(t);if(r.stream){let r;for await(let n of this._streamResponseChunks(e,t))n.message.response_metadata={...n.generationInfo,...n.message.response_metadata},r=r?.concat(n)??n;return{generations:r?[r]:[],llmOutput:{estimatedTokenUsage:r?.message?.usage_metadata}}}{let n=await this.completionWithRetry({input:s2({messages:e,zdrEnabled:this.zdrEnabled??!1,model:this.model}),...r,stream:!1},{signal:t?.signal,...t?.options});return{generations:[{text:n.output_text,message:sX(n)}],llmOutput:{id:n.id,estimatedTokenUsage:n.usage?{promptTokens:n.usage.input_tokens,completionTokens:n.usage.output_tokens,totalTokens:n.usage.total_tokens}:void 0}}}}async *_streamResponseChunks(e,t,r){for await(let n of(await this.completionWithRetry({...this.invocationParams(t),input:s2({messages:e,zdrEnabled:this.zdrEnabled??!1,model:this.model}),stream:!0},t))){let e=s0(n);null!=e&&(yield e,await r?.handleLLMNewToken(e.text||"",{prompt:t.promptIndex??0,completion:0},void 0,void 0,void 0,{chunk:e}))}}async completionWithRetry(e,t){return this.caller.call(async()=>{let r=this._getClientOptions(t);try{if(e.text?.format?.type==="json_schema"&&!e.stream)return await this.client.responses.parse(e,r);return await this.client.responses.create(e,r)}catch(e){throw n5(e)}})}_reduceChatOpenAITools(e,t){let r=[];for(let n of e)if(ix(n))"image_generation"===n.type&&t?.stream&&(n.partial_images=1),r.push(n);else if(iI(n)){let e=n.metadata.customTool;r.push({type:"custom",name:e.name,description:e.description,format:e.format})}else(0,sT.VC)(n)?r.push({type:"function",name:n.function.name,parameters:n.function.parameters,description:n.function.description,strict:t?.strict??null}):iE(n)&&r.push(iC(n));return r}},s6=class e extends sj{useResponsesApi=!1;responses;completions;get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}get callKeys(){return[...super.callKeys,"useResponsesApi"]}constructor(e){super(e),this.fields=e,this.useResponsesApi=e?.useResponsesApi??!1,this.responses=e?.responses??new s4(e),this.completions=e?.completions??new sF(e)}_useResponsesApi(e){let t=e?.tools?.some(ix),r=e?.previous_response_id!=null||e?.text!=null||e?.truncation!=null||e?.include!=null||e?.reasoning?.summary!=null||this.reasoning?.summary!=null,n=e?.tools?.some(iE)||e?.tools?.some(iI);return this.useResponsesApi||t||r||n||ia(this.model)}getLsParams(e){let t=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.getLsParams(t):this.completions.getLsParams(t)}invocationParams(e){let t=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.invocationParams(t):this.completions.invocationParams(t)}async _generate(e,t,r){return this._useResponsesApi(t)?this.responses._generate(e,t):this.completions._generate(e,t,r)}async *_streamResponseChunks(e,t,r){if(this._useResponsesApi(t))return void(yield*this.responses._streamResponseChunks(e,this._combineCallOptions(t),r));yield*this.completions._streamResponseChunks(e,this._combineCallOptions(t),r)}withConfig(t){let r=new e(this.fields);return r.defaultOptions={...this.defaultOptions,...t},r}},s9=r(50766),s3=r(55853),s5=(s9.PI,r(91306));function s8(e){return{tool_names:e.toolNames,read_only:e.readOnly}}(s5.J,r(52330)).NL;let s7=/^[cC][^\s-]{8,}$/,oe=/^[0-9a-z]+$/,ot=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,or=/^[0-9a-vA-V]{20}$/,on=/^[A-Za-z0-9]{27}$/,oi=/^[a-zA-Z0-9_-]{21}$/,oa=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,os=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,oo=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,ol=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ou="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function oc(){return RegExp(ou,"u")}let od=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,op=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,oh=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,of=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,om=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,og=/^[A-Za-z0-9_-]*$/,oy=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,ov=/^\+(?:[0-9]){6,14}[0-9]$/,o_="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ob=RegExp(`^${o_}$`);function ow(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function ok(e){return RegExp(`^${ow(e)}$`)}function ox(e){let t=ow({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");let n=`${t}(?:${r.join("|")})`;return RegExp(`^${o_}T(?:${n})$`)}let o$=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},oS=/^\d+$/,oI=/^-?\d+(?:\.\d+)?/i,oE=/^[^A-Z]*$/,oA=/^[^a-z]*$/,oO=ij("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),oT={number:"number",bigint:"bigint",object:"date"},oN=ij("$ZodCheckLessThan",(e,t)=>{oO.init(e,t);let r=oT[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<n&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),oC=ij("$ZodCheckGreaterThan",(e,t)=>{oO.init(e,t);let r=oT[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>n&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),oP=ij("$ZodCheckMultipleOf",(e,t)=>{oO.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===iB(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),oj=ij("$ZodCheckNumberFormat",(e,t)=>{oO.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),n=r?"int":"number",[i,a]=i2[t.format];e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,n.minimum=i,n.maximum=a,r&&(n.pattern=oS)}),e._zod.check=s=>{let o=s.value;if(r){if(!Number.isInteger(o))return void s.issues.push({expected:n,format:t.format,code:"invalid_type",input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?s.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):s.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}))}o<i&&s.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),o>a&&s.issues.push({origin:"number",input:o,code:"too_big",maximum:a,inst:e})}}),oz=ij("$ZodCheckMaxLength",(e,t)=>{var r;oO.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!iU(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;if(n.length<=t.maximum)return;let i=an(n);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),oR=ij("$ZodCheckMinLength",(e,t)=>{var r;oO.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!iU(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;if(n.length>=t.minimum)return;let i=an(n);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),oM=ij("$ZodCheckLengthEquals",(e,t)=>{var r;oO.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!iU(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let n=r.value,i=n.length;if(i===t.length)return;let a=an(n),s=i>t.length;r.issues.push({origin:a,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),oL=ij("$ZodCheckStringFormat",(e,t)=>{var r,n;oO.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),oZ=ij("$ZodCheckRegex",(e,t)=>{oL.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),oD=ij("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=oE),oL.init(e,t)}),oU=ij("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=oA),oL.init(e,t)}),oF=ij("$ZodCheckIncludes",(e,t)=>{oO.init(e,t);let r=iX(t.includes),n=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),oB=ij("$ZodCheckStartsWith",(e,t)=>{oO.init(e,t);let r=RegExp(`^${iX(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),oV=ij("$ZodCheckEndsWith",(e,t)=>{oO.init(e,t);let r=RegExp(`.*${iX(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),oJ=ij("$ZodCheckOverwrite",(e,t)=>{oO.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class oW{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}let oq={major:4,minor:0,patch:0},oK=ij("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=oq;let n=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&n.unshift(e),n))for(let r of t._zod.onattach)r(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let n,i=i7(e);for(let a of t){if(a._zod.def.when){if(!a._zod.def.when(e))continue}else if(i)continue;let t=e.issues.length,s=a._zod.check(e);if(s instanceof Promise&&r?.async===!1)throw new iz;if(n||s instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await s,e.issues.length!==t&&(i||(i=i7(e,t)))});else{if(e.issues.length===t)continue;i||(i=i7(e,t))}}return n?n.then(()=>e):e};e._zod.run=(r,i)=>{let a=e._zod.parse(r,i);if(a instanceof Promise){if(!1===i.async)throw new iz;return a.then(e=>t(e,n,i))}return t(a,n,i)}}e["~standard"]={validate:t=>{try{let r=af(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return ag(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),oG=ij("$ZodString",(e,t)=>{oK.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??o$(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch(e){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),oH=ij("$ZodStringFormat",(e,t)=>{oL.init(e,t),oG.init(e,t)}),oY=ij("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=os),oH.init(e,t)}),oX=ij("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=oo(e))}else t.pattern??(t.pattern=oo());oH.init(e,t)}),oQ=ij("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=ol),oH.init(e,t)}),o0=ij("$ZodURL",(e,t)=>{oH.init(e,t),e._zod.check=r=>{try{let n=r.value,i=new URL(n),a=i.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:oy.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!n.endsWith("/")&&a.endsWith("/")?r.value=a.slice(0,-1):r.value=a;return}catch(n){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),o1=ij("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=oc()),oH.init(e,t)}),o2=ij("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=oi),oH.init(e,t)}),o4=ij("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=s7),oH.init(e,t)}),o6=ij("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=oe),oH.init(e,t)}),o9=ij("$ZodULID",(e,t)=>{t.pattern??(t.pattern=ot),oH.init(e,t)}),o3=ij("$ZodXID",(e,t)=>{t.pattern??(t.pattern=or),oH.init(e,t)}),o5=ij("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=on),oH.init(e,t)}),o8=ij("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=ox(t)),oH.init(e,t)}),o7=ij("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=ob),oH.init(e,t)}),le=ij("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=ok(t)),oH.init(e,t)}),lt=ij("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=oa),oH.init(e,t)}),lr=ij("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=od),oH.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),ln=ij("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=op),oH.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),li=ij("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=oh),oH.init(e,t)}),la=ij("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=of),oH.init(e,t),e._zod.check=r=>{let[n,i]=r.value.split("/");try{if(!i)throw Error();let e=Number(i);if(`${e}`!==i||e<0||e>128)throw Error();new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function ls(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let lo=ij("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=om),oH.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{ls(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function ll(e){if(!og.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return ls(t.padEnd(4*Math.ceil(t.length/4),"="))}let lu=ij("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=og),oH.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{ll(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),lc=ij("$ZodE164",(e,t)=>{t.pattern??(t.pattern=ov),oH.init(e,t)});function ld(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[n]=r;if(!n)return!1;let i=JSON.parse(atob(n));if("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))return!1;return!0}catch{return!1}}let lp=ij("$ZodJWT",(e,t)=>{oH.init(e,t),e._zod.check=r=>{ld(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),lh=ij("$ZodNumber",(e,t)=>{oK.init(e,t),e._zod.pattern=e._zod.bag.pattern??oI,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}let i=r.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return r;let a="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...a?{received:a}:{}}),r}}),lf=ij("$ZodNumber",(e,t)=>{oj.init(e,t),lh.init(e,t)}),lm=ij("$ZodUnknown",(e,t)=>{oK.init(e,t),e._zod.parse=e=>e}),lg=ij("$ZodNever",(e,t)=>{oK.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function ly(e,t,r){e.issues.length&&t.issues.push(...ae(r,e.issues)),t.value[r]=e.value}let lv=ij("$ZodArray",(e,t)=>{oK.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);let a=[];for(let e=0;e<i.length;e++){let s=i[e],o=t.element._zod.run({value:s,issues:[]},n);o instanceof Promise?a.push(o.then(t=>ly(t,r,e))):ly(o,r,e)}return a.length?Promise.all(a).then(()=>r):r}});function l_(e,t,r){e.issues.length&&t.issues.push(...ae(r,e.issues)),t.value[r]=e.value}function lb(e,t,r,n){e.issues.length?void 0===n[r]?r in n?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...ae(r,e.issues)):void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}let lw=ij("$ZodObject",(e,t)=>{let r,n;oK.init(e,t);let i=iD(()=>{let e=Object.keys(t.shape);for(let r of e)if(!(t.shape[r]instanceof oK))throw Error(`Invalid element at key "${r}": expected a Zod schema`);let r=i1(t.shape);return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}});iV(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let n=e[t]._zod;if(n.values)for(let e of(r[t]??(r[t]=new Set),n.values))r[t].add(e)}return r});let a=e=>{let t=new oW(["shape","payload","ctx"]),r=i.value,n=e=>{let t=iW(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let a=Object.create(null),s=0;for(let e of r.keys)a[e]=`key_${s++}`;for(let e of(t.write("const newResult = {}"),r.keys))if(r.optionalKeys.has(e)){let r=a[e];t.write(`const ${r} = ${n(e)};`);let i=iW(e);t.write(`
        if (${r}.issues.length) {
          if (input[${i}] === undefined) {
            if (${i} in input) {
              newResult[${i}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${r}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${i}, ...iss.path] : [${i}],
              }))
            );
          }
        } else if (${r}.value === undefined) {
          if (${i} in input) newResult[${i}] = undefined;
        } else {
          newResult[${i}] = ${r}.value;
        }
        `)}else{let r=a[e];t.write(`const ${r} = ${n(e)};`),t.write(`
          if (${r}.issues.length) payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${iW(e)}, ...iss.path] : [${iW(e)}]
          })));`),t.write(`newResult[${iW(e)}] = ${r}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");let o=t.compile();return(t,r)=>o(e,t,r)},s=iK,o=!iR.jitless,l=iG,u=o&&l.value,c=t.catchall;e._zod.parse=(l,d)=>{n??(n=i.value);let p=l.value;if(!s(p))return l.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),l;let h=[];if(o&&u&&d?.async===!1&&!0!==d.jitless)r||(r=a(t.shape)),l=r(l,d);else{l.value={};let e=n.shape;for(let t of n.keys){let r=e[t],n=r._zod.run({value:p[t],issues:[]},d),i="optional"===r._zod.optin&&"optional"===r._zod.optout;n instanceof Promise?h.push(n.then(e=>i?lb(e,l,t,p):l_(e,l,t))):i?lb(n,l,t,p):l_(n,l,t)}}if(!c)return h.length?Promise.all(h).then(()=>l):l;let f=[],m=n.keySet,g=c._zod,y=g.def.type;for(let e of Object.keys(p)){if(m.has(e))continue;if("never"===y){f.push(e);continue}let t=g.run({value:p[e],issues:[]},d);t instanceof Promise?h.push(t.then(t=>l_(t,l,e))):l_(t,l,e)}return(f.length&&l.issues.push({code:"unrecognized_keys",keys:f,input:p,inst:e}),h.length)?Promise.all(h).then(()=>l):l}});function lk(e,t,r,n){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>ar(e,n,iM())))}),t}let lx=ij("$ZodUnion",(e,t)=>{oK.init(e,t),iV(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),iV(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),iV(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),iV(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>iF(e.source)).join("|")})$`)}}),e._zod.parse=(r,n)=>{let i=!1,a=[];for(let e of t.options){let t=e._zod.run({value:r.value,issues:[]},n);if(t instanceof Promise)a.push(t),i=!0;else{if(0===t.issues.length)return t;a.push(t)}}return i?Promise.all(a).then(t=>lk(t,r,e,n)):lk(a,r,e,n)}}),l$=ij("$ZodDiscriminatedUnion",(e,t)=>{lx.init(e,t);let r=e._zod.parse;iV(e._zod,"propValues",()=>{let e={};for(let r of t.options){let n=r._zod.propValues;if(!n||0===Object.keys(n).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(n))for(let n of(e[t]||(e[t]=new Set),r))e[t].add(n)}return e});let n=iD(()=>{let e=t.options,r=new Map;for(let n of e){let e=n._zod.propValues[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let t of e){if(r.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,n)}}return r});e._zod.parse=(i,a)=>{let s=i.value;if(!iK(s))return i.issues.push({code:"invalid_type",expected:"object",input:s,inst:e}),i;let o=n.value.get(s?.[t.discriminator]);return o?o._zod.run(i,a):t.unionFallback?r(i,a):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:s,path:[t.discriminator],inst:e}),i)}}),lS=ij("$ZodIntersection",(e,t)=>{oK.init(e,t),e._zod.parse=(e,r)=>{let n=e.value,i=t.left._zod.run({value:n,issues:[]},r),a=t.right._zod.run({value:n,issues:[]},r);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([t,r])=>lE(e,t,r)):lE(e,i,a)}});function lI(e,t){if(e===t||e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(iH(e)&&iH(t)){let r=Object.keys(t),n=Object.keys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(let r of n){let n=lI(e[r],t[r]);if(!n.valid)return{valid:!1,mergeErrorPath:[r,...n.mergeErrorPath]};i[r]=n.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<e.length;n++){let i=lI(e[n],t[n]);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function lE(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),i7(e))return e;let n=lI(t.value,r.value);if(!n.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}let lA=ij("$ZodRecord",(e,t)=>{oK.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!iH(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),r;let a=[];if(t.keyType._zod.values){let s,o=t.keyType._zod.values;for(let e of(r.value={},o))if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){let s=t.valueType._zod.run({value:i[e],issues:[]},n);s instanceof Promise?a.push(s.then(t=>{t.issues.length&&r.issues.push(...ae(e,t.issues)),r.value[e]=t.value})):(s.issues.length&&r.issues.push(...ae(e,s.issues)),r.value[e]=s.value)}for(let e in i)o.has(e)||(s=s??[]).push(e);s&&s.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:s})}else for(let s of(r.value={},Reflect.ownKeys(i))){if("__proto__"===s)continue;let o=t.keyType._zod.run({value:s,issues:[]},n);if(o instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(o.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:o.issues.map(e=>ar(e,n,iM())),input:s,path:[s],inst:e}),r.value[o.value]=o.value;continue}let l=t.valueType._zod.run({value:i[s],issues:[]},n);l instanceof Promise?a.push(l.then(e=>{e.issues.length&&r.issues.push(...ae(s,e.issues)),r.value[o.value]=e.value})):(l.issues.length&&r.issues.push(...ae(s,l.issues)),r.value[o.value]=l.value)}return a.length?Promise.all(a).then(()=>r):r}}),lO=ij("$ZodEnum",(e,t)=>{oK.init(e,t);let r=iL(t.entries);e._zod.values=new Set(r),e._zod.pattern=RegExp(`^(${r.filter(e=>iY.has(typeof e)).map(e=>"string"==typeof e?iX(e):e.toString()).join("|")})$`),e._zod.parse=(t,n)=>{let i=t.value;return e._zod.values.has(i)||t.issues.push({code:"invalid_value",values:r,input:i,inst:e}),t}}),lT=ij("$ZodLiteral",(e,t)=>{oK.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?iX(e):e?e.toString():String(e)).join("|")})$`),e._zod.parse=(r,n)=>{let i=r.value;return e._zod.values.has(i)||r.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),r}}),lN=ij("$ZodTransform",(e,t)=>{oK.init(e,t),e._zod.parse=(e,r)=>{let n=t.transform(e.value,e);if(r.async)return(n instanceof Promise?n:Promise.resolve(n)).then(t=>(e.value=t,e));if(n instanceof Promise)throw new iz;return e.value=n,e}}),lC=ij("$ZodOptional",(e,t)=>{oK.init(e,t),e._zod.optin="optional",e._zod.optout="optional",iV(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),iV(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${iF(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,r):void 0===e.value?e:t.innerType._zod.run(e,r)}),lP=ij("$ZodNullable",(e,t)=>{oK.init(e,t),iV(e._zod,"optin",()=>t.innerType._zod.optin),iV(e._zod,"optout",()=>t.innerType._zod.optout),iV(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${iF(e.source)}|null)$`):void 0}),iV(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),lj=ij("$ZodDefault",(e,t)=>{oK.init(e,t),e._zod.optin="optional",iV(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if(void 0===e.value)return e.value=t.defaultValue,e;let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(e=>lz(e,t)):lz(n,t)}});function lz(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let lR=ij("$ZodPrefault",(e,t)=>{oK.init(e,t),e._zod.optin="optional",iV(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),lM=ij("$ZodNonOptional",(e,t)=>{oK.init(e,t),iV(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,n)=>{let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(t=>lL(t,e)):lL(i,e)}});function lL(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let lZ=ij("$ZodCatch",(e,t)=>{oK.init(e,t),e._zod.optin="optional",iV(e._zod,"optout",()=>t.innerType._zod.optout),iV(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>ar(e,r,iM()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>ar(e,r,iM()))},input:e.value}),e.issues=[]),e)}}),lD=ij("$ZodPipe",(e,t)=>{oK.init(e,t),iV(e._zod,"values",()=>t.in._zod.values),iV(e._zod,"optin",()=>t.in._zod.optin),iV(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(e,r)=>{let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>lU(e,t,r)):lU(n,t,r)}});function lU(e,t,r){return i7(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}let lF=ij("$ZodReadonly",(e,t)=>{oK.init(e,t),iV(e._zod,"propValues",()=>t.innerType._zod.propValues),iV(e._zod,"values",()=>t.innerType._zod.values),iV(e._zod,"optin",()=>t.innerType._zod.optin),iV(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,r)=>{let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(lB):lB(n)}});function lB(e){return e.value=Object.freeze(e.value),e}let lV=ij("$ZodCustom",(e,t)=>{oO.init(e,t),oK.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(t=>lJ(t,r,n,e));lJ(i,r,n,e)}});function lJ(e,t,r,n){if(!e){let e={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(ai(e))}}function lW(e,t){return new e({type:"string",...i0(t)})}function lq(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...i0(t)})}function lK(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...i0(t)})}function lG(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...i0(t)})}function lH(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...i0(t)})}function lY(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...i0(t)})}function lX(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...i0(t)})}function lQ(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...i0(t)})}function l0(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...i0(t)})}function l1(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...i0(t)})}function l2(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...i0(t)})}function l4(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...i0(t)})}function l6(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...i0(t)})}function l9(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...i0(t)})}function l3(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...i0(t)})}function l5(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...i0(t)})}function l8(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...i0(t)})}function l7(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...i0(t)})}function ue(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...i0(t)})}function ut(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...i0(t)})}function ur(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...i0(t)})}function un(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...i0(t)})}function ui(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...i0(t)})}function ua(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...i0(t)})}function us(e,t){return new e({type:"string",format:"date",check:"string_format",...i0(t)})}function uo(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...i0(t)})}function ul(e,t){return new e({type:"string",format:"duration",check:"string_format",...i0(t)})}function uu(e,t){return new e({type:"number",checks:[],...i0(t)})}function uc(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...i0(t)})}function ud(e){return new e({type:"unknown"})}function up(e,t){return new e({type:"never",...i0(t)})}function uh(e,t){return new oN({check:"less_than",...i0(t),value:e,inclusive:!1})}function uf(e,t){return new oN({check:"less_than",...i0(t),value:e,inclusive:!0})}function um(e,t){return new oC({check:"greater_than",...i0(t),value:e,inclusive:!1})}function ug(e,t){return new oC({check:"greater_than",...i0(t),value:e,inclusive:!0})}function uy(e,t){return new oP({check:"multiple_of",...i0(t),value:e})}function uv(e,t){return new oz({check:"max_length",...i0(t),maximum:e})}function u_(e,t){return new oR({check:"min_length",...i0(t),minimum:e})}function ub(e,t){return new oM({check:"length_equals",...i0(t),length:e})}function uw(e,t){return new oZ({check:"string_format",format:"regex",...i0(t),pattern:e})}function uk(e){return new oD({check:"string_format",format:"lowercase",...i0(e)})}function ux(e){return new oU({check:"string_format",format:"uppercase",...i0(e)})}function u$(e,t){return new oF({check:"string_format",format:"includes",...i0(t),includes:e})}function uS(e,t){return new oB({check:"string_format",format:"starts_with",...i0(t),prefix:e})}function uI(e,t){return new oV({check:"string_format",format:"ends_with",...i0(t),suffix:e})}function uE(e){return new oJ({check:"overwrite",tx:e})}function uA(e){return uE(t=>t.normalize(e))}function uO(){return uE(e=>e.trim())}function uT(){return uE(e=>e.toLowerCase())}function uN(){return uE(e=>e.toUpperCase())}function uC(e,t,r){return new e({type:"array",element:t,...i0(r)})}function uP(e,t,r){return new e({type:"custom",check:"custom",fn:t,...i0(r)})}let uj=ij("ZodISODateTime",(e,t)=>{o8.init(e,t),uX.init(e,t)});function uz(e){return ua(uj,e)}let uR=ij("ZodISODate",(e,t)=>{o7.init(e,t),uX.init(e,t)});function uM(e){return us(uR,e)}let uL=ij("ZodISOTime",(e,t)=>{le.init(e,t),uX.init(e,t)});function uZ(e){return uo(uL,e)}let uD=ij("ZodISODuration",(e,t)=>{lt.init(e,t),uX.init(e,t)});function uU(e){return ul(uD,e)}let uF=(e,t)=>{as.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>au(e,t)},flatten:{value:t=>al(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get:()=>0===e.issues.length}})};ij("ZodError",uF);let uB=ij("ZodError",uF,{Parent:Error}),uV=ac(uB),uJ=ap(uB),uW=ah(uB),uq=am(uB),uK=ij("ZodType",(e,t)=>(oK.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,r)=>iQ(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>uV(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>uW(e,t,r),e.parseAsync=async(t,r)=>uJ(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>uq(e,t,r),e.spa=e.safeParseAsync,e.refine=(t,r)=>e.check(c1(t,r)),e.superRefine=t=>e.check(c2(t)),e.overwrite=t=>e.check(uE(t)),e.optional=()=>cM(e),e.nullable=()=>cZ(e),e.nullish=()=>cM(cZ(e)),e.nonoptional=t=>cJ(e,t),e.array=()=>c_(e),e.or=t=>cx([e,t]),e.and=t=>cE(e,t),e.transform=t=>cG(e,cz(t)),e.default=t=>cU(e,t),e.prefault=t=>cB(e,t),e.catch=t=>cq(e,t),e.pipe=t=>cG(e,t),e.readonly=()=>cY(e),e.describe=t=>{let r=e.clone();return av.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>av.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return av.get(e);let r=e.clone();return av.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),uG=ij("_ZodString",(e,t)=>{oG.init(e,t),uK.init(e,t);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(uw(...t)),e.includes=(...t)=>e.check(u$(...t)),e.startsWith=(...t)=>e.check(uS(...t)),e.endsWith=(...t)=>e.check(uI(...t)),e.min=(...t)=>e.check(u_(...t)),e.max=(...t)=>e.check(uv(...t)),e.length=(...t)=>e.check(ub(...t)),e.nonempty=(...t)=>e.check(u_(1,...t)),e.lowercase=t=>e.check(uk(t)),e.uppercase=t=>e.check(ux(t)),e.trim=()=>e.check(uO()),e.normalize=(...t)=>e.check(uA(...t)),e.toLowerCase=()=>e.check(uT()),e.toUpperCase=()=>e.check(uN())}),uH=ij("ZodString",(e,t)=>{oG.init(e,t),uG.init(e,t),e.email=t=>e.check(lq(uQ,t)),e.url=t=>e.check(lQ(u2,t)),e.jwt=t=>e.check(ui(co,t)),e.emoji=t=>e.check(l0(u4,t)),e.guid=t=>e.check(lK(u0,t)),e.uuid=t=>e.check(lG(u1,t)),e.uuidv4=t=>e.check(lH(u1,t)),e.uuidv6=t=>e.check(lY(u1,t)),e.uuidv7=t=>e.check(lX(u1,t)),e.nanoid=t=>e.check(l1(u6,t)),e.guid=t=>e.check(lK(u0,t)),e.cuid=t=>e.check(l2(u9,t)),e.cuid2=t=>e.check(l4(u3,t)),e.ulid=t=>e.check(l6(u5,t)),e.base64=t=>e.check(ut(ci,t)),e.base64url=t=>e.check(ur(ca,t)),e.xid=t=>e.check(l9(u8,t)),e.ksuid=t=>e.check(l3(u7,t)),e.ipv4=t=>e.check(l5(ce,t)),e.ipv6=t=>e.check(l8(ct,t)),e.cidrv4=t=>e.check(l7(cr,t)),e.cidrv6=t=>e.check(ue(cn,t)),e.e164=t=>e.check(un(cs,t)),e.datetime=t=>e.check(uz(t)),e.date=t=>e.check(uM(t)),e.time=t=>e.check(uZ(t)),e.duration=t=>e.check(uU(t))});function uY(e){return lW(uH,e)}let uX=ij("ZodStringFormat",(e,t)=>{oH.init(e,t),uG.init(e,t)}),uQ=ij("ZodEmail",(e,t)=>{oQ.init(e,t),uX.init(e,t)}),u0=ij("ZodGUID",(e,t)=>{oY.init(e,t),uX.init(e,t)}),u1=ij("ZodUUID",(e,t)=>{oX.init(e,t),uX.init(e,t)}),u2=ij("ZodURL",(e,t)=>{o0.init(e,t),uX.init(e,t)}),u4=ij("ZodEmoji",(e,t)=>{o1.init(e,t),uX.init(e,t)}),u6=ij("ZodNanoID",(e,t)=>{o2.init(e,t),uX.init(e,t)}),u9=ij("ZodCUID",(e,t)=>{o4.init(e,t),uX.init(e,t)}),u3=ij("ZodCUID2",(e,t)=>{o6.init(e,t),uX.init(e,t)}),u5=ij("ZodULID",(e,t)=>{o9.init(e,t),uX.init(e,t)}),u8=ij("ZodXID",(e,t)=>{o3.init(e,t),uX.init(e,t)}),u7=ij("ZodKSUID",(e,t)=>{o5.init(e,t),uX.init(e,t)}),ce=ij("ZodIPv4",(e,t)=>{lr.init(e,t),uX.init(e,t)}),ct=ij("ZodIPv6",(e,t)=>{ln.init(e,t),uX.init(e,t)}),cr=ij("ZodCIDRv4",(e,t)=>{li.init(e,t),uX.init(e,t)}),cn=ij("ZodCIDRv6",(e,t)=>{la.init(e,t),uX.init(e,t)}),ci=ij("ZodBase64",(e,t)=>{lo.init(e,t),uX.init(e,t)}),ca=ij("ZodBase64URL",(e,t)=>{lu.init(e,t),uX.init(e,t)}),cs=ij("ZodE164",(e,t)=>{lc.init(e,t),uX.init(e,t)}),co=ij("ZodJWT",(e,t)=>{lp.init(e,t),uX.init(e,t)}),cl=ij("ZodNumber",(e,t)=>{lh.init(e,t),uK.init(e,t),e.gt=(t,r)=>e.check(um(t,r)),e.gte=(t,r)=>e.check(ug(t,r)),e.min=(t,r)=>e.check(ug(t,r)),e.lt=(t,r)=>e.check(uh(t,r)),e.lte=(t,r)=>e.check(uf(t,r)),e.max=(t,r)=>e.check(uf(t,r)),e.int=t=>e.check(cd(t)),e.safe=t=>e.check(cd(t)),e.positive=t=>e.check(um(0,t)),e.nonnegative=t=>e.check(ug(0,t)),e.negative=t=>e.check(uh(0,t)),e.nonpositive=t=>e.check(uf(0,t)),e.multipleOf=(t,r)=>e.check(uy(t,r)),e.step=(t,r)=>e.check(uy(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function cu(e){return uu(cl,e)}let cc=ij("ZodNumberFormat",(e,t)=>{lf.init(e,t),cl.init(e,t)});function cd(e){return uc(cc,e)}let cp=null,ch=null,cf=ij("ZodUnknown",(e,t)=>{lm.init(e,t),uK.init(e,t)});function cm(){return ud(cf)}let cg=ij("ZodNever",(e,t)=>{lg.init(e,t),uK.init(e,t)});function cy(e){return up(cg,e)}let cv=ij("ZodArray",(e,t)=>{lv.init(e,t),uK.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(u_(t,r)),e.nonempty=t=>e.check(u_(1,t)),e.max=(t,r)=>e.check(uv(t,r)),e.length=(t,r)=>e.check(ub(t,r)),e.unwrap=()=>e.element});function c_(e,t){return uC(cv,e,t)}let cb=ij("ZodObject",(e,t)=>{lw.init(e,t),uK.init(e,t),iV(e,"shape",()=>t.shape),e.keyof=()=>cN(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:cm()}),e.loose=()=>e.clone({...e._zod.def,catchall:cm()}),e.strict=()=>e.clone({...e._zod.def,catchall:cy()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>i9(e,t),e.merge=t=>i3(e,t),e.pick=t=>i4(e,t),e.omit=t=>i6(e,t),e.partial=(...t)=>i5(cR,e,t[0]),e.required=(...t)=>i8(cV,e,t[0])});function cw(e,t){return new cb({type:"object",get shape(){return iJ(this,"shape",{...e}),this.shape},...i0(t)})}let ck=ij("ZodUnion",(e,t)=>{lx.init(e,t),uK.init(e,t),e.options=t.options});function cx(e,t){return new ck({type:"union",options:e,...i0(t)})}let c$=ij("ZodDiscriminatedUnion",(e,t)=>{ck.init(e,t),l$.init(e,t)});function cS(e,t,r){return new c$({type:"union",options:t,discriminator:e,...i0(r)})}let cI=ij("ZodIntersection",(e,t)=>{lS.init(e,t),uK.init(e,t)});function cE(e,t){return new cI({type:"intersection",left:e,right:t})}let cA=ij("ZodRecord",(e,t)=>{lA.init(e,t),uK.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function cO(e,t,r){return new cA({type:"record",keyType:e,valueType:t,...i0(r)})}let cT=ij("ZodEnum",(e,t)=>{lO.init(e,t),uK.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,n)=>{let i={};for(let n of e)if(r.has(n))i[n]=t.entries[n];else throw Error(`Key ${n} not found in enum`);return new cT({...t,checks:[],...i0(n),entries:i})},e.exclude=(e,n)=>{let i={...t.entries};for(let t of e)if(r.has(t))delete i[t];else throw Error(`Key ${t} not found in enum`);return new cT({...t,checks:[],...i0(n),entries:i})}});function cN(e,t){return new cT({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...i0(t)})}let cC=ij("ZodLiteral",(e,t)=>{lT.init(e,t),uK.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function cP(e,t){return new cC({type:"literal",values:Array.isArray(e)?e:[e],...i0(t)})}let cj=ij("ZodTransform",(e,t)=>{lN.init(e,t),uK.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=n=>{if("string"==typeof n)r.issues.push(ai(n,r.value,t));else{let t=n;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=r.value),t.inst??(t.inst=e),t.continue??(t.continue=!0),r.issues.push(ai(t))}};let i=t.transform(r.value,r);return i instanceof Promise?i.then(e=>(r.value=e,r)):(r.value=i,r)}});function cz(e){return new cj({type:"transform",transform:e})}let cR=ij("ZodOptional",(e,t)=>{lC.init(e,t),uK.init(e,t),e.unwrap=()=>e._zod.def.innerType});function cM(e){return new cR({type:"optional",innerType:e})}let cL=ij("ZodNullable",(e,t)=>{lP.init(e,t),uK.init(e,t),e.unwrap=()=>e._zod.def.innerType});function cZ(e){return new cL({type:"nullable",innerType:e})}let cD=ij("ZodDefault",(e,t)=>{lj.init(e,t),uK.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function cU(e,t){return new cD({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():t}})}let cF=ij("ZodPrefault",(e,t)=>{lR.init(e,t),uK.init(e,t),e.unwrap=()=>e._zod.def.innerType});function cB(e,t){return new cF({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():t}})}let cV=ij("ZodNonOptional",(e,t)=>{lM.init(e,t),uK.init(e,t),e.unwrap=()=>e._zod.def.innerType});function cJ(e,t){return new cV({type:"nonoptional",innerType:e,...i0(t)})}let cW=ij("ZodCatch",(e,t)=>{lZ.init(e,t),uK.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function cq(e,t){return new cW({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}let cK=ij("ZodPipe",(e,t)=>{lD.init(e,t),uK.init(e,t),e.in=t.in,e.out=t.out});function cG(e,t){return new cK({type:"pipe",in:e,out:t})}let cH=ij("ZodReadonly",(e,t)=>{lF.init(e,t),uK.init(e,t)});function cY(e){return new cH({type:"readonly",innerType:e})}let cX=null,cQ=ij("ZodCustom",(e,t)=>{lV.init(e,t),uK.init(e,t)});function c0(e){let t=new oO({check:"custom"});return t._zod.check=e,t}function c1(e,t={}){return uP(cQ,e,t)}function c2(e){let t=c0(r=>(r.addIssue=e=>{if("string"==typeof e)r.issues.push(ai(e,r.value,t._zod.def));else{let n=e;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=t),n.continue??(n.continue=!t._zod.def.abort),r.issues.push(ai(n))}},e(r.value,r)));return t}let c4=cw({type:cP("screenshot")}),c6=cw({type:cP("click"),x:cu(),y:cu(),button:cN(["left","right","wheel","back","forward"]).default("left")}),c9=cw({type:cP("double_click"),x:cu(),y:cu(),button:cN(["left","right","wheel","back","forward"]).default("left")}),c3=cw({type:cP("drag"),path:c_(cw({x:cu(),y:cu()}))}),c5=cw({type:cP("keypress"),keys:c_(uY())}),c8=cw({type:cP("move"),x:cu(),y:cu()}),c7=cw({type:cP("scroll"),x:cu(),y:cu(),scroll_x:cu(),scroll_y:cu()}),de=cS("type",[c4,c6,c9,c3,c5,c8,c7,cw({type:cP("type"),text:uY()}),cw({type:cP("wait"),duration:cu().optional()})]),dt=(cw({action:de}),cS("type",[cw({type:cP("exec"),command:c_(uY()),env:cO(uY(),uY()).optional(),working_directory:uY().optional(),timeout_ms:cu().optional(),user:uY().optional()})]),cw({commands:c_(uY()).describe("Array of shell commands to execute"),timeout_ms:cu().optional().describe("Optional timeout in milliseconds for the commands"),max_output_length:cu().optional().describe("Optional maximum number of characters to return from each command")}),cw({type:cP("create_file"),path:uY(),diff:uY()}));cS("type",[dt,cw({type:cP("update_file"),path:uY(),diff:uY()}),cw({type:cP("delete_file"),path:uY()})]),r(73897)},64056:(e,t,r)=>{"use strict";let n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=a(t),e instanceof i)if(!!t.loose===e.loose)return e;else e=e.value;u("comparator",e=e.trim().split(/\s+/).join(" "),t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){let t=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],r=e.match(t);if(!r)throw TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=a(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}e.exports=i;let a=r(66435),{safeRe:s,t:o}=r(77956),l=r(95841),u=r(52412),c=r(78768),d=r(27681)},64184:(e,t,r)=>{"use strict";r.d(t,{Od:()=>k,H:()=>S,KX:()=>x,jm:()=>$});var n=r(79271),i=r(71193),a=r(31465),s=r(50696),o=r(49641).Buffer;function l(e){switch(e){case"csv":return"text/csv";case"doc":case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function u(e){if((0,s.nD)(e.document)&&(0,s.nD)(e.document.source)){let t=l((0,s.nD)(e.document)&&(0,s.vQ)(e.document.format)?e.document.format:"");if((0,s.nD)(e.document.source)){if((0,s.nD)(e.document.source.s3Location)&&(0,s.vQ)(e.document.source.s3Location.uri))return{type:"file",mimeType:t,fileId:e.document.source.s3Location.uri};if((0,s.MS)(e.document.source.bytes))return{type:"file",mimeType:t,data:e.document.source.bytes};if((0,s.vQ)(e.document.source.text))return{type:"file",mimeType:t,data:o.from(e.document.source.text).toString("base64")};if((0,s.V3)(e.document.source.content))return{type:"file",mimeType:t,data:e.document.source.content.reduce((e,t)=>(0,s.nD)(t)&&(0,s.vQ)(t.text)?e+t.text:e,"")}}}return{type:"non_standard",value:e}}function c(e){if((0,s.MP)(e,"image")&&(0,s.nD)(e.image)){let t=l((0,s.nD)(e.image)&&(0,s.vQ)(e.image.format)?e.image.format:"");if((0,s.nD)(e.image.source)){if((0,s.nD)(e.image.source.s3Location)&&(0,s.vQ)(e.image.source.s3Location.uri))return{type:"image",mimeType:t,fileId:e.image.source.s3Location.uri};if((0,s.MS)(e.image.source.bytes))return{type:"image",mimeType:t,data:e.image.source.bytes}}}return{type:"non_standard",value:e}}function d(e){if((0,s.MP)(e,"video")&&(0,s.nD)(e.video)){let t=l((0,s.nD)(e.video)&&(0,s.vQ)(e.video.format)?e.video.format:"");if((0,s.nD)(e.video.source)){if((0,s.nD)(e.video.source.s3Location)&&(0,s.vQ)(e.video.source.s3Location.uri))return{type:"video",mimeType:t,fileId:e.video.source.s3Location.uri};if((0,s.MS)(e.video.source.bytes))return{type:"video",mimeType:t,data:e.video.source.bytes}}}return{type:"non_standard",value:e}}function p(e){return Array.from(function*(){for(let t of"string"==typeof e.content?[{type:"text",text:e.content}]:e.content){if((0,s.MP)(t,"cache_point")){yield{type:"non_standard",value:t};continue}if((0,s.MP)(t,"citations_content")&&(0,s.nD)(t.citationsContent)){let e=(0,s.V3)(t.citationsContent.content)?t.citationsContent.content.reduce((e,t)=>(0,s.nD)(t)&&(0,s.vQ)(t.text)?e+t.text:e,""):"",r=(0,s.V3)(t.citationsContent.citations)?t.citationsContent.citations.reduce((e,t)=>{if((0,s.nD)(t)){let r=(0,s.V3)(t.sourceContent)?t.sourceContent.reduce((e,t)=>(0,s.nD)(t)&&(0,s.vQ)(t.text)?e+t.text:e,""):"",n=(0,s.iD)(()=>{if((0,s.nD)(t.location)){let e=t.location.documentChar||t.location.documentPage||t.location.documentChunk;if((0,s.nD)(e))return{source:(0,s.jM)(e.documentIndex)?e.documentIndex.toString():void 0,startIndex:(0,s.jM)(e.start)?e.start:void 0,endIndex:(0,s.jM)(e.end)?e.end:void 0}}return{}});e.push({type:"citation",citedText:r,...n})}return e},[]):[];yield{type:"text",text:e,annotations:r};continue}if((0,s.MP)(t,"document")&&(0,s.nD)(t.document)){yield u(t);continue}else if((0,s.MP)(t,"guard_content")){yield{type:"non_standard",value:t};continue}else if((0,s.MP)(t,"image")&&(0,s.nD)(t.image)){yield c(t);continue}else if((0,s.MP)(t,"reasoning_content")&&(0,s.vQ)(t.reasoningText)){yield{type:"reasoning",reasoning:t.reasoningText};continue}else if((0,s.MP)(t,"text")&&(0,s.vQ)(t.text)){yield{type:"text",text:t.text};continue}else if((0,s.MP)(t,"tool_result")){yield{type:"non_standard",value:t};continue}else if((0,s.MP)(t,"tool_call"))continue;else if((0,s.MP)(t,"video")&&(0,s.nD)(t.video)){yield d(t);continue}yield{type:"non_standard",value:t}}}())}let h={translateContent:p,translateContentChunk:p};function f(e){return Array.from(function*(){for(let t of"string"==typeof e.content?[{type:"text",text:e.content}]:e.content){if((0,s.MP)(t,"text")&&(0,s.vQ)(t.text)){yield{type:"text",text:t.text};continue}if((0,s.MP)(t,"inlineData")&&(0,s.nD)(t.inlineData)&&(0,s.vQ)(t.inlineData.mimeType)&&(0,s.vQ)(t.inlineData.data)){yield{type:"file",mimeType:t.inlineData.mimeType,data:t.inlineData.data};continue}if((0,s.MP)(t,"functionCall")&&(0,s.nD)(t.functionCall)&&(0,s.vQ)(t.functionCall.name)&&(0,s.nD)(t.functionCall.args)){yield{type:"tool_call",id:e.id,name:t.functionCall.name,args:t.functionCall.args};continue}else if((0,s.MP)(t,"functionResponse")){yield{type:"non_standard",value:t};continue}else if((0,s.MP)(t,"fileData")&&(0,s.nD)(t.fileData)&&(0,s.vQ)(t.fileData.mimeType)&&(0,s.vQ)(t.fileData.fileUri)){yield{type:"file",mimeType:t.fileData.mimeType,fileId:t.fileData.fileUri};continue}else if((0,s.MP)(t,"executableCode")){yield{type:"non_standard",value:t};continue}else if((0,s.MP)(t,"codeExecutionResult")){yield{type:"non_standard",value:t};continue}yield{type:"non_standard",value:t}}}())}let m={translateContent:f,translateContentChunk:f};function g(e){return Array.from(function*(){let t="string"==typeof e.content?[{type:"text",text:e.content}]:e.content;for(let r of t){if((0,s.MP)(r,"reasoning")&&(0,s.vQ)(r.reasoning)){let n=(0,s.iD)(()=>{let n=t.indexOf(r);if((0,s.V3)(e.additional_kwargs?.signatures)&&n>=0)return e.additional_kwargs.signatures.at(n)});(0,s.vQ)(n)?yield{type:"reasoning",reasoning:r.reasoning,signature:n}:yield{type:"reasoning",reasoning:r.reasoning};continue}if((0,s.MP)(r,"text")&&(0,s.vQ)(r.text)){yield{type:"text",text:r.text};continue}if((0,s.MP)(r,"image_url")){if((0,s.vQ)(r.image_url))if(r.image_url.startsWith("data:")){let e=/^data:([^;]+);base64,(.+)$/,t=r.image_url.match(e);t?yield{type:"image",data:t[2],mimeType:t[1]}:yield{type:"image",url:r.image_url}}else yield{type:"image",url:r.image_url};continue}else if((0,s.MP)(r,"media")&&(0,s.vQ)(r.mimeType)&&(0,s.vQ)(r.data)){yield{type:"file",mimeType:r.mimeType,data:r.data};continue}yield{type:"non_standard",value:r}}}())}let y={translateContent:g,translateContentChunk:g};function v(e){return globalThis.lc_block_translators_registry.get(e)}globalThis.lc_block_translators_registry??=new Map([["anthropic",i.B],["bedrock-converse",h],["google-genai",m],["google-vertexai",y],["openai",a.F]]);var _=r(54808),b=r(27231),w=r(90338),k=class extends n.XQ{type="ai";tool_calls=[];invalid_tool_calls=[];usage_metadata;get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e){let t;if("string"==typeof e||Array.isArray(e))t={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:{}};else{t=e;let r=t.additional_kwargs?.tool_calls,n=t.tool_calls;null!=r&&r.length>0&&(void 0===n||0===n.length)&&console.warn("New LangChain packages are available that more efficiently handle tool calling.\n\nPlease upgrade your packages to versions that set message tool calls. e.g., `pnpm install @langchain/anthropic`, pnpm install @langchain/openai`, etc.");try{if(null!=r&&void 0===n){let[e,n]=(0,b.p1)(r);t.tool_calls=e??[],t.invalid_tool_calls=n??[]}else t.tool_calls=t.tool_calls??[],t.invalid_tool_calls=t.invalid_tool_calls??[]}catch{t.tool_calls=[],t.invalid_tool_calls=[]}if(void 0!==t.response_metadata&&"output_version"in t.response_metadata&&"v1"===t.response_metadata.output_version&&(t.contentBlocks=t.content,t.content=void 0),void 0!==t.contentBlocks){t.contentBlocks.push(...t.tool_calls.map(e=>({type:"tool_call",id:e.id,name:e.name,args:e.args})));let e=t.contentBlocks.filter(e=>"tool_call"===e.type).filter(e=>!t.tool_calls?.some(t=>t.id===e.id&&t.name===e.name));e.length>0&&(t.tool_calls=e.map(e=>({type:"tool_call",id:e.id,name:e.name,args:e.args})))}}super(t),"string"!=typeof t&&(this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=t.usage_metadata}static lc_name(){return"AIMessage"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&"v1"===this.response_metadata.output_version)return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&"string"==typeof this.response_metadata.model_provider){let e=v(this.response_metadata.model_provider);if(e)return e.translateContent(this)}let e=super.contentBlocks;if(this.tool_calls){let t=this.tool_calls.filter(t=>!e.some(e=>e.id===t.id&&e.name===t.name));e.push(...t.map(e=>({...e,type:"tool_call",id:e.id,name:e.name,args:e.args})))}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}static isInstance(e){return super.isInstance(e)&&"ai"===e.type}};function x(e){return"ai"===e._getType()}function $(e){return"ai"===e._getType()}var S=class extends n.gj{type="ai";tool_calls=[];invalid_tool_calls=[];tool_call_chunks=[];usage_metadata;constructor(e){let t;super(t="string"==typeof e||Array.isArray(e)?{content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]}:void 0===e.tool_call_chunks||0===e.tool_call_chunks.length?{...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:void 0!==e.usage_metadata?e.usage_metadata:void 0}:{...e,...(0,w.oK)(e.tool_call_chunks??[]),usage_metadata:void 0!==e.usage_metadata?e.usage_metadata:void 0}),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&"v1"===this.response_metadata.output_version)return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&"string"==typeof this.response_metadata.model_provider){let e=v(this.response_metadata.model_provider);if(e)return e.translateContent(this)}let e=super.contentBlocks;if(this.tool_calls&&"string"!=typeof this.content){let t=this.content.filter(e=>"tool_call"===e.type).map(e=>e.id);for(let r of this.tool_calls)r.id&&!t.includes(r.id)&&e.push({...r,type:"tool_call",id:r.id,name:r.name,args:r.args})}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){let t={content:(0,n._I)(this.content,e.content),additional_kwargs:(0,n.ns)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,_.Z)(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(void 0!==this.tool_call_chunks||void 0!==e.tool_call_chunks){let r=(0,n.Vt)(this.tool_call_chunks,e.tool_call_chunks);void 0!==r&&r.length>0&&(t.tool_call_chunks=r)}return(void 0!==this.usage_metadata||void 0!==e.usage_metadata)&&(t.usage_metadata=(0,_.n)(this.usage_metadata,e.usage_metadata)),new this.constructor(t)}static isInstance(e){return super.isInstance(e)&&"ai"===e.type}}},64845:(e,t,r)=>{"use strict";function n(e){return e}function i(e){return e}function a(e){}function s(e){throw Error("Unexpected value in exhaustive check")}function o(e){}function l(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function u(e,t="|"){return e.map(e=>Z(e)).join(t)}function c(e,t){return"bigint"==typeof t?t.toString():t}function d(e){let t=!1;return{get value(){if(!t){let t=e();return Object.defineProperty(this,"value",{value:t}),t}throw Error("cached value already set")}}}function p(e){return null==e}function h(e){let t=+!!e.startsWith("^"),r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function f(e,t){let r=(e.toString().split(".")[1]||"").length,n=t.toString(),i=(n.split(".")[1]||"").length;if(0===i&&/\d?e-\d?/.test(n)){let e=n.match(/\d?e-(\d?)/);e?.[1]&&(i=Number.parseInt(e[1]))}let a=r>i?r:i;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}r.r(t),r.d(t,{BIGINT_FORMAT_RANGES:()=>F,Class:()=>ed,NUMBER_FORMAT_RANGES:()=>U,aborted:()=>H,allowsEval:()=>A,assert:()=>o,assertEqual:()=>n,assertIs:()=>a,assertNever:()=>s,assertNotEqual:()=>i,assignProp:()=>v,base64ToUint8Array:()=>ea,base64urlToUint8Array:()=>eo,cached:()=>d,captureStackTrace:()=>I,cleanEnum:()=>ei,cleanRegex:()=>h,clone:()=>R,cloneDef:()=>b,createTransparentProxy:()=>L,defineLazy:()=>g,esc:()=>$,escapeRegex:()=>z,extend:()=>J,finalizeIssue:()=>Q,floatSafeRemainder:()=>f,getElementAtPath:()=>w,getEnumValues:()=>l,getLengthableOrigin:()=>et,getParsedType:()=>C,getSizableOrigin:()=>ee,hexToUint8Array:()=>eu,isObject:()=>E,isPlainObject:()=>O,issue:()=>en,joinValues:()=>u,jsonStringifyReplacer:()=>c,merge:()=>q,mergeDefs:()=>_,normalizeParams:()=>M,nullish:()=>p,numKeys:()=>N,objectClone:()=>y,omit:()=>V,optionalKeys:()=>D,parsedType:()=>er,partial:()=>K,pick:()=>B,prefixIssues:()=>Y,primitiveTypes:()=>j,promiseAllObject:()=>k,propertyKeyTypes:()=>P,randomString:()=>x,required:()=>G,safeExtend:()=>W,shallowClone:()=>T,slugify:()=>S,stringifyPrimitive:()=>Z,uint8ArrayToBase64:()=>es,uint8ArrayToBase64url:()=>el,uint8ArrayToHex:()=>ec,unwrapMessage:()=>X});let m=Symbol("evaluating");function g(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==m)return void 0===n&&(n=m,n=r()),n},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function y(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function v(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function _(...e){let t={};for(let r of e)Object.assign(t,Object.getOwnPropertyDescriptors(r));return Object.defineProperties({},t)}function b(e){return _(e._zod.def)}function w(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function k(e){let t=Object.keys(e);return Promise.all(t.map(t=>e[t])).then(e=>{let r={};for(let n=0;n<t.length;n++)r[t[n]]=e[n];return r})}function x(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<e;n++)r+=t[Math.floor(Math.random()*t.length)];return r}function $(e){return JSON.stringify(e)}function S(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}let I="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function E(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let A=d(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function O(e){if(!1===E(e))return!1;let t=e.constructor;if(void 0===t||"function"!=typeof t)return!0;let r=t.prototype;return!1!==E(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function T(e){return O(e)?{...e}:Array.isArray(e)?[...e]:e}function N(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}let C=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return"promise";if("undefined"!=typeof Map&&e instanceof Map)return"map";if("undefined"!=typeof Set&&e instanceof Set)return"set";if("undefined"!=typeof Date&&e instanceof Date)return"date";if("undefined"!=typeof File&&e instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${t}`)}},P=new Set(["string","number","symbol"]),j=new Set(["string","number","bigint","boolean","symbol","undefined"]);function z(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function R(e,t,r){let n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function M(e){let t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");t.error=t.message}return(delete t.message,"string"==typeof t.error)?{...t,error:()=>t.error}:t}function L(e){let t;return new Proxy({},{get:(r,n,i)=>(t??(t=e()),Reflect.get(t,n,i)),set:(r,n,i,a)=>(t??(t=e()),Reflect.set(t,n,i,a)),has:(r,n)=>(t??(t=e()),Reflect.has(t,n)),deleteProperty:(r,n)=>(t??(t=e()),Reflect.deleteProperty(t,n)),ownKeys:r=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(r,n)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,n)),defineProperty:(r,n,i)=>(t??(t=e()),Reflect.defineProperty(t,n,i))})}function Z(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function D(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}let U={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},F={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function B(e,t){let r=e._zod.def,n=r.checks;if(n&&n.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let i=_(e._zod.def,{get shape(){let e={};for(let n in t){if(!(n in r.shape))throw Error(`Unrecognized key: "${n}"`);t[n]&&(e[n]=r.shape[n])}return v(this,"shape",e),e},checks:[]});return R(e,i)}function V(e,t){let r=e._zod.def,n=r.checks;if(n&&n.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let i=_(e._zod.def,{get shape(){let n={...e._zod.def.shape};for(let e in t){if(!(e in r.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return v(this,"shape",n),n},checks:[]});return R(e,i)}function J(e,t){if(!O(t))throw Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0){let r=e._zod.def.shape;for(let e in t)if(void 0!==Object.getOwnPropertyDescriptor(r,e))throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let n=_(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t};return v(this,"shape",r),r}});return R(e,n)}function W(e,t){if(!O(t))throw Error("Invalid input to safeExtend: expected a plain object");let r=_(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t};return v(this,"shape",r),r}});return R(e,r)}function q(e,t){let r=_(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return v(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return R(e,r)}function K(e,t,r){let n=t._zod.def.checks;if(n&&n.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let i=_(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(let t in n)i[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return v(this,"shape",i),i},checks:[]});return R(t,i)}function G(e,t,r){let n=_(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(let t in n)i[t]=new e({type:"nonoptional",innerType:n[t]});return v(this,"shape",i),i}});return R(t,n)}function H(e,t=0){if(!0===e.aborted)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function Y(e,t){return t.map(t=>{var r;return(r=t).path??(r.path=[]),t.path.unshift(e),t})}function X(e){return"string"==typeof e?e:e?.message}function Q(e,t,r){let n={...e,path:e.path??[]};return e.message||(n.message=X(e.inst?._zod.def?.error?.(e))??X(t?.error?.(e))??X(r.customError?.(e))??X(r.localeError?.(e))??"Invalid input"),delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function ee(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function et(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function er(e){let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"nan":"number";case"object":{if(null===e)return"null";if(Array.isArray(e))return"array";let t=e;if(t&&Object.getPrototypeOf(t)!==Object.prototype&&"constructor"in t&&t.constructor)return t.constructor.name}}return t}function en(...e){let[t,r,n]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:n}:{...t}}function ei(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function ea(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function es(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function eo(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-t.length%4)%4);return ea(t+r)}function el(e){return es(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function eu(e){let t=e.replace(/^0x/,"");if(t.length%2!=0)throw Error("Invalid hex string length");let r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)r[e/2]=Number.parseInt(t.slice(e,e+2),16);return r}function ec(e){return Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}class ed{constructor(...e){}}},64951:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(4071);class i{constructor(){this._queue=[]}enqueue(e,t){let r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);let i=n.default(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(i,0,r)}dequeue(){let e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}t.default=i},65408:(e,t,r)=>{"use strict";r.d(t,{f:()=>o,g:()=>c});var n=r(67893),i=r(67146),a=r(39921),s=r(52435),o={};(0,n.V)(o,{AsyncCaller:()=>c});let l=[400,401,402,403,404,405,406,407,409],u=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||"AbortError"===e.name||e?.code==="ECONNABORTED")throw e;let t=e?.response?.status??e?.status;if(t&&l.includes(+t))throw e;if(e?.error?.code==="insufficient_quota"){let t=Error(e?.message);throw t.name="InsufficientQuotaError",t}};var c=class{maxConcurrency;maxRetries;onFailedAttempt;queue;constructor(e){this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??u;let t=s.default;this.queue=new t({concurrency:this.maxConcurrency})}async call(e,...t){return this.queue.add(()=>(0,a.J)(()=>e(...t).catch(e=>{if(e instanceof Error)throw e;throw Error(e)}),{onFailedAttempt:({error:e})=>this.onFailedAttempt?.(e),retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){if(e.signal){let n;return Promise.race([this.call(t,...r),new Promise((t,r)=>{n=()=>{r((0,i.F)(e.signal))},e.signal?.addEventListener("abort",n)})]).finally(()=>{e.signal&&n&&e.signal.removeEventListener("abort",n)})}return this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(e=>e.ok?e:Promise.reject(e)))}}},65662:(e,t,r)=>{"use strict";r.d(t,{H:()=>a,s:()=>i.s});var n=r(67893),i=r(5168),a={};(0,n.V)(a,{sha256:()=>i.s})},66235:(e,t,r)=>{"use strict";let n=r(98566);e.exports=(e,t,r)=>0>n(e,t,r)},66435:e=>{"use strict";let t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},67085:(e,t,r)=>{"use strict";r.d(t,{J_:()=>u,gJ:()=>s,tE:()=>l,xJ:()=>a});class n extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}class i extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithNotFoundError",this.status=404}}function a(e){return null!=e&&"object"==typeof e&&"name"in e&&e?.name==="LangSmithNotFoundError"}async function s(e,t,r){let a;if(e.ok){r&&(a=await e.text());return}if(403===e.status)try{let t=await e.json(),r=t?.error;"org_scoped_key_requires_workspace"===r&&(a="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch(r){let t=Error(`${e.status} ${e.statusText}`);throw t.status=e?.status,t}if(void 0===a)try{a=await e.text()}catch(e){a=""}let s=`Failed to ${t}. Received status [${e.status}]: ${e.statusText}. Message: ${a}`;if(404===e.status)throw new i(s);if(409===e.status)throw new n(s);let o=Error(s);throw o.status=e.status,o}let o="ERR_CONFLICTING_ENDPOINTS";class l extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:o}),this.name="ConflictingEndpointsError"}}function u(e){return"object"==typeof e&&null!==e&&e.code===o}},67146:(e,t,r)=>{"use strict";async function n(e,t){let r;return void 0===t?e:Promise.race([e.catch(e=>{if(!t?.aborted)throw e}),new Promise((e,n)=>{r=()=>{n(i(t))},t.addEventListener("abort",r),t.aborted&&n(i(t))})]).finally(()=>t.removeEventListener("abort",r))}function i(e){return e?.reason instanceof Error?e.reason:"string"==typeof e?.reason?Error(e.reason):Error("Aborted")}r.d(t,{F:()=>i,o:()=>n})},67286:(e,t,r)=>{"use strict";r.d(t,{Od:()=>m.Od,H:()=>m.H,XQ:()=>s.XQ,gj:()=>s.gj,cM:()=>u.cM,XU:()=>u.XU,FK:()=>c.FK,xc:()=>d.xc,a7:()=>d.a7,kN:()=>p.k,tn:()=>h.tn,uU:()=>h.uU,uf:()=>l.uf,dr:()=>l.dr,K0:()=>f.K0,up:()=>i.up,XI:()=>v,iD:()=>f.iD,KX:()=>m.KX,ny:()=>s.ny,AJ:()=>s.AJ,Fz:()=>i.Fz,wk:()=>l.wk,$$:()=>N,Q7:()=>i.Q7,Ej:()=>i.Ej,dK:()=>k});var n=r(67893),i=r(85579),a=r(47548),s=r(79271),o=r(54808),l=r(27231),u=r(71151),c=r(76937),d=r(62886),p=r(67860),h=r(91356),f=r(90338),m=r(64184),g=r(41180);let y=(e,t)=>{let r=[...new Set(t?.map(e=>{if("string"==typeof e)return e;let t=new e({});if(!("getType"in t)||"function"!=typeof t.getType)throw Error("Invalid type provided.");return t.getType()}))],n=e.getType();return r.some(e=>e===n)};function v(e,t){return Array.isArray(e)?_(e,t):g.jY.from(t=>_(t,e))}function _(e,t={}){let{includeNames:r,excludeNames:n,includeTypes:i,excludeTypes:a,includeIds:s,excludeIds:o}=t,l=[];for(let t of e)if(!(n&&t.name&&n.includes(t.name))){if(a&&y(t,a))continue;if(o&&t.id&&o.includes(t.id))continue;i||s||r?r&&t.name&&r.some(e=>e===t.name)||i&&y(t,i)?l.push(t):s&&t.id&&s.some(e=>e===t.id)&&l.push(t):l.push(t)}return l}function b(e){return Array.isArray(e)?w(e):g.jY.from(w)}function w(e){if(!e.length)return[];let t=[];for(let r of e){let e=r,n=t.pop();if(n)if("tool"===e.getType()||e.getType()!==n.getType())t.push(n,e);else{let r=(0,f.ih)(n),i=(0,f.ih)(e),a=r.concat(i);"string"==typeof r.content&&"string"==typeof i.content&&(a.content=`${r.content}
${i.content}`),t.push(A(a))}else t.push(e)}return t}function k(e,t){if(Array.isArray(e)){let r=e;if(!t)throw Error("Options parameter is required when providing messages.");return x(r,t)}{let t=e;return g.jY.from(e=>x(e,t)).withConfig({runName:"trim_messages"})}}async function x(e,t){let r,{maxTokens:n,tokenCounter:i,strategy:a="last",allowPartial:s=!1,endOn:o,startOn:l,includeSystem:u=!1,textSplitter:c}=t;if(l&&"first"===a)throw Error("`startOn` should only be specified if `strategy` is 'last'.");if(u&&"first"===a)throw Error("`includeSystem` should only be specified if `strategy` is 'last'.");r="getNumTokens"in i?async e=>(await Promise.all(e.map(e=>i.getNumTokens(e.content)))).reduce((e,t)=>e+t,0):async e=>i(e);let d=O;if(c&&(d="splitText"in c?c.splitText:async e=>c(e)),"first"===a)return $(e,{maxTokens:n,tokenCounter:r,textSplitter:d,partialStrategy:s?"first":void 0,endOn:o});if("last"===a)return S(e,{maxTokens:n,tokenCounter:r,textSplitter:d,allowPartial:s,includeSystem:u,startOn:l,endOn:o});throw Error(`Unrecognized strategy: '${a}'. Must be one of 'first' or 'last'.`)}async function $(e,t){let{maxTokens:r,tokenCounter:n,textSplitter:i,partialStrategy:a,endOn:s}=t,o=[...e],l=0;for(let e=0;e<o.length;e+=1){let t=e>0?o.slice(0,-e):o;if(await n(t)<=r){l=o.length-e;break}}if(l<o.length&&a){let e=!1;if(Array.isArray(o[l].content)){let t=o[l];if("string"==typeof t.content)throw Error("Expected content to be an array.");let i=t.content.length,s="last"===a?[...t.content].reverse():t.content;for(let u=1;u<=i;u+=1){let i="first"===a?s.slice(0,u):s.slice(-u),c=Object.fromEntries(Object.entries(t).filter(([e])=>"type"!==e&&!e.startsWith("lc_"))),d=E(t.getType(),{...c,content:i}),p=[...o.slice(0,l),d];if(await n(p)<=r)o=p,l+=1,e=!0;else break}e&&"last"===a&&(t.content=[...s].reverse())}if(!e){let e,t=o[l];if(Array.isArray(t.content)&&t.content.some(e=>"string"==typeof e||"text"===e.type)){let r=t.content.find(e=>"text"===e.type&&e.text);e=r?.text}else"string"==typeof t.content&&(e=t.content);if(e){let s=await i(e),u=s.length;"last"===a&&s.reverse();for(let e=0;e<u-1;e+=1)if(s.pop(),t.content=s.join(""),await n([...o.slice(0,l),t])<=r){"last"===a&&(t.content=[...s].reverse().join("")),o=[...o.slice(0,l),t],l+=1;break}}}}if(s){let e=Array.isArray(s)?s:[s];for(;l>0&&!y(o[l-1],e);)l-=1}return o.slice(0,l)}async function S(e,t){let{allowPartial:r=!1,includeSystem:n=!1,endOn:i,startOn:a,...o}=t,l=e.map(e=>{let t=Object.fromEntries(Object.entries(e).filter(([e])=>"type"!==e&&!e.startsWith("lc_")));return E(e.getType(),t,(0,s.AJ)(e))});if(i){let e=Array.isArray(i)?i:[i];for(;l.length>0&&!y(l[l.length-1],e);)l=l.slice(0,-1)}let u=n&&l[0]?.getType()==="system",c=u?l.slice(0,1).concat(l.slice(1).reverse()):l.reverse();return(c=await $(c,{...o,partialStrategy:r?"last":void 0,endOn:a}),u)?[c[0],...c.slice(1).reverse()]:c.reverse()}let I={human:{message:d.xc,messageChunk:d.a7},ai:{message:m.Od,messageChunk:m.H},system:{message:h.tn,messageChunk:h.uU},developer:{message:h.tn,messageChunk:h.uU},tool:{message:l.uf,messageChunk:l.dr},function:{message:c.mg,messageChunk:c.FK},generic:{message:u.cM,messageChunk:u.XU},remove:{message:p.k,messageChunk:p.k}};function E(e,t,r){let n,i;switch(e){case"human":r?n=new d.a7(t):i=new d.xc(t);break;case"ai":if(r){let e={...t};"tool_calls"in e&&(e={...e,tool_call_chunks:e.tool_calls?.map(e=>({...e,type:"tool_call_chunk",index:void 0,args:JSON.stringify(e.args)}))}),n=new m.H(e)}else i=new m.Od(t);break;case"system":r?n=new h.uU(t):i=new h.tn(t);break;case"developer":r?n=new h.uU({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}}):i=new h.tn({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}});break;case"tool":if("tool_call_id"in t)r?n=new l.dr(t):i=new l.uf(t);else throw Error("Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.");break;case"function":if(r)n=new c.FK(t);else{if(!t.name)throw Error("FunctionMessage must have a 'name' field");i=new c.mg(t)}break;case"generic":if("role"in t)r?n=new u.XU(t):i=new u.cM(t);else throw Error("Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.");break;default:throw Error(`Unrecognized message type ${e}`)}if(r&&n)return n;if(i)return i;throw Error(`Unrecognized message type ${e}`)}function A(e){let t,r=e.getType(),n=Object.fromEntries(Object.entries(e).filter(([e])=>!["type","tool_call_chunks"].includes(e)&&!e.startsWith("lc_")));if(r in I&&(t=E(r,n)),!t)throw Error(`Unrecognized message chunk class ${r}. Supported classes are ${Object.keys(I)}`);return t}function O(e){let t=e.split("\n");return Promise.resolve([...t.slice(0,-1).map(e=>`${e}
`),t[t.length-1]])}let T=["text","reasoning","tool_call","tool_call_chunk","invalid_tool_call","server_tool_call","server_tool_call_chunk","server_tool_call_result","image","video","audio","text-plain","file"];var N={};(0,n.V)(N,{AIMessage:()=>m.Od,AIMessageChunk:()=>m.H,BaseMessage:()=>s.XQ,BaseMessageChunk:()=>s.gj,ChatMessage:()=>u.cM,ChatMessageChunk:()=>u.XU,FunctionMessage:()=>c.mg,FunctionMessageChunk:()=>c.FK,HumanMessage:()=>d.xc,HumanMessageChunk:()=>d.a7,KNOWN_BLOCK_TYPES:()=>T,RemoveMessage:()=>p.k,SystemMessage:()=>h.tn,SystemMessageChunk:()=>h.uU,ToolMessage:()=>l.uf,ToolMessageChunk:()=>l.dr,_isMessageFieldWithRole:()=>s.dp,_mergeDicts:()=>s.ns,_mergeLists:()=>s.Vt,_mergeObj:()=>s.F7,_mergeStatus:()=>s.Iv,coerceMessageLikeToMessage:()=>f.K0,collapseToolCallChunks:()=>f.oK,convertToChunk:()=>f.ih,convertToOpenAIImageBlock:()=>i.Vi,convertToProviderContentBlock:()=>i.up,defaultTextSplitter:()=>O,defaultToolCallParser:()=>l.p1,filterMessages:()=>v,getBufferString:()=>f.Sw,iife:()=>f.iD,isAIMessage:()=>m.KX,isAIMessageChunk:()=>m.jm,isBase64ContentBlock:()=>i.cJ,isBaseMessage:()=>s.ny,isBaseMessageChunk:()=>s.AJ,isChatMessage:()=>u.kY,isChatMessageChunk:()=>u.bU,isDataContentBlock:()=>i.Fz,isDirectToolOutput:()=>l.fK,isFunctionMessage:()=>c.AP,isFunctionMessageChunk:()=>c.vl,isHumanMessage:()=>d.di,isHumanMessageChunk:()=>d.GZ,isIDContentBlock:()=>i.oe,isMessage:()=>a.K,isOpenAIToolCallArray:()=>s.Ao,isPlainTextContentBlock:()=>i.Ac,isSystemMessage:()=>h.X4,isSystemMessageChunk:()=>h.UF,isToolMessage:()=>l.wk,isToolMessageChunk:()=>l.P,isURLContentBlock:()=>i.W,mapChatMessagesToStoredMessages:()=>f.Js,mapStoredMessageToChatMessage:()=>f.Pz,mapStoredMessagesToChatMessages:()=>f.rf,mergeContent:()=>s._I,mergeMessageRuns:()=>b,mergeResponseMetadata:()=>o.Z,mergeUsageMetadata:()=>o.n,parseBase64DataUrl:()=>i.Q7,parseMimeType:()=>i.Ej,trimMessages:()=>k})},67860:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var n=r(79271),i=class extends n.XQ{type="remove";id;constructor(e){super({...e,content:[]}),this.id=e.id}get _printableFields(){return{...super._printableFields,id:this.id}}static isInstance(e){return super.isInstance(e)&&"remove"===e.type}}},67893:(e,t,r)=>{"use strict";r.d(t,{V:()=>i});var n=Object.defineProperty,i=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})}},68133:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ar:()=>a,az:()=>o,be:()=>c,bg:()=>p,ca:()=>f,cs:()=>g,da:()=>v,de:()=>b,en:()=>w.A,eo:()=>x,es:()=>S,fa:()=>E,fi:()=>O,fr:()=>N,frCA:()=>P,he:()=>z,hu:()=>M,hy:()=>U,id:()=>B,is:()=>J,it:()=>q,ja:()=>G,ka:()=>Y,kh:()=>ee,km:()=>Q,ko:()=>er,lt:()=>es,mk:()=>el,ms:()=>ec,nl:()=>ep,no:()=>ef,ota:()=>eg,pl:()=>eb,ps:()=>ev,pt:()=>ek,ru:()=>eS,sl:()=>eE,sv:()=>eO,ta:()=>eN,th:()=>eP,tr:()=>ez,ua:()=>eL,uk:()=>eM,ur:()=>eD,uz:()=>eF,vi:()=>eV,yo:()=>eH,zhCN:()=>eW,zhTW:()=>eK});var n=r(64845);let i=()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}let r={regex:"",email:" ",url:"",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:"  ISO",time:"  ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:"   IPv4",cidrv6:"   IPv6",base64:"  base64-encoded",base64url:"  base64url-encoded",json_string:"   JSON",e164:"   E.164",jwt:"JWT",template_literal:""},i={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`  :   instanceof ${e.expected}    ${a}`;return`  :   ${t}    ${a}`}case"invalid_value":if(1===e.values.length)return`  :   ${n.stringifyPrimitive(e.values[0])}`;return`  :     : ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`   :    ${e.origin??""} ${r} ${e.maximum.toString()} ${n.unit??""}`;return`  :    ${e.origin??""} ${r} ${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`  :   ${e.origin}   ${r} ${e.minimum.toString()} ${n.unit}`;return`  :   ${e.origin}   ${r} ${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`  :     "${e.prefix}"`;if("ends_with"===t.format)return`  :     "${t.suffix}"`;if("includes"===t.format)return`  :    "${t.includes}"`;if("regex"===t.format)return`  :     ${t.pattern}`;return`${r[t.format]??e.format}  `}case"not_multiple_of":return`  :      ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"":""} ${e.keys.length>1?"":""}: ${n.joinValues(e.keys," ")}`;case"invalid_key":return`    ${e.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`    ${e.origin}`}}};function a(){return{localeError:i()}}let s=()=>{let e={string:{unit:"simvol",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"element",verb:"olmaldr"},set:{unit:"element",verb:"olmaldr"}};function t(t){return e[t]??null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},i={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Yanl dyr: g\xf6zlniln instanceof ${e.expected}, daxil olan ${a}`;return`Yanl dyr: g\xf6zlniln ${t}, daxil olan ${a}`}case"invalid_value":if(1===e.values.length)return`Yanl dyr: g\xf6zlniln ${n.stringifyPrimitive(e.values[0])}`;return`Yanl se\xe7im: aadaklardan biri olmaldr: ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${e.origin??"dyr"} ${r}${e.maximum.toString()} ${n.unit??"element"}`;return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${e.origin??"dyr"} ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`\xc7ox ki\xe7ik: g\xf6zlniln ${e.origin} ${r}${e.minimum.toString()} ${n.unit}`;return`\xc7ox ki\xe7ik: g\xf6zlniln ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Yanl mtn: "${t.prefix}" il balamaldr`;if("ends_with"===t.format)return`Yanl mtn: "${t.suffix}" il bitmlidir`;if("includes"===t.format)return`Yanl mtn: "${t.includes}" daxil olmaldr`;if("regex"===t.format)return`Yanl mtn: ${t.pattern} ablonuna uyun olmaldr`;return`Yanl ${r[t.format]??e.format}`}case"not_multiple_of":return`Yanl dd: ${e.divisor} il b\xf6l\xfcn biln olmaldr`;case"unrecognized_keys":return`Tannmayan a\xe7ar${e.keys.length>1?"lar":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`${e.origin} daxilind yanl a\xe7ar`;case"invalid_union":return"Yanl dyr";case"invalid_element":return`${e.origin} daxilind yanl dyr`;default:return`Yanl dyr`}}};function o(){return{localeError:s()}}function l(e,t,r,n){let i=Math.abs(e),a=i%10,s=i%100;return s>=11&&s<=19?n:1===a?t:a>=2&&a<=4?r:n}let u=()=>{let e={string:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return` :  instanceof ${e.expected},  ${a}`;return` :  ${t},  ${a}`}case"invalid_value":if(1===e.values.length)return` :  ${n.stringifyPrimitive(e.values[0])}`;return` :    ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n){let t=l(Number(e.maximum),n.unit.one,n.unit.few,n.unit.many);return` : ,  ${e.origin??""}  ${n.verb} ${r}${e.maximum.toString()} ${t}`}return` : ,  ${e.origin??""}   ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n){let t=l(Number(e.minimum),n.unit.one,n.unit.few,n.unit.many);return` : ,  ${e.origin}  ${n.verb} ${r}${e.minimum.toString()} ${t}`}return` : ,  ${e.origin}   ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return` :    "${t.prefix}"`;if("ends_with"===t.format)return` :    "${t.suffix}"`;if("includes"===t.format)return` :   "${t.includes}"`;if("regex"===t.format)return` :    ${t.pattern}`;return` ${r[t.format]??e.format}`}case"not_multiple_of":return` :    ${e.divisor}`;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${e.origin}`;default:return` `}}};function c(){return{localeError:u()}}let d=()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}let r={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return` :  instanceof ${e.expected},  ${a}`;return` :  ${t},  ${a}`}case"invalid_value":if(1===e.values.length)return` :  ${n.stringifyPrimitive(e.values[0])}`;return` :    ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return` :   ${e.origin??""}   ${r}${e.maximum.toString()} ${n.unit??""}`;return` :   ${e.origin??""}   ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return` :   ${e.origin}   ${r}${e.minimum.toString()} ${n.unit}`;return` :   ${e.origin}   ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return` :     "${t.prefix}"`;if("ends_with"===t.format)return` :     "${t.suffix}"`;if("includes"===t.format)return` :    "${t.includes}"`;if("regex"===t.format)return` :     ${t.pattern}`;let n="";return"emoji"===t.format&&(n=""),"datetime"===t.format&&(n=""),"date"===t.format&&(n=""),"time"===t.format&&(n=""),"duration"===t.format&&(n=""),`${n} ${r[t.format]??e.format}`}case"not_multiple_of":return` :      ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"":""} ${e.keys.length>1?"":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${e.origin}`;default:return` `}}};function p(){return{localeError:d()}}let h=()=>{let e={string:{unit:"car\xe0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(t){return e[t]??null}let r={regex:"entrada",email:"adre\xe7a electr\xf2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xe7a IPv4",ipv6:"adre\xe7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xfamero E.164",jwt:"JWT",template_literal:"entrada"},i={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Tipus inv\xe0lid: s'esperava instanceof ${e.expected}, s'ha rebut ${a}`;return`Tipus inv\xe0lid: s'esperava ${t}, s'ha rebut ${a}`}case"invalid_value":if(1===e.values.length)return`Valor inv\xe0lid: s'esperava ${n.stringifyPrimitive(e.values[0])}`;return`Opci\xf3 inv\xe0lida: s'esperava una de ${n.joinValues(e.values," o ")}`;case"too_big":{let r=e.inclusive?"com a m\xe0xim":"menys de",n=t(e.origin);if(n)return`Massa gran: s'esperava que ${e.origin??"el valor"} contingu\xe9s ${r} ${e.maximum.toString()} ${n.unit??"elements"}`;return`Massa gran: s'esperava que ${e.origin??"el valor"} fos ${r} ${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?"com a m\xednim":"m\xe9s de",n=t(e.origin);if(n)return`Massa petit: s'esperava que ${e.origin} contingu\xe9s ${r} ${e.minimum.toString()} ${n.unit}`;return`Massa petit: s'esperava que ${e.origin} fos ${r} ${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Format inv\xe0lid: ha de comen\xe7ar amb "${t.prefix}"`;if("ends_with"===t.format)return`Format inv\xe0lid: ha d'acabar amb "${t.suffix}"`;if("includes"===t.format)return`Format inv\xe0lid: ha d'incloure "${t.includes}"`;if("regex"===t.format)return`Format inv\xe0lid: ha de coincidir amb el patr\xf3 ${t.pattern}`;return`Format inv\xe0lid per a ${r[t.format]??e.format}`}case"not_multiple_of":return`N\xfamero inv\xe0lid: ha de ser m\xfaltiple de ${e.divisor}`;case"unrecognized_keys":return`Clau${e.keys.length>1?"s":""} no reconeguda${e.keys.length>1?"s":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Clau inv\xe0lida a ${e.origin}`;case"invalid_union":return"Entrada inv\xe0lida";case"invalid_element":return`Element inv\xe0lid a ${e.origin}`;default:return`Entrada inv\xe0lida`}}};function f(){return{localeError:h()}}let m=()=>{let e={string:{unit:"znak",verb:"m\xedt"},file:{unit:"bajt",verb:"m\xedt"},array:{unit:"prvk",verb:"m\xedt"},set:{unit:"prvk",verb:"m\xedt"}};function t(t){return e[t]??null}let r={regex:"regul\xe1rn\xed v\xfdraz",email:"e-mailov\xe1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a as ve form\xe1tu ISO",date:"datum ve form\xe1tu ISO",time:"as ve form\xe1tu ISO",duration:"doba trv\xe1n\xed ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"etzec zak\xf3dovan\xfd ve form\xe1tu base64",base64url:"etzec zak\xf3dovan\xfd ve form\xe1tu base64url",json_string:"etzec ve form\xe1tu JSON",e164:"\xedslo E.164",jwt:"JWT",template_literal:"vstup"},i={nan:"NaN",number:"\xedslo",string:"etzec",function:"funkce",array:"pole"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Neplatn\xfd vstup: oek\xe1v\xe1no instanceof ${e.expected}, obdreno ${a}`;return`Neplatn\xfd vstup: oek\xe1v\xe1no ${t}, obdreno ${a}`}case"invalid_value":if(1===e.values.length)return`Neplatn\xfd vstup: oek\xe1v\xe1no ${n.stringifyPrimitive(e.values[0])}`;return`Neplatn\xe1 monost: oek\xe1v\xe1na jedna z hodnot ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Hodnota je p\xedli velk\xe1: ${e.origin??"hodnota"} mus\xed m\xedt ${r}${e.maximum.toString()} ${n.unit??"prvk"}`;return`Hodnota je p\xedli velk\xe1: ${e.origin??"hodnota"} mus\xed b\xfdt ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Hodnota je p\xedli mal\xe1: ${e.origin??"hodnota"} mus\xed m\xedt ${r}${e.minimum.toString()} ${n.unit??"prvk"}`;return`Hodnota je p\xedli mal\xe1: ${e.origin??"hodnota"} mus\xed b\xfdt ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Neplatn\xfd etzec: mus\xed za\xednat na "${t.prefix}"`;if("ends_with"===t.format)return`Neplatn\xfd etzec: mus\xed konit na "${t.suffix}"`;if("includes"===t.format)return`Neplatn\xfd etzec: mus\xed obsahovat "${t.includes}"`;if("regex"===t.format)return`Neplatn\xfd etzec: mus\xed odpov\xeddat vzoru ${t.pattern}`;return`Neplatn\xfd form\xe1t ${r[t.format]??e.format}`}case"not_multiple_of":return`Neplatn\xe9 \xedslo: mus\xed b\xfdt n\xe1sobkem ${e.divisor}`;case"unrecognized_keys":return`Nezn\xe1m\xe9 kl\xede: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Neplatn\xfd kl\xed v ${e.origin}`;case"invalid_union":return"Neplatn\xfd vstup";case"invalid_element":return`Neplatn\xe1 hodnota v ${e.origin}`;default:return`Neplatn\xfd vstup`}}};function g(){return{localeError:m()}}let y=()=>{let e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}};function t(t){return e[t]??null}let r={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xe6t",date:"ISO-dato",time:"ISO-klokkesl\xe6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xe5de",ipv6:"IPv6-omr\xe5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},i={nan:"NaN",string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xe6t",file:"fil"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Ugyldigt input: forventede instanceof ${e.expected}, fik ${a}`;return`Ugyldigt input: forventede ${t}, fik ${a}`}case"invalid_value":if(1===e.values.length)return`Ugyldig v\xe6rdi: forventede ${n.stringifyPrimitive(e.values[0])}`;return`Ugyldigt valg: forventede en af f\xf8lgende ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin),a=i[e.origin]??e.origin;if(n)return`For stor: forventede ${a??"value"} ${n.verb} ${r} ${e.maximum.toString()} ${n.unit??"elementer"}`;return`For stor: forventede ${a??"value"} havde ${r} ${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin),a=i[e.origin]??e.origin;if(n)return`For lille: forventede ${a} ${n.verb} ${r} ${e.minimum.toString()} ${n.unit}`;return`For lille: forventede ${a} havde ${r} ${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Ugyldig streng: skal starte med "${t.prefix}"`;if("ends_with"===t.format)return`Ugyldig streng: skal ende med "${t.suffix}"`;if("includes"===t.format)return`Ugyldig streng: skal indeholde "${t.includes}"`;if("regex"===t.format)return`Ugyldig streng: skal matche m\xf8nsteret ${t.pattern}`;return`Ugyldig ${r[t.format]??e.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xe6re deleligt med ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ukendte n\xf8gler":"Ukendt n\xf8gle"}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8gle i ${e.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xe6rdi i ${e.origin}`;default:return"Ugyldigt input"}}};function v(){return{localeError:y()}}let _=()=>{let e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(t){return e[t]??null}let r={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},i={nan:"NaN",number:"Zahl",array:"Array"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Ung\xfcltige Eingabe: erwartet instanceof ${e.expected}, erhalten ${a}`;return`Ung\xfcltige Eingabe: erwartet ${t}, erhalten ${a}`}case"invalid_value":if(1===e.values.length)return`Ung\xfcltige Eingabe: erwartet ${n.stringifyPrimitive(e.values[0])}`;return`Ung\xfcltige Option: erwartet eine von ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Zu gro\xdf: erwartet, dass ${e.origin??"Wert"} ${r}${e.maximum.toString()} ${n.unit??"Elemente"} hat`;return`Zu gro\xdf: erwartet, dass ${e.origin??"Wert"} ${r}${e.maximum.toString()} ist`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Zu klein: erwartet, dass ${e.origin} ${r}${e.minimum.toString()} ${n.unit} hat`;return`Zu klein: erwartet, dass ${e.origin} ${r}${e.minimum.toString()} ist`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Ung\xfcltiger String: muss mit "${t.prefix}" beginnen`;if("ends_with"===t.format)return`Ung\xfcltiger String: muss mit "${t.suffix}" enden`;if("includes"===t.format)return`Ung\xfcltiger String: muss "${t.includes}" enthalten`;if("regex"===t.format)return`Ung\xfcltiger String: muss dem Muster ${t.pattern} entsprechen`;return`Ung\xfcltig: ${r[t.format]??e.format}`}case"not_multiple_of":return`Ung\xfcltige Zahl: muss ein Vielfaches von ${e.divisor} sein`;case"unrecognized_keys":return`${e.keys.length>1?"Unbekannte Schl\xfcssel":"Unbekannter Schl\xfcssel"}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Ung\xfcltiger Schl\xfcssel in ${e.origin}`;case"invalid_union":return"Ung\xfcltige Eingabe";case"invalid_element":return`Ung\xfcltiger Wert in ${e.origin}`;default:return`Ung\xfcltige Eingabe`}}};function b(){return{localeError:_()}}var w=r(56032);let k=()=>{let e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function t(t){return e[t]??null}let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},i={nan:"NaN",number:"nombro",array:"tabelo",null:"senvalora"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Nevalida enigo: atendiis instanceof ${e.expected}, riceviis ${a}`;return`Nevalida enigo: atendiis ${t}, riceviis ${a}`}case"invalid_value":if(1===e.values.length)return`Nevalida enigo: atendiis ${n.stringifyPrimitive(e.values[0])}`;return`Nevalida opcio: atendiis unu el ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Tro granda: atendiis ke ${e.origin??"valoro"} havu ${r}${e.maximum.toString()} ${n.unit??"elementojn"}`;return`Tro granda: atendiis ke ${e.origin??"valoro"} havu ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Tro malgranda: atendiis ke ${e.origin} havu ${r}${e.minimum.toString()} ${n.unit}`;return`Tro malgranda: atendiis ke ${e.origin} estu ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Nevalida karaktraro: devas komencii per "${t.prefix}"`;if("ends_with"===t.format)return`Nevalida karaktraro: devas finii per "${t.suffix}"`;if("includes"===t.format)return`Nevalida karaktraro: devas inkluzivi "${t.includes}"`;if("regex"===t.format)return`Nevalida karaktraro: devas kongrui kun la modelo ${t.pattern}`;return`Nevalida ${r[t.format]??e.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${e.divisor}`;case"unrecognized_keys":return`Nekonata${e.keys.length>1?"j":""} losilo${e.keys.length>1?"j":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Nevalida losilo en ${e.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${e.origin}`}}};function x(){return{localeError:k()}}let $=()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}};function t(t){return e[t]??null}let r={regex:"entrada",email:"direcci\xf3n de correo electr\xf3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xf3n ISO",ipv4:"direcci\xf3n IPv4",ipv6:"direcci\xf3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xfamero E.164",jwt:"JWT",template_literal:"entrada"},i={nan:"NaN",string:"texto",number:"n\xfamero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xfamero grande",symbol:"s\xedmbolo",undefined:"indefinido",null:"nulo",function:"funci\xf3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xf3n",union:"uni\xf3n",literal:"literal",promise:"promesa",void:"vac\xedo",never:"nunca",unknown:"desconocido",any:"cualquiera"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Entrada inv\xe1lida: se esperaba instanceof ${e.expected}, recibido ${a}`;return`Entrada inv\xe1lida: se esperaba ${t}, recibido ${a}`}case"invalid_value":if(1===e.values.length)return`Entrada inv\xe1lida: se esperaba ${n.stringifyPrimitive(e.values[0])}`;return`Opci\xf3n inv\xe1lida: se esperaba una de ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin),a=i[e.origin]??e.origin;if(n)return`Demasiado grande: se esperaba que ${a??"valor"} tuviera ${r}${e.maximum.toString()} ${n.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${a??"valor"} fuera ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin),a=i[e.origin]??e.origin;if(n)return`Demasiado peque\xf1o: se esperaba que ${a} tuviera ${r}${e.minimum.toString()} ${n.unit}`;return`Demasiado peque\xf1o: se esperaba que ${a} fuera ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Cadena inv\xe1lida: debe comenzar con "${t.prefix}"`;if("ends_with"===t.format)return`Cadena inv\xe1lida: debe terminar en "${t.suffix}"`;if("includes"===t.format)return`Cadena inv\xe1lida: debe incluir "${t.includes}"`;if("regex"===t.format)return`Cadena inv\xe1lida: debe coincidir con el patr\xf3n ${t.pattern}`;return`Inv\xe1lido ${r[t.format]??e.format}`}case"not_multiple_of":return`N\xfamero inv\xe1lido: debe ser m\xfaltiplo de ${e.divisor}`;case"unrecognized_keys":return`Llave${e.keys.length>1?"s":""} desconocida${e.keys.length>1?"s":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Llave inv\xe1lida en ${i[e.origin]??e.origin}`;case"invalid_union":return"Entrada inv\xe1lida";case"invalid_element":return`Valor inv\xe1lido en ${i[e.origin]??e.origin}`;default:return`Entrada inv\xe1lida`}}};function S(){return{localeError:$()}}let I=()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}let r={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ",date:" ",time:" ",duration:"  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return` :  instanceof ${e.expected}  ${a}  `;return` :  ${t}  ${a}  `}case"invalid_value":if(1===e.values.length)return` :  ${n.stringifyPrimitive(e.values[0])} `;return` :    ${n.joinValues(e.values,"|")} `;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return` : ${e.origin??""}  ${r}${e.maximum.toString()} ${n.unit??""} `;return` : ${e.origin??""}  ${r}${e.maximum.toString()} `}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return` : ${e.origin}  ${r}${e.minimum.toString()} ${n.unit} `;return` : ${e.origin}  ${r}${e.minimum.toString()} `}case"invalid_format":{let t=e;if("starts_with"===t.format)return` :   "${t.prefix}"  `;if("ends_with"===t.format)return` :   "${t.suffix}"  `;if("includes"===t.format)return` :   "${t.includes}" `;if("regex"===t.format)return` :    ${t.pattern}   `;return`${r[t.format]??e.format} `}case"not_multiple_of":return` :   ${e.divisor} `;case"unrecognized_keys":return`${e.keys.length>1?"":""} : ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return` `;case"invalid_element":return`   ${e.origin}`}}};function E(){return{localeError:I()}}let A=()=>{let e={string:{unit:"merkki\xe4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xe4iv\xe4m\xe4\xe4r\xe4n"}};function t(t){return e[t]??null}let r={regex:"s\xe4\xe4nn\xf6llinen lauseke",email:"s\xe4hk\xf6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xe4iv\xe4m\xe4\xe4r\xe4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},i={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Virheellinen tyyppi: odotettiin instanceof ${e.expected}, oli ${a}`;return`Virheellinen tyyppi: odotettiin ${t}, oli ${a}`}case"invalid_value":if(1===e.values.length)return`Virheellinen sy\xf6te: t\xe4ytyy olla ${n.stringifyPrimitive(e.values[0])}`;return`Virheellinen valinta: t\xe4ytyy olla yksi seuraavista: ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Liian suuri: ${n.subject} t\xe4ytyy olla ${r}${e.maximum.toString()} ${n.unit}`.trim();return`Liian suuri: arvon t\xe4ytyy olla ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Liian pieni: ${n.subject} t\xe4ytyy olla ${r}${e.minimum.toString()} ${n.unit}`.trim();return`Liian pieni: arvon t\xe4ytyy olla ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Virheellinen sy\xf6te: t\xe4ytyy alkaa "${t.prefix}"`;if("ends_with"===t.format)return`Virheellinen sy\xf6te: t\xe4ytyy loppua "${t.suffix}"`;if("includes"===t.format)return`Virheellinen sy\xf6te: t\xe4ytyy sis\xe4lt\xe4\xe4 "${t.includes}"`;if("regex"===t.format)return`Virheellinen sy\xf6te: t\xe4ytyy vastata s\xe4\xe4nn\xf6llist\xe4 lauseketta ${t.pattern}`;return`Virheellinen ${r[t.format]??e.format}`}case"not_multiple_of":return`Virheellinen luku: t\xe4ytyy olla luvun ${e.divisor} monikerta`;case"unrecognized_keys":return`${e.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return`Virheellinen sy\xf6te`}}};function O(){return{localeError:A()}}let T=()=>{let e={string:{unit:"caract\xe8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xe9l\xe9ments",verb:"avoir"},set:{unit:"\xe9l\xe9ments",verb:"avoir"}};function t(t){return e[t]??null}let r={regex:"entr\xe9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xe9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xeene encod\xe9e en base64",base64url:"cha\xeene encod\xe9e en base64url",json_string:"cha\xeene JSON",e164:"num\xe9ro E.164",jwt:"JWT",template_literal:"entr\xe9e"},i={nan:"NaN",number:"nombre",array:"tableau"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Entr\xe9e invalide : instanceof ${e.expected} attendu, ${a} re\xe7u`;return`Entr\xe9e invalide : ${t} attendu, ${a} re\xe7u`}case"invalid_value":if(1===e.values.length)return`Entr\xe9e invalide : ${n.stringifyPrimitive(e.values[0])} attendu`;return`Option invalide : une valeur parmi ${n.joinValues(e.values,"|")} attendue`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Trop grand : ${e.origin??"valeur"} doit ${n.verb} ${r}${e.maximum.toString()} ${n.unit??"\xe9l\xe9ment(s)"}`;return`Trop grand : ${e.origin??"valeur"} doit \xeatre ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Trop petit : ${e.origin} doit ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`;return`Trop petit : ${e.origin} doit \xeatre ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Cha\xeene invalide : doit commencer par "${t.prefix}"`;if("ends_with"===t.format)return`Cha\xeene invalide : doit se terminer par "${t.suffix}"`;if("includes"===t.format)return`Cha\xeene invalide : doit inclure "${t.includes}"`;if("regex"===t.format)return`Cha\xeene invalide : doit correspondre au mod\xe8le ${t.pattern}`;return`${r[t.format]??e.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${e.divisor}`;case"unrecognized_keys":return`Cl\xe9${e.keys.length>1?"s":""} non reconnue${e.keys.length>1?"s":""} : ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${e.origin}`;case"invalid_union":return"Entr\xe9e invalide";case"invalid_element":return`Valeur invalide dans ${e.origin}`;default:return`Entr\xe9e invalide`}}};function N(){return{localeError:T()}}let C=()=>{let e={string:{unit:"caract\xe8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xe9l\xe9ments",verb:"avoir"},set:{unit:"\xe9l\xe9ments",verb:"avoir"}};function t(t){return e[t]??null}let r={regex:"entr\xe9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xe9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xeene encod\xe9e en base64",base64url:"cha\xeene encod\xe9e en base64url",json_string:"cha\xeene JSON",e164:"num\xe9ro E.164",jwt:"JWT",template_literal:"entr\xe9e"},i={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Entr\xe9e invalide : attendu instanceof ${e.expected}, re\xe7u ${a}`;return`Entr\xe9e invalide : attendu ${t}, re\xe7u ${a}`}case"invalid_value":if(1===e.values.length)return`Entr\xe9e invalide : attendu ${n.stringifyPrimitive(e.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"":"<",n=t(e.origin);if(n)return`Trop grand : attendu que ${e.origin??"la valeur"} ait ${r}${e.maximum.toString()} ${n.unit}`;return`Trop grand : attendu que ${e.origin??"la valeur"} soit ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?"":">",n=t(e.origin);if(n)return`Trop petit : attendu que ${e.origin} ait ${r}${e.minimum.toString()} ${n.unit}`;return`Trop petit : attendu que ${e.origin} soit ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Cha\xeene invalide : doit commencer par "${t.prefix}"`;if("ends_with"===t.format)return`Cha\xeene invalide : doit se terminer par "${t.suffix}"`;if("includes"===t.format)return`Cha\xeene invalide : doit inclure "${t.includes}"`;if("regex"===t.format)return`Cha\xeene invalide : doit correspondre au motif ${t.pattern}`;return`${r[t.format]??e.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${e.divisor}`;case"unrecognized_keys":return`Cl\xe9${e.keys.length>1?"s":""} non reconnue${e.keys.length>1?"s":""} : ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${e.origin}`;case"invalid_union":return"Entr\xe9e invalide";case"invalid_element":return`Valeur invalide dans ${e.origin}`;default:return`Entr\xe9e invalide`}}};function P(){return{localeError:C()}}let j=()=>{let e={string:{label:"",gender:"f"},number:{label:"",gender:"m"},boolean:{label:" ",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"",gender:"m"},array:{label:"",gender:"m"},object:{label:"",gender:"m"},null:{label:"  (null)",gender:"m"},undefined:{label:"   (undefined)",gender:"m"},symbol:{label:" (Symbol)",gender:"m"},function:{label:"",gender:"f"},map:{label:" (Map)",gender:"f"},set:{label:" (Set)",gender:"f"},file:{label:"",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"  ",gender:"m"},value:{label:"",gender:"m"}},t={string:{unit:"",shortLabel:"",longLabel:""},file:{unit:"",shortLabel:"",longLabel:""},array:{unit:"",shortLabel:"",longLabel:""},set:{unit:"",shortLabel:"",longLabel:""},number:{unit:"",shortLabel:"",longLabel:""}},r=t=>t?e[t]:void 0,i=t=>{let n=r(t);return n?n.label:t??e.unknown.label},a=e=>`${i(e)}`,s=e=>{let t=r(e);return"f"===(t?.gender??"m")?" ":" "},o=e=>e?t[e]??null:null,l={regex:{label:"",gender:"m"},email:{label:" ",gender:"f"},url:{label:" ",gender:"f"},emoji:{label:"'",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"  ISO",gender:"m"},date:{label:" ISO",gender:"m"},time:{label:" ISO",gender:"m"},duration:{label:"  ISO",gender:"m"},ipv4:{label:" IPv4",gender:"f"},ipv6:{label:" IPv6",gender:"f"},cidrv4:{label:" IPv4",gender:"m"},cidrv6:{label:" IPv6",gender:"m"},base64:{label:"  64",gender:"f"},base64url:{label:"  64  ",gender:"f"},json_string:{label:" JSON",gender:"f"},e164:{label:" E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"",gender:"m"},includes:{label:"",gender:"m"},lowercase:{label:"",gender:"m"},starts_with:{label:"",gender:"m"},uppercase:{label:"",gender:"m"}},u={nan:"NaN"};return t=>{switch(t.code){case"invalid_type":{let r=t.expected,a=u[r??""]??i(r),s=n.parsedType(t.input),o=u[s]??e[s]?.label??s;if(/^[A-Z]/.test(t.expected))return`  :   instanceof ${t.expected},  ${o}`;return`  :   ${a},  ${o}`}case"invalid_value":{if(1===t.values.length)return`  :    ${n.stringifyPrimitive(t.values[0])}`;let e=t.values.map(e=>n.stringifyPrimitive(e));if(2===t.values.length)return`  :    ${e[0]}  ${e[1]}`;let r=e[e.length-1],i=e.slice(0,-1).join(", ");return`  :    ${i}  ${r}`}case"too_big":{let e=o(t.origin),r=a(t.origin??"value");if("string"===t.origin)return`${e?.longLabel??""} : ${r}   ${t.maximum.toString()} ${e?.unit??""} ${t.inclusive?" ":" "}`.trim();if("number"===t.origin){let e=t.inclusive?`   -${t.maximum}`:` -${t.maximum}`;return` : ${r}   ${e}`}if("array"===t.origin||"set"===t.origin){let n="set"===t.origin?"":"",i=t.inclusive?`${t.maximum} ${e?.unit??""}  `:` -${t.maximum} ${e?.unit??""}`;return` : ${r} ${n}  ${i}`.trim()}let n=t.inclusive?"<=":"<",i=s(t.origin??"value");if(e?.unit)return`${e.longLabel} : ${r} ${i} ${n}${t.maximum.toString()} ${e.unit}`;return`${e?.longLabel??""} : ${r} ${i} ${n}${t.maximum.toString()}`}case"too_small":{let e=o(t.origin),r=a(t.origin??"value");if("string"===t.origin)return`${e?.shortLabel??""} : ${r}   ${t.minimum.toString()} ${e?.unit??""} ${t.inclusive?" ":""}`.trim();if("number"===t.origin){let e=t.inclusive?`   -${t.minimum}`:` -${t.minimum}`;return` : ${r}   ${e}`}if("array"===t.origin||"set"===t.origin){let n="set"===t.origin?"":"";if(1===t.minimum&&t.inclusive){let e=(t.origin,"  ");return` : ${r} ${n}  ${e}`}let i=t.inclusive?`${t.minimum} ${e?.unit??""}  `:` -${t.minimum} ${e?.unit??""}`;return` : ${r} ${n}  ${i}`.trim()}let n=t.inclusive?">=":">",i=s(t.origin??"value");if(e?.unit)return`${e.shortLabel} : ${r} ${i} ${n}${t.minimum.toString()} ${e.unit}`;return`${e?.shortLabel??""} : ${r} ${i} ${n}${t.minimum.toString()}`}case"invalid_format":{let e=t;if("starts_with"===e.format)return`    "${e.prefix}"`;if("ends_with"===e.format)return`    "${e.suffix}"`;if("includes"===e.format)return`   "${e.includes}"`;if("regex"===e.format)return`    ${e.pattern}`;let r=l[e.format],n=r?.label??e.format,i="f"===(r?.gender??"m")?"":"";return`${n}  ${i}`}case"not_multiple_of":return`  :     ${t.divisor}`;case"unrecognized_keys":return`${t.keys.length>1?"":""}  ${t.keys.length>1?"":""}: ${n.joinValues(t.keys,", ")}`;case"invalid_key":return`   `;case"invalid_union":return"  ";case"invalid_element":{let e=a(t.origin??"array");return`   ${e}`}default:return`  `}}};function z(){return{localeError:j()}}let R=()=>{let e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(t){return e[t]??null}let r={regex:"bemenet",email:"email c\xedm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idb\xe9lyeg",date:"ISO d\xe1tum",time:"ISO id",duration:"ISO idintervallum",ipv4:"IPv4 c\xedm",ipv6:"IPv6 c\xedm",cidrv4:"IPv4 tartom\xe1ny",cidrv6:"IPv6 tartom\xe1ny",base64:"base64-k\xf3dolt string",base64url:"base64url-k\xf3dolt string",json_string:"JSON string",e164:"E.164 sz\xe1m",jwt:"JWT",template_literal:"bemenet"},i={nan:"NaN",number:"sz\xe1m",array:"t\xf6mb"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k instanceof ${e.expected}, a kapott \xe9rt\xe9k ${a}`;return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${t}, a kapott \xe9rt\xe9k ${a}`}case"invalid_value":if(1===e.values.length)return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${n.stringifyPrimitive(e.values[0])}`;return`\xc9rv\xe9nytelen opci\xf3: valamelyik \xe9rt\xe9k v\xe1rt ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`T\xfal nagy: ${e.origin??"\xe9rt\xe9k"} m\xe9rete t\xfal nagy ${r}${e.maximum.toString()} ${n.unit??"elem"}`;return`T\xfal nagy: a bemeneti \xe9rt\xe9k ${e.origin??"\xe9rt\xe9k"} t\xfal nagy: ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${e.origin} m\xe9rete t\xfal kicsi ${r}${e.minimum.toString()} ${n.unit}`;return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${e.origin} t\xfal kicsi ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`\xc9rv\xe9nytelen string: "${t.prefix}" \xe9rt\xe9kkel kell kezddnie`;if("ends_with"===t.format)return`\xc9rv\xe9nytelen string: "${t.suffix}" \xe9rt\xe9kkel kell v\xe9gzdnie`;if("includes"===t.format)return`\xc9rv\xe9nytelen string: "${t.includes}" \xe9rt\xe9ket kell tartalmaznia`;if("regex"===t.format)return`\xc9rv\xe9nytelen string: ${t.pattern} mint\xe1nak kell megfelelnie`;return`\xc9rv\xe9nytelen ${r[t.format]??e.format}`}case"not_multiple_of":return`\xc9rv\xe9nytelen sz\xe1m: ${e.divisor} t\xf6bbsz\xf6r\xf6s\xe9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${e.keys.length>1?"s":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`\xc9rv\xe9nytelen kulcs ${e.origin}`;case"invalid_union":return"\xc9rv\xe9nytelen bemenet";case"invalid_element":return`\xc9rv\xe9nytelen \xe9rt\xe9k: ${e.origin}`;default:return`\xc9rv\xe9nytelen bemenet`}}};function M(){return{localeError:R()}}function L(e,t,r){return 1===Math.abs(e)?t:r}function Z(e){if(!e)return"";let t=["","","","","","",""],r=e[e.length-1];return e+(t.includes(r)?"":"")}let D=()=>{let e={string:{unit:{one:"",many:""},verb:""},file:{unit:{one:"",many:""},verb:""},array:{unit:{one:"",many:""},verb:""},set:{unit:{one:"",many:""},verb:""}};function t(t){return e[t]??null}let r={regex:"",email:". ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`    instanceof ${e.expected},   ${a}`;return`    ${t},   ${a}`}case"invalid_value":if(1===e.values.length)return`    ${n.stringifyPrimitive(e.values[1])}`;return`      ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n){let t=L(Number(e.maximum),n.unit.one,n.unit.many);return`    ,  ${Z(e.origin??"")}  ${r}${e.maximum.toString()} ${t}`}return`    ,  ${Z(e.origin??"")}  ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n){let t=L(Number(e.minimum),n.unit.one,n.unit.many);return`    ,  ${Z(e.origin)}  ${r}${e.minimum.toString()} ${t}`}return`    ,  ${Z(e.origin)}  ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`     "${t.prefix}"-`;if("ends_with"===t.format)return`     "${t.suffix}"-`;if("includes"===t.format)return`     "${t.includes}"`;if("regex"===t.format)return`     ${t.pattern} `;return` ${r[t.format]??e.format}`}case"not_multiple_of":return`      ${e.divisor}-`;case"unrecognized_keys":return` ${e.keys.length>1?"":""}. ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`  ${Z(e.origin)}-`;case"invalid_union":return" ";case"invalid_element":return`  ${Z(e.origin)}-`;default:return` `}}};function U(){return{localeError:D()}}let F=()=>{let e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(t){return e[t]??null}let r={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},i={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Input tidak valid: diharapkan instanceof ${e.expected}, diterima ${a}`;return`Input tidak valid: diharapkan ${t}, diterima ${a}`}case"invalid_value":if(1===e.values.length)return`Input tidak valid: diharapkan ${n.stringifyPrimitive(e.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Terlalu besar: diharapkan ${e.origin??"value"} memiliki ${r}${e.maximum.toString()} ${n.unit??"elemen"}`;return`Terlalu besar: diharapkan ${e.origin??"value"} menjadi ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Terlalu kecil: diharapkan ${e.origin} memiliki ${r}${e.minimum.toString()} ${n.unit}`;return`Terlalu kecil: diharapkan ${e.origin} menjadi ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`String tidak valid: harus dimulai dengan "${t.prefix}"`;if("ends_with"===t.format)return`String tidak valid: harus berakhir dengan "${t.suffix}"`;if("includes"===t.format)return`String tidak valid: harus menyertakan "${t.includes}"`;if("regex"===t.format)return`String tidak valid: harus sesuai pola ${t.pattern}`;return`${r[t.format]??e.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${e.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${e.keys.length>1?"s":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${e.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${e.origin}`}}};function B(){return{localeError:F()}}let V=()=>{let e={string:{unit:"stafi",verb:"a\xf0 hafa"},file:{unit:"b\xe6ti",verb:"a\xf0 hafa"},array:{unit:"hluti",verb:"a\xf0 hafa"},set:{unit:"hluti",verb:"a\xf0 hafa"}};function t(t){return e[t]??null}let r={regex:"gildi",email:"netfang",url:"vefsl\xf3\xf0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xedmi",date:"ISO dagsetning",time:"ISO t\xedmi",duration:"ISO t\xedmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xf6lugildi",jwt:"JWT",template_literal:"gildi"},i={nan:"NaN",number:"n\xfamer",array:"fylki"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Rangt gildi: \xde\xfa sl\xf3st inn ${a} \xfear sem \xe1 a\xf0 vera instanceof ${e.expected}`;return`Rangt gildi: \xde\xfa sl\xf3st inn ${a} \xfear sem \xe1 a\xf0 vera ${t}`}case"invalid_value":if(1===e.values.length)return`Rangt gildi: gert r\xe1\xf0 fyrir ${n.stringifyPrimitive(e.values[0])}`;return`\xd3gilt val: m\xe1 vera eitt af eftirfarandi ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${e.origin??"gildi"} hafi ${r}${e.maximum.toString()} ${n.unit??"hluti"}`;return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${e.origin??"gildi"} s\xe9 ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${e.origin} hafi ${r}${e.minimum.toString()} ${n.unit}`;return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${e.origin} s\xe9 ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 byrja \xe1 "${t.prefix}"`;if("ends_with"===t.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 enda \xe1 "${t.suffix}"`;if("includes"===t.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 innihalda "${t.includes}"`;if("regex"===t.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 fylgja mynstri ${t.pattern}`;return`Rangt ${r[t.format]??e.format}`}case"not_multiple_of":return`R\xf6ng tala: ver\xf0ur a\xf0 vera margfeldi af ${e.divisor}`;case"unrecognized_keys":return`\xd3\xfeekkt ${e.keys.length>1?"ir lyklar":"ur lykill"}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Rangur lykill \xed ${e.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi \xed ${e.origin}`}}};function J(){return{localeError:V()}}let W=()=>{let e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(t){return e[t]??null}let r={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},i={nan:"NaN",number:"numero",array:"vettore"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Input non valido: atteso instanceof ${e.expected}, ricevuto ${a}`;return`Input non valido: atteso ${t}, ricevuto ${a}`}case"invalid_value":if(1===e.values.length)return`Input non valido: atteso ${n.stringifyPrimitive(e.values[0])}`;return`Opzione non valida: atteso uno tra ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Troppo grande: ${e.origin??"valore"} deve avere ${r}${e.maximum.toString()} ${n.unit??"elementi"}`;return`Troppo grande: ${e.origin??"valore"} deve essere ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Troppo piccolo: ${e.origin} deve avere ${r}${e.minimum.toString()} ${n.unit}`;return`Troppo piccolo: ${e.origin} deve essere ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Stringa non valida: deve iniziare con "${t.prefix}"`;if("ends_with"===t.format)return`Stringa non valida: deve terminare con "${t.suffix}"`;if("includes"===t.format)return`Stringa non valida: deve includere "${t.includes}"`;if("regex"===t.format)return`Stringa non valida: deve corrispondere al pattern ${t.pattern}`;return`Invalid ${r[t.format]??e.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${e.divisor}`;case"unrecognized_keys":return`Chiav${e.keys.length>1?"i":"e"} non riconosciut${e.keys.length>1?"e":"a"}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${e.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${e.origin}`}}};function q(){return{localeError:W()}}let K=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`: instanceof ${e.expected}${a}`;return`: ${t}${a}`}case"invalid_value":if(1===e.values.length)return`: ${n.stringifyPrimitive(e.values[0])}`;return`: ${n.joinValues(e.values,"")}`;case"too_big":{let r=e.inclusive?"":"",n=t(e.origin);if(n)return`: ${e.origin??""}${e.maximum.toString()}${n.unit??""}${r}`;return`: ${e.origin??""}${e.maximum.toString()}${r}`}case"too_small":{let r=e.inclusive?"":"",n=t(e.origin);if(n)return`: ${e.origin}${e.minimum.toString()}${n.unit}${r}`;return`: ${e.origin}${e.minimum.toString()}${r}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`: "${t.prefix}"`;if("ends_with"===t.format)return`: "${t.suffix}"`;if("includes"===t.format)return`: "${t.includes}"`;if("regex"===t.format)return`: ${t.pattern}`;return`${r[t.format]??e.format}`}case"not_multiple_of":return`: ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"":""}: ${n.joinValues(e.keys,"")}`;case"invalid_key":return`${e.origin}`;case"invalid_union":return"";case"invalid_element":return`${e.origin}`;default:return``}}};function G(){return{localeError:K()}}let H=()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}let r={regex:"",email:"- ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"-",date:"",time:"",duration:"",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",string:"",boolean:"",function:"",array:""};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return` :  instanceof ${e.expected},  ${a}`;return` :  ${t},  ${a}`}case"invalid_value":if(1===e.values.length)return` :  ${n.stringifyPrimitive(e.values[0])}`;return` :  - ${n.joinValues(e.values,"|")}-`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return` :  ${e.origin??""} ${n.verb} ${r}${e.maximum.toString()} ${n.unit}`;return` :  ${e.origin??""}  ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return` :  ${e.origin} ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`;return` :  ${e.origin}  ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return` :   "${t.prefix}"-`;if("ends_with"===t.format)return` :   "${t.suffix}"-`;if("includes"===t.format)return` :   "${t.includes}"-`;if("regex"===t.format)return` :    ${t.pattern}`;return` ${r[t.format]??e.format}`}case"not_multiple_of":return` :   ${e.divisor}- `;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`  ${e.origin}-`;case"invalid_union":return" ";case"invalid_element":return`  ${e.origin}-`;default:return` `}}};function Y(){return{localeError:H()}}let X=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:" base64",base64url:" base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:" (Array)",null:" (null)"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`  instanceof ${e.expected}  ${a}`;return`  ${t}  ${a}`}case"invalid_value":if(1===e.values.length)return`  ${n.stringifyPrimitive(e.values[0])}`;return`  ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`  ${e.origin??""} ${r} ${e.maximum.toString()} ${n.unit??""}`;return`  ${e.origin??""} ${r} ${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`  ${e.origin} ${r} ${e.minimum.toString()} ${n.unit}`;return`  ${e.origin} ${r} ${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`  "${t.prefix}"`;if("ends_with"===t.format)return`  "${t.suffix}"`;if("includes"===t.format)return`  "${t.includes}"`;if("regex"===t.format)return`  ${t.pattern}`;return` ${r[t.format]??e.format}`}case"not_multiple_of":return`  ${e.divisor}`;case"unrecognized_keys":return` ${n.joinValues(e.keys,", ")}`;case"invalid_key":return` ${e.origin}`;case"invalid_union":default:return``;case"invalid_element":return` ${e.origin}`}}};function Q(){return{localeError:X()}}function ee(){return Q()}let et=()=>{let e={string:{unit:"",verb:"to have"},file:{unit:"",verb:"to have"},array:{unit:"",verb:"to have"},set:{unit:"",verb:"to have"}};function t(t){return e[t]??null}let r={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return` :   instanceof ${e.expected},   ${a}`;return` :   ${t},   ${a}`}case"invalid_value":if(1===e.values.length)return` :  ${n.stringifyPrimitive(e.values[0])}  `;return` : ${n.joinValues(e.values," ")}   `;case"too_big":{let r=e.inclusive?"":"",n=""===r?" ":" ",i=t(e.origin),a=i?.unit??"";if(i)return`${e.origin??""}  : ${e.maximum.toString()}${a} ${r}${n}`;return`${e.origin??""}  : ${e.maximum.toString()} ${r}${n}`}case"too_small":{let r=e.inclusive?"":"",n=""===r?" ":" ",i=t(e.origin),a=i?.unit??"";if(i)return`${e.origin??""}  : ${e.minimum.toString()}${a} ${r}${n}`;return`${e.origin??""}  : ${e.minimum.toString()} ${r}${n}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return` : "${t.prefix}"()  `;if("ends_with"===t.format)return` : "${t.suffix}"()  `;if("includes"===t.format)return` : "${t.includes}"()  `;if("regex"===t.format)return` :  ${t.pattern}   `;return` ${r[t.format]??e.format}`}case"not_multiple_of":return` : ${e.divisor}  `;case"unrecognized_keys":return`   : ${n.joinValues(e.keys,", ")}`;case"invalid_key":return` : ${e.origin}`;case"invalid_union":default:return` `;case"invalid_element":return` : ${e.origin}`}}};function er(){return{localeError:et()}}let en=e=>e.charAt(0).toUpperCase()+e.slice(1);function ei(e){let t=Math.abs(e),r=t%10,n=t%100;return n>=11&&n<=19||0===r?"many":1===r?"one":"few"}let ea=()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli"},verb:{smaller:{inclusive:"turi bti ne ilgesn kaip",notInclusive:"turi bti trumpesn kaip"},bigger:{inclusive:"turi bti ne trumpesn kaip",notInclusive:"turi bti ilgesn kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait"},verb:{smaller:{inclusive:"turi bti ne didesnis kaip",notInclusive:"turi bti maesnis kaip"},bigger:{inclusive:"turi bti ne maesnis kaip",notInclusive:"turi bti didesnis kaip"}}},array:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}},set:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}}};function t(t,r,n,i){let a=e[t]??null;return null===a?a:{unit:a.unit[r],verb:a.verb[i][n?"inclusive":"notInclusive"]}}let r={regex:"vestis",email:"el. pato adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 ukoduota eilut",base64url:"base64url ukoduota eilut",json_string:"JSON eilut",e164:"E.164 numeris",jwt:"JWT",template_literal:"vestis"},i={nan:"NaN",number:"skaiius",bigint:"sveikasis skaiius",string:"eilut",boolean:"login reikm",undefined:"neapibrta reikm",function:"funkcija",symbol:"simbolis",array:"masyvas",object:"objektas",null:"nulin reikm"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Gautas tipas ${a}, o tiktasi - instanceof ${e.expected}`;return`Gautas tipas ${a}, o tiktasi - ${t}`}case"invalid_value":if(1===e.values.length)return`Privalo bti ${n.stringifyPrimitive(e.values[0])}`;return`Privalo bti vienas i ${n.joinValues(e.values,"|")} pasirinkim`;case"too_big":{let r=i[e.origin]??e.origin,n=t(e.origin,ei(Number(e.maximum)),e.inclusive??!1,"smaller");if(n?.verb)return`${en(r??e.origin??"reikm")} ${n.verb} ${e.maximum.toString()} ${n.unit??"element"}`;let a=e.inclusive?"ne didesnis kaip":"maesnis kaip";return`${en(r??e.origin??"reikm")} turi bti ${a} ${e.maximum.toString()} ${n?.unit}`}case"too_small":{let r=i[e.origin]??e.origin,n=t(e.origin,ei(Number(e.minimum)),e.inclusive??!1,"bigger");if(n?.verb)return`${en(r??e.origin??"reikm")} ${n.verb} ${e.minimum.toString()} ${n.unit??"element"}`;let a=e.inclusive?"ne maesnis kaip":"didesnis kaip";return`${en(r??e.origin??"reikm")} turi bti ${a} ${e.minimum.toString()} ${n?.unit}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Eilut privalo prasidti "${t.prefix}"`;if("ends_with"===t.format)return`Eilut privalo pasibaigti "${t.suffix}"`;if("includes"===t.format)return`Eilut privalo traukti "${t.includes}"`;if("regex"===t.format)return`Eilut privalo atitikti ${t.pattern}`;return`Neteisingas ${r[t.format]??e.format}`}case"not_multiple_of":return`Skaiius privalo bti ${e.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpaint${e.keys.length>1?"i":"as"} rakt${e.keys.length>1?"ai":"as"}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga vestis";case"invalid_element":{let t=i[e.origin]??e.origin;return`${en(t??e.origin??"reikm")} turi klaiding vest`}}}};function es(){return{localeError:ea()}}let eo=()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}let r={regex:"",email:"  -",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return` :   instanceof ${e.expected},  ${a}`;return` :   ${t},  ${a}`}case"invalid_value":if(1===e.values.length)return`Invalid input: expected ${n.stringifyPrimitive(e.values[0])}`;return` :    ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return` :   ${e.origin??""}   ${r}${e.maximum.toString()} ${n.unit??""}`;return` :   ${e.origin??""}   ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return` :   ${e.origin}   ${r}${e.minimum.toString()} ${n.unit}`;return` :   ${e.origin}   ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return` :     "${t.prefix}"`;if("ends_with"===t.format)return` :     "${t.suffix}"`;if("includes"===t.format)return` :    "${t.includes}"`;if("regex"===t.format)return` :      ${t.pattern}`;return`Invalid ${r[t.format]??e.format}`}case"not_multiple_of":return` :      ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?" ":" "}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${e.origin}`;default:return` `}}};function el(){return{localeError:eo()}}let eu=()=>{let e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(t){return e[t]??null}let r={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},i={nan:"NaN",number:"nombor"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Input tidak sah: dijangka instanceof ${e.expected}, diterima ${a}`;return`Input tidak sah: dijangka ${t}, diterima ${a}`}case"invalid_value":if(1===e.values.length)return`Input tidak sah: dijangka ${n.stringifyPrimitive(e.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Terlalu besar: dijangka ${e.origin??"nilai"} ${n.verb} ${r}${e.maximum.toString()} ${n.unit??"elemen"}`;return`Terlalu besar: dijangka ${e.origin??"nilai"} adalah ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Terlalu kecil: dijangka ${e.origin} ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`;return`Terlalu kecil: dijangka ${e.origin} adalah ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`String tidak sah: mesti bermula dengan "${t.prefix}"`;if("ends_with"===t.format)return`String tidak sah: mesti berakhir dengan "${t.suffix}"`;if("includes"===t.format)return`String tidak sah: mesti mengandungi "${t.includes}"`;if("regex"===t.format)return`String tidak sah: mesti sepadan dengan corak ${t.pattern}`;return`${r[t.format]??e.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${e.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${e.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${e.origin}`}}};function ec(){return{localeError:eu()}}let ed=()=>{let e={string:{unit:"tekens",verb:"heeft"},file:{unit:"bytes",verb:"heeft"},array:{unit:"elementen",verb:"heeft"},set:{unit:"elementen",verb:"heeft"}};function t(t){return e[t]??null}let r={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},i={nan:"NaN",number:"getal"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Ongeldige invoer: verwacht instanceof ${e.expected}, ontving ${a}`;return`Ongeldige invoer: verwacht ${t}, ontving ${a}`}case"invalid_value":if(1===e.values.length)return`Ongeldige invoer: verwacht ${n.stringifyPrimitive(e.values[0])}`;return`Ongeldige optie: verwacht \xe9\xe9n van ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin),i="date"===e.origin?"laat":"string"===e.origin?"lang":"groot";if(n)return`Te ${i}: verwacht dat ${e.origin??"waarde"} ${r}${e.maximum.toString()} ${n.unit??"elementen"} ${n.verb}`;return`Te ${i}: verwacht dat ${e.origin??"waarde"} ${r}${e.maximum.toString()} is`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin),i="date"===e.origin?"vroeg":"string"===e.origin?"kort":"klein";if(n)return`Te ${i}: verwacht dat ${e.origin} ${r}${e.minimum.toString()} ${n.unit} ${n.verb}`;return`Te ${i}: verwacht dat ${e.origin} ${r}${e.minimum.toString()} is`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Ongeldige tekst: moet met "${t.prefix}" beginnen`;if("ends_with"===t.format)return`Ongeldige tekst: moet op "${t.suffix}" eindigen`;if("includes"===t.format)return`Ongeldige tekst: moet "${t.includes}" bevatten`;if("regex"===t.format)return`Ongeldige tekst: moet overeenkomen met patroon ${t.pattern}`;return`Ongeldig: ${r[t.format]??e.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${e.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${e.keys.length>1?"s":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${e.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${e.origin}`}}};function ep(){return{localeError:ed()}}let eh=()=>{let e={string:{unit:"tegn",verb:"\xe5 ha"},file:{unit:"bytes",verb:"\xe5 ha"},array:{unit:"elementer",verb:"\xe5 inneholde"},set:{unit:"elementer",verb:"\xe5 inneholde"}};function t(t){return e[t]??null}let r={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xe5de",ipv6:"IPv6-omr\xe5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},i={nan:"NaN",number:"tall",array:"liste"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Ugyldig input: forventet instanceof ${e.expected}, fikk ${a}`;return`Ugyldig input: forventet ${t}, fikk ${a}`}case"invalid_value":if(1===e.values.length)return`Ugyldig verdi: forventet ${n.stringifyPrimitive(e.values[0])}`;return`Ugyldig valg: forventet en av ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`For stor(t): forventet ${e.origin??"value"} til \xe5 ha ${r}${e.maximum.toString()} ${n.unit??"elementer"}`;return`For stor(t): forventet ${e.origin??"value"} til \xe5 ha ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`For lite(n): forventet ${e.origin} til \xe5 ha ${r}${e.minimum.toString()} ${n.unit}`;return`For lite(n): forventet ${e.origin} til \xe5 ha ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Ugyldig streng: m\xe5 starte med "${t.prefix}"`;if("ends_with"===t.format)return`Ugyldig streng: m\xe5 ende med "${t.suffix}"`;if("includes"===t.format)return`Ugyldig streng: m\xe5 inneholde "${t.includes}"`;if("regex"===t.format)return`Ugyldig streng: m\xe5 matche m\xf8nsteret ${t.pattern}`;return`Ugyldig ${r[t.format]??e.format}`}case"not_multiple_of":return`Ugyldig tall: m\xe5 v\xe6re et multiplum av ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ukjente n\xf8kler":"Ukjent n\xf8kkel"}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8kkel i ${e.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${e.origin}`}}};function ef(){return{localeError:eh()}}let em=()=>{let e={string:{unit:"harf",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"unsur",verb:"olmaldr"},set:{unit:"unsur",verb:"olmaldr"}};function t(t){return e[t]??null}let r={regex:"giren",email:"epostag\xe2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xe2m",date:"ISO tarihi",time:"ISO zaman",duration:"ISO m\xfcddeti",ipv4:"IPv4 ni\xe2n",ipv6:"IPv6 ni\xe2n",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ifreli metin",base64url:"base64url-ifreli metin",json_string:"JSON metin",e164:"E.164 says",jwt:"JWT",template_literal:"giren"},i={nan:"NaN",number:"numara",array:"saf",null:"gayb"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`F\xe2sit giren: umulan instanceof ${e.expected}, alnan ${a}`;return`F\xe2sit giren: umulan ${t}, alnan ${a}`}case"invalid_value":if(1===e.values.length)return`F\xe2sit giren: umulan ${n.stringifyPrimitive(e.values[0])}`;return`F\xe2sit tercih: m\xfbteberler ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Fazla b\xfcy\xfck: ${e.origin??"value"}, ${r}${e.maximum.toString()} ${n.unit??"elements"} sahip olmalyd.`;return`Fazla b\xfcy\xfck: ${e.origin??"value"}, ${r}${e.maximum.toString()} olmalyd.`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Fazla k\xfc\xe7\xfck: ${e.origin}, ${r}${e.minimum.toString()} ${n.unit} sahip olmalyd.`;return`Fazla k\xfc\xe7\xfck: ${e.origin}, ${r}${e.minimum.toString()} olmalyd.`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`F\xe2sit metin: "${t.prefix}" ile balamal.`;if("ends_with"===t.format)return`F\xe2sit metin: "${t.suffix}" ile bitmeli.`;if("includes"===t.format)return`F\xe2sit metin: "${t.includes}" ihtiv\xe2 etmeli.`;if("regex"===t.format)return`F\xe2sit metin: ${t.pattern} nakna uymal.`;return`F\xe2sit ${r[t.format]??e.format}`}case"not_multiple_of":return`F\xe2sit say: ${e.divisor} kat olmalyd.`;case"unrecognized_keys":return`Tannmayan anahtar ${e.keys.length>1?"s":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`${e.origin} i\xe7in tannmayan anahtar var.`;case"invalid_union":return"Giren tannamad.";case"invalid_element":return`${e.origin} i\xe7in tannmayan kymet var.`;default:return`Kymet tannamad.`}}};function eg(){return{localeError:em()}}let ey=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"  ",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ",date:"",time:"",duration:"",ipv4:" IPv4 ",ipv6:" IPv6 ",cidrv4:" IPv4 ",cidrv6:" IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:" E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return` :  instanceof ${e.expected} ,  ${a}  `;return` :  ${t} ,  ${a}  `}case"invalid_value":if(1===e.values.length)return` :  ${n.stringifyPrimitive(e.values[0])} `;return` :    ${n.joinValues(e.values,"|")}  `;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return` : ${e.origin??""}  ${r}${e.maximum.toString()} ${n.unit??""} `;return` : ${e.origin??""}  ${r}${e.maximum.toString()} `}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return` : ${e.origin}  ${r}${e.minimum.toString()} ${n.unit} `;return` : ${e.origin}  ${r}${e.minimum.toString()} `}case"invalid_format":{let t=e;if("starts_with"===t.format)return` :   "${t.prefix}"   `;if("ends_with"===t.format)return` :   "${t.suffix}"    `;if("includes"===t.format)return` :  "${t.includes}" `;if("regex"===t.format)return` :   ${t.pattern}   `;return`${r[t.format]??e.format}  `}case"not_multiple_of":return` :   ${e.divisor}  `;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`   ${e.origin} `;case"invalid_union":default:return` `;case"invalid_element":return`   ${e.origin} `}}};function ev(){return{localeError:ey()}}let e_=()=>{let e={string:{unit:"znak\xf3w",verb:"mie"},file:{unit:"bajt\xf3w",verb:"mie"},array:{unit:"element\xf3w",verb:"mie"},set:{unit:"element\xf3w",verb:"mie"}};function t(t){return e[t]??null}let r={regex:"wyraenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"cig znak\xf3w zakodowany w formacie base64",base64url:"cig znak\xf3w zakodowany w formacie base64url",json_string:"cig znak\xf3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejcie"},i={nan:"NaN",number:"liczba",array:"tablica"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Nieprawidowe dane wejciowe: oczekiwano instanceof ${e.expected}, otrzymano ${a}`;return`Nieprawidowe dane wejciowe: oczekiwano ${t}, otrzymano ${a}`}case"invalid_value":if(1===e.values.length)return`Nieprawidowe dane wejciowe: oczekiwano ${n.stringifyPrimitive(e.values[0])}`;return`Nieprawidowa opcja: oczekiwano jednej z wartoci ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Za dua warto: oczekiwano, e ${e.origin??"warto"} bdzie mie ${r}${e.maximum.toString()} ${n.unit??"element\xf3w"}`;return`Zbyt du(y/a/e): oczekiwano, e ${e.origin??"warto"} bdzie wynosi ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Za maa warto: oczekiwano, e ${e.origin??"warto"} bdzie mie ${r}${e.minimum.toString()} ${n.unit??"element\xf3w"}`;return`Zbyt ma(y/a/e): oczekiwano, e ${e.origin??"warto"} bdzie wynosi ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Nieprawidowy cig znak\xf3w: musi zaczyna si od "${t.prefix}"`;if("ends_with"===t.format)return`Nieprawidowy cig znak\xf3w: musi koczy si na "${t.suffix}"`;if("includes"===t.format)return`Nieprawidowy cig znak\xf3w: musi zawiera "${t.includes}"`;if("regex"===t.format)return`Nieprawidowy cig znak\xf3w: musi odpowiada wzorcowi ${t.pattern}`;return`Nieprawidow(y/a/e) ${r[t.format]??e.format}`}case"not_multiple_of":return`Nieprawidowa liczba: musi by wielokrotnoci ${e.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${e.keys.length>1?"s":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Nieprawidowy klucz w ${e.origin}`;case"invalid_union":return"Nieprawidowe dane wejciowe";case"invalid_element":return`Nieprawidowa warto w ${e.origin}`;default:return`Nieprawidowe dane wejciowe`}}};function eb(){return{localeError:e_()}}let ew=()=>{let e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(t){return e[t]??null}let r={regex:"padr\xe3o",email:"endere\xe7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xe7\xe3o ISO",ipv4:"endere\xe7o IPv4",ipv6:"endere\xe7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xfamero E.164",jwt:"JWT",template_literal:"entrada"},i={nan:"NaN",number:"n\xfamero",null:"nulo"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Tipo inv\xe1lido: esperado instanceof ${e.expected}, recebido ${a}`;return`Tipo inv\xe1lido: esperado ${t}, recebido ${a}`}case"invalid_value":if(1===e.values.length)return`Entrada inv\xe1lida: esperado ${n.stringifyPrimitive(e.values[0])}`;return`Op\xe7\xe3o inv\xe1lida: esperada uma das ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Muito grande: esperado que ${e.origin??"valor"} tivesse ${r}${e.maximum.toString()} ${n.unit??"elementos"}`;return`Muito grande: esperado que ${e.origin??"valor"} fosse ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Muito pequeno: esperado que ${e.origin} tivesse ${r}${e.minimum.toString()} ${n.unit}`;return`Muito pequeno: esperado que ${e.origin} fosse ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Texto inv\xe1lido: deve come\xe7ar com "${t.prefix}"`;if("ends_with"===t.format)return`Texto inv\xe1lido: deve terminar com "${t.suffix}"`;if("includes"===t.format)return`Texto inv\xe1lido: deve incluir "${t.includes}"`;if("regex"===t.format)return`Texto inv\xe1lido: deve corresponder ao padr\xe3o ${t.pattern}`;return`${r[t.format]??e.format} inv\xe1lido`}case"not_multiple_of":return`N\xfamero inv\xe1lido: deve ser m\xfaltiplo de ${e.divisor}`;case"unrecognized_keys":return`Chave${e.keys.length>1?"s":""} desconhecida${e.keys.length>1?"s":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Chave inv\xe1lida em ${e.origin}`;case"invalid_union":return"Entrada inv\xe1lida";case"invalid_element":return`Valor inv\xe1lido em ${e.origin}`;default:return`Campo inv\xe1lido`}}};function ek(){return{localeError:ew()}}function ex(e,t,r,n){let i=Math.abs(e),a=i%10,s=i%100;return s>=11&&s<=19?n:1===a?t:a>=2&&a<=4?r:n}let e$=()=>{let e={string:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:""};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return` :  instanceof ${e.expected},  ${a}`;return` :  ${t},  ${a}`}case"invalid_value":if(1===e.values.length)return` :  ${n.stringifyPrimitive(e.values[0])}`;return` :    ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n){let t=ex(Number(e.maximum),n.unit.one,n.unit.few,n.unit.many);return`  : ,  ${e.origin??""}   ${r}${e.maximum.toString()} ${t}`}return`  : ,  ${e.origin??""}  ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n){let t=ex(Number(e.minimum),n.unit.one,n.unit.few,n.unit.many);return`  : ,  ${e.origin}   ${r}${e.minimum.toString()} ${t}`}return`  : ,  ${e.origin}  ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return` :    "${t.prefix}"`;if("ends_with"===t.format)return` :    "${t.suffix}"`;if("includes"===t.format)return` :   "${t.includes}"`;if("regex"===t.format)return` :    ${t.pattern}`;return` ${r[t.format]??e.format}`}case"not_multiple_of":return` :    ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"":""} ${e.keys.length>1?"":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${e.origin}`;default:return`  `}}};function eS(){return{localeError:e$()}}let eI=()=>{let e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(t){return e[t]??null}let r={regex:"vnos",email:"e-potni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in as",date:"ISO datum",time:"ISO as",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 tevilka",jwt:"JWT",template_literal:"vnos"},i={nan:"NaN",number:"tevilo",array:"tabela"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Neveljaven vnos: priakovano instanceof ${e.expected}, prejeto ${a}`;return`Neveljaven vnos: priakovano ${t}, prejeto ${a}`}case"invalid_value":if(1===e.values.length)return`Neveljaven vnos: priakovano ${n.stringifyPrimitive(e.values[0])}`;return`Neveljavna monost: priakovano eno izmed ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Preveliko: priakovano, da bo ${e.origin??"vrednost"} imelo ${r}${e.maximum.toString()} ${n.unit??"elementov"}`;return`Preveliko: priakovano, da bo ${e.origin??"vrednost"} ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Premajhno: priakovano, da bo ${e.origin} imelo ${r}${e.minimum.toString()} ${n.unit}`;return`Premajhno: priakovano, da bo ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Neveljaven niz: mora se zaeti z "${t.prefix}"`;if("ends_with"===t.format)return`Neveljaven niz: mora se konati z "${t.suffix}"`;if("includes"===t.format)return`Neveljaven niz: mora vsebovati "${t.includes}"`;if("regex"===t.format)return`Neveljaven niz: mora ustrezati vzorcu ${t.pattern}`;return`Neveljaven ${r[t.format]??e.format}`}case"not_multiple_of":return`Neveljavno tevilo: mora biti vekratnik ${e.divisor}`;case"unrecognized_keys":return`Neprepoznan${e.keys.length>1?"i kljui":" klju"}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Neveljaven klju v ${e.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${e.origin}`}}};function eE(){return{localeError:eI()}}let eA=()=>{let e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xe5lla"},set:{unit:"objekt",verb:"att inneh\xe5lla"}};function t(t){return e[t]??null}let r={regex:"regulj\xe4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xe4ng",base64url:"base64url-kodad str\xe4ng",json_string:"JSON-str\xe4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},i={nan:"NaN",number:"antal",array:"lista"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Ogiltig inmatning: f\xf6rv\xe4ntat instanceof ${e.expected}, fick ${a}`;return`Ogiltig inmatning: f\xf6rv\xe4ntat ${t}, fick ${a}`}case"invalid_value":if(1===e.values.length)return`Ogiltig inmatning: f\xf6rv\xe4ntat ${n.stringifyPrimitive(e.values[0])}`;return`Ogiltigt val: f\xf6rv\xe4ntade en av ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`F\xf6r stor(t): f\xf6rv\xe4ntade ${e.origin??"v\xe4rdet"} att ha ${r}${e.maximum.toString()} ${n.unit??"element"}`;return`F\xf6r stor(t): f\xf6rv\xe4ntat ${e.origin??"v\xe4rdet"} att ha ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`F\xf6r lite(t): f\xf6rv\xe4ntade ${e.origin??"v\xe4rdet"} att ha ${r}${e.minimum.toString()} ${n.unit}`;return`F\xf6r lite(t): f\xf6rv\xe4ntade ${e.origin??"v\xe4rdet"} att ha ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Ogiltig str\xe4ng: m\xe5ste b\xf6rja med "${t.prefix}"`;if("ends_with"===t.format)return`Ogiltig str\xe4ng: m\xe5ste sluta med "${t.suffix}"`;if("includes"===t.format)return`Ogiltig str\xe4ng: m\xe5ste inneh\xe5lla "${t.includes}"`;if("regex"===t.format)return`Ogiltig str\xe4ng: m\xe5ste matcha m\xf6nstret "${t.pattern}"`;return`Ogiltig(t) ${r[t.format]??e.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xe5ste vara en multipel av ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ok\xe4nda nycklar":"Ok\xe4nd nyckel"}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${e.origin??"v\xe4rdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xe4rde i ${e.origin??"v\xe4rdet"}`}}};function eO(){return{localeError:eA()}}let eT=()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}let r={regex:"",email:" ",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO  ",date:"ISO ",time:"ISO ",duration:"ISO  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:"input"},i={nan:"NaN",number:"",array:"",null:""};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return` :  instanceof ${e.expected},  ${a}`;return` :  ${t},  ${a}`}case"invalid_value":if(1===e.values.length)return` :  ${n.stringifyPrimitive(e.values[0])}`;return` :  ${n.joinValues(e.values,"|")}  `;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return` :  ${e.origin??""} ${r}${e.maximum.toString()} ${n.unit??""}   `;return` :  ${e.origin??""} ${r}${e.maximum.toString()}   `}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return` :  ${e.origin} ${r}${e.minimum.toString()} ${n.unit}   `;return` :  ${e.origin} ${r}${e.minimum.toString()}   `}case"invalid_format":{let t=e;if("starts_with"===t.format)return` : "${t.prefix}"   `;if("ends_with"===t.format)return` : "${t.suffix}"   `;if("includes"===t.format)return` : "${t.includes}"   `;if("regex"===t.format)return` : ${t.pattern}   `;return` ${r[t.format]??e.format}`}case"not_multiple_of":return` : ${e.divisor}    `;case"unrecognized_keys":return`  ${e.keys.length>1?"":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`${e.origin}   `;case"invalid_union":return" ";case"invalid_element":return`${e.origin}   `;default:return` `}}};function eN(){return{localeError:eT()}}let eC=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:" ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IP  IPv4",cidrv6:" IP  IPv6",base64:" Base64",base64url:" Base64  URL",json_string:" JSON",e164:" (E.164)",jwt:" JWT",template_literal:""},i={nan:"NaN",number:"",array:" (Array)",null:" (null)"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`:  instanceof ${e.expected}  ${a}`;return`:  ${t}  ${a}`}case"invalid_value":if(1===e.values.length)return`:  ${n.stringifyPrimitive(e.values[0])}`;return`:  ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"":"",n=t(e.origin);if(n)return`: ${e.origin??""} ${r} ${e.maximum.toString()} ${n.unit??""}`;return`: ${e.origin??""} ${r} ${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?"":"",n=t(e.origin);if(n)return`: ${e.origin} ${r} ${e.minimum.toString()} ${n.unit}`;return`: ${e.origin} ${r} ${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`:  "${t.prefix}"`;if("ends_with"===t.format)return`:  "${t.suffix}"`;if("includes"===t.format)return`:  "${t.includes}" `;if("regex"===t.format)return`:  ${t.pattern}`;return`: ${r[t.format]??e.format}`}case"not_multiple_of":return`:  ${e.divisor} `;case"unrecognized_keys":return`: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return` ${e.origin}`;case"invalid_union":return": ";case"invalid_element":return` ${e.origin}`;default:return``}}};function eP(){return{localeError:eC()}}let ej=()=>{let e={string:{unit:"karakter",verb:"olmal"},file:{unit:"bayt",verb:"olmal"},array:{unit:"\xf6e",verb:"olmal"},set:{unit:"\xf6e",verb:"olmal"}};function t(t){return e[t]??null}let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xfcre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral",cidrv6:"IPv6 aral",base64:"base64 ile ifrelenmi metin",base64url:"base64url ile ifrelenmi metin",json_string:"JSON dizesi",e164:"E.164 says",jwt:"JWT",template_literal:"ablon dizesi"},i={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Ge\xe7ersiz deer: beklenen instanceof ${e.expected}, alnan ${a}`;return`Ge\xe7ersiz deer: beklenen ${t}, alnan ${a}`}case"invalid_value":if(1===e.values.length)return`Ge\xe7ersiz deer: beklenen ${n.stringifyPrimitive(e.values[0])}`;return`Ge\xe7ersiz se\xe7enek: aadakilerden biri olmal: ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`\xc7ok b\xfcy\xfck: beklenen ${e.origin??"deer"} ${r}${e.maximum.toString()} ${n.unit??"\xf6e"}`;return`\xc7ok b\xfcy\xfck: beklenen ${e.origin??"deer"} ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`\xc7ok k\xfc\xe7\xfck: beklenen ${e.origin} ${r}${e.minimum.toString()} ${n.unit}`;return`\xc7ok k\xfc\xe7\xfck: beklenen ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Ge\xe7ersiz metin: "${t.prefix}" ile balamal`;if("ends_with"===t.format)return`Ge\xe7ersiz metin: "${t.suffix}" ile bitmeli`;if("includes"===t.format)return`Ge\xe7ersiz metin: "${t.includes}" i\xe7ermeli`;if("regex"===t.format)return`Ge\xe7ersiz metin: ${t.pattern} desenine uymal`;return`Ge\xe7ersiz ${r[t.format]??e.format}`}case"not_multiple_of":return`Ge\xe7ersiz say: ${e.divisor} ile tam b\xf6l\xfcnebilmeli`;case"unrecognized_keys":return`Tannmayan anahtar${e.keys.length>1?"lar":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`${e.origin} i\xe7inde ge\xe7ersiz anahtar`;case"invalid_union":return"Ge\xe7ersiz deer";case"invalid_element":return`${e.origin} i\xe7inde ge\xe7ersiz deer`;default:return`Ge\xe7ersiz deer`}}};function ez(){return{localeError:ej()}}let eR=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:" ",email:"  ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"   base64",base64url:"   base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:" "},i={nan:"NaN",number:"",array:""};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`  :  instanceof ${e.expected},  ${a}`;return`  :  ${t},  ${a}`}case"invalid_value":if(1===e.values.length)return`  :  ${n.stringifyPrimitive(e.values[0])}`;return` :    ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return` : ,  ${e.origin??""} ${n.verb} ${r}${e.maximum.toString()} ${n.unit??""}`;return` : ,  ${e.origin??""}  ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return` : ,  ${e.origin} ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`;return` : ,  ${e.origin}  ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return` :    "${t.prefix}"`;if("ends_with"===t.format)return` :    "${t.suffix}"`;if("includes"===t.format)return` :   "${t.includes}"`;if("regex"===t.format)return` :    ${t.pattern}`;return` ${r[t.format]??e.format}`}case"not_multiple_of":return` :    ${e.divisor}`;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${e.origin}`;default:return`  `}}};function eM(){return{localeError:eR()}}function eL(){return eM()}let eZ=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:" ",email:"  ",url:"  ",emoji:"",uuid:"   ",uuidv4:"     4",uuidv6:"     6",nanoid:"  ",guid:"   ",cuid:"   ",cuid2:"    2",ulid:"   ",xid:"  ",ksuid:"    ",datetime:"    ",date:"   ",time:"   ",duration:"   ",ipv4:"   4 ",ipv6:"   6 ",cidrv4:"   4 ",cidrv6:"   6 ",base64:" 64   ",base64url:" 64      ",json_string:"    ",e164:" 164 ",jwt:"  ",template_literal:" "},i={nan:"NaN",number:"",array:"",null:""};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`  : instanceof ${e.expected}   ${a}  `;return`  : ${t}   ${a}  `}case"invalid_value":if(1===e.values.length)return`  : ${n.stringifyPrimitive(e.values[0])}  `;return` : ${n.joinValues(e.values,"|")}     `;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return` : ${e.origin??""}  ${r}${e.maximum.toString()} ${n.unit??""}   `;return` : ${e.origin??""}  ${r}${e.maximum.toString()}   `}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return` : ${e.origin}  ${r}${e.minimum.toString()} ${n.unit}   `;return` : ${e.origin}  ${r}${e.minimum.toString()}   `}case"invalid_format":{let t=e;if("starts_with"===t.format)return` : "${t.prefix}"    `;if("ends_with"===t.format)return` : "${t.suffix}"    `;if("includes"===t.format)return` : "${t.includes}"   `;if("regex"===t.format)return` :  ${t.pattern}    `;return` ${r[t.format]??e.format}`}case"not_multiple_of":return` : ${e.divisor}    `;case"unrecognized_keys":return`   ${e.keys.length>1?"":""}: ${n.joinValues(e.keys," ")}`;case"invalid_key":return`${e.origin}   `;case"invalid_union":return"  ";case"invalid_element":return`${e.origin}   `;default:return`  `}}};function eD(){return{localeError:eZ()}}let eU=()=>{let e={string:{unit:"belgi",verb:"bolishi kerak"},file:{unit:"bayt",verb:"bolishi kerak"},array:{unit:"element",verb:"bolishi kerak"},set:{unit:"element",verb:"bolishi kerak"}};function t(t){return e[t]??null}let r={regex:"kirish",email:"elektron pochta manzili",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO sana va vaqti",date:"ISO sana",time:"ISO vaqt",duration:"ISO davomiylik",ipv4:"IPv4 manzil",ipv6:"IPv6 manzil",mac:"MAC manzil",cidrv4:"IPv4 diapazon",cidrv6:"IPv6 diapazon",base64:"base64 kodlangan satr",base64url:"base64url kodlangan satr",json_string:"JSON satr",e164:"E.164 raqam",jwt:"JWT",template_literal:"kirish"},i={nan:"NaN",number:"raqam",array:"massiv"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`Notogri kirish: kutilgan instanceof ${e.expected}, qabul qilingan ${a}`;return`Notogri kirish: kutilgan ${t}, qabul qilingan ${a}`}case"invalid_value":if(1===e.values.length)return`Notogri kirish: kutilgan ${n.stringifyPrimitive(e.values[0])}`;return`Notogri variant: quyidagilardan biri kutilgan ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Juda katta: kutilgan ${e.origin??"qiymat"} ${r}${e.maximum.toString()} ${n.unit} ${n.verb}`;return`Juda katta: kutilgan ${e.origin??"qiymat"} ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Juda kichik: kutilgan ${e.origin} ${r}${e.minimum.toString()} ${n.unit} ${n.verb}`;return`Juda kichik: kutilgan ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Notogri satr: "${t.prefix}" bilan boshlanishi kerak`;if("ends_with"===t.format)return`Notogri satr: "${t.suffix}" bilan tugashi kerak`;if("includes"===t.format)return`Notogri satr: "${t.includes}" ni oz ichiga olishi kerak`;if("regex"===t.format)return`Notogri satr: ${t.pattern} shabloniga mos kelishi kerak`;return`Notogri ${r[t.format]??e.format}`}case"not_multiple_of":return`Notogri raqam: ${e.divisor} ning karralisi bolishi kerak`;case"unrecognized_keys":return`Nomalum kalit${e.keys.length>1?"lar":""}: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`${e.origin} dagi kalit notogri`;case"invalid_union":return"Notogri kirish";case"invalid_element":return`${e.origin} da notogri qiymat`;default:return`Notogri kirish`}}};function eF(){return{localeError:eU()}}let eB=()=>{let e={string:{unit:"k\xfd t",verb:"c\xf3"},file:{unit:"byte",verb:"c\xf3"},array:{unit:"phn t",verb:"c\xf3"},set:{unit:"phn t",verb:"c\xf3"}};function t(t){return e[t]??null}let r={regex:"u v\xe0o",email:"a ch email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xe0y gi ISO",date:"ng\xe0y ISO",time:"gi ISO",duration:"khong thi gian ISO",ipv4:"a ch IPv4",ipv6:"a ch IPv6",cidrv4:"di IPv4",cidrv6:"di IPv6",base64:"chui m\xe3 h\xf3a base64",base64url:"chui m\xe3 h\xf3a base64url",json_string:"chui JSON",e164:"s E.164",jwt:"JWT",template_literal:"u v\xe0o"},i={nan:"NaN",number:"s",array:"mng"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`u v\xe0o kh\xf4ng hp l: mong i instanceof ${e.expected}, nhn c ${a}`;return`u v\xe0o kh\xf4ng hp l: mong i ${t}, nhn c ${a}`}case"invalid_value":if(1===e.values.length)return`u v\xe0o kh\xf4ng hp l: mong i ${n.stringifyPrimitive(e.values[0])}`;return`T\xf9y chn kh\xf4ng hp l: mong i mt trong c\xe1c gi\xe1 tr ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`Qu\xe1 ln: mong i ${e.origin??"gi\xe1 tr"} ${n.verb} ${r}${e.maximum.toString()} ${n.unit??"phn t"}`;return`Qu\xe1 ln: mong i ${e.origin??"gi\xe1 tr"} ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`Qu\xe1 nh: mong i ${e.origin} ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`;return`Qu\xe1 nh: mong i ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`Chui kh\xf4ng hp l: phi bt u bng "${t.prefix}"`;if("ends_with"===t.format)return`Chui kh\xf4ng hp l: phi kt th\xfac bng "${t.suffix}"`;if("includes"===t.format)return`Chui kh\xf4ng hp l: phi bao gm "${t.includes}"`;if("regex"===t.format)return`Chui kh\xf4ng hp l: phi khp vi mu ${t.pattern}`;return`${r[t.format]??e.format} kh\xf4ng hp l`}case"not_multiple_of":return`S kh\xf4ng hp l: phi l\xe0 bi s ca ${e.divisor}`;case"unrecognized_keys":return`Kh\xf3a kh\xf4ng c nhn dng: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Kh\xf3a kh\xf4ng hp l trong ${e.origin}`;case"invalid_union":return"u v\xe0o kh\xf4ng hp l";case"invalid_element":return`Gi\xe1 tr kh\xf4ng hp l trong ${e.origin}`;default:return`u v\xe0o kh\xf4ng hp l`}}};function eV(){return{localeError:eB()}}let eJ=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},i={nan:"NaN",number:"",array:"",null:"(null)"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return` instanceof ${e.expected} ${a}`;return` ${t} ${a}`}case"invalid_value":if(1===e.values.length)return` ${n.stringifyPrimitive(e.values[0])}`;return` ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return` ${e.origin??""} ${r}${e.maximum.toString()} ${n.unit??""}`;return` ${e.origin??""} ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return` ${e.origin} ${r}${e.minimum.toString()} ${n.unit}`;return` ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return` "${t.prefix}" `;if("ends_with"===t.format)return` "${t.suffix}" `;if("includes"===t.format)return` "${t.includes}"`;if("regex"===t.format)return` ${t.pattern}`;return`${r[t.format]??e.format}`}case"not_multiple_of":return` ${e.divisor} `;case"unrecognized_keys":return`(key): ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`${e.origin} (key)`;case"invalid_union":return"";case"invalid_element":return`${e.origin} (value)`;default:return``}}};function eW(){return{localeError:eJ()}}let eq=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64 ",base64url:"base64url ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},i={nan:"NaN"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return` instanceof ${e.expected} ${a}`;return` ${t} ${a}`}case"invalid_value":if(1===e.values.length)return` ${n.stringifyPrimitive(e.values[0])}`;return` ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return` ${e.origin??""}  ${r}${e.maximum.toString()} ${n.unit??""}`;return` ${e.origin??""}  ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return` ${e.origin}  ${r}${e.minimum.toString()} ${n.unit}`;return` ${e.origin}  ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return` "${t.prefix}" `;if("ends_with"===t.format)return` "${t.suffix}" `;if("includes"===t.format)return` "${t.includes}"`;if("regex"===t.format)return` ${t.pattern}`;return` ${r[t.format]??e.format}`}case"not_multiple_of":return` ${e.divisor} `;case"unrecognized_keys":return`${e.keys.length>1?"":""}${n.joinValues(e.keys,"")}`;case"invalid_key":return`${e.origin} `;case"invalid_union":return"";case"invalid_element":return`${e.origin} `;default:return``}}};function eK(){return{localeError:eq()}}let eG=()=>{let e={string:{unit:"\xe0mi",verb:"n\xed"},file:{unit:"bytes",verb:"n\xed"},array:{unit:"nkan",verb:"n\xed"},set:{unit:"nkan",verb:"n\xed"}};function t(t){return e[t]??null}let r={regex:"r \xecb\xe1wl\xe9",email:"\xe0d\xedrs\xec \xecml\xec",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xe0k\xf3k\xf2 ISO",date:"j ISO",time:"\xe0k\xf3k\xf2 ISO",duration:"\xe0k\xf3k\xf2 t\xf3 p\xe9 ISO",ipv4:"\xe0d\xedrs\xec IPv4",ipv6:"\xe0d\xedrs\xec IPv6",cidrv4:"\xe0gb\xe8gb\xe8 IPv4",cidrv6:"\xe0gb\xe8gb\xe8 IPv6",base64:"r t\xed a k n\xed base64",base64url:"r base64url",json_string:"r JSON",e164:"nmb\xe0 E.164",jwt:"JWT",template_literal:"r \xecb\xe1wl\xe9"},i={nan:"NaN",number:"nmb\xe0",array:"akop"};return e=>{switch(e.code){case"invalid_type":{let t=i[e.expected]??e.expected,r=n.parsedType(e.input),a=i[r]??r;if(/^[A-Z]/.test(e.expected))return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi instanceof ${e.expected}, \xe0m a r\xed ${a}`;return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${t}, \xe0m a r\xed ${a}`}case"invalid_value":if(1===e.values.length)return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${n.stringifyPrimitive(e.values[0])}`;return`\xc0\xe0y\xe0n a\xece: yan kan l\xe1ra ${n.joinValues(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n)return`T\xf3 p j\xf9: a n\xed l\xe1ti j p\xe9 ${e.origin??"iye"} ${n.verb} ${r}${e.maximum} ${n.unit}`;return`T\xf3 p j\xf9: a n\xed l\xe1ti j ${r}${e.maximum}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n)return`K\xe9r\xe9 ju: a n\xed l\xe1ti j p\xe9 ${e.origin} ${n.verb} ${r}${e.minimum} ${n.unit}`;return`K\xe9r\xe9 ju: a n\xed l\xe1ti j ${r}${e.minimum}`}case"invalid_format":{let t=e;if("starts_with"===t.format)return`r a\xece: gbd br pl\xfa "${t.prefix}"`;if("ends_with"===t.format)return`r a\xece: gbd par\xed pl\xfa "${t.suffix}"`;if("includes"===t.format)return`r a\xece: gbd n\xed "${t.includes}"`;if("regex"===t.format)return`r a\xece: gbd b\xe1 \xe0pr mu ${t.pattern}`;return`A\xece: ${r[t.format]??e.format}`}case"not_multiple_of":return`Nmb\xe0 a\xece: gbd j \xe8y\xe0 p\xedp\xedn ti ${e.divisor}`;case"unrecognized_keys":return`Bt\xecn\xec \xe0\xecm: ${n.joinValues(e.keys,", ")}`;case"invalid_key":return`Bt\xecn\xec a\xece n\xedn\xfa ${e.origin}`;case"invalid_union":default:return"\xccb\xe1wl\xe9 a\xece";case"invalid_element":return`Iye a\xece n\xedn\xfa ${e.origin}`}}};function eH(){return{localeError:eG()}}},69530:(e,t,r)=>{"use strict";r.d(t,{Of:()=>s,ZO:()=>u,yL:()=>c});var n=r(67893),i=r(2730),a=r(55870),s={};function o(e){return Array.isArray(e)?[...e]:{...e}}function l(e,t){let r=o(e);for(let[e,n]of Object.entries(t)){let[t,...i]=e.split(".").reverse(),a=r;for(let e of i.reverse()){if(void 0===a[e])break;a[e]=o(a[e]),a=a[e]}void 0!==a[t]&&(a[t]={lc:1,type:"secret",id:[n]})}return r}function u(e){let t=Object.getPrototypeOf(e);return"function"==typeof e.lc_name&&("function"!=typeof t.lc_name||e.lc_name()!==t.lc_name())?e.lc_name():e.name}(0,n.V)(s,{Serializable:()=>c,get_lc_unique_name:()=>u});var c=class e{lc_serializable=!1;lc_kwargs;static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,u(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...t){void 0!==this.lc_serializable_keys?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([e])=>this.lc_serializable_keys?.includes(e))):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable||this.lc_kwargs instanceof e||"object"!=typeof this.lc_kwargs||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let t={},r={},n=Object.keys(this.lc_kwargs).reduce((e,t)=>(e[t]=t in this?this[t]:this.lc_kwargs[t],e),{});for(let e=Object.getPrototypeOf(this);e;e=Object.getPrototypeOf(e))Object.assign(t,Reflect.get(e,"lc_aliases",this)),Object.assign(r,Reflect.get(e,"lc_secrets",this)),Object.assign(n,Reflect.get(e,"lc_attributes",this));Object.keys(r).forEach(e=>{let t=this,r=n,[i,...a]=e.split(".").reverse();for(let e of a.reverse()){if(!(e in t)||void 0===t[e])return;e in r&&void 0!==r[e]||("object"==typeof t[e]&&null!=t[e]?r[e]={}:Array.isArray(t[e])&&(r[e]=[])),t=t[e],r=r[e]}i in t&&void 0!==t[i]&&(r[i]=r[i]||t[i])});let s={};for(let[e,t]of Object.entries(n))s[e]=(0,a.Sg)(t);let o=Object.keys(r).length?l(s,r):s,u=(0,i.d4)(o,i.$o,t);return{lc:1,type:"constructor",id:this.lc_id,kwargs:u}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}},69988:(e,t,r)=>{"use strict";let n,i,a;r.d(t,{Az:()=>y,Ec:()=>f,I6:()=>m,Jz:()=>v,QK:()=>b,_$:()=>h});var s=r(94718),o=r(49509);let l=()=>"undefined"!=typeof window&&void 0!==window.document,u=()=>"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name,c=()=>"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&navigator.userAgent.includes("jsdom"),d=()=>"undefined"!=typeof Deno,p=()=>void 0!==o&&void 0!==o.versions&&void 0!==o.versions.node&&!d(),h=()=>n||(n="undefined"!=typeof Bun?"bun":l()?"browser":p()?"node":u()?"webworker":c()?"jsdom":d()?"deno":"other");function f(){if(void 0===i){let e=h(),t=_();i={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:s.Ls,...t}}return i}function m(){let e=g(),t={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(let[n,i]of Object.entries(e))"string"!=typeof i||r.includes(n)||n.toLowerCase().includes("key")||n.toLowerCase().includes("secret")||n.toLowerCase().includes("token")||("LANGCHAIN_REVISION_ID"===n?t.revision_id=i:t[n]=i);return t}function g(){let e={};try{if(void 0!==o&&o.env)for(let[t,r]of Object.entries(o.env))(t.startsWith("LANGCHAIN_")||t.startsWith("LANGSMITH_"))&&null!=r&&((t.toLowerCase().includes("key")||t.toLowerCase().includes("secret")||t.toLowerCase().includes("token"))&&"string"==typeof r?e[t]=r.slice(0,2)+"*".repeat(r.length-4)+r.slice(-2):e[t]=r)}catch(e){}return e}function y(e){try{return void 0!==o?o.env?.[e]:void 0}catch(e){return}}function v(e){return y(`LANGSMITH_${e}`)||y(`LANGCHAIN_${e}`)}function _(){if(void 0!==a)return a;let e={};for(let t of["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"]){let r=y(t);void 0!==r&&(e[t]=r)}return a=e,e}function b(){return"true"===y("OTEL_ENABLED")||"true"===v("OTEL_ENABLED")}},70014:(e,t,r)=>{"use strict";var n;function i(e,t){let r=typeof e;if(r!==typeof t)return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;let r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(!i(e[n],t[n]))return!1;return!0}if("object"===r){if(!e||!t)return e===t;let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let n of r)if(!i(e[n],t[n]))return!1;return!0}return e===t}function a(e){return encodeURI(s(e))}function s(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}r.d(t,{Dr:()=>U,rA:()=>i,DS:()=>d,tf:()=>D});let o={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},l={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},u={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},c="undefined"!=typeof self&&self.location&&"null"!==self.location.origin?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function d(e,t=Object.create(null),r=c,n=""){if(e&&"object"==typeof e&&!Array.isArray(e)){let i=e.$id||e.id;if(i){let a=new URL(i,r.href);a.hash.length>1?t[a.href]=e:(a.hash="",""===n?r=a:d(e,t,r))}}else if(!0!==e&&!1!==e)return t;let i=r.href+(n?"#"+n:"");if(void 0!==t[i])throw Error(`Duplicate schema URI "${i}".`);if(t[i]=e,!0===e||!1===e)return t;if(void 0===e.__absolute_uri__&&Object.defineProperty(e,"__absolute_uri__",{enumerable:!1,value:i}),e.$ref&&void 0===e.__absolute_ref__){let t=new URL(e.$ref,r.href);t.hash=t.hash,Object.defineProperty(e,"__absolute_ref__",{enumerable:!1,value:t.href})}if(e.$recursiveRef&&void 0===e.__absolute_recursive_ref__){let t=new URL(e.$recursiveRef,r.href);t.hash=t.hash,Object.defineProperty(e,"__absolute_recursive_ref__",{enumerable:!1,value:t.href})}for(let i in e.$anchor&&(t[new URL("#"+e.$anchor,r.href).href]=e),e){if(u[i])continue;let s=`${n}/${a(i)}`,c=e[i];if(Array.isArray(c)){if(o[i]){let e=c.length;for(let n=0;n<e;n++)d(c[n],t,r,`${s}/${n}`)}}else if(l[i])for(let e in c)d(c[e],t,r,`${s}/${a(e)}`);else d(c,t,r,s)}return t}let p=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,h=[0,31,28,31,30,31,30,31,31,30,31,30,31],f=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,m=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,g=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,y=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,v=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,_=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,b=/^(?:\/(?:[^~/]|~0|~1)*)*$/,w=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,k=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,x=e=>{if('"'===e[0])return!1;let[t,r,...n]=e.split("@");return!(!t||!r||0!==n.length||t.length>64||r.length>253||"."===t[0]||t.endsWith(".")||t.includes(".."))&&!!/^[a-z0-9.-]+$/i.test(r)&&!!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t)&&r.split(".").every(e=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(e))},$=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,S=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,I=e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e));function E(e){return e.test.bind(e)}let A={date:T,time:N.bind(void 0,!1),"date-time":P,duration:I,uri:R,"uri-reference":E(g),"uri-template":E(y),url:E(v),email:x,hostname:E(m),ipv4:E($),ipv6:E(S),regex:L,uuid:E(_),"json-pointer":E(b),"json-pointer-uri-fragment":E(w),"relative-json-pointer":E(k)};function O(e){return e%4==0&&(e%100!=0||e%400==0)}function T(e){let t=e.match(p);if(!t)return!1;let r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&i<=(2==n&&O(r)?29:h[n])}function N(e,t){let r=t.match(f);if(!r)return!1;let n=+r[1],i=+r[2],a=+r[3],s=!!r[5];return(n<=23&&i<=59&&a<=59||23==n&&59==i&&60==a)&&(!e||s)}let C=/t|\s/i;function P(e){let t=e.split(C);return 2==t.length&&T(t[0])&&N(!0,t[1])}let j=/\/|:/,z=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function R(e){return j.test(e)&&z.test(e)}let M=/[^\\]\\Z/;function L(e){if(M.test(e))return!1;try{return RegExp(e,"u"),!0}catch(e){return!1}}function Z(e){let t,r=0,n=e.length,i=0;for(;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&(64512&(t=e.charCodeAt(i)))==56320&&i++;return r}function D(e,t,r="2019-09",n=d(t),s=!0,o=null,l="#",u="#",c=Object.create(null)){let p;if(!0===t)return{valid:!0,errors:[]};if(!1===t)return{valid:!1,errors:[{instanceLocation:l,keyword:"false",keywordLocation:l,error:"False boolean schema."}]};let h=typeof e;switch(h){case"boolean":case"number":case"string":p=h;break;case"object":p=null===e?"null":Array.isArray(e)?"array":"object";break;default:throw Error(`Instances of "${h}" type are not supported.`)}let{$ref:f,$recursiveRef:m,$recursiveAnchor:g,type:y,const:v,enum:_,required:b,not:w,anyOf:k,allOf:x,oneOf:$,if:S,then:I,else:E,format:O,properties:T,patternProperties:N,additionalProperties:C,unevaluatedProperties:P,minProperties:j,maxProperties:z,propertyNames:R,dependentRequired:M,dependentSchemas:L,dependencies:U,prefixItems:F,items:B,additionalItems:V,unevaluatedItems:J,contains:W,minContains:q,maxContains:K,minItems:G,maxItems:H,uniqueItems:Y,minimum:X,maximum:Q,exclusiveMinimum:ee,exclusiveMaximum:et,multipleOf:er,minLength:en,maxLength:ei,pattern:ea,__absolute_ref__:es,__absolute_recursive_ref__:eo}=t,el=[];if(!0===g&&null===o&&(o=t),"#"===m){let i=null===o?n[eo]:o,a=`${u}/$recursiveRef`,d=D(e,null===o?t:o,r,n,s,i,l,a,c);d.valid||el.push({instanceLocation:l,keyword:"$recursiveRef",keywordLocation:a,error:"A subschema had errors."},...d.errors)}if(void 0!==f){let t=n[es||f];if(void 0===t){let e=`Unresolved $ref "${f}".`;throw es&&es!==f&&(e+=`  Absolute URI "${es}".`),Error(e+=`
Known schemas:
- ${Object.keys(n).join("\n- ")}`)}let i=`${u}/$ref`,a=D(e,t,r,n,s,o,l,i,c);if(a.valid||el.push({instanceLocation:l,keyword:"$ref",keywordLocation:i,error:"A subschema had errors."},...a.errors),"4"===r||"7"===r)return{valid:0===el.length,errors:el}}if(Array.isArray(y)){let t=y.length,r=!1;for(let n=0;n<t;n++)if(p===y[n]||"integer"===y[n]&&"number"===p&&e%1==0&&e==e){r=!0;break}r||el.push({instanceLocation:l,keyword:"type",keywordLocation:`${u}/type`,error:`Instance type "${p}" is invalid. Expected "${y.join('", "')}".`})}else"integer"===y?("number"!==p||e%1||e!=e)&&el.push({instanceLocation:l,keyword:"type",keywordLocation:`${u}/type`,error:`Instance type "${p}" is invalid. Expected "${y}".`}):void 0!==y&&p!==y&&el.push({instanceLocation:l,keyword:"type",keywordLocation:`${u}/type`,error:`Instance type "${p}" is invalid. Expected "${y}".`});if(void 0!==v&&("object"===p||"array"===p?i(e,v)||el.push({instanceLocation:l,keyword:"const",keywordLocation:`${u}/const`,error:`Instance does not match ${JSON.stringify(v)}.`}):e!==v&&el.push({instanceLocation:l,keyword:"const",keywordLocation:`${u}/const`,error:`Instance does not match ${JSON.stringify(v)}.`})),void 0!==_&&("object"===p||"array"===p?_.some(t=>i(e,t))||el.push({instanceLocation:l,keyword:"enum",keywordLocation:`${u}/enum`,error:`Instance does not match any of ${JSON.stringify(_)}.`}):_.some(t=>e===t)||el.push({instanceLocation:l,keyword:"enum",keywordLocation:`${u}/enum`,error:`Instance does not match any of ${JSON.stringify(_)}.`})),void 0!==w){let t=`${u}/not`;D(e,w,r,n,s,o,l,t).valid&&el.push({instanceLocation:l,keyword:"not",keywordLocation:t,error:'Instance matched "not" schema.'})}let eu=[];if(void 0!==k){let t=`${u}/anyOf`,i=el.length,a=!1;for(let i=0;i<k.length;i++){let u=k[i],d=Object.create(c),p=D(e,u,r,n,s,!0===g?o:null,l,`${t}/${i}`,d);el.push(...p.errors),a=a||p.valid,p.valid&&eu.push(d)}a?el.length=i:el.splice(i,0,{instanceLocation:l,keyword:"anyOf",keywordLocation:t,error:"Instance does not match any subschemas."})}if(void 0!==x){let t=`${u}/allOf`,i=el.length,a=!0;for(let i=0;i<x.length;i++){let u=x[i],d=Object.create(c),p=D(e,u,r,n,s,!0===g?o:null,l,`${t}/${i}`,d);el.push(...p.errors),a=a&&p.valid,p.valid&&eu.push(d)}a?el.length=i:el.splice(i,0,{instanceLocation:l,keyword:"allOf",keywordLocation:t,error:"Instance does not match every subschema."})}if(void 0!==$){let t=`${u}/oneOf`,i=el.length,a=$.filter((i,a)=>{let u=Object.create(c),d=D(e,i,r,n,s,!0===g?o:null,l,`${t}/${a}`,u);return el.push(...d.errors),d.valid&&eu.push(u),d.valid}).length;1===a?el.length=i:el.splice(i,0,{instanceLocation:l,keyword:"oneOf",keywordLocation:t,error:`Instance does not match exactly one subschema (${a} matches).`})}if(("object"===p||"array"===p)&&Object.assign(c,...eu),void 0!==S){let t=`${u}/if`;if(D(e,S,r,n,s,o,l,t,c).valid){if(void 0!==I){let i=D(e,I,r,n,s,o,l,`${u}/then`,c);i.valid||el.push({instanceLocation:l,keyword:"if",keywordLocation:t,error:'Instance does not match "then" schema.'},...i.errors)}}else if(void 0!==E){let i=D(e,E,r,n,s,o,l,`${u}/else`,c);i.valid||el.push({instanceLocation:l,keyword:"if",keywordLocation:t,error:'Instance does not match "else" schema.'},...i.errors)}}if("object"===p){if(void 0!==b)for(let t of b)t in e||el.push({instanceLocation:l,keyword:"required",keywordLocation:`${u}/required`,error:`Instance does not have required property "${t}".`});let t=Object.keys(e);if(void 0!==j&&t.length<j&&el.push({instanceLocation:l,keyword:"minProperties",keywordLocation:`${u}/minProperties`,error:`Instance does not have at least ${j} properties.`}),void 0!==z&&t.length>z&&el.push({instanceLocation:l,keyword:"maxProperties",keywordLocation:`${u}/maxProperties`,error:`Instance does not have at least ${z} properties.`}),void 0!==R){let t=`${u}/propertyNames`;for(let i in e){let e=`${l}/${a(i)}`,u=D(i,R,r,n,s,o,e,t);u.valid||el.push({instanceLocation:l,keyword:"propertyNames",keywordLocation:t,error:`Property name "${i}" does not match schema.`},...u.errors)}}if(void 0!==M){let t=`${u}/dependantRequired`;for(let r in M)if(r in e)for(let n of M[r])n in e||el.push({instanceLocation:l,keyword:"dependentRequired",keywordLocation:t,error:`Instance has "${r}" but does not have "${n}".`})}if(void 0!==L)for(let t in L){let i=`${u}/dependentSchemas`;if(t in e){let u=D(e,L[t],r,n,s,o,l,`${i}/${a(t)}`,c);u.valid||el.push({instanceLocation:l,keyword:"dependentSchemas",keywordLocation:i,error:`Instance has "${t}" but does not match dependant schema.`},...u.errors)}}if(void 0!==U){let t=`${u}/dependencies`;for(let i in U)if(i in e){let u=U[i];if(Array.isArray(u))for(let r of u)r in e||el.push({instanceLocation:l,keyword:"dependencies",keywordLocation:t,error:`Instance has "${i}" but does not have "${r}".`});else{let c=D(e,u,r,n,s,o,l,`${t}/${a(i)}`);c.valid||el.push({instanceLocation:l,keyword:"dependencies",keywordLocation:t,error:`Instance has "${i}" but does not match dependant schema.`},...c.errors)}}}let i=Object.create(null),d=!1;if(void 0!==T){let t=`${u}/properties`;for(let u in T){if(!(u in e))continue;let p=`${l}/${a(u)}`,h=D(e[u],T[u],r,n,s,o,p,`${t}/${a(u)}`);if(h.valid)c[u]=i[u]=!0;else if(d=s,el.push({instanceLocation:l,keyword:"properties",keywordLocation:t,error:`Property "${u}" does not match schema.`},...h.errors),d)break}}if(!d&&void 0!==N){let t=`${u}/patternProperties`;for(let u in N){let p=RegExp(u,"u"),h=N[u];for(let f in e){if(!p.test(f))continue;let m=`${l}/${a(f)}`,g=D(e[f],h,r,n,s,o,m,`${t}/${a(u)}`);g.valid?c[f]=i[f]=!0:(d=s,el.push({instanceLocation:l,keyword:"patternProperties",keywordLocation:t,error:`Property "${f}" matches pattern "${u}" but does not match associated schema.`},...g.errors))}}}if(d||void 0===C){if(!d&&void 0!==P){let t=`${u}/unevaluatedProperties`;for(let i in e)if(!c[i]){let u=`${l}/${a(i)}`,d=D(e[i],P,r,n,s,o,u,t);d.valid?c[i]=!0:el.push({instanceLocation:l,keyword:"unevaluatedProperties",keywordLocation:t,error:`Property "${i}" does not match unevaluated properties schema.`},...d.errors)}}}else{let t=`${u}/additionalProperties`;for(let u in e){if(i[u])continue;let p=`${l}/${a(u)}`,h=D(e[u],C,r,n,s,o,p,t);h.valid?c[u]=!0:(d=s,el.push({instanceLocation:l,keyword:"additionalProperties",keywordLocation:t,error:`Property "${u}" does not match additional properties schema.`},...h.errors))}}}else if("array"===p){void 0!==H&&e.length>H&&el.push({instanceLocation:l,keyword:"maxItems",keywordLocation:`${u}/maxItems`,error:`Array has too many items (${e.length} > ${H}).`}),void 0!==G&&e.length<G&&el.push({instanceLocation:l,keyword:"minItems",keywordLocation:`${u}/minItems`,error:`Array has too few items (${e.length} < ${G}).`});let t=e.length,a=0,d=!1;if(void 0!==F){let i=`${u}/prefixItems`,p=Math.min(F.length,t);for(;a<p;a++){let t=D(e[a],F[a],r,n,s,o,`${l}/${a}`,`${i}/${a}`);if(c[a]=!0,!t.valid&&(d=s,el.push({instanceLocation:l,keyword:"prefixItems",keywordLocation:i,error:"Items did not match schema."},...t.errors),d))break}}if(void 0!==B){let i=`${u}/items`;if(Array.isArray(B)){let u=Math.min(B.length,t);for(;a<u;a++){let t=D(e[a],B[a],r,n,s,o,`${l}/${a}`,`${i}/${a}`);if(c[a]=!0,!t.valid&&(d=s,el.push({instanceLocation:l,keyword:"items",keywordLocation:i,error:"Items did not match schema."},...t.errors),d))break}}else for(;a<t;a++){let t=D(e[a],B,r,n,s,o,`${l}/${a}`,i);if(c[a]=!0,!t.valid&&(d=s,el.push({instanceLocation:l,keyword:"items",keywordLocation:i,error:"Items did not match schema."},...t.errors),d))break}if(!d&&void 0!==V){let i=`${u}/additionalItems`;for(;a<t;a++){let t=D(e[a],V,r,n,s,o,`${l}/${a}`,i);c[a]=!0,t.valid||(d=s,el.push({instanceLocation:l,keyword:"additionalItems",keywordLocation:i,error:"Items did not match additional items schema."},...t.errors))}}}if(void 0!==W)if(0===t&&void 0===q)el.push({instanceLocation:l,keyword:"contains",keywordLocation:`${u}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(void 0!==q&&t<q)el.push({instanceLocation:l,keyword:"minContains",keywordLocation:`${u}/minContains`,error:`Array has less items (${t}) than minContains (${q}).`});else{let i=`${u}/contains`,a=el.length,d=0;for(let a=0;a<t;a++){let t=D(e[a],W,r,n,s,o,`${l}/${a}`,i);t.valid?(c[a]=!0,d++):el.push(...t.errors)}d>=(q||0)&&(el.length=a),void 0===q&&void 0===K&&0===d?el.splice(a,0,{instanceLocation:l,keyword:"contains",keywordLocation:i,error:"Array does not contain item matching schema."}):void 0!==q&&d<q?el.push({instanceLocation:l,keyword:"minContains",keywordLocation:`${u}/minContains`,error:`Array must contain at least ${q} items matching schema. Only ${d} items were found.`}):void 0!==K&&d>K&&el.push({instanceLocation:l,keyword:"maxContains",keywordLocation:`${u}/maxContains`,error:`Array may contain at most ${K} items matching schema. ${d} items were found.`})}if(!d&&void 0!==J){let i=`${u}/unevaluatedItems`;for(;a<t;a++){if(c[a])continue;let t=D(e[a],J,r,n,s,o,`${l}/${a}`,i);c[a]=!0,t.valid||el.push({instanceLocation:l,keyword:"unevaluatedItems",keywordLocation:i,error:"Items did not match unevaluated items schema."},...t.errors)}}if(Y)for(let r=0;r<t;r++){let n=e[r],a="object"==typeof n&&null!==n;for(let s=0;s<t;s++){if(r===s)continue;let t=e[s],o="object"==typeof t&&null!==t;(n===t||a&&o&&i(n,t))&&(el.push({instanceLocation:l,keyword:"uniqueItems",keywordLocation:`${u}/uniqueItems`,error:`Duplicate items at indexes ${r} and ${s}.`}),r=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER)}}}else if("number"===p){if("4"===r?(void 0!==X&&(!0===ee&&e<=X||e<X)&&el.push({instanceLocation:l,keyword:"minimum",keywordLocation:`${u}/minimum`,error:`${e} is less than ${ee?"or equal to ":""} ${X}.`}),void 0!==Q&&(!0===et&&e>=Q||e>Q)&&el.push({instanceLocation:l,keyword:"maximum",keywordLocation:`${u}/maximum`,error:`${e} is greater than ${et?"or equal to ":""} ${Q}.`})):(void 0!==X&&e<X&&el.push({instanceLocation:l,keyword:"minimum",keywordLocation:`${u}/minimum`,error:`${e} is less than ${X}.`}),void 0!==Q&&e>Q&&el.push({instanceLocation:l,keyword:"maximum",keywordLocation:`${u}/maximum`,error:`${e} is greater than ${Q}.`}),void 0!==ee&&e<=ee&&el.push({instanceLocation:l,keyword:"exclusiveMinimum",keywordLocation:`${u}/exclusiveMinimum`,error:`${e} is less than ${ee}.`}),void 0!==et&&e>=et&&el.push({instanceLocation:l,keyword:"exclusiveMaximum",keywordLocation:`${u}/exclusiveMaximum`,error:`${e} is greater than or equal to ${et}.`})),void 0!==er){let t=e%er;Math.abs(0-t)>=11920929e-14&&Math.abs(er-t)>=11920929e-14&&el.push({instanceLocation:l,keyword:"multipleOf",keywordLocation:`${u}/multipleOf`,error:`${e} is not a multiple of ${er}.`})}}else if("string"===p){let t=void 0===en&&void 0===ei?0:Z(e);void 0!==en&&t<en&&el.push({instanceLocation:l,keyword:"minLength",keywordLocation:`${u}/minLength`,error:`String is too short (${t} < ${en}).`}),void 0!==ei&&t>ei&&el.push({instanceLocation:l,keyword:"maxLength",keywordLocation:`${u}/maxLength`,error:`String is too long (${t} > ${ei}).`}),void 0===ea||RegExp(ea,"u").test(e)||el.push({instanceLocation:l,keyword:"pattern",keywordLocation:`${u}/pattern`,error:"String does not match pattern."}),void 0!==O&&A[O]&&!A[O](e)&&el.push({instanceLocation:l,keyword:"format",keywordLocation:`${u}/format`,error:`String does not match format "${O}".`})}return{valid:0===el.length,errors:el}}!function(e){e[e.Flag=1]="Flag",e[e.Basic=2]="Basic",e[e.Detailed=4]="Detailed"}(n||(n={}));class U{schema;draft;shortCircuit;lookup;constructor(e,t="2019-09",r=!0){this.schema=e,this.draft=t,this.shortCircuit=r,this.lookup=d(e)}validate(e){return D(e,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(e,t){t&&(e={...e,$id:t}),d(e,this.lookup)}}},71151:(e,t,r)=>{"use strict";r.d(t,{XU:()=>a,bU:()=>o,cM:()=>i,kY:()=>s});var n=r(79271),i=class e extends n.XQ{static lc_name(){return"ChatMessage"}type="generic";role;static _chatMessageClass(){return e}constructor(e,t){("string"==typeof e||Array.isArray(e))&&(e={content:e,role:t}),super(e),this.role=e.role}static isInstance(e){return super.isInstance(e)&&"generic"===e.type}get _printableFields(){return{...super._printableFields,role:this.role}}},a=class extends n.gj{static lc_name(){return"ChatMessageChunk"}type="generic";role;constructor(e,t){("string"==typeof e||Array.isArray(e))&&(e={content:e,role:t}),super(e),this.role=e.role}concat(e){return new this.constructor({content:(0,n._I)(this.content,e.content),additional_kwargs:(0,n.ns)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n.ns)(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&"generic"===e.type}get _printableFields(){return{...super._printableFields,role:this.role}}};function s(e){return"generic"===e._getType()}function o(e){return"generic"===e._getType()}},71193:(e,t,r)=>{"use strict";r.d(t,{B:()=>l,a:()=>s});var n=r(50696);function i(e){if("char_location"===e.type&&(0,n.vQ)(e.document_title)&&(0,n.jM)(e.start_char_index)&&(0,n.jM)(e.end_char_index)&&(0,n.vQ)(e.cited_text)){let{document_title:t,start_char_index:r,end_char_index:n,cited_text:i,...a}=e;return{...a,type:"citation",source:"char",title:t??void 0,startIndex:r,endIndex:n,citedText:i}}if("page_location"===e.type&&(0,n.vQ)(e.document_title)&&(0,n.jM)(e.start_page_number)&&(0,n.jM)(e.end_page_number)&&(0,n.vQ)(e.cited_text)){let{document_title:t,start_page_number:r,end_page_number:n,cited_text:i,...a}=e;return{...a,type:"citation",source:"page",title:t??void 0,startIndex:r,endIndex:n,citedText:i}}if("content_block_location"===e.type&&(0,n.vQ)(e.document_title)&&(0,n.jM)(e.start_block_index)&&(0,n.jM)(e.end_block_index)&&(0,n.vQ)(e.cited_text)){let{document_title:t,start_block_index:r,end_block_index:n,cited_text:i,...a}=e;return{...a,type:"citation",source:"block",title:t??void 0,startIndex:r,endIndex:n,citedText:i}}if("web_search_result_location"===e.type&&(0,n.vQ)(e.url)&&(0,n.vQ)(e.title)&&(0,n.vQ)(e.encrypted_index)&&(0,n.vQ)(e.cited_text)){let{url:t,title:r,encrypted_index:n,cited_text:i,...a}=e;return{...a,type:"citation",source:"url",url:t,title:r,startIndex:Number(n),endIndex:Number(n),citedText:i}}if("search_result_location"===e.type&&(0,n.vQ)(e.source)&&(0,n.vQ)(e.title)&&(0,n.jM)(e.start_block_index)&&(0,n.jM)(e.end_block_index)&&(0,n.vQ)(e.cited_text)){let{source:t,title:r,start_block_index:n,end_block_index:i,cited_text:a,...s}=e;return{...s,type:"citation",source:"search",url:t,title:r??void 0,startIndex:n,endIndex:i,citedText:a}}}function a(e){if((0,n.MP)(e,"document")&&(0,n.nD)(e.source)&&"type"in e.source){if("base64"===e.source.type&&(0,n.vQ)(e.source.media_type)&&(0,n.vQ)(e.source.data))return{type:"file",mimeType:e.source.media_type,data:e.source.data};else if("url"===e.source.type&&(0,n.vQ)(e.source.url))return{type:"file",url:e.source.url};else if("file"===e.source.type&&(0,n.vQ)(e.source.file_id))return{type:"file",fileId:e.source.file_id};else if("text"===e.source.type&&(0,n.vQ)(e.source.data))return{type:"file",mimeType:String(e.source.media_type??"text/plain"),data:e.source.data}}else if((0,n.MP)(e,"image")&&(0,n.nD)(e.source)&&"type"in e.source){if("base64"===e.source.type&&(0,n.vQ)(e.source.media_type)&&(0,n.vQ)(e.source.data))return{type:"image",mimeType:e.source.media_type,data:e.source.data};else if("url"===e.source.type&&(0,n.vQ)(e.source.url))return{type:"image",url:e.source.url};else if("file"===e.source.type&&(0,n.vQ)(e.source.file_id))return{type:"image",fileId:e.source.file_id}}}function s(e){return Array.from(function*(){for(let t of e){let e=a(t);e?yield e:yield t}}())}function o(e){return Array.from(function*(){for(let t of"string"==typeof e.content?[{type:"text",text:e.content}]:e.content){if((0,n.MP)(t,"text")&&(0,n.vQ)(t.text)){let{text:e,citations:r,...a}=t;if((0,n.V3)(r)&&r.length){let t=r.reduce((e,t)=>{let r=i(t);return r?[...e,r]:e},[]);yield{...a,type:"text",text:e,annotations:t};continue}yield{...a,type:"text",text:e};continue}if((0,n.MP)(t,"thinking")&&(0,n.vQ)(t.thinking)){let{thinking:e,signature:r,...n}=t;yield{...n,type:"reasoning",reasoning:e,signature:r};continue}if((0,n.MP)(t,"redacted_thinking")){yield{type:"non_standard",value:t};continue}else if((0,n.MP)(t,"tool_use")&&(0,n.vQ)(t.name)&&(0,n.vQ)(t.id)){yield{type:"tool_call",id:t.id,name:t.name,args:t.input};continue}else if((0,n.MP)(t,"input_json_delta")){if(u(e)&&e.tool_call_chunks?.length){let t=e.tool_call_chunks[0];yield{type:"tool_call_chunk",id:t.id,name:t.name,args:t.args,index:t.index};continue}}else if((0,n.MP)(t,"server_tool_use")&&(0,n.vQ)(t.name)&&(0,n.vQ)(t.id)){let{name:e,id:r}=t;if("web_search"===e){let e=(0,n.iD)(()=>{if("string"==typeof t.input)return t.input;if((0,n.nD)(t.input)&&(0,n.vQ)(t.input.query))return t.input.query;if((0,n.vQ)(t.partial_json)){let e=(0,n.NS)(t.partial_json);if(e?.query)return e.query}return""});yield{id:r,type:"server_tool_call",name:"web_search",args:{query:e}};continue}if("code_execution"===t.name){let e=(0,n.iD)(()=>{if("string"==typeof t.input)return t.input;if((0,n.nD)(t.input)&&(0,n.vQ)(t.input.code))return t.input.code;if((0,n.vQ)(t.partial_json)){let e=(0,n.NS)(t.partial_json);if(e?.code)return e.code}return""});yield{id:r,type:"server_tool_call",name:"code_execution",args:{code:e}};continue}}else if((0,n.MP)(t,"web_search_tool_result")&&(0,n.vQ)(t.tool_use_id)&&(0,n.V3)(t.content)){let{content:e,tool_use_id:r}=t,i=e.reduce((e,t)=>(0,n.MP)(t,"web_search_result")?[...e,t.url]:e,[]);yield{type:"server_tool_call_result",name:"web_search",toolCallId:r,status:"success",output:{urls:i}};continue}else if((0,n.MP)(t,"code_execution_tool_result")&&(0,n.vQ)(t.tool_use_id)&&(0,n.nD)(t.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:t.tool_use_id,status:"success",output:t.content};continue}else if((0,n.MP)(t,"mcp_tool_use")){yield{id:t.id,type:"server_tool_call",name:"mcp_tool_use",args:t.input};continue}else if((0,n.MP)(t,"mcp_tool_result")&&(0,n.vQ)(t.tool_use_id)&&(0,n.nD)(t.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:t.tool_use_id,status:"success",output:t.content};continue}else if((0,n.MP)(t,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:t.input};continue}else if((0,n.MP)(t,"search_result")){yield{id:t.id,type:"non_standard",value:t};continue}else if((0,n.MP)(t,"tool_result")){yield{id:t.id,type:"non_standard",value:t};continue}else{let e=a(t);if(e){yield e;continue}}yield{type:"non_standard",value:t}}}())}let l={translateContent:o,translateContentChunk:o};function u(e){return"function"==typeof e?._getType&&"function"==typeof e.concat&&"ai"===e._getType()}},71331:(e,t,r)=>{"use strict";let n=r(90008),i=r(98566);e.exports=(e,t,r)=>{let a=[],s=null,o=null,l=e.sort((e,t)=>i(e,t,r));for(let e of l)n(e,t,r)?(o=e,s||(s=e)):(o&&a.push([s,o]),o=null,s=null);s&&a.push([s,null]);let u=[];for(let[e,t]of a)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");let c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},72716:(e,t,r)=>{"use strict";r.d(t,{NK:()=>c,eY:()=>o,xL:()=>u,zr:()=>d});var n=r(67893),i=r(69530),a=r(4397),s=r(31926),o={};(0,n.V)(o,{BaseCallbackHandler:()=>c,callbackHandlerPrefersStreaming:()=>u,isBaseCallbackHandler:()=>d});var l=class{};function u(e){return"lc_prefer_streaming"in e&&e.lc_prefer_streaming}var c=class extends l{lc_serializable=!1;get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,(0,i.ZO)(this.constructor)]}lc_kwargs;ignoreLLM=!1;ignoreChain=!1;ignoreAgent=!1;ignoreRetriever=!1;ignoreCustomEvent=!1;raiseError=!1;awaitHandlers="false"===(0,a.Az)("LANGCHAIN_CALLBACKS_BACKGROUND");constructor(e){super(),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return i.yL.prototype.toJSON.call(this)}toJSONNotImplemented(){return i.yL.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends c{name=s.A();constructor(){super(),Object.assign(this,e)}}return new t}};let d=e=>{let t=e;return void 0!==t&&"function"==typeof t.copy&&"string"==typeof t.name&&"boolean"==typeof t.awaitHandlers}},73015:(e,t,r)=>{"use strict";let n=r(55463);e.exports=(e,t)=>e.sort((e,r)=>n(e,r,t))},73897:(e,t,r)=>{"use strict";r.d(t,{Ds:()=>s,Nx:()=>a.N,zp:()=>a.z});var n=r(67893),i=r(44768),a=r(51628),s={};(0,n.V)(s,{AsyncLocalStorageProviderSingleton:()=>a.N,MockAsyncLocalStorage:()=>a.z,_CONTEXT_VARIABLES_KEY:()=>i.hr})},74281:(e,t,r)=>{"use strict";r.d(t,{DF:()=>p,Fq:()=>o,LH:()=>s,Lb:()=>c,YX:()=>l,bT:()=>a,mQ:()=>i,nF:()=>u});let n=Object.prototype.hasOwnProperty;function i(e,t){return n.call(e,t)}function a(e){if(Array.isArray(e)){let t=Array(e.length);for(let e=0;e<t.length;e++)t[e]=""+e;return t}if(Object.keys)return Object.keys(e);let t=[];for(let r in e)i(e,r)&&t.push(r);return t}function s(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function o(e){let t,r=0,n=e.length;for(;r<n;){if((t=e.charCodeAt(r))>=48&&t<=57){r++;continue}return!1}return!0}function l(e){return -1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function u(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c(e){if(void 0===e)return!0;if(e){if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(c(e[t]))return!0}else if("object"==typeof e){let r=a(e),n=r.length;for(var t=0;t<n;t++)if(c(e[r[t]]))return!0}}return!1}function d(e,t){let r=[e];for(let e in t){let n="object"==typeof t[e]?JSON.stringify(t[e],null,2):t[e];void 0!==n&&r.push(`${e}: ${n}`)}return r.join("\n")}var p=class extends Error{constructor(e,t,r,n,i){super(d(e,{name:t,index:r,operation:n,tree:i})),this.name=t,this.index=r,this.operation=n,this.tree=i,Object.setPrototypeOf(this,new.target.prototype),this.message=d(e,{name:t,index:r,operation:n,tree:i})}}},74556:(e,t,r)=>{"use strict";let n;r.d(t,{qt:()=>ek,tm:()=>ti,Sj:()=>f,Ml:()=>q,n:()=>Y,Lr:()=>U,WF:()=>F,eN:()=>ex,hw:()=>eb,aP:()=>B,Xi:()=>e_,jv:()=>er,k1:()=>eg,Vb:()=>eh,kY:()=>a,CZ:()=>eu,Jv:()=>ei,Ih:()=>ec,DN:()=>ed,Ut:()=>eo,Tq:()=>ew,WM:()=>ef,iS:()=>G,PQ:()=>W,l1:()=>ev,rS:()=>D,bv:()=>Q,Ii:()=>ey,_c:()=>e$,$i:()=>em,EV:()=>eS,b8:()=>es,lK:()=>f,Kz:()=>el,ND:()=>L,K5:()=>V,BG:()=>eg,y0:()=>ea,aR:()=>f,_Z:()=>J,fZ:()=>ee,_:()=>K,a0:()=>H,bz:()=>eZ,YO:()=>eB,o:()=>eP,zM:()=>ej,au:()=>tn,Ie:()=>eE,p6:()=>ez,fm:()=>j,gM:()=>eq,QZ:()=>e9,k5:()=>e2,fH:()=>eQ,Nl:()=>eO,E$:()=>eK,fn:()=>eA,RZ:()=>e0,eu:()=>e1,Tj:()=>eY,oi:()=>eC,fc:()=>e4,Zm:()=>eU,ch:()=>eL,me:()=>e5,ai:()=>eN,Ik:()=>eV,yN:()=>tr,p7:()=>tt,lq:()=>e3,Di:()=>te,Tk:()=>e7,vk:()=>e8,iv:()=>e6,g1:()=>eH,hZ:()=>eX,re:()=>eJ,Yj:()=>eT,HR:()=>eR,Gu:()=>e9,PV:()=>eG,Vx:()=>eM,KC:()=>eW,L5:()=>eD,rI:()=>eF});var i,a,s=r(4028),o=r(85722),l=r(76642);!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(i||(i={}));var u=r(43454),c=r(16227);class d{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let p=(e,t)=>{if((0,u.fn)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new s.G(e.common.issues);return this._error=t,this._error}}};function h(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:a}=e;return"invalid_enum_value"===t.code?{message:a??i.defaultError}:void 0===i.data?{message:a??n??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:a??r??i.defaultError}},description:i}}class f{get description(){return this._def.description}_getType(e){return(0,c.CR)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,c.CR)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new u.MY,ctx:{common:e.parent.common,data:e.data,parsedType:(0,c.CR)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if((0,u.xP)(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,c.CR)(e)},n=this._parseSync({data:e,path:r.path,parent:r});return p(r,n)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,c.CR)(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return(0,u.fn)(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>(0,u.fn)(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,c.CR)(e)},n=this._parse({data:e,path:r.path,parent:r});return p(r,await ((0,u.xP)(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),a=()=>n.addIssue({code:s.eq.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(a(),!1)):!!i||(a(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new eg({schema:this,typeName:a.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ey.create(this,this._def)}nullable(){return ev.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Y.create(this)}promise(){return em.create(this,this._def)}or(e){return ee.create([this,e],this._def)}and(e){return ei.create(this,e,this._def)}transform(e){return new eg({...h(this._def),schema:this,typeName:a.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t="function"==typeof e?e:()=>e;return new e_({...h(this._def),innerType:this,defaultValue:t,typeName:a.ZodDefault})}brand(){return new ex({typeName:a.ZodBranded,type:this,...h(this._def)})}catch(e){let t="function"==typeof e?e:()=>e;return new eb({...h(this._def),innerType:this,catchValue:t,typeName:a.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return e$.create(this,e)}readonly(){return eS.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let m=/^c[^\s-]{8,}$/i,g=/^[0-9a-z]+$/,y=/^[0-9A-HJKMNP-TV-Z]{26}$/i,v=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_=/^[a-z0-9_-]{21}$/i,b=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,w=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,k=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,x="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",$=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,S=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,I=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,E=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,A=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,O=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,T="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",N=RegExp(`^${T}$`);function C(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function P(e){return RegExp(`^${C(e)}$`)}function j(e){let t=`${T}T${C(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}function z(e,t){return!!(("v4"===t||!t)&&$.test(e)||("v6"===t||!t)&&I.test(e))}function R(e,t){if(!b.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));if("object"!=typeof i||null===i||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)return!1;return!0}catch{return!1}}function M(e,t){return!!(("v4"===t||!t)&&S.test(e)||("v6"===t||!t)&&E.test(e))}class L extends f{_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==c.Zp.string){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.string,received:t.parsedType}),u.uY}let r=new u.MY;for(let i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if("max"===i.kind)e.data.length>i.value&&(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if("length"===i.kind){let n=e.data.length>i.value,a=e.data.length<i.value;(n||a)&&(t=this._getOrReturnCtx(e,t),n?(0,u.zn)(t,{code:s.eq.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&(0,u.zn)(t,{code:s.eq.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if("email"===i.kind)k.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"email",code:s.eq.invalid_string,message:i.message}),r.dirty());else if("emoji"===i.kind)n||(n=RegExp(x,"u")),n.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"emoji",code:s.eq.invalid_string,message:i.message}),r.dirty());else if("uuid"===i.kind)v.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"uuid",code:s.eq.invalid_string,message:i.message}),r.dirty());else if("nanoid"===i.kind)_.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"nanoid",code:s.eq.invalid_string,message:i.message}),r.dirty());else if("cuid"===i.kind)m.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"cuid",code:s.eq.invalid_string,message:i.message}),r.dirty());else if("cuid2"===i.kind)g.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"cuid2",code:s.eq.invalid_string,message:i.message}),r.dirty());else if("ulid"===i.kind)y.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"ulid",code:s.eq.invalid_string,message:i.message}),r.dirty());else if("url"===i.kind)try{new URL(e.data)}catch{t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"url",code:s.eq.invalid_string,message:i.message}),r.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"regex",code:s.eq.invalid_string,message:i.message}),r.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):"datetime"===i.kind?j(i).test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.invalid_string,validation:"datetime",message:i.message}),r.dirty()):"date"===i.kind?N.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.invalid_string,validation:"date",message:i.message}),r.dirty()):"time"===i.kind?P(i).test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.invalid_string,validation:"time",message:i.message}),r.dirty()):"duration"===i.kind?w.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"duration",code:s.eq.invalid_string,message:i.message}),r.dirty()):"ip"===i.kind?z(e.data,i.version)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"ip",code:s.eq.invalid_string,message:i.message}),r.dirty()):"jwt"===i.kind?R(e.data,i.alg)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"jwt",code:s.eq.invalid_string,message:i.message}),r.dirty()):"cidr"===i.kind?M(e.data,i.version)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"cidr",code:s.eq.invalid_string,message:i.message}),r.dirty()):"base64"===i.kind?A.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"base64",code:s.eq.invalid_string,message:i.message}),r.dirty()):"base64url"===i.kind?O.test(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{validation:"base64url",code:s.eq.invalid_string,message:i.message}),r.dirty()):c.ZS.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:s.eq.invalid_string,...i.errToObj(r)})}_addCheck(e){return new L({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...i.errToObj(e)})}url(e){return this._addCheck({kind:"url",...i.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...i.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...i.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...i.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...i.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...i.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...i.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...i.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...i.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...i.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...i.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...i.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...i.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...i.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...i.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...i.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...i.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...i.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...i.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...i.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...i.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...i.errToObj(t)})}nonempty(e){return this.min(1,i.errToObj(e))}trim(){return new L({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new L({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new L({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Z(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}L.create=e=>new L({checks:[],typeName:a.ZodString,coerce:e?.coerce??!1,...h(e)});class D extends f{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==c.Zp.number){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.number,received:t.parsedType}),u.uY}let r=new u.MY;for(let n of this._def.checks)"int"===n.kind?c.ZS.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==Z(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.not_finite,message:n.message}),r.dirty()):c.ZS.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,i.toString(t))}gt(e,t){return this.setLimit("min",e,!1,i.toString(t))}lte(e,t){return this.setLimit("max",e,!0,i.toString(t))}lt(e,t){return this.setLimit("max",e,!1,i.toString(t))}setLimit(e,t,r,n){return new D({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:i.toString(n)}]})}_addCheck(e){return new D({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:i.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:i.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:i.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:i.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:i.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:i.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:i.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:i.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:i.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&c.ZS.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}D.create=e=>new D({checks:[],typeName:a.ZodNumber,coerce:e?.coerce||!1,...h(e)});class U extends f{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==c.Zp.bigint)return this._getInvalidInput(e);let r=new u.MY;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):c.ZS.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.bigint,received:t.parsedType}),u.uY}gte(e,t){return this.setLimit("min",e,!0,i.toString(t))}gt(e,t){return this.setLimit("min",e,!1,i.toString(t))}lte(e,t){return this.setLimit("max",e,!0,i.toString(t))}lt(e,t){return this.setLimit("max",e,!1,i.toString(t))}setLimit(e,t,r,n){return new U({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:i.toString(n)}]})}_addCheck(e){return new U({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:i.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:i.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:i.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:i.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:i.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}U.create=e=>new U({checks:[],typeName:a.ZodBigInt,coerce:e?.coerce??!1,...h(e)});class F extends f{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==c.Zp.boolean){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.boolean,received:t.parsedType}),u.uY}return(0,u.OK)(e.data)}}F.create=e=>new F({typeName:a.ZodBoolean,coerce:e?.coerce||!1,...h(e)});class B extends f{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==c.Zp.date){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.date,received:t.parsedType}),u.uY}if(Number.isNaN(e.data.getTime())){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_date}),u.uY}let r=new u.MY;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(t=this._getOrReturnCtx(e,t),(0,u.zn)(t,{code:s.eq.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):c.ZS.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new B({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:i.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:i.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}B.create=e=>new B({checks:[],coerce:e?.coerce||!1,typeName:a.ZodDate,...h(e)});class V extends f{_parse(e){if(this._getType(e)!==c.Zp.symbol){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.symbol,received:t.parsedType}),u.uY}return(0,u.OK)(e.data)}}V.create=e=>new V({typeName:a.ZodSymbol,...h(e)});class J extends f{_parse(e){if(this._getType(e)!==c.Zp.undefined){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.undefined,received:t.parsedType}),u.uY}return(0,u.OK)(e.data)}}J.create=e=>new J({typeName:a.ZodUndefined,...h(e)});class W extends f{_parse(e){if(this._getType(e)!==c.Zp.null){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.null,received:t.parsedType}),u.uY}return(0,u.OK)(e.data)}}W.create=e=>new W({typeName:a.ZodNull,...h(e)});class q extends f{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,u.OK)(e.data)}}q.create=e=>new q({typeName:a.ZodAny,...h(e)});class K extends f{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,u.OK)(e.data)}}K.create=e=>new K({typeName:a.ZodUnknown,...h(e)});class G extends f{_parse(e){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.never,received:t.parsedType}),u.uY}}G.create=e=>new G({typeName:a.ZodNever,...h(e)});class H extends f{_parse(e){if(this._getType(e)!==c.Zp.undefined){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.void,received:t.parsedType}),u.uY}return(0,u.OK)(e.data)}}H.create=e=>new H({typeName:a.ZodVoid,...h(e)});class Y extends f{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==c.Zp.array)return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.array,received:t.parsedType}),u.uY;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&((0,u.zn)(t,{code:e?s.eq.too_big:s.eq.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&((0,u.zn)(t,{code:s.eq.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&((0,u.zn)(t,{code:s.eq.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new d(t,e,t.path,r)))).then(e=>u.MY.mergeArray(r,e));let i=[...t.data].map((e,r)=>n.type._parseSync(new d(t,e,t.path,r)));return u.MY.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Y({...this._def,minLength:{value:e,message:i.toString(t)}})}max(e,t){return new Y({...this._def,maxLength:{value:e,message:i.toString(t)}})}length(e,t){return new Y({...this._def,exactLength:{value:e,message:i.toString(t)}})}nonempty(e){return this.min(1,e)}}function X(e){if(e instanceof Q){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=ey.create(X(n))}return new Q({...e._def,shape:()=>t})}if(e instanceof Y)return new Y({...e._def,type:X(e.element)});if(e instanceof ey)return ey.create(X(e.unwrap()));if(e instanceof ev)return ev.create(X(e.unwrap()));if(e instanceof ea)return ea.create(e.items.map(e=>X(e)));else return e}Y.create=(e,t)=>new Y({type:e,minLength:null,maxLength:null,exactLength:null,typeName:a.ZodArray,...h(t)});class Q extends f{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=c.ZS.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==c.Zp.object){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.object,received:t.parsedType}),u.uY}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof G&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||a.push(e);let o=[];for(let e of i){let t=n[e],i=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new d(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof G){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of a)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)a.length>0&&((0,u.zn)(r,{code:s.eq.unrecognized_keys,keys:a}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of a){let n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new d(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of o){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>u.MY.mergeObjectSync(t,e)):u.MY.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return i.errToObj,new Q({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:i.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new Q({...this._def,unknownKeys:"strip"})}passthrough(){return new Q({...this._def,unknownKeys:"passthrough"})}extend(e){return new Q({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Q({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:a.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Q({...this._def,catchall:e})}pick(e){let t={};for(let r of c.ZS.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new Q({...this._def,shape:()=>t})}omit(e){let t={};for(let r of c.ZS.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new Q({...this._def,shape:()=>t})}deepPartial(){return X(this)}partial(e){let t={};for(let r of c.ZS.objectKeys(this.shape)){let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new Q({...this._def,shape:()=>t})}required(e){let t={};for(let r of c.ZS.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof ey;)e=e._def.innerType;t[r]=e}return new Q({...this._def,shape:()=>t})}keyof(){return ep(c.ZS.objectKeys(this.shape))}}Q.create=(e,t)=>new Q({shape:()=>e,unknownKeys:"strip",catchall:G.create(),typeName:a.ZodObject,...h(t)}),Q.strictCreate=(e,t)=>new Q({shape:()=>e,unknownKeys:"strict",catchall:G.create(),typeName:a.ZodObject,...h(t)}),Q.lazycreate=(e,t)=>new Q({shape:e,unknownKeys:"strip",catchall:G.create(),typeName:a.ZodObject,...h(t)});class ee extends f{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;function n(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new s.G(e.ctx.common.issues));return(0,u.zn)(t,{code:s.eq.invalid_union,unionErrors:r}),u.uY}if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(n);{let e,n=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new s.G(e));return(0,u.zn)(t,{code:s.eq.invalid_union,unionErrors:i}),u.uY}}get options(){return this._def.options}}ee.create=(e,t)=>new ee({options:e,typeName:a.ZodUnion,...h(t)});let et=e=>{if(e instanceof ec)return et(e.schema);if(e instanceof eg)return et(e.innerType());if(e instanceof ed)return[e.value];if(e instanceof eh)return e.options;if(e instanceof ef)return c.ZS.objectValues(e.enum);else if(e instanceof e_)return et(e._def.innerType);else if(e instanceof J)return[void 0];else if(e instanceof W)return[null];else if(e instanceof ey)return[void 0,...et(e.unwrap())];else if(e instanceof ev)return[null,...et(e.unwrap())];else if(e instanceof ex)return et(e.unwrap());else if(e instanceof eS)return et(e.unwrap());else if(e instanceof eb)return et(e._def.innerType);else return[]};class er extends f{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.Zp.object)return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.object,received:t.parsedType}),u.uY;let r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):((0,u.zn)(t,{code:s.eq.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),u.uY)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=et(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new er({typeName:a.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...h(r)})}}function en(e,t){let r=(0,c.CR)(e),n=(0,c.CR)(t);if(e===t)return{valid:!0,data:e};if(r===c.Zp.object&&n===c.Zp.object){let r=c.ZS.objectKeys(t),n=c.ZS.objectKeys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(let r of n){let n=en(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===c.Zp.array&&n===c.Zp.array){if(e.length!==t.length)return{valid:!1};let r=[];for(let n=0;n<e.length;n++){let i=en(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}if(r===c.Zp.date&&n===c.Zp.date&&+e==+t)return{valid:!0,data:e};return{valid:!1}}class ei extends f{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if((0,u.G4)(e)||(0,u.G4)(n))return u.uY;let i=en(e.value,n.value);return i.valid?(((0,u.DM)(e)||(0,u.DM)(n))&&t.dirty(),{status:t.value,value:i.data}):((0,u.zn)(r,{code:s.eq.invalid_intersection_types}),u.uY)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ei.create=(e,t,r)=>new ei({left:e,right:t,typeName:a.ZodIntersection,...h(r)});class ea extends f{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.Zp.array)return(0,u.zn)(r,{code:s.eq.invalid_type,expected:c.Zp.array,received:r.parsedType}),u.uY;if(r.data.length<this._def.items.length)return(0,u.zn)(r,{code:s.eq.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),u.uY;!this._def.rest&&r.data.length>this._def.items.length&&((0,u.zn)(r,{code:s.eq.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new d(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>u.MY.mergeArray(t,e)):u.MY.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ea({...this._def,rest:e})}}ea.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ea({items:e,typeName:a.ZodTuple,rest:null,...h(t)})};class es extends f{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.Zp.object)return(0,u.zn)(r,{code:s.eq.invalid_type,expected:c.Zp.object,received:r.parsedType}),u.uY;let n=[],i=this._def.keyType,a=this._def.valueType;for(let e in r.data)n.push({key:i._parse(new d(r,e,r.path,e)),value:a._parse(new d(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?u.MY.mergeObjectAsync(t,n):u.MY.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new es(t instanceof f?{keyType:e,valueType:t,typeName:a.ZodRecord,...h(r)}:{keyType:L.create(),valueType:e,typeName:a.ZodRecord,...h(t)})}}class eo extends f{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.Zp.map)return(0,u.zn)(r,{code:s.eq.invalid_type,expected:c.Zp.map,received:r.parsedType}),u.uY;let n=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([e,t],a)=>({key:n._parse(new d(r,e,r.path,[a,"key"])),value:i._parse(new d(r,t,r.path,[a,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of a){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return u.uY;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of a){let n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return u.uY;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}eo.create=(e,t,r)=>new eo({valueType:t,keyType:e,typeName:a.ZodMap,...h(r)});class el extends f{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.Zp.set)return(0,u.zn)(r,{code:s.eq.invalid_type,expected:c.Zp.set,received:r.parsedType}),u.uY;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&((0,u.zn)(r,{code:s.eq.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&((0,u.zn)(r,{code:s.eq.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function a(e){let r=new Set;for(let n of e){if("aborted"===n.status)return u.uY;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let o=[...r.data.values()].map((e,t)=>i._parse(new d(r,e,r.path,t)));return r.common.async?Promise.all(o).then(e=>a(e)):a(o)}min(e,t){return new el({...this._def,minSize:{value:e,message:i.toString(t)}})}max(e,t){return new el({...this._def,maxSize:{value:e,message:i.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}el.create=(e,t)=>new el({valueType:e,minSize:null,maxSize:null,typeName:a.ZodSet,...h(t)});class eu extends f{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.Zp.function)return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.function,received:t.parsedType}),u.uY;function r(e,r){return(0,u.y7)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,o.$W)(),l.A].filter(e=>!!e),issueData:{code:s.eq.invalid_arguments,argumentsError:r}})}function n(e,r){return(0,u.y7)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,o.$W)(),l.A].filter(e=>!!e),issueData:{code:s.eq.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof em){let e=this;return(0,u.OK)(async function(...t){let o=new s.G([]),l=await e._def.args.parseAsync(t,i).catch(e=>{throw o.addIssue(r(t,e)),o}),u=await Reflect.apply(a,this,l);return await e._def.returns._def.type.parseAsync(u,i).catch(e=>{throw o.addIssue(n(u,e)),o})})}{let e=this;return(0,u.OK)(function(...t){let o=e._def.args.safeParse(t,i);if(!o.success)throw new s.G([r(t,o.error)]);let l=Reflect.apply(a,this,o.data),u=e._def.returns.safeParse(l,i);if(!u.success)throw new s.G([n(l,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eu({...this._def,args:ea.create(e).rest(K.create())})}returns(e){return new eu({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eu({args:e||ea.create([]).rest(K.create()),returns:t||K.create(),typeName:a.ZodFunction,...h(r)})}}class ec extends f{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ec.create=(e,t)=>new ec({getter:e,typeName:a.ZodLazy,...h(t)});class ed extends f{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{received:t.data,code:s.eq.invalid_literal,expected:this._def.value}),u.uY}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ep(e,t){return new eh({values:e,typeName:a.ZodEnum,...h(t)})}ed.create=(e,t)=>new ed({value:e,typeName:a.ZodLiteral,...h(t)});class eh extends f{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,u.zn)(t,{expected:c.ZS.joinValues(r),received:t.parsedType,code:s.eq.invalid_type}),u.uY}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,u.zn)(t,{received:t.data,code:s.eq.invalid_enum_value,options:r}),u.uY}return(0,u.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return eh.create(e,{...this._def,...t})}exclude(e,t=this._def){return eh.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}eh.create=ep;class ef extends f{_parse(e){let t=c.ZS.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==c.Zp.string&&r.parsedType!==c.Zp.number){let e=c.ZS.objectValues(t);return(0,u.zn)(r,{expected:c.ZS.joinValues(e),received:r.parsedType,code:s.eq.invalid_type}),u.uY}if(this._cache||(this._cache=new Set(c.ZS.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=c.ZS.objectValues(t);return(0,u.zn)(r,{received:r.data,code:s.eq.invalid_enum_value,options:e}),u.uY}return(0,u.OK)(e.data)}get enum(){return this._def.values}}ef.create=(e,t)=>new ef({values:e,typeName:a.ZodNativeEnum,...h(t)});class em extends f{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.Zp.promise&&!1===t.common.async)return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.promise,received:t.parsedType}),u.uY;let r=t.parsedType===c.Zp.promise?t.data:Promise.resolve(t.data);return(0,u.OK)(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}em.create=(e,t)=>new em({type:e,typeName:a.ZodPromise,...h(t)});class eg extends f{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===a.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{(0,u.zn)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){let e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return u.uY;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?u.uY:"dirty"===n.status||"dirty"===t.value?(0,u.jm)(n.value):n});{if("aborted"===t.value)return u.uY;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?u.uY:"dirty"===n.status||"dirty"===t.value?(0,u.jm)(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?u.uY:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?u.uY:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>(0,u.fn)(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):u.uY);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,u.fn)(e))return u.uY;let a=n.transform(e.value,i);if(a instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}c.ZS.assertNever(n)}}eg.create=(e,t,r)=>new eg({schema:e,typeName:a.ZodEffects,effect:t,...h(r)}),eg.createWithPreprocess=(e,t,r)=>new eg({schema:t,effect:{type:"preprocess",transform:e},typeName:a.ZodEffects,...h(r)});class ey extends f{_parse(e){return this._getType(e)===c.Zp.undefined?(0,u.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ey.create=(e,t)=>new ey({innerType:e,typeName:a.ZodOptional,...h(t)});class ev extends f{_parse(e){return this._getType(e)===c.Zp.null?(0,u.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ev.create=(e,t)=>new ev({innerType:e,typeName:a.ZodNullable,...h(t)});class e_ extends f{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===c.Zp.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}e_.create=(e,t)=>new e_({innerType:e,typeName:a.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...h(t)});class eb extends f{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,u.xP)(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new s.G(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new s.G(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eb.create=(e,t)=>new eb({innerType:e,typeName:a.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...h(t)});class ew extends f{_parse(e){if(this._getType(e)!==c.Zp.nan){let t=this._getOrReturnCtx(e);return(0,u.zn)(t,{code:s.eq.invalid_type,expected:c.Zp.nan,received:t.parsedType}),u.uY}return{status:"valid",value:e.data}}}ew.create=e=>new ew({typeName:a.ZodNaN,...h(e)});let ek=Symbol("zod_brand");class ex extends f{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class e$ extends f{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?u.uY:"dirty"===e.status?(t.dirty(),(0,u.jm)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?u.uY:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new e$({in:e,out:t,typeName:a.ZodPipeline})}}class eS extends f{_parse(e){let t=this._def.innerType._parse(e),r=e=>((0,u.fn)(e)&&(e.value=Object.freeze(e.value)),e);return(0,u.xP)(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eI(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function eE(e,t={},r){return e?q.create().superRefine((n,i)=>{let a=e(n);if(a instanceof Promise)return a.then(e=>{if(!e){let e=eI(t,n),a=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:a})}});if(!a){let e=eI(t,n),a=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:a})}}):q.create()}eS.create=(e,t)=>new eS({innerType:e,typeName:a.ZodReadonly,...h(t)});let eA={object:Q.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(a||(a={}));let eO=(e,t={message:`Input not instance of ${e.name}`})=>eE(t=>t instanceof e,t),eT=L.create,eN=D.create,eC=ew.create,eP=U.create,ej=F.create,ez=B.create,eR=V.create,eM=J.create,eL=W.create,eZ=q.create,eD=K.create,eU=G.create,eF=H.create,eB=Y.create,eV=Q.create,eJ=Q.strictCreate,eW=ee.create,eq=er.create,eK=ei.create,eG=ea.create,eH=es.create,eY=eo.create,eX=el.create,eQ=eu.create,e0=ec.create,e1=ed.create,e2=eh.create,e4=ef.create,e6=em.create,e9=eg.create,e3=ey.create,e5=ev.create,e8=eg.createWithPreprocess,e7=e$.create,te=()=>eT().optional(),tt=()=>eN().optional(),tr=()=>ej().optional(),tn={string:e=>L.create({...e,coerce:!0}),number:e=>D.create({...e,coerce:!0}),boolean:e=>F.create({...e,coerce:!0}),bigint:e=>U.create({...e,coerce:!0}),date:e=>B.create({...e,coerce:!0})},ti=u.uY},76591:e=>{"use strict";e.exports=function(e,t){if("string"!=typeof e)throw TypeError("Expected a string");return t=void 0===t?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}},76642:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(4028),i=r(16227);let a=(e,t)=>{let r;switch(e.code){case n.eq.invalid_type:r=e.received===i.Zp.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case n.eq.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,i.ZS.jsonStringifyReplacer)}`;break;case n.eq.unrecognized_keys:r=`Unrecognized key(s) in object: ${i.ZS.joinValues(e.keys,", ")}`;break;case n.eq.invalid_union:r="Invalid input";break;case n.eq.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${i.ZS.joinValues(e.options)}`;break;case n.eq.invalid_enum_value:r=`Invalid enum value. Expected ${i.ZS.joinValues(e.options)}, received '${e.received}'`;break;case n.eq.invalid_arguments:r="Invalid function arguments";break;case n.eq.invalid_return_type:r="Invalid function return type";break;case n.eq.invalid_date:r="Invalid date";break;case n.eq.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:i.ZS.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case n.eq.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case n.eq.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case n.eq.custom:r="Invalid input";break;case n.eq.invalid_intersection_types:r="Intersection results could not be merged";break;case n.eq.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case n.eq.not_finite:r="Number must be finite";break;default:r=t.defaultError,i.ZS.assertNever(e)}return{message:r}}},76937:(e,t,r)=>{"use strict";r.d(t,{AP:()=>s,FK:()=>a,mg:()=>i,vl:()=>o});var n=r(79271),i=class extends n.XQ{static lc_name(){return"FunctionMessage"}type="function";name;constructor(e){super(e),this.name=e.name}},a=class extends n.gj{static lc_name(){return"FunctionMessageChunk"}type="function";concat(e){return new this.constructor({content:(0,n._I)(this.content,e.content),additional_kwargs:(0,n.ns)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n.ns)(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}};function s(e){return"function"===e._getType()}function o(e){return"function"===e._getType()}},76980:(e,t,r)=>{"use strict";let n=r(78768);e.exports=(e,t)=>new n(e,t).minor},77727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.Node=void 0;class r{value;next;constructor(e,t){this.value=e,this.next=t}}t.Node=r;class n{head;tail;constructor(){this.head=null,this.tail=null}add(e){if(!this.head){this.head=new r(e,null),this.tail=null;return}if(!this.head.next){let t=new r(e,null);this.head.next=t,this.tail=t;return}let t=this.tail,n=new r(e,null);t&&(t.next=n),this.tail=n}show(){if(!this.head)return null;let e=this.head;for(;null!=e;)e=e.value instanceof n?e.value.head:e.next}}t.LinkedList=n},77956:(e,t,r)=>{"use strict";let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:a}=r(14018),s=r(52412),o=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],d=t.t={},p=0,h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",a],[h,i]],m=e=>{for(let[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},g=(e,t,r)=>{let n=m(t),i=p++;s(e,i,t),d[e]=i,u[i]=t,c[i]=n,o[i]=new RegExp(t,r?"g":void 0),l[i]=new RegExp(n,r?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),g("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${h}+`),g("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),g("FULL",`^${u[d.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),g("LOOSE",`^${u[d.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),g("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?`+`(?:${u[d.BUILD]})?`+"(?:$|[^\\d])"),g("COERCERTL",u[d.COERCE],!0),g("COERCERTLFULL",u[d.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},78488:(e,t,r)=>{"use strict";r.d(t,{Od:()=>u,W5:()=>l,l7:()=>d,sD:()=>c,y9:()=>m});var n=r(67893),i=r(64184),a=r(62531);r(15765);var s=r(25050),o=r(87150),l={};(0,n.V)(l,{LogStreamCallbackHandler:()=>m,RunLog:()=>c,RunLogPatch:()=>u,isLogStreamHandler:()=>d});var u=class{ops;constructor(e){this.ops=e.ops??[]}concat(e){let t=this.ops.concat(e.ops),r=(0,a.X6)({},t);return new c({ops:t,state:r[r.length-1].newDocument})}},c=class e extends u{state;constructor(e){super(e),this.state=e.state}concat(t){let r=this.ops.concat(t.ops),n=(0,a.X6)(this.state,t.ops);return new e({ops:r,state:n[n.length-1].newDocument})}static fromRunLogPatch(t){let r=(0,a.X6)({},t.ops);return new e({ops:t.ops,state:r[r.length-1].newDocument})}};let d=e=>"log_stream_tracer"===e.name;async function p(e,t){if("original"===t)throw Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");let{inputs:r}=e;return["retriever","llm","prompt"].includes(e.run_type)?r:1!==Object.keys(r).length||r?.input!==""?r.input:void 0}async function h(e,t){let{outputs:r}=e;return"original"===t||["retriever","llm","prompt"].includes(e.run_type)?r:void 0!==r&&1===Object.keys(r).length&&r?.output!==void 0?r.output:r}function f(e){return void 0!==e&&void 0!==e.message}var m=class extends s.JS{autoClose=!0;includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;_schemaFormat="original";rootId;keyMapByRunId={};counterMapByRunName={};transformStream;writer;receiveStream;name="log_stream_tracer";lc_prefer_streaming=!0;constructor(e){super({_awaitHandler:!0,...e}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=o.bO.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;let t=e.tags??[],r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.run_type)),void 0!==this.includeTags&&(r=r||void 0!==t.find(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.run_type)),void 0!==this.excludeTags&&(r=r&&t.every(e=>!this.excludeTags?.includes(e))),r}async *tapOutputIterable(e,t){for await(let r of t){if(e!==this.rootId){let t=this.keyMapByRunId[e];t&&await this.writer.write(new u({ops:[{op:"add",path:`/logs/${t}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){if(void 0===this.rootId&&(this.rootId=e.id,await this.writer.write(new u({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;void 0===this.counterMapByRunName[e.name]&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;let t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=1===t?e.name:`${e.name}:${t}`;let r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};"streaming_events"===this._schemaFormat&&(r.inputs=await p(e,this._schemaFormat)),await this.writer.write(new u({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{let t=this.keyMapByRunId[e.id];if(void 0===t)return;let r=[];"streaming_events"===this._schemaFormat&&r.push({op:"replace",path:`/logs/${t}/inputs`,value:await p(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${t}/final_output`,value:await h(e,this._schemaFormat)}),void 0!==e.end_time&&r.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});let n=new u({ops:r});await this.writer.write(n)}finally{if(e.id===this.rootId){let t=new u({ops:[{op:"replace",path:"/final_output",value:await h(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,r){let n,a=this.keyMapByRunId[e.id];if(void 0===a)return;n=void 0!==e.inputs.messages?f(r?.chunk)?r?.chunk:new i.H({id:`run-${e.id}`,content:t}):t;let s=new u({ops:[{op:"add",path:`/logs/${a}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${a}/streamed_output/-`,value:n}]});await this.writer.write(s)}}},78768:(e,t,r)=>{"use strict";let n=r(52412),{MAX_LENGTH:i,MAX_SAFE_INTEGER:a}=r(14018),{safeRe:s,t:o}=r(77956),l=r(66435),{compareIdentifiers:u}=r(219);class c{constructor(e,t){if(t=l(t),e instanceof c)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else e=e.version;else if("string"!=typeof e)throw TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?s[o.LOOSE]:s[o.FULL]);if(!r)throw TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>a||this.major<0)throw TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<a)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return(e instanceof c||(e=new c(e,this.options)),this.major<e.major)?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:+(this.patch>e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return -1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;else if(r===i)continue;else return u(r,i)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(n("build compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;else if(r===i)continue;else return u(r,i)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(t){let e=`-${t}`.match(this.options.loose?s[o.PRERELEASELOOSE]:s[o.PRERELEASE]);if(!e||e[1]!==t)throw Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=+!!Number(r);if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=c},78982:(e,t,r)=>{"use strict";var n;r.d(t,{UY:()=>i,fd:()=>l,nP:()=>a,rs:()=>s,u5:()=>o});let i=Symbol("ZodOutput"),a=Symbol("ZodInput");class s{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let r=t[0];return this._map.set(e,r),r&&"object"==typeof r&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};delete r.id;let n={...r,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function o(){return new s}(n=globalThis).__zod_globalRegistry??(n.__zod_globalRegistry=o());let l=globalThis.__zod_globalRegistry},79271:(e,t,r)=>{"use strict";r.d(t,{XQ:()=>m,gj:()=>b,dp:()=>w,ns:()=>y,Vt:()=>v,F7:()=>_,Iv:()=>h,ny:()=>k,AJ:()=>x,Ao:()=>g,_I:()=>p});var n=r(69530),i=r(85579),a=r(71193),s=r(10999),o=r(31465),l=r(47548);function u(e,t="pretty"){return"pretty"===t?c(e):JSON.stringify(e)}function c(e){let t=[],r=` ${e.type.charAt(0).toUpperCase()+e.type.slice(1)} Message `,n=Math.floor((80-r.length)/2),i="=".repeat(n),a=r.length%2==0?i:`${i}=`;if(t.push(`${i}${r}${a}`),"ai"===e.type){let r=e;if(r.tool_calls&&r.tool_calls.length>0)for(let e of(t.push("Tool Calls:"),r.tool_calls))for(let[r,n]of(t.push(`  ${e.name} (${e.id})`),t.push(` Call ID: ${e.id}`),t.push("  Args:"),Object.entries(e.args)))t.push(`    ${r}: ${"object"==typeof n?JSON.stringify(n):n}`)}if("tool"===e.type){let r=e;r.name&&t.push(`Name: ${r.name}`)}return"string"==typeof e.content&&e.content.trim()&&(t.length>1&&t.push(""),t.push(e.content)),t.join("\n")}let d=Symbol.for("langchain.message");function p(e,t){if("string"==typeof e)return""===e?t:"string"==typeof t?e+t:Array.isArray(t)&&0===t.length?e:Array.isArray(t)&&t.some(e=>(0,i.Fz)(e))?[{type:"text",source_type:"text",text:e},...t]:[{type:"text",text:e},...t];return Array.isArray(t)?v(e,t)??[...e,...t]:""===t?e:Array.isArray(e)&&e.some(e=>(0,i.Fz)(e))?[...e,{type:"file",source_type:"text",text:t}]:[...e,{type:"text",text:t}]}function h(e,t){return"error"===e||"error"===t?"error":"success"}function f(e,t){function r(e,n){if("object"!=typeof e||null==e)return e;if(n>=t)return Array.isArray(e)?"[Array]":"[Object]";if(Array.isArray(e))return e.map(e=>r(e,n+1));let i={};for(let t of Object.keys(e))i[t]=r(e[t],n+1);return i}return JSON.stringify(r(e,0),null,2)}var m=class extends n.yL{lc_namespace=["langchain_core","messages"];lc_serializable=!0;get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}[d]=!0;id;name;content;additional_kwargs;response_metadata;_getType(){return this.type}getType(){return this._getType()}constructor(e){let t="string"==typeof e||Array.isArray(e)?{content:e}:e;t.additional_kwargs||(t.additional_kwargs={}),t.response_metadata||(t.response_metadata={}),super(t),this.name=t.name,void 0===t.content&&void 0!==t.contentBlocks?(this.content=t.contentBlocks,this.response_metadata={output_version:"v1",...t.response_metadata}):(void 0!==t.content?this.content=t.content??[]:this.content=[],this.response_metadata=t.response_metadata),this.additional_kwargs=t.additional_kwargs,this.id=t.id}get text(){return"string"==typeof this.content?this.content:Array.isArray(this.content)?this.content.map(e=>"string"==typeof e?e:"text"===e.type?e.text:"").join(""):""}get contentBlocks(){let e="string"==typeof this.content?[{type:"text",text:this.content}]:this.content;return[s.Tn,o.T,a.a].reduce((e,t)=>t(e),e)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(e){return"object"==typeof e&&null!==e&&d in e&&!0===e[d]&&(0,l.K)(e)}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(null===e)return this;let t=f(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${t}`}toFormattedString(e="pretty"){return u(this,e)}};function g(e){return Array.isArray(e)&&e.every(e=>"number"==typeof e.index)}function y(e={},t={}){let r={...e};for(let[e,n]of Object.entries(t))if(null==r[e])r[e]=n;else if(null==n)continue;else if(typeof r[e]!=typeof n||Array.isArray(r[e])!==Array.isArray(n))throw Error(`field[${e}] already exists in the message chunk, but with a different type.`);else if("string"==typeof r[e])if("type"===e)continue;else["id","name","output_version","model_provider"].includes(e)?n&&(r[e]=n):r[e]+=n;else if("object"!=typeof r[e]||Array.isArray(r[e]))if(Array.isArray(r[e]))r[e]=v(r[e],n);else{if(r[e]===n)continue;console.warn(`field[${e}] already exists in this message chunk and value has unsupported type.`)}else r[e]=y(r[e],n);return r}function v(e,t){if(void 0!==e||void 0!==t){if(void 0===e||void 0===t)return e||t;let r=[...e];for(let e of t)if("object"==typeof e&&null!==e&&"index"in e&&"number"==typeof e.index){let t=r.findIndex(t=>{let r="object"==typeof t,n="index"in t&&t.index===e.index,i="id"in t&&"id"in e&&t?.id===e?.id,a=!("id"in t)||!t?.id||!("id"in e)||!e?.id;return r&&n&&(i||a)});-1!==t&&"object"==typeof r[t]&&null!==r[t]?r[t]=y(r[t],e):r.push(e)}else{if("object"==typeof e&&null!==e&&"text"in e&&""===e.text)continue;r.push(e)}return r}}function _(e,t){if(void 0!==e||void 0!==t)if(void 0===e||void 0===t)return e??t;else if(typeof e!=typeof t)throw Error(`Cannot merge objects of different types.
Left ${typeof e}
Right ${typeof t}`);else if("string"==typeof e&&"string"==typeof t)return e+t;else if(Array.isArray(e)&&Array.isArray(t))return v(e,t);else if("object"==typeof e&&"object"==typeof t)return y(e,t);else if(e===t)return e;else throw Error(`Can not merge objects of different types.
Left ${e}
Right ${t}`)}var b=class e extends m{static isInstance(t){if(!super.isInstance(t))return!1;let r=Object.getPrototypeOf(t);for(;null!==r;){if(r===e.prototype)return!0;r=Object.getPrototypeOf(r)}return!1}};function w(e){return"string"==typeof e.role}function k(e){return"function"==typeof e?._getType}function x(e){return b.isInstance(e)}},82661:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,s){if("function"!=typeof n)throw TypeError("The listener must be a function");var o=new i(n,a||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=Array(a);i<a;i++)s[i]=n[i].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,s),!0}for(u=1,l=Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var p,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,i);break;default:if(!l)for(p=1,l=Array(d-1);p<d;p++)l[p-1]=arguments[p];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||s(this,a);else{for(var l=0,u=[],c=o.length;l<c;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&u.push(o[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},82926:(e,t,r)=>{"use strict";r.d(t,{Kj:()=>n.Kj,gk:()=>n.gk,q7:()=>n.q7});var n=r(94718)},83446:(e,t,r)=>{"use strict";let n=r(27681);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},83461:(e,t,r)=>{"use strict";r.d(t,{hU:()=>o.h,_6:()=>v,XM:()=>A});var n=r(67893),i=r(58036),a=r(14654),s=r(59305),o=r(4929),l=class extends s.k{static lc_name(){return"BytesOutputParser"}lc_namespace=["langchain_core","output_parsers","bytes"];lc_serializable=!0;textEncoder=new TextEncoder;parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}},u=class extends s.k{re;async *_transform(e){let t="";for await(let r of e)if("string"==typeof r?t+=r:t+=r.content,this.re){let e=[...t.matchAll(this.re)];if(e.length>1){let r=0;for(let t of e.slice(0,-1))yield[t[1]],r+=(t.index??0)+t[0].length;t=t.slice(r)}}else{let e=await this.parse(t);if(e.length>1){for(let t of e.slice(0,-1))yield[t];t=e[e.length-1]}}for(let e of(await this.parse(t)))yield[e]}},c=class extends u{static lc_name(){return"CommaSeparatedListOutputParser"}lc_namespace=["langchain_core","output_parsers","list"];lc_serializable=!0;async parse(e){try{return e.trim().split(",").map(e=>e.trim())}catch{throw new a.CC(`Could not parse output: ${e}`,e)}}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}},d=class extends u{lc_namespace=["langchain_core","output_parsers","list"];length;separator;constructor({length:e,separator:t}){super(...arguments),this.length=e,this.separator=t||","}async parse(e){try{let t=e.trim().split(this.separator).map(e=>e.trim());if(void 0!==this.length&&t.length!==this.length)throw new a.CC(`Incorrect number of items. Expected ${this.length}, got ${t.length}.`);return t}catch(t){if(Object.getPrototypeOf(t)===a.CC.prototype)throw t;throw new a.CC(`Could not parse output: ${e}`)}}getFormatInstructions(){return`Your response should be a list of ${void 0===this.length?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}},p=class extends u{static lc_name(){return"NumberedListOutputParser"}lc_namespace=["langchain_core","output_parsers","list"];lc_serializable=!0;getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}re=/\d+\.\s([^\n]+)/g;async parse(e){return[...e.matchAll(this.re)??[]].map(e=>e[1])}},h=class extends u{static lc_name(){return"NumberedListOutputParser"}lc_namespace=["langchain_core","output_parsers","list"];lc_serializable=!0;getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}re=/^\s*[-*]\s([^\n]+)$/gm;async parse(e){return[...e.matchAll(this.re)??[]].map(e=>e[1])}},f=class extends s.k{static lc_name(){return"StrOutputParser"}lc_namespace=["langchain_core","output_parsers","string"];lc_serializable=!0;parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw Error(`Cannot coerce "${e.type}" message part into a string.`)}throw Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((e,t)=>e+this._messageContentToString(t),"")}},m=r(34497),g=r(25720),y=r(4556),v=class extends a.mJ{static lc_name(){return"StructuredOutputParser"}lc_namespace=["langchain","output_parsers","structured"];toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),this.schema=e}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){return new this(y.z.object(Object.fromEntries(Object.entries(e).map(([e,t])=>[e,y.z.string().describe(t)]))))}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify((0,g.PF)(this.schema))}
\`\`\`
`}async parse(e){try{let t=e.trim(),r=(t.match(/^```(?:json)?\s*([\s\S]*?)```/)?.[1]||t.match(/```json\s*([\s\S]*?)```/)?.[1]||t).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(e,t)=>{let r=t.replace(/\n/g,"\\n");return`"${r}"`}).replace(/\n/g,"");return await (0,m.hZ)(this.schema,JSON.parse(r))}catch(t){throw new a.CC(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}},_=class extends v{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(e){let t=e?.interpolationDepth??1;if(t<1)throw Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction((0,g.PF)(this.schema)).replaceAll("{","{".repeat(t)).replaceAll("}","}".repeat(t))}
\`\`\``}_schemaToInstruction(e,t=2){let r=e;if("type"in r){let e,n=!1;if(Array.isArray(r.type)){let t=r.type.findIndex(e=>"null"===e);-1!==t&&(n=!0,r.type.splice(t,1)),e=r.type.join(" | ")}else e=r.type;if("object"===r.type&&r.properties){let e=r.description?` // ${r.description}`:"",n=Object.entries(r.properties).map(([e,n])=>{let i=r.required?.includes(e)?"":" (optional)";return`${" ".repeat(t)}"${e}": ${this._schemaToInstruction(n,t+2)}${i}`}).join("\n");return`{
${n}
${" ".repeat(t-2)}}${e}`}if("array"===r.type&&r.items){let e=r.description?` // ${r.description}`:"";return`array[
${" ".repeat(t)}${this._schemaToInstruction(r.items,t+2)}
${" ".repeat(t-2)}] ${e}`}let i=n?" (nullable)":"",a=r.description?` // ${r.description}`:"";return`${e}${a}${i}`}if("anyOf"in r)return r.anyOf.map(e=>this._schemaToInstruction(e,t)).join(`
${" ".repeat(t-2)}`);throw Error("unsupported schema type")}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){return new this(y.z.object(Object.fromEntries(Object.entries(e).map(([e,t])=>[e,y.z.string().describe(t)]))))}},b=class extends a.mJ{structuredInputParser;constructor({inputSchema:e}){super(...arguments),this.structuredInputParser=new _(e)}async parse(e){let t;try{t=await this.structuredInputParser.parse(e)}catch(t){throw new a.CC(`Failed to parse. Text: "${e}". Error: ${t}`,e)}return this.outputProcessor(t)}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}},w=r(44182);r(913);let k=function(){let e={};e.parser=function(e,t){return new r(e,t)},e.SAXParser=r,e.SAXStream=u,e.createStream=l,e.MAX_BUFFER_LENGTH=65536;let t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function r(t,n){if(!(this instanceof r))return new r(t,n);var a=this;i(a),a.q=a.c="",a.bufferCheckPosition=e.MAX_BUFFER_LENGTH,a.opt=n||{},a.opt.lowercase=a.opt.lowercase||a.opt.lowercasetags,a.looseCase=a.opt.lowercase?"toLowerCase":"toUpperCase",a.tags=[],a.closed=a.closedRoot=a.sawRoot=!1,a.tag=a.error=null,a.strict=!!t,a.noscript=!!(t||a.opt.noscript),a.state=$.BEGIN,a.strictEntities=a.opt.strictEntities,a.ENTITIES=a.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),a.attribList=[],a.opt.xmlns&&(a.ns=Object.create(f)),a.trackPosition=!1!==a.opt.position,a.trackPosition&&(a.position=a.line=a.column=0),I(a,"onready")}function n(r){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),i=0,a=0,s=t.length;a<s;a++){var o=r[t[a]].length;if(o>n)switch(t[a]){case"textNode":A(r);break;case"cdata":E(r,"oncdata",r.cdata),r.cdata="";break;case"script":E(r,"onscript",r.script),r.script="";break;default:T(r,"Max buffer length exceeded: "+t[a])}i=Math.max(i,o)}r.bufferCheckPosition=e.MAX_BUFFER_LENGTH-i+r.position}function i(e){for(var r=0,n=t.length;r<n;r++)e[t[r]]=""}function a(e){A(e),""!==e.cdata&&(E(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(E(e,"onscript",e.script),e.script="")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),r.prototype={end:function(){N(this)},write:U,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var s=ReadableStream;s||(s=function(){});var o=e.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function l(e,t){return new u(e,t)}function u(e,t){if(!(this instanceof u))return new u(e,t);s.apply(this),this._parser=new r(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,o.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(s.prototype,{constructor:{value:u}}),u.prototype.write=function(e){return this._parser.write(e.toString()),this.emit("data",e),!0},u.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},u.prototype.on=function(e,t){var r=this;return r._parser["on"+e]||-1===o.indexOf(e)||(r._parser["on"+e]=function(){var t=1==arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),s.prototype.on.call(r,e,t)};var c="[CDATA[",d="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/2000/xmlns/",f={xml:p,xmlns:h},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function _(e){return" "===e||"\n"===e||"\r"===e||"	"===e}function b(e){return'"'===e||"'"===e}function w(e){return">"===e||_(e)}function k(e,t){return e.test(t)}function x(e,t){return!k(e,t)}var $=0;for(var S in e.STATE={BEGIN:$++,BEGIN_WHITESPACE:$++,TEXT:$++,TEXT_ENTITY:$++,OPEN_WAKA:$++,SGML_DECL:$++,SGML_DECL_QUOTED:$++,DOCTYPE:$++,DOCTYPE_QUOTED:$++,DOCTYPE_DTD:$++,DOCTYPE_DTD_QUOTED:$++,COMMENT_STARTING:$++,COMMENT:$++,COMMENT_ENDING:$++,COMMENT_ENDED:$++,CDATA:$++,CDATA_ENDING:$++,CDATA_ENDING_2:$++,PROC_INST:$++,PROC_INST_BODY:$++,PROC_INST_ENDING:$++,OPEN_TAG:$++,OPEN_TAG_SLASH:$++,ATTRIB:$++,ATTRIB_NAME:$++,ATTRIB_NAME_SAW_WHITE:$++,ATTRIB_VALUE:$++,ATTRIB_VALUE_QUOTED:$++,ATTRIB_VALUE_CLOSED:$++,ATTRIB_VALUE_UNQUOTED:$++,ATTRIB_VALUE_ENTITY_Q:$++,ATTRIB_VALUE_ENTITY_U:$++,CLOSE_TAG:$++,CLOSE_TAG_SAW_WHITE:$++,SCRIPT:$++,SCRIPT_ENDING:$++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var r=e.ENTITIES[t],n="number"==typeof r?String.fromCharCode(r):r;e.ENTITIES[t]=n}),e.STATE)e.STATE[e.STATE[S]]=S;function I(e,t,r){e[t]&&e[t](r)}function E(e,t,r){e.textNode&&A(e),I(e,t,r)}function A(e){e.textNode=O(e.opt,e.textNode),e.textNode&&I(e,"ontext",e.textNode),e.textNode=""}function O(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function T(e,t){return A(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),e.error=t=Error(t),I(e,"onerror",t),e}function N(e){return e.sawRoot&&!e.closedRoot&&C(e,"Unclosed root tag"),e.state!==$.BEGIN&&e.state!==$.BEGIN_WHITESPACE&&e.state!==$.TEXT&&T(e,"Unexpected end"),A(e),e.c="",e.closed=!0,I(e,"onend"),r.call(e,e.strict,e.opt),e}function C(e,t){if("object"!=typeof e||!(e instanceof r))throw Error("bad call to strictFail");e.strict&&T(e,t)}function P(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,E(e,"onopentagstart",r)}function j(e,t){var r=0>e.indexOf(":")?["",e]:e.split(":"),n=r[0],i=r[1];return t&&"xmlns"===e&&(n="xmlns",i=""),{prefix:n,local:i}}function z(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName)){e.attribName=e.attribValue="";return}if(e.opt.xmlns){var t=j(e.attribName,!0),r=t.prefix,n=t.local;if("xmlns"===r)if("xml"===n&&e.attribValue!==p)C(e,"xml: prefix must be bound to "+p+"\nActual: "+e.attribValue);else if("xmlns"===n&&e.attribValue!==h)C(e,"xmlns: prefix must be bound to "+h+"\nActual: "+e.attribValue);else{var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[n]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,E(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function R(e,t){if(e.opt.xmlns){var r=e.tag,n=j(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(C(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix);var i=e.tags[e.tags.length-1]||e;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach(function(t){E(e,"onopennamespace",{prefix:t,uri:r.ns[t]})});for(var a=0,s=e.attribList.length;a<s;a++){var o=e.attribList[a],l=o[0],u=o[1],c=j(l,!0),d=c.prefix,p=c.local,h=""===d?"":r.ns[d]||"",f={name:l,value:u,prefix:d,local:p,uri:h};d&&"xmlns"!==d&&!h&&(C(e,"Unbound namespace prefix: "+JSON.stringify(d)),f.uri=d),e.tag.attributes[l]=f,E(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),E(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=$.TEXT:e.state=$.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function M(e){if(!e.tagName){C(e,"Weird empty close tag."),e.textNode+="</>",e.state=$.TEXT;return}if(e.script){if("script"!==e.tagName){e.script+="</"+e.tagName+">",e.tagName="",e.state=$.SCRIPT;return}E(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--;)if(e.tags[t].name!==n)C(e,"Unexpected close tag");else break;if(t<0){C(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",e.state=$.TEXT;return}e.tagName=r;for(var i=e.tags.length;i-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,E(e,"onclosetag",e.tagName);var s={};for(var o in a.ns)s[o]=a.ns[o];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==l.ns&&Object.keys(a.ns).forEach(function(t){var r=a.ns[t];E(e,"onclosenamespace",{prefix:t,uri:r})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=$.TEXT}function L(e){var t,r=e.entity,n=r.toLowerCase(),i="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&(i="x"===r.charAt(1)?(t=parseInt(r=r.slice(2),16)).toString(16):(t=parseInt(r=r.slice(1),10)).toString(10)),r=r.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==r)?(C(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t)}function Z(e,t){"<"===t?(e.state=$.OPEN_WAKA,e.startTagPosition=e.position):_(t)||(C(e,"Non-whitespace before first tag."),e.textNode=t,e.state=$.TEXT)}function D(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}function U(e){var t=this;if(this.error)throw this.error;if(t.closed)return T(t,"Cannot write after close. Assign an onready handler.");if(null===e)return N(t);"object"==typeof e&&(e=e.toString());for(var r=0,i="";t.c=i=D(e,r++),i;)switch(t.trackPosition&&(t.position++,"\n"===i?(t.line++,t.column=0):t.column++),t.state){case $.BEGIN:if(t.state=$.BEGIN_WHITESPACE,"\uFEFF"===i)continue;Z(t,i);continue;case $.BEGIN_WHITESPACE:Z(t,i);continue;case $.TEXT:if(t.sawRoot&&!t.closedRoot){for(var a=r-1;i&&"<"!==i&&"&"!==i;)(i=D(e,r++))&&t.trackPosition&&(t.position++,"\n"===i?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(a,r-1)}"<"!==i||t.sawRoot&&t.closedRoot&&!t.strict?(_(i)||t.sawRoot&&!t.closedRoot||C(t,"Text data outside of root node."),"&"===i?t.state=$.TEXT_ENTITY:t.textNode+=i):(t.state=$.OPEN_WAKA,t.startTagPosition=t.position);continue;case $.SCRIPT:"<"===i?t.state=$.SCRIPT_ENDING:t.script+=i;continue;case $.SCRIPT_ENDING:"/"===i?t.state=$.CLOSE_TAG:(t.script+="<"+i,t.state=$.SCRIPT);continue;case $.OPEN_WAKA:"!"===i?(t.state=$.SGML_DECL,t.sgmlDecl=""):_(i)||(k(m,i)?(t.state=$.OPEN_TAG,t.tagName=i):"/"===i?(t.state=$.CLOSE_TAG,t.tagName=""):"?"===i?(t.state=$.PROC_INST,t.procInstName=t.procInstBody=""):(C(t,"Unencoded <"),t.startTagPosition+1<t.position&&(i=Array(t.position-t.startTagPosition).join(" ")+i),t.textNode+="<"+i,t.state=$.TEXT));continue;case $.SGML_DECL:(t.sgmlDecl+i).toUpperCase()===c?(E(t,"onopencdata"),t.state=$.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+i==="--"?(t.state=$.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+i).toUpperCase()===d?(t.state=$.DOCTYPE,(t.doctype||t.sawRoot)&&C(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===i?(E(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=$.TEXT):(b(i)&&(t.state=$.SGML_DECL_QUOTED),t.sgmlDecl+=i);continue;case $.SGML_DECL_QUOTED:i===t.q&&(t.state=$.SGML_DECL,t.q=""),t.sgmlDecl+=i;continue;case $.DOCTYPE:">"===i?(t.state=$.TEXT,E(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=i,"["===i?t.state=$.DOCTYPE_DTD:b(i)&&(t.state=$.DOCTYPE_QUOTED,t.q=i));continue;case $.DOCTYPE_QUOTED:t.doctype+=i,i===t.q&&(t.q="",t.state=$.DOCTYPE);continue;case $.DOCTYPE_DTD:t.doctype+=i,"]"===i?t.state=$.DOCTYPE:b(i)&&(t.state=$.DOCTYPE_DTD_QUOTED,t.q=i);continue;case $.DOCTYPE_DTD_QUOTED:t.doctype+=i,i===t.q&&(t.state=$.DOCTYPE_DTD,t.q="");continue;case $.COMMENT:"-"===i?t.state=$.COMMENT_ENDING:t.comment+=i;continue;case $.COMMENT_ENDING:"-"===i?(t.state=$.COMMENT_ENDED,t.comment=O(t.opt,t.comment),t.comment&&E(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+i,t.state=$.COMMENT);continue;case $.COMMENT_ENDED:">"!==i?(C(t,"Malformed comment"),t.comment+="--"+i,t.state=$.COMMENT):t.state=$.TEXT;continue;case $.CDATA:"]"===i?t.state=$.CDATA_ENDING:t.cdata+=i;continue;case $.CDATA_ENDING:"]"===i?t.state=$.CDATA_ENDING_2:(t.cdata+="]"+i,t.state=$.CDATA);continue;case $.CDATA_ENDING_2:">"===i?(t.cdata&&E(t,"oncdata",t.cdata),E(t,"onclosecdata"),t.cdata="",t.state=$.TEXT):"]"===i?t.cdata+="]":(t.cdata+="]]"+i,t.state=$.CDATA);continue;case $.PROC_INST:"?"===i?t.state=$.PROC_INST_ENDING:_(i)?t.state=$.PROC_INST_BODY:t.procInstName+=i;continue;case $.PROC_INST_BODY:!t.procInstBody&&_(i)||("?"===i?t.state=$.PROC_INST_ENDING:t.procInstBody+=i);continue;case $.PROC_INST_ENDING:">"===i?(E(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=$.TEXT):(t.procInstBody+="?"+i,t.state=$.PROC_INST_BODY);continue;case $.OPEN_TAG:k(g,i)?t.tagName+=i:(P(t),">"===i?R(t):"/"===i?t.state=$.OPEN_TAG_SLASH:(_(i)||C(t,"Invalid character in tag name"),t.state=$.ATTRIB));continue;case $.OPEN_TAG_SLASH:">"===i?(R(t,!0),M(t)):(C(t,"Forward-slash in opening tag not followed by >"),t.state=$.ATTRIB);continue;case $.ATTRIB:_(i)||(">"===i?R(t):"/"===i?t.state=$.OPEN_TAG_SLASH:k(m,i)?(t.attribName=i,t.attribValue="",t.state=$.ATTRIB_NAME):C(t,"Invalid attribute name"));continue;case $.ATTRIB_NAME:"="===i?t.state=$.ATTRIB_VALUE:">"===i?(C(t,"Attribute without value"),t.attribValue=t.attribName,z(t),R(t)):_(i)?t.state=$.ATTRIB_NAME_SAW_WHITE:k(g,i)?t.attribName+=i:C(t,"Invalid attribute name");continue;case $.ATTRIB_NAME_SAW_WHITE:if("="===i)t.state=$.ATTRIB_VALUE;else{if(_(i))continue;C(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",E(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===i?R(t):k(m,i)?(t.attribName=i,t.state=$.ATTRIB_NAME):(C(t,"Invalid attribute name"),t.state=$.ATTRIB)}continue;case $.ATTRIB_VALUE:_(i)||(b(i)?(t.q=i,t.state=$.ATTRIB_VALUE_QUOTED):(C(t,"Unquoted attribute value"),t.state=$.ATTRIB_VALUE_UNQUOTED,t.attribValue=i));continue;case $.ATTRIB_VALUE_QUOTED:if(i!==t.q){"&"===i?t.state=$.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=i;continue}z(t),t.q="",t.state=$.ATTRIB_VALUE_CLOSED;continue;case $.ATTRIB_VALUE_CLOSED:_(i)?t.state=$.ATTRIB:">"===i?R(t):"/"===i?t.state=$.OPEN_TAG_SLASH:k(m,i)?(C(t,"No whitespace between attributes"),t.attribName=i,t.attribValue="",t.state=$.ATTRIB_NAME):C(t,"Invalid attribute name");continue;case $.ATTRIB_VALUE_UNQUOTED:if(!w(i)){"&"===i?t.state=$.ATTRIB_VALUE_ENTITY_U:t.attribValue+=i;continue}z(t),">"===i?R(t):t.state=$.ATTRIB;continue;case $.CLOSE_TAG:t.tagName?">"===i?M(t):k(g,i)?t.tagName+=i:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=$.SCRIPT):(_(i)||C(t,"Invalid tagname in closing tag"),t.state=$.CLOSE_TAG_SAW_WHITE):_(i)||(x(m,i)?t.script?(t.script+="</"+i,t.state=$.SCRIPT):C(t,"Invalid tagname in closing tag."):t.tagName=i);continue;case $.CLOSE_TAG_SAW_WHITE:if(_(i))continue;">"===i?M(t):C(t,"Invalid characters in closing tag");continue;case $.TEXT_ENTITY:case $.ATTRIB_VALUE_ENTITY_Q:case $.ATTRIB_VALUE_ENTITY_U:switch(t.state){case $.TEXT_ENTITY:s=$.TEXT,o="textNode";break;case $.ATTRIB_VALUE_ENTITY_Q:s=$.ATTRIB_VALUE_QUOTED,o="attribValue";break;case $.ATTRIB_VALUE_ENTITY_U:s=$.ATTRIB_VALUE_UNQUOTED,o="attribValue"}if(";"===i)if(t.opt.unparsedEntities){var s,o,l=L(t);t.entity="",t.state=s,t.write(l)}else t[o]+=L(t),t.entity="",t.state=s;else k(t.entity.length?v:y,i)?t.entity+=i:(C(t,"Invalid character in entity name"),t[o]+="&"+t.entity+i,t.entity="",t.state=s);continue;default:throw Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&n(t),t}return $=e.STATE,String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,r=function(){var r,n,i=16384,a=[],s=-1,o=arguments.length;if(!o)return"";for(var l="";++s<o;){var u=Number(arguments[s]);if(!isFinite(u)||u<0||u>1114111||t(u)!==u)throw RangeError("Invalid code point: "+u);u<=65535?a.push(u):(u-=65536,r=(u>>10)+55296,n=u%1024+56320,a.push(r,n)),(s+1===o||a.length>i)&&(l+=e.apply(null,a),a.length=0)}return l};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:r,configurable:!0,writable:!0}):String.fromCodePoint=r}(),e}(),x=`The output should be formatted as a XML file.
1. Output should conform to the tags below. 
2. If tags are not given, make them on your own.
3. Remember to always open and close all the tags.

As an example, for the tags ["foo", "bar", "baz"]:
1. String "<foo>
   <bar>
      <baz></baz>
   </bar>
</foo>" is a well-formatted instance of the schema. 
2. String "<foo>
   <bar>
   </foo>" is a badly-formatted instance.
3. String "<foo>
   <tag>
   </tag>
</foo>" is a badly-formatted instance.

Here are the output tags:
\`\`\`
{tags}
\`\`\``;var $=class extends s.T{tags;constructor(e){super(e),this.tags=e?.tags}static lc_name(){return"XMLOutputParser"}lc_namespace=["langchain_core","output_parsers"];lc_serializable=!0;_diff(e,t){if(t)return e?(0,w.U)(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return E(e[0].text)}async parse(e){return E(e)}getFormatInstructions(){return this.tags&&this.tags.length>0?x.replace("{tags}",this.tags?.join(", ")??""):x}};let S=e=>e.split("\n").map(e=>e.replace(/^\s+/,"")).join("\n").trim(),I=e=>{if(0===Object.keys(e).length)return{};let t={};return e.children.length>0?t[e.name]=e.children.map(I):t[e.name]=e.text??void 0,t};function E(e){let t=S(e),r=k.parser(!0),n={},i=[];r.onopentag=e=>{let t={name:e.name,attributes:e.attributes,children:[],text:"",isSelfClosing:e.isSelfClosing};i.length>0?i[i.length-1].children.push(t):n=t,e.isSelfClosing||i.push(t)},r.onclosetag=()=>{if(i.length>0){let e=i.pop();0===i.length&&e&&(n=e)}},r.ontext=e=>{if(i.length>0){let t=i[i.length-1];t.text+=e}},r.onattribute=e=>{i.length>0&&(i[i.length-1].attributes[e.name]=e.value)};let a=/```(xml)?(.*)```/s.exec(t),s=a?a[2]:t;return r.write(s).close(),n&&"?xml"===n.name&&(n=n.children[0]),I(n)}var A={};(0,n.V)(A,{AsymmetricStructuredOutputParser:()=>b,BaseCumulativeTransformOutputParser:()=>s.T,BaseLLMOutputParser:()=>a.vd,BaseOutputParser:()=>a.mJ,BaseTransformOutputParser:()=>s.k,BytesOutputParser:()=>l,CommaSeparatedListOutputParser:()=>c,CustomListOutputParser:()=>d,JsonMarkdownStructuredOutputParser:()=>_,JsonOutputParser:()=>o.h,ListOutputParser:()=>u,MarkdownListOutputParser:()=>h,NumberedListOutputParser:()=>p,OutputParserException:()=>a.CC,StringOutputParser:()=>f,StructuredOutputParser:()=>v,XMLOutputParser:()=>$,XML_FORMAT_INSTRUCTIONS:()=>x,parseJsonMarkdown:()=>i.D,parsePartialJson:()=>i.d,parseXMLMarkdown:()=>E})},84123:(e,t,r)=>{"use strict";e=r.nmd(e);let n=10,i=(e=0)=>t=>`\u001B[${38+e};5;${t}m`,a=(e=0)=>(t,r,n)=>`\u001B[${38+e};2;${t};${r};${n}m`;Object.defineProperty(e,"exports",{enumerable:!0,get:function(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};for(let[r,n]of(t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright,Object.entries(t))){for(let[r,i]of Object.entries(n))t[r]={open:`\u001B[${i[0]}m`,close:`\u001B[${i[1]}m`},n[r]=t[r],e.set(i[0],i[1]);Object.defineProperty(t,r,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1b[39m",t.bgColor.close="\x1b[49m",t.color.ansi256=i(),t.color.ansi16m=a(),t.bgColor.ansi256=i(n),t.bgColor.ansi16m=a(n),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:e=>{let t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:r}=t.groups;3===r.length&&(r=r.split("").map(e=>e+e).join(""));let n=Number.parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1}}),t}})},84450:(e,t,r)=>{"use strict";let n=r(27681),i=r(64056),{ANY:a}=i,s=r(90008),o=r(98566),l=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;e:for(let n of e.set){for(let e of t.set){let t=d(n,e,r);if(i=i||null!==t,t)continue e}if(i)return!1}return!0},u=[new i(">=0.0.0-0")],c=[new i(">=0.0.0")],d=(e,t,r)=>{let n,i,l,d,f,m,g;if(e===t)return!0;if(1===e.length&&e[0].semver===a)if(1===t.length&&t[0].semver===a)return!0;else e=r.includePrerelease?u:c;if(1===t.length&&t[0].semver===a)if(r.includePrerelease)return!0;else t=c;let y=new Set;for(let t of e)">"===t.operator||">="===t.operator?n=p(n,t,r):"<"===t.operator||"<="===t.operator?i=h(i,t,r):y.add(t.semver);if(y.size>1)return null;if(n&&i&&((l=o(n.semver,i.semver,r))>0||0===l&&(">="!==n.operator||"<="!==i.operator)))return null;for(let e of y){if(n&&!s(e,String(n),r)||i&&!s(e,String(i),r))return null;for(let n of t)if(!s(e,String(n),r))return!1;return!0}let v=!!i&&!r.includePrerelease&&!!i.semver.prerelease.length&&i.semver,_=!!n&&!r.includePrerelease&&!!n.semver.prerelease.length&&n.semver;for(let e of(v&&1===v.prerelease.length&&"<"===i.operator&&0===v.prerelease[0]&&(v=!1),t)){if(g=g||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,n){if(_&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===_.major&&e.semver.minor===_.minor&&e.semver.patch===_.patch&&(_=!1),">"===e.operator||">="===e.operator){if((d=p(n,e,r))===e&&d!==n)return!1}else if(">="===n.operator&&!s(n.semver,String(e),r))return!1}if(i){if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),"<"===e.operator||"<="===e.operator){if((f=h(i,e,r))===e&&f!==i)return!1}else if("<="===i.operator&&!s(i.semver,String(e),r))return!1}if(!e.operator&&(i||n)&&0!==l)return!1}return(!n||!m||!!i||0===l)&&(!i||!g||!!n||0===l)&&!_&&!v&&!0},p=(e,t,r)=>{if(!e)return t;let n=o(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,r)=>{if(!e)return t;let n=o(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=l},84598:(e,t,r)=>{"use strict";r.d(t,{k:()=>a});for(var n=[],i=0;i<256;++i)n.push((i+256).toString(16).slice(1));function a(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}},84945:(e,t,r)=>{"use strict";r.d(t,{BN:()=>f,ER:()=>m,Ej:()=>y,UE:()=>_,UU:()=>g,cY:()=>h,jD:()=>v,we:()=>d});var n=r(22475),i=r(12115),a=r(47650),s="undefined"!=typeof document?i.useLayoutEffect:i.useEffect;function o(e,t){let r,n,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!o(e[n],t[n]))return!1;return!0}if((r=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!({}).hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!=n--;){let r=i[n];if(("_owner"!==r||!e.$$typeof)&&!o(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function l(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function u(e,t){let r=l(e);return Math.round(t*r)/r}function c(e){let t=i.useRef(e);return s(()=>{t.current=e}),t}function d(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:d=[],platform:p,elements:{reference:h,floating:f}={},transform:m=!0,whileElementsMounted:g,open:y}=e,[v,_]=i.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[b,w]=i.useState(d);o(b,d)||w(d);let[k,x]=i.useState(null),[$,S]=i.useState(null),I=i.useCallback(e=>{e!==T.current&&(T.current=e,x(e))},[]),E=i.useCallback(e=>{e!==N.current&&(N.current=e,S(e))},[]),A=h||k,O=f||$,T=i.useRef(null),N=i.useRef(null),C=i.useRef(v),P=null!=g,j=c(g),z=c(p),R=c(y),M=i.useCallback(()=>{if(!T.current||!N.current)return;let e={placement:t,strategy:r,middleware:b};z.current&&(e.platform=z.current),(0,n.rD)(T.current,N.current,e).then(e=>{let t={...e,isPositioned:!1!==R.current};L.current&&!o(C.current,t)&&(C.current=t,a.flushSync(()=>{_(t)}))})},[b,t,r,z,R]);s(()=>{!1===y&&C.current.isPositioned&&(C.current.isPositioned=!1,_(e=>({...e,isPositioned:!1})))},[y]);let L=i.useRef(!1);s(()=>(L.current=!0,()=>{L.current=!1}),[]),s(()=>{if(A&&(T.current=A),O&&(N.current=O),A&&O){if(j.current)return j.current(A,O,M);M()}},[A,O,M,j,P]);let Z=i.useMemo(()=>({reference:T,floating:N,setReference:I,setFloating:E}),[I,E]),D=i.useMemo(()=>({reference:A,floating:O}),[A,O]),U=i.useMemo(()=>{let e={position:r,left:0,top:0};if(!D.floating)return e;let t=u(D.floating,v.x),n=u(D.floating,v.y);return m?{...e,transform:"translate("+t+"px, "+n+"px)",...l(D.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,m,D.floating,v.x,v.y]);return i.useMemo(()=>({...v,update:M,refs:Z,elements:D,floatingStyles:U}),[v,M,Z,D,U])}let p=e=>{function t(e){return({}).hasOwnProperty.call(e,"current")}return{name:"arrow",options:e,fn(r){let{element:i,padding:a}="function"==typeof e?e(r):e;return i&&t(i)?null!=i.current?(0,n.UE)({element:i.current,padding:a}).fn(r):{}:i?(0,n.UE)({element:i,padding:a}).fn(r):{}}}},h=(e,t)=>({...(0,n.cY)(e),options:[e,t]}),f=(e,t)=>({...(0,n.BN)(e),options:[e,t]}),m=(e,t)=>({...(0,n.ER)(e),options:[e,t]}),g=(e,t)=>({...(0,n.UU)(e),options:[e,t]}),y=(e,t)=>({...(0,n.Ej)(e),options:[e,t]}),v=(e,t)=>({...(0,n.jD)(e),options:[e,t]}),_=(e,t)=>({...p(e),options:[e,t]})},85560:e=>{"use strict";let t=/[\p{Lu}]/u,r=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,i=/([\p{Alpha}\p{N}_]|$)/u,a=/[_.\- ]+/,s=RegExp("^"+a.source),o=RegExp(a.source+i.source,"gu"),l=RegExp("\\d+"+i.source,"gu"),u=(e,n,i)=>{let a=!1,s=!1,o=!1;for(let l=0;l<e.length;l++){let u=e[l];a&&t.test(u)?(e=e.slice(0,l)+"-"+e.slice(l),a=!1,o=s,s=!0,l++):s&&o&&r.test(u)?(e=e.slice(0,l-1)+"-"+e.slice(l-1),o=s,s=!1,a=!0):(a=n(u)===u&&i(u)!==u,o=s,s=i(u)===u&&n(u)!==u)}return e},c=(e,t)=>(n.lastIndex=0,e.replace(n,e=>t(e))),d=(e,t)=>(o.lastIndex=0,l.lastIndex=0,e.replace(o,(e,r)=>t(r)).replace(l,e=>t(e))),p=(e,t)=>{if(!("string"==typeof e||Array.isArray(e)))throw TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},0===(e=Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e.length).join("-"):e.trim()).length)return"";let r=!1===t.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t.locale),n=!1===t.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t.locale);return 1===e.length?t.pascalCase?n(e):r(e):(e!==r(e)&&(e=u(e,r,n)),e=e.replace(s,""),e=t.preserveConsecutiveUppercase?c(e,r):r(e),t.pascalCase&&(e=n(e.charAt(0))+e.slice(1)),d(e,n))};e.exports=p,e.exports.default=p},85579:(e,t,r)=>{"use strict";function n(e){return"object"==typeof e&&null!==e&&"type"in e&&"string"==typeof e.type&&"source_type"in e&&("url"===e.source_type||"base64"===e.source_type||"text"===e.source_type||"id"===e.source_type)}function i(e){return n(e)&&"url"===e.source_type&&"url"in e&&"string"==typeof e.url}function a(e){return n(e)&&"base64"===e.source_type&&"data"in e&&"string"==typeof e.data}function s(e){return n(e)&&"text"===e.source_type&&"text"in e&&"string"==typeof e.text}function o(e){return n(e)&&"id"===e.source_type&&"id"in e&&"string"==typeof e.id}function l(e){if(n(e)){if("url"===e.source_type)return{type:"image_url",image_url:{url:e.url}};if("base64"===e.source_type){if(!e.mime_type)throw Error("mime_type key is required for base64 data.");let t=e.mime_type;return{type:"image_url",image_url:{url:`data:${t};base64,${e.data}`}}}}throw Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function u(e){let t=e.split(";")[0].split("/");if(2!==t.length)throw Error(`Invalid mime type: "${e}" - does not match type/subtype format.`);let r=t[0].trim(),n=t[1].trim();if(""===r||""===n)throw Error(`Invalid mime type: "${e}" - type or subtype is empty.`);let i={};for(let t of e.split(";").slice(1)){let r=t.split("=");if(2!==r.length)throw Error(`Invalid parameter syntax in mime type: "${e}".`);let n=r[0].trim(),a=r[1].trim();if(""===n)throw Error(`Invalid parameter syntax in mime type: "${e}".`);i[n]=a}return{type:r,subtype:n,parameters:i}}function c({dataUrl:e,asTypedArray:t=!1}){let r=e.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);if(r)return{mime_type:r[1].toLowerCase(),data:t?Uint8Array.from(atob(r[2]),e=>e.charCodeAt(0)):r[2]}}function d(e,t){if("text"===e.type){if(!t.fromStandardTextBlock)throw Error(`Converter for ${t.providerName} does not implement \`fromStandardTextBlock\` method.`);return t.fromStandardTextBlock(e)}if("image"===e.type){if(!t.fromStandardImageBlock)throw Error(`Converter for ${t.providerName} does not implement \`fromStandardImageBlock\` method.`);return t.fromStandardImageBlock(e)}if("audio"===e.type){if(!t.fromStandardAudioBlock)throw Error(`Converter for ${t.providerName} does not implement \`fromStandardAudioBlock\` method.`);return t.fromStandardAudioBlock(e)}if("file"===e.type){if(!t.fromStandardFileBlock)throw Error(`Converter for ${t.providerName} does not implement \`fromStandardFileBlock\` method.`);return t.fromStandardFileBlock(e)}throw Error(`Unable to convert content block type '${e.type}' to provider-specific format: not recognized.`)}r.d(t,{Ac:()=>s,Ej:()=>u,Fz:()=>n,Q7:()=>c,Vi:()=>l,W:()=>i,cJ:()=>a,oe:()=>o,up:()=>d})},85722:(e,t,r)=>{"use strict";r.d(t,{$W:()=>s,pJ:()=>a,su:()=>n.A});var n=r(76642);let i=n.A;function a(e){i=e}function s(){return i}},86039:(e,t,r)=>{"use strict";let n=r(22814);e.exports=(e,t)=>{let r=n(e,t);return r?r.version:null}},86266:(e,t,r)=>{"use strict";function n(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=r}}r.d(t,{_:()=>a});var i=r(43969);function a(e,t,r){var a=(0,i._)(e,t,"set");return n(e,a,r),r}},86650:(e,t,r)=>{"use strict";let n=r(28483);e.exports=(e,t,r)=>n(e,t,"<",r)},86874:(e,t,r)=>{"use strict";let n=r(78768),i=r(22814),{safeRe:a,t:s}=r(77956);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let n,i=t.includePrerelease?a[s.COERCERTLFULL]:a[s.COERCERTL];for(;(n=i.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),i.lastIndex=n.index+n[1].length+n[2].length;i.lastIndex=-1}else r=e.match(t.includePrerelease?a[s.COERCEFULL]:a[s.COERCE]);if(null===r)return null;let o=r[2],l=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return i(`${o}.${l}.${u}${c}${d}`,t)}},86985:(e,t,r)=>{"use strict";r.d(t,{$X:()=>U,$k:()=>B,A:()=>L,A6:()=>$,BU:()=>p,C0:()=>v,CN:()=>P,CX:()=>F,Cv:()=>w,Df:()=>J,Ec:()=>T,Fl:()=>y,GC:()=>j,H1:()=>k,In:()=>d,Kj:()=>b,NV:()=>g,NX:()=>m,Q9:()=>Z,RH:()=>f,SW:()=>s,Tr:()=>V,Wg:()=>o,Y8:()=>u,Yv:()=>_,aw:()=>x,bl:()=>W,bq:()=>S,cR:()=>R,cY:()=>O,dO:()=>l,fg:()=>c,fs:()=>D,iC:()=>N,i_:()=>C,jq:()=>E,mh:()=>M,vn:()=>h,xi:()=>I,yq:()=>z,zH:()=>A});var n=r(42299),i=r(64845);let a={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},s=(e,t,r,n)=>{let i=r;i.type="string";let{minimum:s,maximum:o,format:l,patterns:u,contentEncoding:c}=e._zod.bag;if("number"==typeof s&&(i.minLength=s),"number"==typeof o&&(i.maxLength=o),l&&(i.format=a[l]??l,""===i.format&&delete i.format,"time"===l&&delete i.format),c&&(i.contentEncoding=c),u&&u.size>0){let e=[...u];1===e.length?i.pattern=e[0].source:e.length>1&&(i.allOf=[...e.map(e=>({..."draft-07"===t.target||"draft-04"===t.target||"openapi-3.0"===t.target?{type:"string"}:{},pattern:e.source}))])}},o=(e,t,r,n)=>{let i=r,{minimum:a,maximum:s,format:o,multipleOf:l,exclusiveMaximum:u,exclusiveMinimum:c}=e._zod.bag;"string"==typeof o&&o.includes("int")?i.type="integer":i.type="number","number"==typeof c&&("draft-04"===t.target||"openapi-3.0"===t.target?(i.minimum=c,i.exclusiveMinimum=!0):i.exclusiveMinimum=c),"number"==typeof a&&(i.minimum=a,"number"==typeof c&&"draft-04"!==t.target&&(c>=a?delete i.minimum:delete i.exclusiveMinimum)),"number"==typeof u&&("draft-04"===t.target||"openapi-3.0"===t.target?(i.maximum=u,i.exclusiveMaximum=!0):i.exclusiveMaximum=u),"number"==typeof s&&(i.maximum=s,"number"==typeof u&&"draft-04"!==t.target&&(u<=s?delete i.maximum:delete i.exclusiveMaximum)),"number"==typeof l&&(i.multipleOf=l)},l=(e,t,r,n)=>{r.type="boolean"},u=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema")},c=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema")},d=(e,t,r,n)=>{"openapi-3.0"===t.target?(r.type="string",r.nullable=!0,r.enum=[null]):r.type="null"},p=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema")},h=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Void cannot be represented in JSON Schema")},f=(e,t,r,n)=>{r.not={}},m=(e,t,r,n)=>{},g=(e,t,r,n)=>{},y=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Date cannot be represented in JSON Schema")},v=(e,t,r,n)=>{let a=e._zod.def,s=(0,i.getEnumValues)(a.entries);s.every(e=>"number"==typeof e)&&(r.type="number"),s.every(e=>"string"==typeof e)&&(r.type="string"),r.enum=s},_=(e,t,r,n)=>{let i=e._zod.def,a=[];for(let e of i.values)if(void 0===e){if("throw"===t.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof e)if("throw"===t.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else a.push(Number(e));else a.push(e);if(0===a.length);else if(1===a.length){let e=a[0];r.type=null===e?"null":typeof e,"draft-04"===t.target||"openapi-3.0"===t.target?r.enum=[e]:r.const=e}else a.every(e=>"number"==typeof e)&&(r.type="number"),a.every(e=>"string"==typeof e)&&(r.type="string"),a.every(e=>"boolean"==typeof e)&&(r.type="boolean"),a.every(e=>null===e)&&(r.type="null"),r.enum=a},b=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("NaN cannot be represented in JSON Schema")},w=(e,t,r,n)=>{let i=r,a=e._zod.pattern;if(!a)throw Error("Pattern not found in template literal");i.type="string",i.pattern=a.source},k=(e,t,r,n)=>{let i=r,a={type:"string",format:"binary",contentEncoding:"binary"},{minimum:s,maximum:o,mime:l}=e._zod.bag;void 0!==s&&(a.minLength=s),void 0!==o&&(a.maxLength=o),l?1===l.length?(a.contentMediaType=l[0],Object.assign(i,a)):(Object.assign(i,a),i.anyOf=l.map(e=>({contentMediaType:e}))):Object.assign(i,a)},x=(e,t,r,n)=>{r.type="boolean"},$=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")},S=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")},I=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema")},E=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Map cannot be represented in JSON Schema")},A=(e,t,r,n)=>{if("throw"===t.unrepresentable)throw Error("Set cannot be represented in JSON Schema")},O=(e,t,r,i)=>{let a=r,s=e._zod.def,{minimum:o,maximum:l}=e._zod.bag;"number"==typeof o&&(a.minItems=o),"number"==typeof l&&(a.maxItems=l),a.type="array",a.items=(0,n.eh)(s.element,t,{...i,path:[...i.path,"items"]})},T=(e,t,r,i)=>{let a=r,s=e._zod.def;a.type="object",a.properties={};let o=s.shape;for(let e in o)a.properties[e]=(0,n.eh)(o[e],t,{...i,path:[...i.path,"properties",e]});let l=new Set([...new Set(Object.keys(o))].filter(e=>{let r=s.shape[e]._zod;return"input"===t.io?void 0===r.optin:void 0===r.optout}));l.size>0&&(a.required=Array.from(l)),s.catchall?._zod.def.type==="never"?a.additionalProperties=!1:s.catchall?s.catchall&&(a.additionalProperties=(0,n.eh)(s.catchall,t,{...i,path:[...i.path,"additionalProperties"]})):"output"===t.io&&(a.additionalProperties=!1)},N=(e,t,r,i)=>{let a=e._zod.def,s=!1===a.inclusive,o=a.options.map((e,r)=>(0,n.eh)(e,t,{...i,path:[...i.path,s?"oneOf":"anyOf",r]}));s?r.oneOf=o:r.anyOf=o},C=(e,t,r,i)=>{let a=e._zod.def,s=(0,n.eh)(a.left,t,{...i,path:[...i.path,"allOf",0]}),o=(0,n.eh)(a.right,t,{...i,path:[...i.path,"allOf",1]}),l=e=>"allOf"in e&&1===Object.keys(e).length;r.allOf=[...l(s)?s.allOf:[s],...l(o)?o.allOf:[o]]},P=(e,t,r,i)=>{let a=r,s=e._zod.def;a.type="array";let o="draft-2020-12"===t.target?"prefixItems":"items",l="draft-2020-12"===t.target||"openapi-3.0"===t.target?"items":"additionalItems",u=s.items.map((e,r)=>(0,n.eh)(e,t,{...i,path:[...i.path,o,r]})),c=s.rest?(0,n.eh)(s.rest,t,{...i,path:[...i.path,l,..."openapi-3.0"===t.target?[s.items.length]:[]]}):null;"draft-2020-12"===t.target?(a.prefixItems=u,c&&(a.items=c)):"openapi-3.0"===t.target?(a.items={anyOf:u},c&&a.items.anyOf.push(c),a.minItems=u.length,c||(a.maxItems=u.length)):(a.items=u,c&&(a.additionalItems=c));let{minimum:d,maximum:p}=e._zod.bag;"number"==typeof d&&(a.minItems=d),"number"==typeof p&&(a.maxItems=p)},j=(e,t,r,i)=>{let a=r,s=e._zod.def;a.type="object";let o=s.keyType,l=o._zod.bag,u=l?.patterns;if("loose"===s.mode&&u&&u.size>0){let e=(0,n.eh)(s.valueType,t,{...i,path:[...i.path,"patternProperties","*"]});for(let t of(a.patternProperties={},u))a.patternProperties[t.source]=e}else("draft-07"===t.target||"draft-2020-12"===t.target)&&(a.propertyNames=(0,n.eh)(s.keyType,t,{...i,path:[...i.path,"propertyNames"]})),a.additionalProperties=(0,n.eh)(s.valueType,t,{...i,path:[...i.path,"additionalProperties"]});let c=o._zod.values;if(c){let e=[...c].filter(e=>"string"==typeof e||"number"==typeof e);e.length>0&&(a.required=e)}},z=(e,t,r,i)=>{let a=e._zod.def,s=(0,n.eh)(a.innerType,t,i),o=t.seen.get(e);"openapi-3.0"===t.target?(o.ref=a.innerType,r.nullable=!0):r.anyOf=[s,{type:"null"}]},R=(e,t,r,i)=>{let a=e._zod.def;(0,n.eh)(a.innerType,t,i),t.seen.get(e).ref=a.innerType},M=(e,t,r,i)=>{let a=e._zod.def;(0,n.eh)(a.innerType,t,i),t.seen.get(e).ref=a.innerType,r.default=JSON.parse(JSON.stringify(a.defaultValue))},L=(e,t,r,i)=>{let a=e._zod.def;(0,n.eh)(a.innerType,t,i),t.seen.get(e).ref=a.innerType,"input"===t.io&&(r._prefault=JSON.parse(JSON.stringify(a.defaultValue)))},Z=(e,t,r,i)=>{let a,s=e._zod.def;(0,n.eh)(s.innerType,t,i),t.seen.get(e).ref=s.innerType;try{a=s.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}r.default=a},D=(e,t,r,i)=>{let a=e._zod.def,s="input"===t.io?"transform"===a.in._zod.def.type?a.out:a.in:a.out;(0,n.eh)(s,t,i),t.seen.get(e).ref=s},U=(e,t,r,i)=>{let a=e._zod.def;(0,n.eh)(a.innerType,t,i),t.seen.get(e).ref=a.innerType,r.readOnly=!0},F=(e,t,r,i)=>{let a=e._zod.def;(0,n.eh)(a.innerType,t,i),t.seen.get(e).ref=a.innerType},B=(e,t,r,i)=>{let a=e._zod.def;(0,n.eh)(a.innerType,t,i),t.seen.get(e).ref=a.innerType},V=(e,t,r,i)=>{let a=e._zod.innerType;(0,n.eh)(a,t,i),t.seen.get(e).ref=a},J={string:s,number:o,boolean:l,bigint:u,symbol:c,null:d,undefined:p,void:h,never:f,any:m,unknown:g,date:y,enum:v,literal:_,nan:b,template_literal:w,file:k,success:x,custom:$,function:S,transform:I,map:E,set:A,array:O,object:T,union:N,intersection:C,tuple:P,record:j,nullable:z,nonoptional:R,default:M,prefault:L,catch:Z,pipe:D,readonly:U,promise:F,optional:B,lazy:V};function W(e,t){if("_idmap"in e){let r=e,i=(0,n.az)({...t,processors:J}),a={};for(let e of r._idmap.entries()){let[t,r]=e;(0,n.eh)(r,i)}let s={};for(let e of(i.external={registry:r,uri:t?.uri,defs:a},r._idmap.entries())){let[t,r]=e;(0,n.Wb)(i,r),s[t]=(0,n.jE)(i,r)}return Object.keys(a).length>0&&(s.__shared={["draft-2020-12"===i.target?"$defs":"definitions"]:a}),{schemas:s}}let r=(0,n.az)({...t,processors:J});return(0,n.eh)(e,r),(0,n.Wb)(r,e),(0,n.jE)(r,e)}},87150:(e,t,r)=>{"use strict";r.d(t,{DS:()=>p,Tr:()=>d,bO:()=>l,gI:()=>u,xK:()=>o,xW:()=>c});var n=r(67893),i=r(51628);r(73897);var a=r(92173),s=r(67146),o={};(0,n.V)(o,{AsyncGeneratorWithSetup:()=>d,IterableReadableStream:()=>l,atee:()=>u,concat:()=>c,pipeGeneratorWithSetup:()=>p});var l=class e extends ReadableStream{reader;ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{let e=await this.reader.read();if(e.done)return this.reader.releaseLock(),{done:!0,value:void 0};return{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){let e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){let e=this.reader.cancel();this.reader.releaseLock(),await e}throw e}[Symbol.asyncIterator](){return this}async [Symbol.asyncDispose](){await this.return()}static fromReadableStream(t){let r=t.getReader();return new e({start(e){return t();function t(){return r.read().then(({done:r,value:n})=>r?void e.close():(e.enqueue(n),t()))}},cancel(){r.releaseLock()}})}static fromAsyncGenerator(t){return new e({async pull(e){let{value:r,done:n}=await t.next();n&&e.close(),e.enqueue(r)},async cancel(e){await t.return(e)}})}};function u(e,t=2){let r=Array.from({length:t},()=>[]);return r.map(async function*(t){for(;;)if(0===t.length){let t=await e.next();for(let e of r)e.push(t)}else{if(t[0].done)return;yield t.shift().value}})}function c(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.concat(t);if("string"==typeof e&&"string"==typeof t)return e+t;if("number"==typeof e&&"number"==typeof t)return e+t;if("concat"in e&&"function"==typeof e.concat)return e.concat(t);if("object"==typeof e&&"object"==typeof t){let r={...e};for(let[e,n]of Object.entries(t))e in r&&!Array.isArray(r[e])?r[e]=c(r[e],n):r[e]=n;return r}else throw Error(`Cannot concat ${typeof e} and ${typeof t}`)}var d=class{generator;setup;config;signal;firstResult;firstResultUsed=!1;constructor(e){this.generator=e.generator,this.config=e.config,this.signal=e.signal??this.config?.signal,this.setup=new Promise((t,r)=>{i.N.runWithConfig((0,a.DY)(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(t,r):this.firstResult.then(e=>t(void 0),r)},!0)})}async next(...e){return(this.signal?.throwIfAborted(),this.firstResultUsed)?i.N.runWithConfig((0,a.DY)(this.config),this.signal?async()=>(0,s.o)(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async [Symbol.asyncDispose](){await this.return()}};async function p(e,t,r,n,...i){let a=new d({generator:t,startSetup:r,signal:n}),s=await a.setup;return{output:e(a,s,...i),setup:s}}},88274:(e,t,r)=>{"use strict";r.d(t,{q:()=>i});var n=r(69988);let i=()=>(0,n.Jz)("PROJECT")??(0,n.Az)("LANGCHAIN_SESSION")??"default"},89249:(e,t,r)=>{"use strict";let n=r(98566);e.exports=(e,t)=>n(e,t,!0)},90008:(e,t,r)=>{"use strict";let n=r(27681);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},90338:(e,t,r)=>{"use strict";r.d(t,{Js:()=>x,K0:()=>v,Pz:()=>w,Sw:()=>_,iD:()=>f,ih:()=>$,oK:()=>S,rf:()=>k});var n=r(79271),i=r(27231),a=r(42452),s=r(28809),o=r(58036),l=r(71151),u=r(76937),c=r(62886),d=r(67860),p=r(91356),h=r(64184);let f=e=>e();function m(e){return(0,s.Ky)(e)?e:"string"==typeof e.id&&"function"===e.type&&"object"==typeof e.function&&null!==e.function&&"arguments"in e.function&&"string"==typeof e.function.arguments&&"name"in e.function&&"string"==typeof e.function.name?{id:e.id,args:JSON.parse(e.function.arguments),name:e.function.name,type:"tool_call"}:e}function g(e){return"object"==typeof e&&null!=e&&1===e.lc&&Array.isArray(e.id)&&null!=e.kwargs&&"object"==typeof e.kwargs}function y(e){let t,r;if(g(e)){let n=e.id.at(-1);t="HumanMessage"===n||"HumanMessageChunk"===n?"user":"AIMessage"===n||"AIMessageChunk"===n?"assistant":"SystemMessage"===n||"SystemMessageChunk"===n?"system":"FunctionMessage"===n||"FunctionMessageChunk"===n?"function":"ToolMessage"===n||"ToolMessageChunk"===n?"tool":"unknown",r=e.kwargs}else{let{type:n,...i}=e;t=n,r=i}if("human"===t||"user"===t)return new c.xc(r);if("ai"===t||"assistant"===t){let{tool_calls:e,...t}=r;if(!Array.isArray(e))return new h.Od(r);let n=e.map(m);return new h.Od({...t,tool_calls:n})}if("system"===t)return new p.tn(r);if("developer"===t)return new p.tn({...r,additional_kwargs:{...r.additional_kwargs,__openai_role__:"developer"}});if("tool"===t&&"tool_call_id"in r)return new i.uf({...r,content:r.content,tool_call_id:r.tool_call_id,name:r.name});if("remove"===t&&"id"in r&&"string"==typeof r.id)return new d.k({...r,id:r.id});throw(0,a.Y)(Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(e,null,2)}`),"MESSAGE_COERCION_FAILURE")}function v(e){if("string"==typeof e)return new c.xc(e);if((0,n.ny)(e))return e;if(Array.isArray(e)){let[t,r]=e;return y({type:t,content:r})}if(!(0,n.dp)(e))return y(e);{let{role:t,...r}=e;return y({...r,type:t})}}function _(e,t="Human",r="AI"){let n=[];for(let i of e){let e;if("human"===i._getType())e=t;else if("ai"===i._getType())e=r;else if("system"===i._getType())e="System";else if("tool"===i._getType())e="Tool";else if("generic"===i._getType())e=i.role;else throw Error(`Got unsupported message type: ${i._getType()}`);let a=i.name?`${i.name}, `:"",s="string"==typeof i.content?i.content:JSON.stringify(i.content,null,2);n.push(`${e}: ${a}${s}`)}return n.join("\n")}function b(e){if(void 0!==e.data)return e;{let t=e;return{type:t.type,data:{content:t.text,role:t.role,name:void 0,tool_call_id:void 0}}}}function w(e){let t=b(e);switch(t.type){case"human":return new c.xc(t.data);case"ai":return new h.Od(t.data);case"system":return new p.tn(t.data);case"function":if(void 0===t.data.name)throw Error("Name must be defined for function messages");return new u.mg(t.data);case"tool":if(void 0===t.data.tool_call_id)throw Error("Tool call ID must be defined for tool messages");return new i.uf(t.data);case"generic":if(void 0===t.data.role)throw Error("Role must be defined for chat messages");return new l.cM(t.data);default:throw Error(`Got unexpected type: ${t.type}`)}}function k(e){return e.map(w)}function x(e){return e.map(e=>e.toDict())}function $(e){let t=e._getType();if("human"===t)return new c.a7({...e});if("ai"===t){let t={...e};return"tool_calls"in t&&(t={...t,tool_call_chunks:t.tool_calls?.map(e=>({...e,type:"tool_call_chunk",index:void 0,args:JSON.stringify(e.args)}))}),new h.H({...t})}if("system"===t)return new p.uU({...e});if("function"===t)return new u.FK({...e});if(l.cM.isInstance(e))return new l.XU({...e});else throw Error("Unknown message type.")}function S(e){let t=e.reduce((e,t)=>{let r=e.findIndex(([e])=>"id"in t&&t.id&&"index"in t&&void 0!==t.index?t.id===e.id&&t.index===e.index:"id"in t&&t.id?t.id===e.id:"index"in t&&void 0!==t.index&&t.index===e.index);return -1!==r?e[r].push(t):e.push([t]),e},[]),r=[],n=[];for(let e of t){let t=null,i=e[0]?.name??"",a=e.map(e=>e.args||"").join("").trim(),s=a.length?a:"{}",l=e[0]?.id;try{if(t=(0,o.d)(s),!l||null===t||"object"!=typeof t||Array.isArray(t))throw Error("Malformed tool call chunk args.");r.push({name:i,args:t,id:l,type:"tool_call"})}catch{n.push({name:i,args:s,id:l,error:"Malformed args.",type:"invalid_tool_call"})}}return{tool_call_chunks:e,tool_calls:r,invalid_tool_calls:n}}},91160:(e,t,r)=>{"use strict";let n=r(78768);e.exports=(e,t)=>new n(e,t).major},91306:(e,t,r)=>{"use strict";r.d(t,{J:()=>s,v:()=>a});var n=r(67893),i=r(65408),a={};(0,n.V)(a,{Embeddings:()=>s});var s=class{caller;constructor(e){this.caller=new i.g(e??{})}}},91356:(e,t,r)=>{"use strict";r.d(t,{UF:()=>o,X4:()=>s,tn:()=>i,uU:()=>a});var n=r(79271),i=class e extends n.XQ{static lc_name(){return"SystemMessage"}type="system";constructor(e){super(e)}concat(t){if("string"==typeof t)return new e({...this,content:(0,n._I)(this.content,t)});if(e.isInstance(t))return new e({...this,additional_kwargs:{...this.additional_kwargs,...t.additional_kwargs},response_metadata:{...this.response_metadata,...t.response_metadata},content:(0,n._I)(this.content,t.content)});throw Error("Unexpected chunk type for system message")}static isInstance(e){return super.isInstance(e)&&"system"===e.type}},a=class extends n.gj{static lc_name(){return"SystemMessageChunk"}type="system";constructor(e){super(e)}concat(e){return new this.constructor({content:(0,n._I)(this.content,e.content),additional_kwargs:(0,n.ns)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n.ns)(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&"system"===e.type}};function s(e){return"system"===e._getType()}function o(e){return"system"===e._getType()}},91481:(e,t,r)=>{"use strict";r.d(t,{HY:()=>u,aB:()=>c,cw:()=>o,vX:()=>d});var n=r(67893),i=r(69530),a=r(62886),s=r(90338),o={};(0,n.V)(o,{BasePromptValue:()=>l,ChatPromptValue:()=>c,ImagePromptValue:()=>d,StringPromptValue:()=>u});var l=class extends i.yL{},u=class extends l{static lc_name(){return"StringPromptValue"}lc_namespace=["langchain_core","prompt_values"];lc_serializable=!0;value;constructor(e){super({value:e}),this.value=e}toString(){return this.value}toChatMessages(){return[new a.xc(this.value)]}},c=class extends l{lc_namespace=["langchain_core","prompt_values"];lc_serializable=!0;static lc_name(){return"ChatPromptValue"}messages;constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),this.messages=e.messages}toString(){return(0,s.Sw)(this.messages)}toChatMessages(){return this.messages}},d=class extends l{lc_namespace=["langchain_core","prompt_values"];lc_serializable=!0;static lc_name(){return"ImagePromptValue"}imageUrl;value;constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new a.xc({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}}},91846:(e,t,r)=>{"use strict";r.d(t,{dv:()=>h,sD:()=>c,cT:()=>d,lV:()=>f,u$:()=>u});var n=r(67893),i=r(58036),a=r(64184),s=r(34497),o=r(14654),l=r(59305);function u(e,t){let r;if(void 0===e.function)return;if(t?.partial)try{r=(0,i.d)(e.function.arguments??"{}")}catch{return}else try{r=JSON.parse(e.function.arguments)}catch(t){throw new o.CC([`Function "${e.function.name}" arguments:`,"",e.function.arguments,"","are not valid JSON.",`Error: ${t.message}`].join("\n"))}let n={name:e.function.name,args:r,type:"tool_call"};return t?.returnId&&(n.id=e.id),n}function c(e){if(void 0===e.id)throw Error('All OpenAI tool calls must have an "id" field.');return{id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.args)}}}function d(e,t){return{name:e.function?.name,args:e.function?.arguments,id:e.id,error:t,type:"invalid_tool_call"}}r(4929);var p=class extends l.T{static lc_name(){return"JsonOutputToolsParser"}returnId=!1;lc_namespace=["langchain","output_parsers","openai_tools"];lc_serializable=!0;constructor(e){super(e),this.returnId=e?.returnId??this.returnId}_diff(){throw Error("Not supported.")}async parse(){throw Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,t=!0){let r,n=e[0].message;if((0,a.KX)(n)&&n.tool_calls?.length?r=n.tool_calls.map(e=>{let{id:t,...r}=e;return this.returnId?{id:t,...r}:r}):void 0!==n.additional_kwargs.tool_calls&&(r=JSON.parse(JSON.stringify(n.additional_kwargs.tool_calls)).map(e=>u(e,{returnId:this.returnId,partial:t}))),!r)return[];let i=[];for(let e of r)if(void 0!==e){let t={type:e.name,args:e.args,id:e.id};i.push(t)}return i}},h=class extends p{static lc_name(){return"JsonOutputKeyToolsParser"}lc_namespace=["langchain","output_parsers","openai_tools"];lc_serializable=!0;returnId=!1;keyName;returnSingle=!1;zodSchema;constructor(e){super(e),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(void 0===this.zodSchema)return e;let t=await (0,s.K3)(this.zodSchema,e);if(t.success)return t.data;throw new o.CC(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error?.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){let t=(await super.parsePartialResult(e)).filter(e=>e.type===this.keyName),r=t;if(t.length)return(this.returnId||(r=t.map(e=>e.args)),this.returnSingle)?r[0]:r}async parseResult(e){let t=(await super.parsePartialResult(e,!1)).filter(e=>e.type===this.keyName),r=t;return t.length?(this.returnId||(r=t.map(e=>e.args)),this.returnSingle)?this._validateResult(r[0]):await Promise.all(r.map(e=>this._validateResult(e))):void 0}},f={};(0,n.V)(f,{JsonOutputKeyToolsParser:()=>h,JsonOutputToolsParser:()=>p,convertLangChainToolCallToOpenAI:()=>c,makeInvalidToolCall:()=>d,parseToolCall:()=>u})},92096:(e,t,r)=>{"use strict";function n(e){return!!e&&e.lc_runnable}r.d(t,{GW:()=>i,Tu:()=>n,_e:()=>a});var i=class{includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;constructor(e){this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let r=void 0===this.includeNames&&void 0===this.includeTypes&&void 0===this.includeTags,n=e.tags??[];return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(t)),void 0!==this.includeTags&&(r=r||n.some(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(t)),void 0!==this.excludeTags&&(r=r&&n.every(e=>!this.excludeTags?.includes(e))),r}};let a=e=>btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},92173:(e,t,r)=>{"use strict";r.d(t,{DY:()=>d,SV:()=>o,ZI:()=>u,kJ:()=>s,p_:()=>a,tn:()=>c});var n=r(55452),i=r(51628);r(73897);let a=25;async function s(e){return n.Td._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)}function o(...e){let t={};for(let r of e.filter(e=>!!e))for(let e of Object.keys(r))if("metadata"===e)t[e]={...t[e],...r[e]};else if("tags"===e){let n=t[e]??[];t[e]=[...new Set(n.concat(r[e]??[]))]}else if("configurable"===e)t[e]={...t[e],...r[e]};else if("timeout"===e)void 0===t.timeout?t.timeout=r.timeout:void 0!==r.timeout&&(t.timeout=Math.min(t.timeout,r.timeout));else if("signal"===e)void 0===t.signal?t.signal=r.signal:void 0!==r.signal&&("any"in AbortSignal?t.signal=AbortSignal.any([t.signal,r.signal]):t.signal=r.signal);else if("callbacks"===e){let e=t.callbacks,i=r.callbacks;if(Array.isArray(i))if(e)if(Array.isArray(e))t.callbacks=e.concat(i);else{let r=e.copy();for(let e of i)r.addHandler((0,n.tW)(e),!0);t.callbacks=r}else t.callbacks=i;else if(i)if(e)if(Array.isArray(e)){let r=i.copy();for(let t of e)r.addHandler((0,n.tW)(t),!0);t.callbacks=r}else t.callbacks=new n.Td(i._parentRunId,{handlers:e.handlers.concat(i.handlers),inheritableHandlers:e.inheritableHandlers.concat(i.inheritableHandlers),tags:Array.from(new Set(e.tags.concat(i.tags))),inheritableTags:Array.from(new Set(e.inheritableTags.concat(i.inheritableTags))),metadata:{...e.metadata,...i.metadata}});else t.callbacks=i}else{let n=e;t[n]=r[n]??t[n]}return t}let l=new Set(["string","number","boolean"]);function u(e){let t=i.N.getRunnableConfig(),r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(t){let{runId:e,runName:n,...i}=t;r=Object.entries(i).reduce((e,[t,r])=>(void 0!==r&&(e[t]=r),e),r)}if(e&&(r=Object.entries(e).reduce((e,[t,r])=>(void 0!==r&&(e[t]=r),e),r)),r?.configurable)for(let e of Object.keys(r.configurable))l.has(typeof r.configurable[e])&&!r.metadata?.[e]&&(r.metadata||(r.metadata={}),r.metadata[e]=r.configurable[e]);if(void 0!==r.timeout){if(r.timeout<=0)throw Error("Timeout must be a positive number");let e=r.timeout,t=AbortSignal.timeout(e);r.metadata||(r.metadata={}),void 0===r.metadata.timeoutMs&&(r.metadata.timeoutMs=e),void 0!==r.signal?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,t])):r.signal=t,delete r.timeout}return r}function c(e={},{callbacks:t,maxConcurrency:r,recursionLimit:n,runName:i,configurable:a,runId:s}={}){let o=u(e);return void 0!==t&&(delete o.runName,o.callbacks=t),void 0!==n&&(o.recursionLimit=n),void 0!==r&&(o.maxConcurrency=r),void 0!==i&&(o.runName=i),void 0!==a&&(o.configurable={...o.configurable,...a}),void 0!==s&&delete o.runId,o}function d(e){if(e)return{configurable:e.configurable,recursionLimit:e.recursionLimit,callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,maxConcurrency:e.maxConcurrency,timeout:e.timeout,signal:e.signal,store:e.store}}},93795:(e,t,r)=>{"use strict";r.d(t,{A:()=>ed});var n,i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}Object.create;function s(e,t,r){if(r||2==arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;var o=("function"==typeof SuppressedError&&SuppressedError,r(12115)),l="right-scroll-bar-position",u="width-before-scroll-bar",c="with-scroll-bars-hidden",d="--removed-body-scroll-bar-size";function p(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}function h(e,t){var r=(0,o.useState)(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(value){var n=r.value;n!==value&&(r.value=value,r.callback(value,n))}}}})[0];return r.callback=t,r.facade}var f="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,m=new WeakMap;function g(e,t){var r=h(t||null,function(t){return e.forEach(function(e){return p(e,t)})});return f(function(){var t=m.get(r);if(t){var n=new Set(t),i=new Set(e),a=r.current;n.forEach(function(e){i.has(e)||p(e,null)}),i.forEach(function(e){n.has(e)||p(e,a)})}m.set(r,e)},[e]),r}function y(e){return e}function v(e,t){void 0===t&&(t=y);var r=[],n=!1;return{read:function(){if(n)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(e){var i=t(e,n);return r.push(i),function(){r=r.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var i=r;r=[],i.forEach(e),t=r}var a=function(){var r=t;t=[],r.forEach(e)},s=function(){return Promise.resolve().then(a)};s(),r={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),r}}}}}var _=function(e){void 0===e&&(e={});var t=v(null);return t.options=i({async:!0,ssr:!1},e),t}(),b=function(){},w=o.forwardRef(function(e,t){var r=o.useRef(null),n=o.useState({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:b}),s=n[0],l=n[1],u=e.forwardProps,c=e.children,d=e.className,p=e.removeScrollBar,h=e.enabled,f=e.shards,m=e.sideCar,y=e.noIsolation,v=e.inert,w=e.allowPinchZoom,k=e.as,x=void 0===k?"div":k,$=e.gapMode,S=a(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=m,E=g([r,t]),A=i(i({},S),s);return o.createElement(o.Fragment,null,h&&o.createElement(I,{sideCar:_,removeScrollBar:p,shards:f,noIsolation:y,inert:v,setCallbacks:l,allowPinchZoom:!!w,lockRef:r,gapMode:$}),u?o.cloneElement(o.Children.only(c),i(i({},A),{ref:E})):o.createElement(x,i({},A,{className:d,ref:E}),c))});w.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},w.classNames={fullWidth:u,zeroRight:l};var k=function(e){var t=e.sideCar,r=a(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw Error("Sidecar medium not found");return o.createElement(n,i({},r))};function x(e,t){return e.useMedium(t),k}k.isSideCarExport=!0;var $=function(){return n||r.nc};function S(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=$();return t&&e.setAttribute("nonce",t),e}function I(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function E(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}var A=function(){var e=0,t=null;return{add:function(r){0==e&&(t=S())&&(I(t,r),E(t)),e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},O=function(){var e=A();return function(t,r){o.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},T=function(){var e=O();return function(t){return e(t.styles,t.dynamic),null}},N={left:0,top:0,right:0,gap:0},C=function(e){return parseInt(e||"",10)||0},P=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[C(r),C(n),C(i)]},j=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return N;var t=P(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},z=T(),R="data-scroll-locked",M=function(e,t,r,n){var i=e.left,a=e.top,s=e.right,o=e.gap;return void 0===r&&(r="margin"),"\n  .".concat(c," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(o,"px ").concat(n,";\n  }\n  body[").concat(R,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(l," {\n    right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(u," {\n    margin-right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(l," .").concat(l," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(u," .").concat(u," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(R,"] {\n    ").concat(d,": ").concat(o,"px;\n  }\n")},L=function(){var e=parseInt(document.body.getAttribute(R)||"0",10);return isFinite(e)?e:0},Z=function(){o.useEffect(function(){return document.body.setAttribute(R,(L()+1).toString()),function(){var e=L()-1;e<=0?document.body.removeAttribute(R):document.body.setAttribute(R,e.toString())}},[])},D=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=void 0===n?"margin":n;Z();var a=o.useMemo(function(){return j(i)},[i]);return o.createElement(z,{styles:M(a,!t,i,r?"":"!important")})},U=!1;if("undefined"!=typeof window)try{var F=Object.defineProperty({},"passive",{get:function(){return U=!0,!0}});window.addEventListener("test",F,F),window.removeEventListener("test",F,F)}catch(e){U=!1}var B=!!U&&{passive:!1},V=function(e){return"TEXTAREA"===e.tagName},J=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!V(e)&&"visible"===r[t])},W=function(e){return J(e,"overflowY")},q=function(e){return J(e,"overflowX")},K=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),Y(e,n)){var i=X(e,n);if(i[1]>i[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},G=function(e){return[e.scrollTop,e.scrollHeight,e.clientHeight]},H=function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]},Y=function(e,t){return"v"===e?W(t):q(t)},X=function(e,t){return"v"===e?G(t):H(t)},Q=function(e,t){return"h"===e&&"rtl"===t?-1:1},ee=function(e,t,r,n,i){var a=Q(e,window.getComputedStyle(t).direction),s=a*n,o=r.target,l=t.contains(o),u=!1,c=s>0,d=0,p=0;do{var h=X(e,o),f=h[0],m=h[1]-h[2]-a*f;(f||m)&&Y(e,o)&&(d+=m,p+=f),o=o instanceof ShadowRoot?o.host:o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return c&&(i&&1>Math.abs(d)||!i&&s>d)?u=!0:!c&&(i&&1>Math.abs(p)||!i&&-s>p)&&(u=!0),u},et=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},er=function(e){return[e.deltaX,e.deltaY]},en=function(e){return e&&"current"in e?e.current:e},ei=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ea=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},es=0,eo=[];function el(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}let eu=x(_,function(e){var t=o.useRef([]),r=o.useRef([0,0]),n=o.useRef(),i=o.useState(es++)[0],a=o.useState(T)[0],l=o.useRef(e);o.useEffect(function(){l.current=e},[e]),o.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=s([e.lockRef.current],(e.shards||[]).map(en),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var u=o.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!l.current.allowPinchZoom;var i,a=et(e),s=r.current,o="deltaX"in e?e.deltaX:s[0]-a[0],u="deltaY"in e?e.deltaY:s[1]-a[1],c=e.target,d=Math.abs(o)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var p=K(d,c);if(!p)return!0;if(p?i=d:(i="v"===d?"h":"v",p=K(d,c)),!p)return!1;if(!n.current&&"changedTouches"in e&&(o||u)&&(n.current=i),!i)return!0;var h=n.current||i;return ee(h,t,e,"h"===h?o:u,!0)},[]),c=o.useCallback(function(e){var r=e;if(eo.length&&eo[eo.length-1]===a){var n="deltaY"in r?er(r):et(r),i=t.current.filter(function(e){return e.name===r.type&&(e.target===r.target||r.target===e.shadowParent)&&ei(e.delta,n)})[0];if(i&&i.should){r.cancelable&&r.preventDefault();return}if(!i){var s=(l.current.shards||[]).map(en).filter(Boolean).filter(function(e){return e.contains(r.target)});(s.length>0?u(r,s[0]):!l.current.noIsolation)&&r.cancelable&&r.preventDefault()}}},[]),d=o.useCallback(function(e,r,n,i){var a={name:e,delta:r,target:n,should:i,shadowParent:el(n)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),p=o.useCallback(function(e){r.current=et(e),n.current=void 0},[]),h=o.useCallback(function(t){d(t.type,er(t),t.target,u(t,e.lockRef.current))},[]),f=o.useCallback(function(t){d(t.type,et(t),t.target,u(t,e.lockRef.current))},[]);o.useEffect(function(){return eo.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,B),document.addEventListener("touchmove",c,B),document.addEventListener("touchstart",p,B),function(){eo=eo.filter(function(e){return e!==a}),document.removeEventListener("wheel",c,B),document.removeEventListener("touchmove",c,B),document.removeEventListener("touchstart",p,B)}},[]);var m=e.removeScrollBar,g=e.inert;return o.createElement(o.Fragment,null,g?o.createElement(a,{styles:ea(i)}):null,m?o.createElement(D,{gapMode:e.gapMode}):null)});var ec=o.forwardRef(function(e,t){return o.createElement(w,i({},e,{ref:t,sideCar:eu}))});ec.classNames=w.classNames;let ed=ec},94315:(e,t,r)=>{"use strict";r.d(t,{jH:()=>a});var n=r(12115);r(95155);var i=n.createContext(void 0);function a(e){let t=n.useContext(i);return e||t||"ltr"}},94388:(e,t,r)=>{"use strict";r.d(t,{l:()=>h});var n=r(69988),i="[...]",a={result:"[Circular]"},s=[],o=[];let l=new TextEncoder;function u(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function c(e){return l.encode(e)}function d(e){if(e&&"object"==typeof e&&null!==e){if(e instanceof Map)return Object.fromEntries(e);else if(e instanceof Set)return Array.from(e);else if(e instanceof Date)return e.toISOString();else if(e instanceof RegExp)return e.toString();else if(e instanceof Error)return{name:e.name,message:e.message}}else if("bigint"==typeof e)return e.toString();return e}function p(e){return function(t,r){if(e){let n=e.call(this,t,r);if(void 0!==n)return n}return d(r)}}function h(e,t,r,i,a){try{let t=JSON.stringify(e,p(r),i);return c(t)}catch(d){let l;if(!d.message?.includes("Converting circular structure to JSON"))return console.warn(`[WARNING]: LangSmith received unserializable value.${t?`
Context: ${t}`:""}`),c("[Unserializable]");"true"!==(0,n.Jz)("SUPPRESS_CIRCULAR_JSON_WARNINGS")&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${t?`
Context: ${t}`:""}`),void 0===a&&(a=u()),m(e,"",0,[],void 0,0,a);try{l=0===o.length?JSON.stringify(e,r,i):JSON.stringify(e,y(r),i)}catch(e){return c("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==s.length;){let e=s.pop();4===e.length?Object.defineProperty(e[0],e[1],e[3]):e[0][e[1]]=e[2]}}return c(l)}}function f(e,t,r,n){var i=Object.getOwnPropertyDescriptor(n,r);void 0!==i.get?i.configurable?(Object.defineProperty(n,r,{value:e}),s.push([n,r,t,i])):o.push([t,r,e]):(n[r]=e,s.push([n,r,t]))}function m(e,t,r,n,s,o,l){if(o+=1,"object"==typeof e&&null!==e){for(u=0;u<n.length;u++)if(n[u]===e)return void f(a,e,t,s);if(void 0!==l.depthLimit&&o>l.depthLimit||void 0!==l.edgesLimit&&r+1>l.edgesLimit)return void f(i,e,t,s);if(n.push(e),Array.isArray(e))for(u=0;u<e.length;u++)m(e[u],u,u,n,e,o,l);else{var u,c=Object.keys(e=d(e));for(u=0;u<c.length;u++){var p=c[u];m(e[p],p,u,n,e,o,l)}}n.pop()}}function g(e,t){return e<t?-1:+(e>t)}function y(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(o.length>0)for(var n=0;n<o.length;n++){var i=o[n];if(i[1]===t&&i[0]===r){r=i[2],o.splice(n,1);break}}return e.call(this,t,r)}}},94718:(e,t,r)=>{"use strict";r.d(t,{Kj:()=>n.Kj,gk:()=>i.gk,Ls:()=>s,q7:()=>a.q});var n=r(51980),i=r(95829);r(25822);var a=r(88274);r(20553);let s="0.4.4"},94971:(e,t,r)=>{"use strict";function n(e,t){return t.get?t.get.call(e):t.value}r.d(t,{_:()=>a});var i=r(43969);function a(e,t){var r=(0,i._)(e,t,"get");return n(e,r)}},95650:(e,t,r)=>{"use strict";r.d(t,{bm:()=>eV,UC:()=>eU,VY:()=>eB,hJ:()=>eD,ZL:()=>eZ,bL:()=>eL,hE:()=>eF});var n,i=r(12115),a=!!("undefined"!=typeof window&&window.document&&window.document.createElement);function s(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}var o=r(6101),l=r(46081),u=r(61285),c=r(5845),d=r(47650),p=r(95155);function h(e){let t=f(e),r=i.forwardRef((e,r)=>{let{children:n,...a}=e,s=i.Children.toArray(n),o=s.find(g);if(o){let e=o.props.children,n=s.map(t=>t!==o?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,p.jsx)(t,{...a,ref:r,children:i.isValidElement(e)?i.cloneElement(e,void 0,n):null})}return(0,p.jsx)(t,{...a,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}function f(e){let t=i.forwardRef((e,t)=>{let{children:r,...n}=e;if(i.isValidElement(r)){let e=v(r),a=y(n,r.props);return r.type!==i.Fragment&&(a.ref=t?(0,o.t)(t,e):e),i.cloneElement(r,a)}return i.Children.count(r)>1?i.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var m=Symbol("radix.slottable");function g(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}function y(e,t){let r={...t};for(let n in t){let i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...e)=>{let t=a(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...a}:"className"===n&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function v(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}var _=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=h(`Primitive.${t}`),n=i.forwardRef((e,n)=>{let{asChild:i,...a}=e,s=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,p.jsx)(s,{...a,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function b(e,t){e&&d.flushSync(()=>e.dispatchEvent(t))}var w=r(39033),k=r(51595),x="DismissableLayer",$="dismissableLayer.update",S="dismissableLayer.pointerDownOutside",I="dismissableLayer.focusOutside",E=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),A=i.forwardRef((e,t)=>{var r,a;let{disableOutsidePointerEvents:l=!1,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,...m}=e,g=i.useContext(E),[y,v]=i.useState(null),b=null!=(a=null==y?void 0:y.ownerDocument)?a:null==(r=globalThis)?void 0:r.document,[,w]=i.useState({}),x=(0,o.s)(t,e=>v(e)),S=Array.from(g.layers),[I]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),A=S.indexOf(I),O=y?S.indexOf(y):-1,P=g.layersWithOutsidePointerEventsDisabled.size>0,j=O>=A,z=T(e=>{let t=e.target,r=[...g.branches].some(e=>e.contains(t));j&&!r&&(null==c||c(e),null==h||h(e),e.defaultPrevented||null==f||f())},b),R=N(e=>{let t=e.target;![...g.branches].some(e=>e.contains(t))&&(null==d||d(e),null==h||h(e),e.defaultPrevented||null==f||f())},b);return(0,k.U)(e=>{O===g.layers.size-1&&(null==u||u(e),!e.defaultPrevented&&f&&(e.preventDefault(),f()))},b),i.useEffect(()=>{if(y)return l&&(0===g.layersWithOutsidePointerEventsDisabled.size&&(n=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(y)),g.layers.add(y),C(),()=>{l&&1===g.layersWithOutsidePointerEventsDisabled.size&&(b.body.style.pointerEvents=n)}},[y,b,l,g]),i.useEffect(()=>()=>{y&&(g.layers.delete(y),g.layersWithOutsidePointerEventsDisabled.delete(y),C())},[y,g]),i.useEffect(()=>{let e=()=>w({});return document.addEventListener($,e),()=>document.removeEventListener($,e)},[]),(0,p.jsx)(_.div,{...m,ref:x,style:{pointerEvents:P?j?"auto":"none":void 0,...e.style},onFocusCapture:s(e.onFocusCapture,R.onFocusCapture),onBlurCapture:s(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:s(e.onPointerDownCapture,z.onPointerDownCapture)})});A.displayName=x;var O="DismissableLayerBranch";function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(()=>{var e;return null==(e=globalThis)?void 0:e.document})(),r=(0,w.c)(e),n=i.useRef(!1),a=i.useRef(()=>{});return i.useEffect(()=>{let e=e=>{if(e.target&&!n.current){let n=function(){P(S,r,i,{discrete:!0})},i={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",a.current),a.current=n,t.addEventListener("click",a.current,{once:!0})):n()}else t.removeEventListener("click",a.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",e),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(()=>{var e;return null==(e=globalThis)?void 0:e.document})(),r=(0,w.c)(e),n=i.useRef(!1);return i.useEffect(()=>{let e=e=>{e.target&&!n.current&&P(I,r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function C(){let e=new CustomEvent($);document.dispatchEvent(e)}function P(e,t,r,n){let{discrete:i}=n,a=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),i?b(a,s):a.dispatchEvent(s)}i.forwardRef((e,t)=>{let r=i.useContext(E),n=i.useRef(null),a=(0,o.s)(t,n);return i.useEffect(()=>{let e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,p.jsx)(_.div,{...e,ref:a})}).displayName=O;var j="focusScope.autoFocusOnMount",z="focusScope.autoFocusOnUnmount",R={bubbles:!1,cancelable:!0},M="FocusScope",L=i.forwardRef((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...l}=e,[u,c]=i.useState(null),d=(0,w.c)(a),h=(0,w.c)(s),f=i.useRef(null),m=(0,o.s)(t,e=>c(e)),g=i.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;i.useEffect(()=>{if(n){let e=function(e){if(g.paused||!u)return;let t=e.target;u.contains(t)?f.current=t:J(f.current,{select:!0})},t=function(e){if(g.paused||!u)return;let t=e.relatedTarget;null!==t&&(u.contains(t)||J(f.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&J(u)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let n=new MutationObserver(r);return u&&n.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[n,u,g.paused]),i.useEffect(()=>{if(u){W.add(g);let e=document.activeElement;if(!u.contains(e)){let t=new CustomEvent(j,R);u.addEventListener(j,d),u.dispatchEvent(t),t.defaultPrevented||(Z(G(U(u)),{select:!0}),document.activeElement===e&&J(u))}return()=>{u.removeEventListener(j,d),setTimeout(()=>{let t=new CustomEvent(z,R);u.addEventListener(z,h),u.dispatchEvent(t),t.defaultPrevented||J(null!=e?e:document.body,{select:!0}),u.removeEventListener(z,h),W.remove(g)},0)}}},[u,d,h,g]);let y=i.useCallback(e=>{if(!r&&!n||g.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){let t=e.currentTarget,[n,a]=D(t);n&&a?e.shiftKey||i!==a?e.shiftKey&&i===n&&(e.preventDefault(),r&&J(a,{select:!0})):(e.preventDefault(),r&&J(n,{select:!0})):i===t&&e.preventDefault()}},[r,n,g.paused]);return(0,p.jsx)(_.div,{tabIndex:-1,...l,ref:m,onKeyDown:y})});function Z(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.activeElement;for(let n of e)if(J(n,{select:t}),document.activeElement!==r)return}function D(e){let t=U(e);return[F(t,e),F(t.reverse(),e)]}function U(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function F(e,t){for(let r of e)if(!B(r,{upTo:t}))return r}function B(e,t){let{upTo:r}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===r||e!==r);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function V(e){return e instanceof HTMLInputElement&&"select"in e}function J(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){let r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&V(e)&&t&&e.select()}}L.displayName=M;var W=q();function q(){let e=[];return{add(t){let r=e[0];t!==r&&(null==r||r.pause()),(e=K(e,t)).unshift(t)},remove(t){var r;null==(r=(e=K(e,t))[0])||r.resume()}}}function K(e,t){let r=[...e],n=r.indexOf(t);return -1!==n&&r.splice(n,1),r}function G(e){return e.filter(e=>"A"!==e.tagName)}var H=r(52712),Y="Portal",X=i.forwardRef((e,t)=>{var r,n;let{container:a,...s}=e,[o,l]=i.useState(!1);(0,H.N)(()=>l(!0),[]);let u=a||o&&(null==(n=globalThis)||null==(r=n.document)?void 0:r.body);return u?d.createPortal((0,p.jsx)(_.div,{...s,ref:t}),u):null});X.displayName=Y;var Q=r(28905),ee=0;function et(){i.useEffect(()=>{var e,t;let r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!=(e=r[0])?e:er()),document.body.insertAdjacentElement("beforeend",null!=(t=r[1])?t:er()),ee++,()=>{1===ee&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ee--}},[])}function er(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var en=r(93795),ei=r(38168),ea="Dialog",[es,eo]=(0,l.A)(ea),[el,eu]=es(ea),ec=e=>{let{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,l=i.useRef(null),d=i.useRef(null),[h,f]=(0,c.i)({prop:n,defaultProp:null!=a&&a,onChange:s,caller:ea});return(0,p.jsx)(el,{scope:t,triggerRef:l,contentRef:d,contentId:(0,u.B)(),titleId:(0,u.B)(),descriptionId:(0,u.B)(),open:h,onOpenChange:f,onOpenToggle:i.useCallback(()=>f(e=>!e),[f]),modal:o,children:r})};ec.displayName=ea;var ed="DialogTrigger";i.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=eu(ed,r),a=(0,o.s)(t,i.triggerRef);return(0,p.jsx)(_.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":eN(i.open),...n,ref:a,onClick:s(e.onClick,i.onOpenToggle)})}).displayName=ed;var ep="DialogPortal",[eh,ef]=es(ep,{forceMount:void 0}),em=e=>{let{__scopeDialog:t,forceMount:r,children:n,container:a}=e,s=eu(ep,t);return(0,p.jsx)(eh,{scope:t,forceMount:r,children:i.Children.map(n,e=>(0,p.jsx)(Q.C,{present:r||s.open,children:(0,p.jsx)(X,{asChild:!0,container:a,children:e})}))})};em.displayName=ep;var eg="DialogOverlay",ey=i.forwardRef((e,t)=>{let r=ef(eg,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=eu(eg,e.__scopeDialog);return a.modal?(0,p.jsx)(Q.C,{present:n||a.open,children:(0,p.jsx)(e_,{...i,ref:t})}):null});ey.displayName=eg;var ev=h("DialogOverlay.RemoveScroll"),e_=i.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=eu(eg,r);return(0,p.jsx)(en.A,{as:ev,allowPinchZoom:!0,shards:[i.contentRef],children:(0,p.jsx)(_.div,{"data-state":eN(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),eb="DialogContent",ew=i.forwardRef((e,t)=>{let r=ef(eb,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=eu(eb,e.__scopeDialog);return(0,p.jsx)(Q.C,{present:n||a.open,children:a.modal?(0,p.jsx)(ek,{...i,ref:t}):(0,p.jsx)(ex,{...i,ref:t})})});ew.displayName=eb;var ek=i.forwardRef((e,t)=>{let r=eu(eb,e.__scopeDialog),n=i.useRef(null),a=(0,o.s)(t,r.contentRef,n);return i.useEffect(()=>{let e=n.current;if(e)return(0,ei.Eq)(e)},[]),(0,p.jsx)(e$,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:s(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:s(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:s(e.onFocusOutside,e=>e.preventDefault())})}),ex=i.forwardRef((e,t)=>{let r=eu(eb,e.__scopeDialog),n=i.useRef(!1),a=i.useRef(!1);return(0,p.jsx)(e$,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var i,s;null==(i=e.onCloseAutoFocus)||i.call(e,t),t.defaultPrevented||(n.current||null==(s=r.triggerRef.current)||s.focus(),t.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:t=>{var i,s;null==(i=e.onInteractOutside)||i.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(a.current=!0));let o=t.target;(null==(s=r.triggerRef.current)?void 0:s.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}})}),e$=i.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:s,...l}=e,u=eu(eb,r),c=i.useRef(null),d=(0,o.s)(t,c);return et(),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:s,children:(0,p.jsx)(A,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":eN(u.open),...l,ref:d,onDismiss:()=>u.onOpenChange(!1)})}),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ez,{titleId:u.titleId}),(0,p.jsx)(eM,{contentRef:c,descriptionId:u.descriptionId})]})]})}),eS="DialogTitle",eI=i.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=eu(eS,r);return(0,p.jsx)(_.h2,{id:i.titleId,...n,ref:t})});eI.displayName=eS;var eE="DialogDescription",eA=i.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=eu(eE,r);return(0,p.jsx)(_.p,{id:i.descriptionId,...n,ref:t})});eA.displayName=eE;var eO="DialogClose",eT=i.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=eu(eO,r);return(0,p.jsx)(_.button,{type:"button",...n,ref:t,onClick:s(e.onClick,()=>i.onOpenChange(!1))})});function eN(e){return e?"open":"closed"}eT.displayName=eO;var eC="DialogTitleWarning",[eP,ej]=(0,l.q)(eC,{contentName:eb,titleName:eS,docsSlug:"dialog"}),ez=e=>{let{titleId:t}=e,r=ej(eC),n="`".concat(r.contentName,"` requires a `").concat(r.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(r.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(r.docsSlug);return i.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},eR="DialogDescriptionWarning",eM=e=>{let{contentRef:t,descriptionId:r}=e,n=ej(eR),a="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(n.contentName,"}.");return i.useEffect(()=>{var e;let n=null==(e=t.current)?void 0:e.getAttribute("aria-describedby");r&&n&&(document.getElementById(r)||console.warn(a))},[a,t,r]),null},eL=ec,eZ=em,eD=ey,eU=ew,eF=eI,eB=eA,eV=eT},95829:(e,t,r)=>{"use strict";r.d(t,{gk:()=>k,sh:()=>b});var n=r(51980),i=r(69988);let a=e=>void 0!==e?e:!!["TRACING_V2","TRACING"].find(e=>"true"===(0,i.Jz)(e));var s=r(67085);let o=Symbol.for("lc:context_variables");Symbol.for("lc:child_run_end_promises");let l=Symbol.for("langsmith:replica_trace_roots");function u(e,t){if(o in e)return e[o][t]}function c(e,t,r){let n=o in e?e[o]:{};n[t]=r,e[o]=n}var d=r(88274),p=r(55165),h=r(20553),f=r(23778);let m=36,g="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function y(e){let t=Object.keys(e).sort().map(t=>`${t}:${e[t]??""}`).join("|");return(0,f.A)(t,g)}function v(e){return e.replace(/[-:.]/g,"")}function _(e,t=1){let r=t.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${r}Z`}function b(e,t,r=1){let n=_(e,r);return{dottedOrder:v(n)+t,microsecondPrecisionDatestring:n}}class w{constructor(e,t,r,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t,this.project_name=r,this.replicas=n}static fromHeader(e){let t,r,n=e.split(","),i={},a=[];for(let e of n){let[n,s]=e.split("="),o=decodeURIComponent(s);"langsmith-metadata"===n?i=JSON.parse(o):"langsmith-tags"===n?a=o.split(","):"langsmith-project"===n?t=o:"langsmith-replicas"===n&&(r=JSON.parse(o))}return new w(i,a,t,r)}toHeader(){let e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class k{constructor(e){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distributedParentId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_awaitInputsOnPost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),x(e))return void Object.assign(this,{...e});let t=k.getDefaultConfig(),{metadata:r,...n}=e,i=n.client??k.getSharedClient(),a={...r,...n?.extra?.metadata};if(n.extra={...n.extra,metadata:a},"id"in n&&null==n.id&&delete n.id,Object.assign(this,{...t,...n,client:i}),this.execution_order??=1,this.child_execution_order??=1,this.dotted_order||(this._serialized_start_time=_(this.start_time,this.execution_order)),this.id||(this.id=(0,h.Y6)(this._serialized_start_time??this.start_time)),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=O(this.replicas),!this.dotted_order){let{dottedOrder:e}=b(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+e:this.dotted_order=e}}set metadata(e){this.extra={...this.extra,metadata:{...this.extra?.metadata,...e}}}get metadata(){return this.extra?.metadata}static getDefaultConfig(){let e=Date.now();return{run_type:"chain",project_name:(0,d.q)(),child_runs:[],api_url:(0,i.Az)("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:(0,i.Az)("LANGCHAIN_API_KEY"),caller_options:{},start_time:e,serialized:{},inputs:{},extra:{}}}static getSharedClient(){return k.sharedClient||(k.sharedClient=new n.Kj),k.sharedClient}createChild(e){let t=this.child_execution_order+1,r=this.replicas?.map(e=>{let{reroot:t,...r}=e;return r}),n=e.replicas??r,i=new k({...e,parent_run:this,project_name:this.project_name,replicas:n,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t});o in this&&(i[o]=this[o]);let a=Symbol.for("lc:child_config"),s=e.extra?.[a]??this.extra[a];if(E(s)){let e={...s},t=I(e.callbacks)?e.callbacks.copy?.():void 0;t&&(Object.assign(t,{_parentRunId:i.id}),t.handlers?.find($)?.updateFromRunTree?.(i),e.callbacks=t),i.extra[a]=e}let l=new Set,u=this;for(;null!=u&&!l.has(u.id);)l.add(u.id),u.child_execution_order=Math.max(u.child_execution_order,t),u=u.parent_run;return this.child_runs.push(i),i}async end(e,t,r=Date.now(),n){this.outputs=this.outputs??e,this.error=this.error??t,this.end_time=this.end_time??r,n&&Object.keys(n).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...n}}:{metadata:n})}_convertToCreate(e,t,r=!0){let n,i,a=e.extra??{};if(a?.runtime?.library===void 0&&(a.runtime||(a.runtime={}),t))for(let[e,r]of Object.entries(t))a.runtime[e]||(a.runtime[e]=r);return r?(i=e.parent_run?.id??e.parent_run_id,n=[]):(n=e.child_runs.map(e=>this._convertToCreate(e,t,r)),i=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:a,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:n,parent_run_id:i,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_sliceParentId(e,t){if(t.dotted_order){let r=t.dotted_order.split("."),n=null;for(let t=0;t<r.length;t++)if(r[t].slice(-m)===e){n=t;break}if(null!==n){let e=r.slice(n+1);t.dotted_order=e.join("."),e.length>0?t.trace_id=e[0].slice(-m):t.trace_id=t.id}}t.parent_run_id===e&&(t.parent_run_id=void 0)}_setReplicaTraceRoot(e,t){let r=u(this,l)??{};for(let n of(r[e]=t,c(this,l,r),this.child_runs))n._setReplicaTraceRoot(e,t)}_remapForProject(e){let t,r,n,i,{projectName:a,runtimeEnv:s,excludeChildRuns:o=!0,reroot:c=!1,distributedParentId:d,apiUrl:p,apiKey:h,workspaceId:v}=e,_=this._convertToCreate(this,s,o);if(a===this.project_name)return{..._,session_name:a};if(c){if(d)this._sliceParentId(d,_);else if(_.parent_run_id=void 0,_.dotted_order){let e=_.dotted_order.split(".");e.length>0&&(_.dotted_order=e[e.length-1],_.trace_id=_.id)}let e=y({projectName:a,apiUrl:p,apiKey:h,workspaceId:v});this._setReplicaTraceRoot(e,_.id)}if(!c&&(t=(u(this,l)??{})[y({projectName:a,apiUrl:p,apiKey:h,workspaceId:v})])&&(_.trace_id=t,_.dotted_order)){let e=_.dotted_order.split("."),r=null;for(let n=0;n<e.length;n++)if(e[n].slice(-m)===t){r=n;break}null!==r&&(_.dotted_order=e.slice(r).join("."))}let b=_.id,w=(0,f.A)(`${b}:${a}`,g);return r=_.trace_id?(0,f.A)(`${_.trace_id}:${a}`,g):w,_.parent_run_id&&(n=(0,f.A)(`${_.parent_run_id}:${a}`,g)),_.dotted_order&&(i=_.dotted_order.split(".").map(e=>{let t=e.slice(-m),r=(0,f.A)(`${t}:${a}`,g);return e.slice(0,-m)+r}).join(".")),{..._,id:w,trace_id:r,parent_run_id:n,dotted_order:i,session_name:a}}async postRun(e=!0){this._awaitInputsOnPost&&(this.inputs=await this.inputs);try{let t=(0,i.Ec)();if(this.replicas&&this.replicas.length>0)for(let{projectName:e,apiKey:r,apiUrl:n,workspaceId:i,reroot:a}of this.replicas){let s=this._remapForProject({projectName:e??this.project_name,runtimeEnv:t,excludeChildRuns:!0,reroot:a,distributedParentId:this.distributedParentId,apiUrl:n,apiKey:r,workspaceId:i});await this.client.createRun(s,{apiKey:r,apiUrl:n,workspaceId:i})}else{let r=this._convertToCreate(this,t,e);await this.client.createRun(r)}if(!e)for(let e of((0,p.m)("Posting with excludeChildRuns=false is deprecated and will be removed in a future version."),this.child_runs))await e.postRun(!1);this.child_runs=[]}catch(e){console.error(`Error in postRun for run ${this.id}:`,e)}}async patchRun(e){if(this.replicas&&this.replicas.length>0)for(let{projectName:t,apiKey:r,apiUrl:n,workspaceId:i,updates:a,reroot:s}of this.replicas){let o=this._remapForProject({projectName:t??this.project_name,runtimeEnv:void 0,excludeChildRuns:!0,reroot:s,distributedParentId:this.distributedParentId,apiUrl:n,apiKey:r,workspaceId:i}),l={id:o.id,name:o.name,run_type:o.run_type,start_time:o.start_time,outputs:o.outputs,error:o.error,parent_run_id:o.parent_run_id,session_name:o.session_name,reference_example_id:o.reference_example_id,end_time:o.end_time,dotted_order:o.dotted_order,trace_id:o.trace_id,events:o.events,tags:o.tags,extra:o.extra,attachments:this.attachments,...a};e?.excludeInputs||(l.inputs=o.inputs),await this.client.updateRun(o.id,l,{apiKey:r,apiUrl:n,workspaceId:i})}else try{let t={name:this.name,run_type:this.run_type,start_time:this._serialized_start_time??this.start_time,end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:this.parent_run?.id??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e?.excludeInputs||(t.inputs=this.inputs),await this.client.updateRun(this.id,t)}catch(e){console.error(`Error in patchRun for run ${this.id}`,e)}this.child_runs=[]}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),"string"==typeof e?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,t){let r,n,i,s=e?.callbacks,o=a();if(s){let e=s?.getParentRunId?.()??"",t=s?.handlers?.find(e=>e?.name=="langchain_tracer");r=t?.getRun?.(e),n=t?.projectName,i=t?.client,o=o||!!t}return r?new k({name:r.name,id:r.id,trace_id:r.trace_id,dotted_order:r.dotted_order,client:i,tracingEnabled:o,project_name:n,tags:[...new Set((r?.tags??[]).concat(e?.tags??[]))],extra:{metadata:{...r?.extra?.metadata,...e?.metadata}}}).createChild(t):new k({...t,client:i,tracingEnabled:o,project_name:n})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){let r="get"in e&&"function"==typeof e.get?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,n=r["langsmith-trace"];if(!n||"string"!=typeof n)return;let i=n.trim(),a=i.split(".").map(e=>{let[t,r]=e.split("Z");return{strTime:t,time:Date.parse(t+"Z"),uuid:r}}),s=a[0].uuid,o={...t,name:t?.name??"parent",run_type:t?.run_type??"chain",start_time:t?.start_time??Date.now(),id:a.at(-1)?.uuid,trace_id:s,dotted_order:i};if(r.baggage&&"string"==typeof r.baggage){let e=w.fromHeader(r.baggage);o.metadata=e.metadata,o.tags=e.tags,o.project_name=e.project_name,o.replicas=e.replicas}let l=new k(o);return l.distributedParentId=l.id,l}toHeaders(e){let t={"langsmith-trace":this.dotted_order,baggage:new w(this.extra?.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(let[r,n]of Object.entries(t))e.set(r,n);return t}}function x(e){return null!=e&&"function"==typeof e.createChild&&"function"==typeof e.postRun}function $(e){return"object"==typeof e&&null!=e&&"string"==typeof e.name&&"langchain_tracer"===e.name}function S(e){return Array.isArray(e)&&e.some(e=>$(e))}function I(e){return"object"==typeof e&&null!=e&&Array.isArray(e.handlers)}function E(e){let t=e?.callbacks;return null!=e&&"object"==typeof t&&(S(t?.handlers)||S(t))}function A(){let e=(0,i.Az)("LANGSMITH_RUNS_ENDPOINTS");if(!e)return[];try{let t=JSON.parse(e);if(Array.isArray(t)){let e=[];for(let r of t){if("object"!=typeof r||null===r){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof r}`);continue}if("string"!=typeof r.api_url){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_url}`);continue}if("string"!=typeof r.api_key){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_key}`);continue}e.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key})}return e}if("object"!=typeof t||null===t)return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof t}`),[];{T(t);let e=[];for(let[r,n]of Object.entries(t)){let t=r.replace(/\/$/,"");if("string"==typeof n)e.push({apiUrl:t,apiKey:n});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got ${typeof n}`);continue}}return e}}catch(e){if((0,s.J_)(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function O(e){return e?e.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):A()}function T(e){if(Object.keys(e).length>0&&(0,i.Jz)("ENDPOINT"))throw new s.tE}Object.defineProperty(k,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null})},95841:(e,t,r)=>{"use strict";let n=r(51389),i=r(51017),a=r(332),s=r(21855),o=r(66235),l=r(19106);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return i(e,r,u);case">":return a(e,r,u);case">=":return s(e,r,u);case"<":return o(e,r,u);case"<=":return l(e,r,u);default:throw TypeError(`Invalid operator: ${t}`)}}},95920:(e,t,r)=>{"use strict";function n(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function i(e,t,r){n(e,t),t.set(e,r)}r.d(t,{_:()=>i})},96688:(e,t,r)=>{"use strict";let n=r(22814);e.exports=(e,t)=>{let r=n(e,null,!0),i=n(t,null,!0),a=r.compare(i);if(0===a)return null;let s=a>0,o=s?r:i,l=s?i:r,u=!!o.prerelease.length;if(l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(o))return l.minor&&!l.patch?"minor":"patch"}let c=u?"pre":"";return r.major!==i.major?c+"major":r.minor!==i.minor?c+"minor":r.patch!==i.patch?c+"patch":"prerelease"}},97468:(e,t,r)=>{"use strict";var n;n={value:!0},n=t.wl=t.ay=void 0;let i=r(29352);Object.defineProperty(t,"ay",{enumerable:!0,get:function(){return i.NodeBase}});let a=r(77727);Object.defineProperty(t,"wl",{enumerable:!0,get:function(){return a.LinkedList}}),n={enumerable:!0,get:function(){return a.Node}}},98566:(e,t,r)=>{"use strict";let n=r(78768);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},98864:(e,t,r)=>{"use strict";r.d(t,{T:()=>g,V:()=>h});var n=r(67893),i=r(92096);function a(e){return e.replace(/[^a-zA-Z-_0-9]/g,"_")}let s=["*","_","`"];function o(e){let t="";for(let[r,n]of Object.entries(e))t+=`	classDef ${r} ${n};
`;return t}function l(e,t,r){let{firstNode:n,lastNode:i,nodeColors:l,withStyles:u=!0,curveStyle:c="linear",wrapLabelNWords:d=9}=r??{},p=u?`%%{init: {'flowchart': {'curve': '${c}'}}}%%
graph TD;
`:"graph TD;\n";if(u){let t="default",r={[t]:"{0}({1})"};for(let[o,l]of(void 0!==n&&(r[n]="{0}([{1}]):::first"),void 0!==i&&(r[i]="{0}([{1}]):::last"),Object.entries(e))){let e=l.name.split(":").pop()??"",n=s.some(t=>e.startsWith(t)&&e.endsWith(t))?`<p>${e}</p>`:e;Object.keys(l.metadata??{}).length&&(n+=`<hr/><small><em>${Object.entries(l.metadata??{}).map(([e,t])=>`${e} = ${t}`).join("\n")}</em></small>`);let i=(r[o]??r[t]).replace("{0}",a(o)).replace("{1}",n);p+=`	${i}
`}}let h={};for(let e of t){let t=e.source.split(":"),r=e.target.split(":"),n=t.filter((e,t)=>e===r[t]).join(":");h[n]||(h[n]=[]),h[n].push(e)}let f=new Set;function m(e){return[...e].sort((e,t)=>e.split(":").length-t.split(":").length)}function g(e,t){let r=1===e.length&&e[0].source===e[0].target;if(t&&!r){let e=t.split(":").pop();if(f.has(t))throw Error(`Found duplicate subgraph '${e}' at '${t} -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);f.add(t),p+=`	subgraph ${e}
`}for(let e of m(Object.keys(h).filter(e=>e.startsWith(`${t}:`)&&e!==t&&e.split(":").length===t.split(":").length+1)))g(h[e],e);for(let t of e){let{source:e,target:r,data:n,conditional:i}=t,s="";if(void 0!==n){let e=n,t=e.split(" ");t.length>d&&(e=Array.from({length:Math.ceil(t.length/d)},(e,r)=>t.slice(r*d,(r+1)*d).join(" ")).join("&nbsp;<br>&nbsp;")),s=i?` -. &nbsp;${e}&nbsp; .-> `:` -- &nbsp;${e}&nbsp; --> `}else s=i?" -.-> ":" --\x3e ";p+=`	${a(e)}${s}${a(r)};
`}t&&!r&&(p+="	end\n")}for(let e in g(h[""]??[],""),h)e.includes(":")||""===e||g(h[e],e);return u&&(p+=o(l??{})),p}async function u(e,t){let r=t?.backgroundColor??"white",n=t?.imageType??"png",a=(0,i._e)(e);void 0!==r&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`));let s=`https://mermaid.ink/img/${a}?bgColor=${r}&type=${n}`,o=await fetch(s);if(!o.ok)throw Error(`Failed to render the graph using the Mermaid.INK API.
Status code: ${o.status}
Status text: ${o.statusText}`);return await o.blob()}var c=r(25720),d=r(18056),p=r(32197),h={};function f(e,t){if(void 0!==e&&!(0,d.A)(e))return e;if(!(0,i.Tu)(t))return t.name??"UnknownSchema";try{let e=t.getName();return e=e.startsWith("Runnable")?e.slice(8):e}catch{return t.getName()}}function m(e){return(0,i.Tu)(e.data)?{type:"runnable",data:{id:e.data.lc_id,name:e.data.getName()}}:{type:"schema",data:{...(0,c.PF)(e.data.schema),title:e.data.name}}}(0,n.V)(h,{Graph:()=>g});var g=class e{nodes={};edges=[];constructor(e){this.nodes=e?.nodes??this.nodes,this.edges=e?.edges??this.edges}toJSON(){let e={};return Object.values(this.nodes).forEach((t,r)=>{e[t.id]=(0,d.A)(t.id)?r:t.id}),{nodes:Object.values(this.nodes).map(t=>({id:e[t.id],...m(t)})),edges:this.edges.map(t=>{let r={source:e[t.source],target:e[t.target]};return void 0!==t.data&&(r.data=t.data),void 0!==t.conditional&&(r.conditional=t.conditional),r})}}addNode(e,t,r){if(void 0!==t&&void 0!==this.nodes[t])throw Error(`Node with id ${t} already exists`);let n=t??(0,p.A)(),i={id:n,data:e,name:f(t,e),metadata:r};return this.nodes[n]=i,i}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(t=>t.source!==e.id&&t.target!==e.id)}addEdge(e,t,r,n){if(void 0===this.nodes[e.id])throw Error(`Source node ${e.id} not in graph`);if(void 0===this.nodes[t.id])throw Error(`Target node ${t.id} not in graph`);let i={source:e.id,target:t.id,data:r,conditional:n};return this.edges.push(i),i}firstNode(){return y(this)}lastNode(){return v(this)}extend(e,t=""){let r=t;Object.values(e.nodes).map(e=>e.id).every(d.A)&&(r="");let n=e=>r?`${r}:${e}`:e;Object.entries(e.nodes).forEach(([e,t])=>{this.nodes[n(e)]={...t,id:n(e)}});let i=e.edges.map(e=>({...e,source:n(e.source),target:n(e.target)}));this.edges=[...this.edges,...i];let a=e.firstNode(),s=e.lastNode();return[a?{id:n(a.id),data:a.data}:void 0,s?{id:n(s.id),data:s.data}:void 0]}trimFirstNode(){let e=this.firstNode();e&&y(this,[e.id])&&this.removeNode(e)}trimLastNode(){let e=this.lastNode();e&&v(this,[e.id])&&this.removeNode(e)}reid(){let t=Object.fromEntries(Object.values(this.nodes).map(e=>[e.id,e.name])),r=new Map;Object.values(t).forEach(e=>{r.set(e,(r.get(e)||0)+1)});let n=e=>{let n=t[e];return(0,d.A)(e)&&1===r.get(n)?n:e};return new e({nodes:Object.fromEntries(Object.entries(this.nodes).map(([e,t])=>[n(e),{...t,id:n(e)}])),edges:this.edges.map(e=>({...e,source:n(e.source),target:n(e.target)}))})}drawMermaid(e){let{withStyles:t,curveStyle:r,nodeColors:n={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:i}=e??{},a=this.reid(),s=a.firstNode(),o=a.lastNode();return l(a.nodes,a.edges,{firstNode:s?.id,lastNode:o?.id,withStyles:t,curveStyle:r,nodeColors:n,wrapLabelNWords:i})}async drawMermaidPng(e){return u(this.drawMermaid(e),{backgroundColor:e?.backgroundColor})}};function y(e,t=[]){let r=new Set(e.edges.filter(e=>!t.includes(e.source)).map(e=>e.target)),n=[];for(let i of Object.values(e.nodes))t.includes(i.id)||r.has(i.id)||n.push(i);return 1===n.length?n[0]:void 0}function v(e,t=[]){let r=new Set(e.edges.filter(e=>!t.includes(e.target)).map(e=>e.source)),n=[];for(let i of Object.values(e.nodes))t.includes(i.id)||r.has(i.id)||n.push(i);return 1===n.length?n[0]:void 0}}}]);