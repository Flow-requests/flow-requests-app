"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{61104:(e,t,a)=>{a.d(t,{A:()=>eL});var s=a(95155),r=a(12115),i=a(74211),n=a(93306),l=a(57916);a(11687);var o=a(38543),d=a(85690);let c=(0,r.memo)(e=>{let{data:t,isConnectable:a}=e;return(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"h-5 w-5 text-blue-500"}),(0,s.jsx)("div",{className:"font-medium",children:t.label})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:t.name||"Unnamed Step"}),(0,s.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:t.url?t.url:"Start workflow..."}),(0,s.jsx)(i.h7,{type:"source",position:i.yX.Bottom,isConnectable:a,className:"!bg-blue-500"})]})});c.displayName="StartNode";var h=a(24357),m=a(62525),u=a(34869);let p=(0,r.memo)(e=>{let{data:t,isConnectable:a}=e;return t.name,(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3 shadow-sm",children:[(0,s.jsx)("button",{className:"absolute top-2 left-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.duplicateNode()},"aria-label":"Delete node",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.deleteNode()},"aria-label":"Delete node",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-5 w-5 text-green-500"}),(0,s.jsx)("div",{className:"font-medium",children:t.label})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:t.name||"Unnamed Step"}),(0,s.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:t.endpoint?"".concat(t.method,": ").concat(t.endpoint):"Configure API..."}),(0,s.jsx)(i.h7,{type:"target",position:i.yX.Top,isConnectable:a,className:"!bg-green-500"}),(0,s.jsx)(i.h7,{type:"source",position:i.yX.Bottom,isConnectable:a,className:"!bg-green-500"})]})});p.displayName="ApiNode";var f=a(2775);let x=e=>"=="==e?"Igual":">"==e?"Maior que":"<"==e?"Menor que":"!="==e?"Diferente":">="==e?"Maior que ou igual":"<="==e?"Menor que ou igual":e,g=(0,r.memo)(e=>{let{data:t,isConnectable:a}=e;return(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3 shadow-sm",children:[(0,s.jsx)("button",{className:"absolute top-2 left-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.duplicateNode()},"aria-label":"Delete node",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.deleteNode()},"aria-label":"Delete node",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(f.A,{className:"h-5 w-5 text-amber-500"}),(0,s.jsx)("div",{className:"font-medium",children:t.label})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:t.name||"Unnamed Step"}),(0,s.jsx)("div",{className:"mt-2 text-xs text-center text-muted-foreground",children:t.condition?(0,s.jsxs)("p",{children:[t.condition.left," ",x(t.condition.operator).toLowerCase()," ",t.condition.right]}):"Configure condition..."}),(0,s.jsxs)("div",{className:"mt-2 flex justify-between text-xs",children:[(0,s.jsx)("div",{className:"text-green-600",children:t.trueLabel}),(0,s.jsx)("div",{className:"text-red-600",children:t.falseLabel})]}),(0,s.jsx)(i.h7,{type:"target",position:i.yX.Top,isConnectable:a,className:"!bg-amber-500"}),(0,s.jsx)(i.h7,{type:"source",position:i.yX.Bottom,id:"true",style:{left:"25%"},isConnectable:a,className:"!bg-green-600"}),(0,s.jsx)(i.h7,{type:"source",position:i.yX.Bottom,id:"false",style:{left:"75%"},isConnectable:a,className:"!bg-red-600"})]})});g.displayName="ConditionNode";var v=a(41335);let j=(0,r.memo)(e=>{let{data:t,isConnectable:a}=e;return(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3 shadow-sm relative",children:[(0,s.jsx)("button",{className:"absolute top-2 left-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.duplicateNode()},"aria-label":"Delete node",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.deleteNode()},"aria-label":"Delete node",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(v.A,{className:"h-5 w-5 text-blue-500"}),(0,s.jsx)("div",{className:"font-medium",children:t.label})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:t.name||"Unnamed Step"}),(0,s.jsx)("div",{className:"mt-2 text-xs text-center text-muted-foreground",children:t.source?"Loop over: ".concat(t.source):"Configure loop source..."}),(0,s.jsxs)("div",{className:"mt-2 flex justify-between text-xs",children:[(0,s.jsx)("div",{className:"text-blue-600",children:"Loop"}),(0,s.jsx)("div",{className:"text-gray-600",children:"Done"})]}),(0,s.jsx)(i.h7,{type:"target",position:i.yX.Top,isConnectable:a,className:"!bg-blue-500"}),(0,s.jsx)(i.h7,{type:"source",position:i.yX.Bottom,id:"loop",style:{left:"25%"},isConnectable:a,className:"!bg-blue-600"}),(0,s.jsx)(i.h7,{type:"source",position:i.yX.Bottom,id:"done",style:{left:"75%"},isConnectable:a,className:"!bg-gray-600"})]})});j.displayName="LoopNode";var y=a(74126),b=a(49103),k=a(97168),N=a(89852),w=a(82714),C=a(99474),S=a(80830),A=a(66474),E=a(5196),D=a(47863),L=a(53999);function T(e){let{...t}=e;return(0,s.jsx)(S.bL,{"data-slot":"select",...t})}function _(e){let{...t}=e;return(0,s.jsx)(S.WT,{"data-slot":"select-value",...t})}function P(e){let{className:t,size:a="default",children:r,...i}=e;return(0,s.jsxs)(S.l9,{"data-slot":"select-trigger","data-size":a,className:(0,L.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[r,(0,s.jsx)(S.In,{asChild:!0,children:(0,s.jsx)(A.A,{className:"size-4 opacity-50"})})]})}function F(e){let{className:t,children:a,position:r="popper",...i}=e;return(0,s.jsx)(S.ZL,{children:(0,s.jsxs)(S.UC,{"data-slot":"select-content",className:(0,L.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...i,children:[(0,s.jsx)(R,{}),(0,s.jsx)(S.LM,{className:(0,L.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(O,{})]})})}function z(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(S.q7,{"data-slot":"select-item",className:(0,L.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(S.VF,{children:(0,s.jsx)(E.A,{className:"size-4"})})}),(0,s.jsx)(S.p4,{children:a})]})}function R(e){let{className:t,...a}=e;return(0,s.jsx)(S.PP,{"data-slot":"select-scroll-up-button",className:(0,L.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(D.A,{className:"size-4"})})}function O(e){let{className:t,...a}=e;return(0,s.jsx)(S.wn,{"data-slot":"select-scroll-down-button",className:(0,L.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(A.A,{className:"size-4"})})}var J=a(99840);let I={start:"start",api:"api",condition:"condition",code:"code",loop:"loop"};function $(e){let{type:t="text",options:a=[],value:i="",onChange:n,placeholder:l,className:o}=e,[d,c]=(0,r.useState)(i),[h,m]=(0,r.useState)(!1),u=(0,r.useRef)(null),p=(0,r.useRef)(null),f=(0,r.useRef)(null);(0,r.useEffect)(()=>{c(i)},[i]),(0,r.useEffect)(()=>{let e=e=>{(u.current&&!u.current.contains(e.target)&&f.current&&!f.current.contains(e.target)||p.current&&!p.current.contains(e.target)&&p.current&&!p.current.contains(e.target))&&m(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let x=e=>{let t=null==e?void 0:e.lastIndexOf("{{");return t>=0?e.substring(t+2):""},g=a.filter(e=>e.toLowerCase().includes(x(d).toLowerCase())),v=e=>{c(e),null==n||n(e),m(!1)};return(0,s.jsxs)("div",{className:"relative",children:[h&&g.length>0&&(0,s.jsx)("div",{ref:f,className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-md shadow-lg z-10 max-h-40 overflow-y-auto",children:g.map((e,t)=>(0,s.jsx)(k.$,{variant:"ghost",className:"w-full justify-start text-left",onSelect:()=>{console.log("passed on here select event")},onClick:()=>{console.log("passed on here"),v(e)},children:e},t))}),"text"==t&&(0,s.jsx)(N.p,{type:t,ref:u,value:d,onChange:e=>{let t=e.target.value;c(t),null==n||n(t),t.startsWith("{{")||t.indexOf("{{")>=0||!u.current&&t.indexOf("{{")>=0?m(!0):m(!1)},placeholder:l,className:o})]})}function M(e){let{node:t,onChange:a,onClose:i,isOpen:n=!0,optionsMenu:l=[]}=e,[o,d]=(0,r.useState)({...t.data}),[c,h]=(0,r.useState)([{}]),[m,u]=(0,r.useState)([{}]),[p,f]=(0,r.useState)(t.data.condition||{left:"",operator:"",right:""}),x={[I.start]:!0,[I.api]:!0,[I.condition]:!0,[I.code]:!0,[I.loop]:!0},g=()=>{let e=[...m];e.push({key:"",type:"",value:""}),u([...e])},v=e=>{if(1==m.length)return;let t=[...m];t.splice(e,1),u([...t])},j=()=>{let e=[...c];e.push({key:"",type:"",value:""}),h([...e])},C=e=>{if(1==c.length)return;let t=[...c];t.splice(e,1),h([...t])},S=(e,t,a)=>{m[e][t]=a,u([...m])},A=(e,t,a)=>{c[e][t]=a,h([...c])};(0,r.useEffect)(()=>{d(t.data),t.data&&t.data.headers&&t.data.headers.length>0&&h(t.data.headers),t.data&&t.data.body&&t.data.body.length>0&&u(t.data.body)},[t]);let E=(e,s)=>{let r={...o,headers:[...c],body:[...m],[e]:s};d(r),a(t.id,r)};return(0,s.jsx)(J.lG,{open:n,onOpenChange:e=>!e&&i(),children:(0,s.jsxs)(J.Cf,{className:"max-w-4xl max-h-[80vh] overflow-y-scroll ",children:[(0,s.jsx)(J.c7,{children:(0,s.jsxs)(J.L3,{children:["Configure ",t.type.charAt(0).toUpperCase()+t.type.slice(1)]})}),(0,s.jsxs)("div",{className:"w-full mt-4 space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"label",children:"Node Type"}),(0,s.jsx)(N.p,{id:"label",value:o.label||"",disabled:!0,onChange:e=>E("label",e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"name",children:"Step Name"}),(0,s.jsx)(N.p,{id:"name",value:o.name||"",onChange:e=>E("name",e.target.value.replace(/ /g,"_").toLowerCase()),placeholder:"Enter a descriptive name for this step"})]}),t.type===I.start&&(0,s.jsx)(s.Fragment,{}),t.type===I.api&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"endpoint",children:"API Endpoint"}),(0,s.jsx)($,{options:l,value:o.endpoint||"",placeholder:"https://api.example.com/data",onChange:e=>E("endpoint",e)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"method",children:"HTTP Method"}),(0,s.jsxs)(T,{value:o.method||"GET",onValueChange:e=>E("method",e),children:[(0,s.jsx)(P,{children:(0,s.jsx)(_,{placeholder:"Select method"})}),(0,s.jsxs)(F,{children:[(0,s.jsx)(z,{value:"GET",children:"GET"}),(0,s.jsx)(z,{value:"POST",children:"POST"}),(0,s.jsx)(z,{value:"PUT",children:"PUT"}),(0,s.jsx)(z,{value:"DELETE",children:"DELETE"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"headers",children:"Headers (JSON)"}),c.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(w.J,{children:"Key"}),(0,s.jsx)($,{options:l,value:e.key||"",placeholder:"api-key",onChange:e=>A(t,"key",e)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(w.J,{children:"Value"}),(0,s.jsx)($,{options:l,value:e.value,placeholder:"value here",onChange:e=>A(t,"value",e)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2",children:[(0,s.jsx)("div",{className:"py-3",children:(0,s.jsx)(k.$,{onClick:()=>C(t),children:(0,s.jsx)(y.A,{})})}),(0,s.jsx)("div",{className:"py-3",style:{marginLeft:"-50px"},children:(0,s.jsx)(k.$,{onClick:()=>j(),children:(0,s.jsx)(b.A,{})})})]})]},t))]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"body",children:"Request Body (JSON)"}),m.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(w.J,{children:"Key"}),(0,s.jsx)($,{options:l,value:e.key,placeholder:"key here",onChange:e=>S(t,"key",e)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(w.J,{children:"Value"}),(0,s.jsx)($,{options:l,value:e.value,placeholder:"value here",onChange:e=>S(t,"value",e)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2",children:[(0,s.jsx)("div",{className:"py-3",children:(0,s.jsx)(k.$,{onClick:()=>v(t),children:(0,s.jsx)(y.A,{})})}),(0,s.jsx)("div",{className:"py-3",style:{marginLeft:"-50px"},children:(0,s.jsx)(k.$,{onClick:()=>{g()},children:(0,s.jsx)(b.A,{})})})]})]},t))]}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(k.$,{onClick:()=>{E("headers",c),E("body",m),u([{}]),h([{}]),i()},children:"Save"})})]}),t.type===I.condition&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"condition",children:"Condition Expression"}),(0,s.jsxs)("div",{className:"grid grid-cols-3",children:[(0,s.jsxs)("div",{className:"py-6",children:[(0,s.jsx)(w.J,{}),(0,s.jsx)($,{options:l,value:p.left,placeholder:"value here",onChange:e=>f({...p,left:e})})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"px-2 space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"method",children:"Condi\xe7\xe3o"}),(0,s.jsxs)(T,{value:p.operator,onValueChange:e=>f({...p,operator:e}),children:[(0,s.jsx)(P,{children:(0,s.jsx)(_,{placeholder:"Selecionar condi\xe7\xe3o"})}),(0,s.jsxs)(F,{children:[(0,s.jsx)(z,{value:"==",children:"Igual"}),(0,s.jsx)(z,{value:">",children:"Maior que"}),(0,s.jsx)(z,{value:"<",children:"Menor que"}),(0,s.jsx)(z,{value:"!=",children:"Diferente"}),(0,s.jsx)(z,{value:">=",children:"Maior que ou igual"}),(0,s.jsx)(z,{value:"<=",children:"Menor que ou igual"})]})]})]})}),(0,s.jsxs)("div",{className:"px-1 py-6",children:[(0,s.jsx)(w.J,{}),(0,s.jsx)($,{options:l,value:p.right,placeholder:"value here",onChange:e=>f({...p,right:e})})]}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(k.$,{onClick:()=>{E("condition",p),f({}),d(null),i()},children:"Save"})})]},1)]})}),t.type===I.loop&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:o.name,children:"Source of data"}),(0,s.jsx)($,{options:l,value:o.source,placeholder:"value here",onChange:e=>E("source",e)})]},o.name),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(k.$,{onClick:()=>{d(null),i()},children:"Save"})})]}),!x[t.type]&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-full space-y-2",children:t.data.properties.map(e=>{var a;let r=e.required?"(Required)":"(Optional)";return(null==e||null==(a=e.conditionShow)?void 0:a.length)>0&&e.conditionShow.filter(e=>o[e.keyCheck]==e.valueExpected).length!=e.conditionShow.length?null:"select"==e.type?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(w.J,{htmlFor:e.name,children:[e.label," ",r]}),(0,s.jsxs)(T,{value:o[e.name]||t.data[e.name]||"",onValueChange:t=>E(e.name,t),children:[(0,s.jsx)(P,{children:(0,s.jsx)(_,{placeholder:"Select an option"})}),(0,s.jsx)(F,{children:e.options.map(e=>(0,s.jsx)(z,{value:e.value,children:e.label},e.value))})]})]},e.name):"textarea"==e.type?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(w.J,{htmlFor:e.name,children:[e.label," ",r]}),(0,s.jsx)("textarea",{rows:5,cols:55,value:o[e.name]||t.data[e.name]||"",onChange:t=>E(e.name,t.target.value),children:o[e.name]})]},e.name):"text"==e.type?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(w.J,{htmlFor:e.name,children:[e.label," ",r]}),(0,s.jsx)($,{placeholder:"Type value here",options:l,value:o[e.name]||t.data[e.name],onChange:t=>E(e.name,t)})]},e.name):"number"==e.type?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(w.J,{htmlFor:e.name,children:[e.label," ",r]}),(0,s.jsx)(N.p,{type:"number",id:e.name,value:o[e.name]||t.data[e.name]||"",onChange:t=>E(e.name,t.target.value)})]},e.name):void 0})}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(k.$,{onClick:()=>{d(null),i()},children:"Save"})})]})]})]})})}var W=a(381),V=a(29869),U=a(15968),q=a(4229),B=a(74556),X=a(3417);let G=(0,r.memo)(e=>{let{data:t,isConnectable:a}=e;return t.code&&(t.code.split("\n").slice(0,3).join("\n"),t.code.split("\n").length),(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3 shadow-sm relative",children:[(0,s.jsx)("button",{className:"absolute top-2 left-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.duplicateNode()},"aria-label":"Delete node",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.deleteNode()},"aria-label":"Delete node",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(X.A,{className:"h-5 w-5 text-purple-500"}),(0,s.jsx)("div",{className:"font-medium",children:t.label})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:t.name||"Unnamed Step"}),(0,s.jsx)(i.h7,{type:"target",position:i.yX.Top,isConnectable:a,className:"!bg-purple-500"}),(0,s.jsx)(i.h7,{type:"source",position:i.yX.Bottom,isConnectable:a,className:"!bg-purple-500"})]})});G.displayName="CodeNode";var Y=a(84616),H=a(44570);function K(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(H.bL,{"data-slot":"scroll-area",className:(0,L.cn)("relative",t),...r,children:[(0,s.jsx)(H.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),(0,s.jsx)(Z,{}),(0,s.jsx)(H.OK,{})]})}function Z(e){let{className:t,orientation:a="vertical",...r}=e;return(0,s.jsx)(H.VM,{"data-slot":"scroll-area-scrollbar",orientation:a,className:(0,L.cn)("flex touch-none p-px transition-colors select-none","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",t),...r,children:(0,s.jsx)(H.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Q(e){let{isOpen:t,onClose:a,envData:i,onSave:n}=e,[l,o]=(0,r.useState)([]),d=e=>{o(l.filter(t=>t.id!==e))},c=(e,t,a)=>{o(l.map(s=>s.id===e?{...s,[t]:a}:s))};return(0,r.useEffect)(()=>{o([...i])},[i]),(0,s.jsx)(J.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,s.jsxs)(J.Cf,{className:"sm:max-w-[600px] flex flex-col",children:[(0,s.jsx)(J.c7,{children:(0,s.jsx)(J.L3,{children:"Env Data"})}),(0,s.jsx)(K,{className:"flex-1 overflow-auto pr-4 -mr-4 max-h-[50vh]",children:(0,s.jsx)("div",{className:"space-y-6 py-2",children:0===l.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Env data stored here can be referenced on Flow."}):l.map(e=>(0,s.jsxs)("div",{className:"grid gap-3 border-b pb-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"font-medium",children:"Env Data"}),(0,s.jsx)(k.$,{variant:"ghost",size:"icon",onClick:()=>d(e.id),className:"h-7 w-7 text-muted-foreground hover:text-red-500",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"key-".concat(e.id),children:"Key"}),(0,s.jsx)(N.p,{id:"key-".concat(e.id),value:e.key,onChange:t=>c(e.id,"key",t.target.value),placeholder:"api_key"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"value-".concat(e.id),children:"Value"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(N.p,{id:"value-".concat(e.id),type:"text",value:e.value,onChange:t=>c(e.id,"value",t.target.value),placeholder:"••••••••"})})]})]})]},e.id))})}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsxs)(k.$,{variant:"outline",size:"sm",onClick:()=>{o([...l,{id:"data-".concat(Date.now()),key:"",value:""}])},className:"w-full",children:[(0,s.jsx)(Y.A,{className:"mr-2 h-4 w-4"}),"Add Sensitive Data"]})}),(0,s.jsxs)(J.Es,{children:[(0,s.jsx)(k.$,{variant:"outline",onClick:a,children:"Cancel"}),(0,s.jsx)(k.$,{onClick:()=>{n(l.filter(e=>""!==e.key.trim())),a()},children:"Save Changes"})]})]})})}function ee(e){let{isOpen:t,onClose:a,logs:r,isLoading:i}=e,n=e=>"object"==typeof e&&null!==e?JSON.stringify(e,null,2):String(e);return(0,s.jsx)(J.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,s.jsxs)(J.Cf,{className:"sm:max-w-[800px] flex flex-col max-h-[80vh]",children:[(0,s.jsxs)(J.c7,{children:[(0,s.jsxs)(J.L3,{className:"flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"h-5 w-5 text-green-500"}),"Flow Execution Logs"]}),(0,s.jsx)(J.rr,{children:"View the output from each step in your Flow execution."})]}),(0,s.jsx)(K,{className:"flex-1 overflow-auto pr-4 -mr-4",children:(0,s.jsx)("div",{className:"space-y-4 py-2",children:i?(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,s.jsx)(d.A,{className:"h-8 w-8 animate-pulse mx-auto mb-2"}),"Running Flow..."]}):0===r.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No logs available. Run the Flow to see execution results."}):r.map((e,t)=>(0,s.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md border text-xs font-mono bg-muted",children:["Step ",t+1]}),(0,s.jsx)("span",{className:"font-medium text-sm",children:e.step})]}),(0,s.jsx)("div",{className:"bg-muted p-3 rounded-md",children:(0,s.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap overflow-x-auto",children:n(e.output)})})]},t))})}),(0,s.jsx)(J.Es,{children:(0,s.jsx)(k.$,{variant:"outline",onClick:a,children:"Close"})})]})})}function et(e){let{isOpen:t,onClose:a,settings:i}=e,[n,l]=(0,r.useState)([...i]),o=e=>{l(n.filter(t=>t.id!==e))},d=(e,t,a)=>{l(n.map(s=>s.id===e?{...s,[t]:a}:s))};return(0,r.useEffect)(()=>{l([...i])},[i]),(0,s.jsx)(J.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,s.jsxs)(J.Cf,{className:"sm:max-w-[600px] flex flex-col",children:[(0,s.jsxs)(J.c7,{children:[(0,s.jsx)(J.L3,{children:"Settings"}),(0,s.jsx)(J.rr,{children:"Configure application settings here."})]}),(0,s.jsx)(K,{className:"flex-1 overflow-auto pr-4 -mr-4 max-h-[50vh]",children:(0,s.jsx)("div",{className:"space-y-6 py-2",children:0===n.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No settings configured yet."}):n.map(e=>(0,s.jsxs)("div",{className:"grid gap-3 border-b pb-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"font-medium",children:"Setting"}),(0,s.jsx)(k.$,{variant:"ghost",size:"icon",onClick:()=>o(e.id),className:"h-7 w-7 text-muted-foreground hover:text-red-500",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"key-".concat(e.id),children:"Key"}),(0,s.jsx)(N.p,{id:"key-".concat(e.id),value:e.key,onChange:t=>d(e.id,"key",t.target.value),disabled:!0,placeholder:"openRouterToken"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"value-".concat(e.id),children:"Value"}),(0,s.jsx)(N.p,{id:"value-".concat(e.id),value:e.value,onChange:t=>d(e.id,"value",t.target.value),placeholder:"Enter value"})]})]})]},e.id))})}),(0,s.jsxs)(J.Es,{children:[(0,s.jsx)(k.$,{variant:"outline",onClick:a,children:"Cancel"}),(0,s.jsx)(k.$,{onClick:()=>{n.filter(e=>""!==e.key.trim()).forEach(e=>{localStorage.setItem(e.key,e.value)}),a()},children:"Save Changes"})]})]})})}var ea=a(71126),es=a.n(ea);function er(e){let{isOpen:t,onClose:a,onSave:i}=e,[n,l]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),u=()=>{a(),l(""),c(""),m("")};return(0,s.jsx)(J.lG,{open:t,onOpenChange:e=>!e&&u(),children:(0,s.jsxs)(J.Cf,{className:"sm:max-w-[600px]",children:[(0,s.jsxs)(J.c7,{children:[(0,s.jsx)(J.L3,{children:"Add Curl"}),(0,s.jsx)(J.rr,{children:"Paste your curl command to create an API node."})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"name",children:"Name"}),(0,s.jsx)(N.p,{id:"name",value:d,onChange:e=>c(e.target.value),placeholder:"Enter node name"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"description",children:"Description"}),(0,s.jsx)(N.p,{id:"description",value:h,onChange:e=>m(e.target.value),placeholder:"Enter description (optional)"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{htmlFor:"curl",children:"Curl Command"}),(0,s.jsx)(C.T,{id:"curl",value:n,onChange:e=>l(e.target.value),placeholder:"Paste your curl command here",rows:6})]})]}),(0,s.jsxs)(J.Es,{children:[(0,s.jsx)(k.$,{variant:"outline",onClick:u,children:"Cancel"}),(0,s.jsx)(k.$,{onClick:()=>{if(!n.trim())return void o.oR.error("Please enter a curl command");if(!d.trim())return void o.oR.error("Please enter a name");try{let e=es()(n),t={type:"api",label:d,name:d.toLowerCase().replace(/\s+/g,"_"),endpoint:e.url,method:e.method||"GET",headers:e.headers?Object.entries(e.headers).map(e=>{let[t,a]=e;return{key:t,value:String(a),expression:"raw"}}):[]},s=[];e.data&&(s="object"==typeof e.data&&null!==e.data?Object.entries(e.data).map(e=>{let[t,a]=e;return{key:t,value:"string"==typeof a?a:JSON.stringify(a),expression:"raw"}}):[{key:"body",value:String(e.data),expression:"raw"}]),t.body=s,t.description=h,i(t),a(),l(""),c(""),m("")}catch(e){console.error("Error parsing curl:",e),o.oR.error("Invalid curl command")}},children:"Save"})]})]})})}var ei=a(13052),en=a(42355),el=a(54416),eo=a(77482);function ed(e){let{delayDuration:t=0,...a}=e;return(0,s.jsx)(eo.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function ec(e){let{...t}=e;return(0,s.jsx)(ed,{children:(0,s.jsx)(eo.bL,{"data-slot":"tooltip",...t})})}function eh(e){let{...t}=e;return(0,s.jsx)(eo.l9,{"data-slot":"tooltip-trigger",...t})}function em(e){let{className:t,sideOffset:a=0,children:r,...i}=e;return(0,s.jsx)(eo.ZL,{children:(0,s.jsxs)(eo.UC,{"data-slot":"tooltip-content",sideOffset:a,className:(0,L.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...i,children:[r,(0,s.jsx)(eo.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}let eu=(0,r.memo)(e=>{let{onAddNode:t,httpRequestNodes:a,customNodes:i,onAddCurl:n}=e,[l,o]=(0,r.useState)(!1),[c,h]=(0,r.useState)(""),[m,p]=(0,r.useState)([{type:"start",label:"Start",icon:d.A,description:"Start point",color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{type:"api",label:"API",icon:u.A,description:"Make HTTP requests to external APIs",color:"text-green-500",bgColor:"bg-green-50",borderColor:"border-green-200"},{type:"condition",label:"Condition",icon:f.A,description:"Add conditional logic to your flow",color:"text-amber-500",bgColor:"bg-amber-50",borderColor:"border-amber-200"},{type:"loop",label:"Loop",icon:v.A,description:"Execute actions multiple times over a list",color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200"}]),x={},g=e=>!x[e.label]&&(x[e.label]=!0,e.label.toLowerCase().includes(c.toLowerCase())||e.description.toLowerCase().includes(c.toLowerCase()));return(0,r.useEffect)(()=>{p([...m,...a,...i])},[i,a]),(0,s.jsxs)("div",{className:(0,L.cn)("h-full border-r bg-background transition-all duration-300 flex flex-col",l?"w-14":"w-64"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsx)("h2",{className:(0,L.cn)("font-semibold",l&&"sr-only"),children:"Components"}),(0,s.jsx)(k.$,{variant:"ghost",size:"icon",onClick:()=>o(!l),className:"h-7 w-7","aria-label":l?"Expand sidebar":"Collapse sidebar",children:l?(0,s.jsx)(ei.A,{className:"h-4 w-4"}):(0,s.jsx)(en.A,{className:"h-4 w-4"})})]}),!l&&(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(N.p,{type:"text",placeholder:"Search nodes...",value:c,onChange:e=>h(e.target.value),className:"pr-8"}),c&&(0,s.jsx)(k.$,{variant:"ghost",size:"icon",onClick:()=>h(""),className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6",children:(0,s.jsx)(el.A,{className:"h-4 w-4"})})]})}),!l&&(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsx)(k.$,{onClick:n,variant:"outline",className:"w-full",children:"Convert curl"})}),(0,s.jsx)("div",{className:"w-4/4 h-full max-h-screen overflow-y-auto flex flex-col flex-grow",children:(0,s.jsx)("div",{className:(0,L.cn)("space-y-2",l&&"space-y-3"),style:{marginBottom:"250px"},children:m.filter(e=>g(e)).map((e,a)=>(0,s.jsx)(ed,{delayDuration:0,children:(0,s.jsxs)(ec,{children:[(0,s.jsx)(eh,{asChild:!0,children:(0,s.jsxs)("button",{onClick:()=>t(e.type,{...e}),className:(0,L.cn)("w-full flex items-center gap-3 p-2 rounded-md transition-colors",e.bgColor,e.borderColor,"border hover:bg-muted",l?"justify-center":"justify-start"),children:[null!=e.icon&&(0,s.jsx)(e.icon,{className:(0,L.cn)("h-5 w-5",e.color)}),null==e.icon&&(0,s.jsx)(u.A,{className:(0,L.cn)("h-5 w-5",e.color)}),!l&&(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"font-medium",children:e.label}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})]})}),l&&(0,s.jsxs)(em,{side:"right",className:"flex flex-col gap-1",children:[(0,s.jsx)("div",{className:"font-medium",children:e.label}),(0,s.jsx)("div",{className:"text-xs",children:e.description})]})]})},"".concat(e.type,"_").concat(Date.now(),"_").concat(a)))})})]})}),ep="CustomNode",ef=(0,r.memo)(e=>{let{data:t,isConnectable:a}=e;return ep=t.name,(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3 shadow-sm",children:[(0,s.jsx)("button",{className:"absolute top-2 left-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.duplicateNode()},"aria-label":"Delete node",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.deleteNode()},"aria-label":"Delete node",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-5 w-5 text-blue-500"}),(0,s.jsx)("div",{className:"font-medium",children:t.label})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:t.name||"Unnamed Step"}),(0,s.jsx)(i.h7,{type:"target",position:i.yX.Top,isConnectable:a,className:"!bg-blue-500"}),(0,s.jsx)(i.h7,{type:"source",position:i.yX.Bottom,isConnectable:a,className:"!bg-blue-500"})]})});ef.displayName=ep;var ex=a(35695),eg=a(80203);let ev={ENV_DATA:"envData",NEW_NODE:"newNode",NEW_MANY_NODES:"newManyNodes"};var ej=a(88482),ey=a(71366),eb=a(87712);let ek=function(e){let{messages:t=[],onSendMessage:a,placeholder:i="Type your message here...",className:n,maxHeight:l="800px",defaultMinimized:o=!1,title:d="Chat",isFloating:c=!1,defaultPosition:h={x:20,y:20}}=e,[m,u]=(0,r.useState)(""),[p,f]=(0,r.useState)(!1),[x,g]=(0,r.useState)(o),[v,j]=(0,r.useState)(h),[y,b]=(0,r.useState)(!1),[N,w]=(0,r.useState)({x:0,y:0}),S=(0,r.useRef)(null),A=(0,r.useRef)(null),E=(0,r.useRef)(null),D=()=>{var e;null==(e=S.current)||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{D()},[t]);let T=async e=>{if(e.preventDefault(),!m.trim()||p)return;let t=m.trim();u(""),f(!0);try{await (null==a?void 0:a(t))}catch(e){console.error(e)}finally{f(!1)}},_=()=>{let e=A.current;e&&(e.style.height="auto",e.style.height="".concat(Math.min(e.scrollHeight,120),"px"))},P=e=>{y&&c&&j({x:e.clientX-N.x,y:e.clientY-N.y})},F=()=>{b(!1)};(0,r.useEffect)(()=>{if(y&&c)return document.addEventListener("mousemove",P),document.addEventListener("mouseup",F),()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",F)}},[y,N,c]),(0,r.useEffect)(()=>{_()},[m]);let z=(0,L.cn)("flex flex-col",n,c&&"fixed z-50 shadow-lg border-2");return(0,s.jsx)("div",{ref:E,style:c?{left:"".concat(v.x,"px"),top:"".concat(v.y,"px"),cursor:y?"grabbing":"grab"}:{},className:z,children:(0,s.jsxs)(ej.Zp,{className:"w-full h-full",children:[(0,s.jsxs)(ej.aR,{className:(0,L.cn)("flex flex-row items-center justify-between space-y-0 pb-2",c&&"cursor-grab active:cursor-grabbing select-none"),onMouseDown:e=>{if(c){var t;b(!0);let a=null==(t=E.current)?void 0:t.getBoundingClientRect();a&&w({x:e.clientX-a.left,y:e.clientY-a.top})}},children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(ey.A,{className:"h-5 w-5"}),(0,s.jsx)("h2",{className:"text-sm font-semibold",children:d}),!x&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",t.length," messages)"]})]}),(0,s.jsx)(k.$,{variant:"ghost",size:"sm",onClick:()=>{g(!x)},className:"h-8 w-8 p-0",children:x?(0,s.jsx)(Y.A,{className:"h-4 w-4"}):(0,s.jsx)(eb.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(ej.Wu,{className:"flex flex-col h-full p-4 pt-0",children:(0,s.jsxs)(K,{className:"flex-1 mb-4 pr-4",style:{maxHeight:l},children:[(0,s.jsxs)("div",{className:"space-y-4",children:[0===t.length?(0,s.jsx)("div",{className:"text-center text-muted-foreground py-8",children:(0,s.jsx)("p",{children:"No messages yet. Start a conversation!"})}):t.map(e=>(0,s.jsx)("div",{className:(0,L.cn)("flex","user"===e.sender?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:(0,L.cn)("max-w-[80%] rounded-lg px-3 py-2 text-sm","user"===e.sender?"bg-primary text-primary-foreground":"bg-muted"),children:[(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}),(0,s.jsx)("p",{className:(0,L.cn)("text-xs mt-1 opacity-70","user"===e.sender?"text-primary-foreground":"text-muted-foreground"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id)),p&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-muted rounded-lg px-3 py-2 text-sm",children:(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,s.jsx)("div",{ref:S})]}),(0,s.jsxs)("form",{onSubmit:T,className:"flex gap-2",children:[(0,s.jsx)("div",{className:"flex-1 relative",children:(0,s.jsx)(C.T,{ref:A,value:m,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),T(e))},placeholder:i,className:"resize-none pr-12 min-h-[40px] max-h-[120px]",disabled:p})}),(0,s.jsx)(k.$,{type:"submit",disabled:!m.trim()||p,className:"self-end",size:"sm",children:p?"Sending...":"Send"})]})]})})]})})},eN=["{{this.state.faker.person.firstName()}}","{{this.state.faker.person.lastName()}}","{{this.state.faker.person.fullName()}}","{{this.state.faker.person.gender()}}","{{this.state.faker.person.sex()}}","{{this.state.faker.person.jobTitle()}}","{{this.state.faker.person.jobArea()}}","{{this.state.faker.person.jobDescriptor()}}","{{this.state.faker.person.jobType()}}","{{this.state.faker.person.prefix()}}","{{this.state.faker.person.suffix()}}","{{this.state.faker.person.middleName()}}","{{this.state.faker.person.bio()}}","{{this.state.faker.location.streetAddress()}}","{{this.state.faker.location.city()}}","{{this.state.faker.location.state()}}","{{this.state.faker.location.zipCode()}}","{{this.state.faker.location.country()}}","{{this.state.faker.location.countryCode()}}","{{this.state.faker.location.latitude()}}","{{this.state.faker.location.longitude()}}","{{this.state.faker.location.direction()}}","{{this.state.faker.location.ordinalDirection()}}","{{this.state.faker.location.nearbyGPSCoordinate()}}","{{this.state.faker.location.timeZone()}}","{{this.state.faker.location.streetName()}}","{{this.state.faker.location.streetSuffix()}}","{{this.state.faker.location.buildingNumber()}}","{{this.state.faker.location.secondaryAddress()}}","{{this.state.faker.internet.email()}}","{{this.state.faker.internet.userName()}}","{{this.state.faker.internet.password()}}","{{this.state.faker.internet.url()}}","{{this.state.faker.internet.domainName()}}","{{this.state.faker.internet.domainSuffix()}}","{{this.state.faker.internet.domainWord()}}","{{this.state.faker.internet.ip()}}","{{this.state.faker.internet.ipv6()}}","{{this.state.faker.internet.port()}}","{{this.state.faker.internet.userAgent()}}","{{this.state.faker.internet.httpMethod()}}","{{this.state.faker.internet.httpStatusCode()}}","{{this.state.faker.internet.color()}}","{{this.state.faker.internet.mac()}}","{{this.state.faker.internet.emoji()}}","{{this.state.faker.company.name()}}","{{this.state.faker.company.suffix()}}","{{this.state.faker.company.catchPhrase()}}","{{this.state.faker.company.bs()}}","{{this.state.faker.company.catchPhraseAdjective()}}","{{this.state.faker.company.catchPhraseDescriptor()}}","{{this.state.faker.company.catchPhraseNoun()}}","{{this.state.faker.company.bsAdjective()}}","{{this.state.faker.company.bsBuzz()}}","{{this.state.faker.company.bsNoun()}}","{{this.state.faker.finance.account()}}","{{this.state.faker.finance.accountName()}}","{{this.state.faker.finance.amount()}}","{{this.state.faker.finance.bic()}}","{{this.state.faker.finance.bitcoinAddress()}}","{{this.state.faker.finance.creditCardCVV()}}","{{this.state.faker.finance.creditCardIssuer()}}","{{this.state.faker.finance.creditCardNumber()}}","{{this.state.faker.finance.currencyCode()}}","{{this.state.faker.finance.currencyName()}}","{{this.state.faker.finance.currencySymbol()}}","{{this.state.faker.finance.ethereumAddress()}}","{{this.state.faker.finance.iban()}}","{{this.state.faker.finance.litecoinAddress()}}","{{this.state.faker.finance.mask()}}","{{this.state.faker.finance.pin()}}","{{this.state.faker.finance.routingNumber()}}","{{this.state.faker.finance.transactionDescription()}}","{{this.state.faker.finance.transactionType()}}","{{this.state.faker.date.past()}}","{{this.state.faker.date.future()}}","{{this.state.faker.date.between()}}","{{this.state.faker.date.recent()}}","{{this.state.faker.date.soon()}}","{{this.state.faker.date.birthdate()}}","{{this.state.faker.date.month()}}","{{this.state.faker.date.weekday()}}","{{this.state.faker.lorem.word()}}","{{this.state.faker.lorem.words()}}","{{this.state.faker.lorem.sentence()}}","{{this.state.faker.lorem.sentences()}}","{{this.state.faker.lorem.paragraph()}}","{{this.state.faker.lorem.paragraphs()}}","{{this.state.faker.lorem.text()}}","{{this.state.faker.lorem.lines()}}","{{this.state.faker.lorem.slug()}}","{{this.state.faker.phone.number()}}","{{this.state.faker.phone.imei()}}","{{this.state.faker.image.avatar()}}","{{this.state.faker.image.url()}}","{{this.state.faker.image.urlLoremFlickr()}}","{{this.state.faker.image.urlPicsumPhotos()}}","{{this.state.faker.image.urlPlaceholder()}}","{{this.state.faker.image.dataUri()}}","{{this.state.faker.animal.type()}}","{{this.state.faker.animal.dog()}}","{{this.state.faker.animal.cat()}}","{{this.state.faker.animal.snake()}}","{{this.state.faker.animal.bear()}}","{{this.state.faker.animal.lion()}}","{{this.state.faker.animal.cetacean()}}","{{this.state.faker.animal.horse()}}","{{this.state.faker.animal.bird()}}","{{this.state.faker.animal.cow()}}","{{this.state.faker.animal.fish()}}","{{this.state.faker.animal.crocodilia()}}","{{this.state.faker.animal.insect()}}","{{this.state.faker.animal.rabbit()}}","{{this.state.faker.vehicle.vehicle()}}","{{this.state.faker.vehicle.manufacturer()}}","{{this.state.faker.vehicle.model()}}","{{this.state.faker.vehicle.type()}}","{{this.state.faker.vehicle.fuel()}}","{{this.state.faker.vehicle.vin()}}","{{this.state.faker.vehicle.color()}}","{{this.state.faker.vehicle.vrm()}}","{{this.state.faker.commerce.department()}}","{{this.state.faker.commerce.productName()}}","{{this.state.faker.commerce.price()}}","{{this.state.faker.commerce.productAdjective()}}","{{this.state.faker.commerce.productMaterial()}}","{{this.state.faker.commerce.product()}}","{{this.state.faker.database.column()}}","{{this.state.faker.database.type()}}","{{this.state.faker.database.collation()}}","{{this.state.faker.database.engine()}}","{{this.state.faker.music.genre()}}","{{this.state.faker.music.songName()}}","{{this.state.faker.system.fileName()}}","{{this.state.faker.system.commonFileName()}}","{{this.state.faker.system.mimeType()}}","{{this.state.faker.system.commonFileType()}}","{{this.state.faker.system.commonFileExt()}}","{{this.state.faker.system.fileType()}}","{{this.state.faker.system.fileExt()}}","{{this.state.faker.system.directoryPath()}}","{{this.state.faker.system.filePath()}}","{{this.state.faker.system.semver()}}","{{this.state.faker.science.chemicalElement()}}","{{this.state.faker.science.unit()}}","{{this.state.faker.airline.airplane()}}","{{this.state.faker.airline.airport()}}","{{this.state.faker.airline.airline()}}","{{this.state.faker.airline.aircraftType()}}","{{this.state.faker.airline.flightNumber()}}","{{this.state.faker.airline.seat()}}","{{this.state.faker.airline.recordLocator()}}","{{this.state.faker.color.human()}}","{{this.state.faker.color.space()}}","{{this.state.faker.color.cssSupportedFunction()}}","{{this.state.faker.color.cssSupportedSpace()}}","{{this.state.faker.color.rgb()}}","{{this.state.faker.color.hsl()}}","{{this.state.faker.color.hwb()}}","{{this.state.faker.color.cmyk()}}","{{this.state.faker.color.lab()}}","{{this.state.faker.color.lch()}}","{{this.state.faker.color.colorByCSSColorSpace()}}","{{this.state.faker.git.branch()}}","{{this.state.faker.git.commitEntry()}}","{{this.state.faker.git.commitMessage()}}","{{this.state.faker.git.commitSha()}}","{{this.state.faker.git.shortSha()}}","{{this.state.faker.hacker.abbreviation()}}","{{this.state.faker.hacker.adjective()}}","{{this.state.faker.hacker.noun()}}","{{this.state.faker.hacker.verb()}}","{{this.state.faker.hacker.ingverb()}}","{{this.state.faker.hacker.phrase()}}","{{this.state.faker.helpers.arrayElement()}}","{{this.state.faker.helpers.arrayElements()}}","{{this.state.faker.helpers.shuffle()}}","{{this.state.faker.helpers.unique()}}","{{this.state.faker.helpers.mustache()}}","{{this.state.faker.helpers.createCard()}}","{{this.state.faker.helpers.contextualCard()}}","{{this.state.faker.helpers.userCard()}}","{{this.state.faker.helpers.createTransaction()}}","{{this.state.faker.helpers.rangeToNumber()}}","{{this.state.faker.helpers.regexpStyleStringParse()}}","{{this.state.faker.helpers.fromRegExp()}}","{{this.state.faker.helpers.replaceSymbolWithNumber()}}","{{this.state.faker.helpers.replaceSymbols()}}","{{this.state.faker.helpers.slugify()}}","{{this.state.faker.helpers.enumValue()}}","{{this.state.faker.helpers.objectKey()}}","{{this.state.faker.helpers.objectValue()}}","{{this.state.faker.helpers.weightedArrayElement()}}","{{this.state.faker.datatype.boolean()}}","{{this.state.faker.datatype.number()}}","{{this.state.faker.datatype.float()}}","{{this.state.faker.datatype.datetime()}}","{{this.state.faker.datatype.string()}}","{{this.state.faker.datatype.uuid()}}","{{this.state.faker.datatype.json()}}","{{this.state.faker.datatype.hexadecimal()}}","{{this.state.faker.random.word()}}","{{this.state.faker.random.words()}}","{{this.state.faker.random.locale()}}","{{this.state.faker.string.alpha()}}","{{this.state.faker.string.alphanumeric()}}","{{this.state.faker.string.binary()}}","{{this.state.faker.string.hexadecimal()}}","{{this.state.faker.string.numeric()}}","{{this.state.faker.string.octal()}}","{{this.state.faker.string.symbol()}}","{{this.state.faker.string.fromCharacters()}}","{{this.state.faker.string.uuid()}}","{{this.state.faker.string.nanoid()}}","{{this.state.faker.number.int()}}","{{this.state.faker.number.float()}}","{{this.state.faker.number.bigInt()}}"];var ew=a(80534),eC=a(61612);let eS={api:{label:"API",name:"",endpoint:"https://webhook.site/18eb8dca-7fba-4512-bf61-21392e905b60",method:"GET",headers:null,body:null},start:{label:"Start",name:""},condition:{data:{label:"Condition",name:"",condition:{left:"1",operator:"==",right:"1"},trueLabel:"True",falseLabel:"False"}},code:{code:"function node() { console.log('Hello World') }"},loop:{label:"Loop",name:"",source:""}},eA={api:eC.Ay.object({endpoint:eC.Ay.string().min(3),method:eC.Ay.enum(["GET","POST","DELETE","PUT"])}),start:eC.Ay.object({}),condition:eC.Ay.object({condition:eC.Ay.object({left:eC.Ay.any(),operator:eC.Ay.string(),right:eC.Ay.any()})}),code:eC.Ay.object({code:eC.Ay.string()}),loop:eC.Ay.object({source:eC.Ay.string()})},eE=[{id:"1",type:"start",position:{x:250,y:100},data:{label:"Start",name:"trigger_start_1"}}],eD=[];function eL(e){let{workflowToEdit:t,flowName:a}=e,h=(0,ex.useRouter)(),m=(0,r.useRef)(null),x=(0,r.useRef)(null),[v,y]=(0,r.useState)(null),[b,N]=(0,r.useState)(eS),[w,C]=(0,r.useState)({start:c,api:p,condition:g,code:G,loop:j}),[S,A,E]=(0,i.ck)(eE),[D,L,T]=(0,i.fM)(eD),[_,P]=(0,r.useState)(null),[F,z]=(0,r.useState)([]),[R,O]=(0,r.useState)([]),[J,$]=(0,r.useState)([]),[X,Y]=(0,r.useState)(!1),[H,K]=(0,r.useState)([{id:"openRouterToken",key:"openRouterToken",value:""}]),[Z,ea]=(0,r.useState)(!1),[es,ei]=(0,r.useState)(!1),[en,el]=(0,r.useState)(eN),{updateWorkflow:eo,runWorkflow:ed,logs:ec,isLogsModalOpen:eh,setIsLogsModalOpen:em,isRunningWorkflow:ep,getCustomNodes:ej,createWorkflow:ey,handleUserChatMessage:eb}=(0,eg.A)(),[eC,eL]=(0,r.useState)([{id:"1",content:"Hello! I'm your workflow assistant. Describe what workflow you'd like to create, and I'll help you build it step by step.",sender:"assistant",timestamp:new Date}]),eT=e=>{var t;let a=R.find(t=>t.label==e.label);if(a)return void eF(e.type,{...a});let s={};(null==e||null==(t=e.properties)?void 0:t.length)>0&&e.properties.forEach(e=>{s[e.name]=e.default||""}),"condition"==e.type&&(s.condition={...s}),eF(e.type,s)},e_=e=>{let t=[...S];A([...t=t.map(t=>t.id==(null==e?void 0:e.id)?e:t)])},eP=async e=>{try{let t=await eb(e,[...S,...R]);if(eL(t=>[...t,{id:Date.now().toString(),content:e,sender:"user",timestamp:new Date}]),"string"==typeof t.data.result)return void eL(e=>[...e,{id:(Date.now()+1).toString(),content:"".concat(t.data.result),sender:"assistant",timestamp:new Date}]);eL(e=>[...e,{id:(Date.now()+1).toString(),content:"Node generated is: ".concat(JSON.stringify(t.data.result,null,2)),sender:"assistant",timestamp:new Date}]),null!=S.find(e=>{var a;return(null==e?void 0:e.id)==(null==(a=t.data.result)?void 0:a.id)})?e_(t.data.result):eT(t.data.result)}catch(s){var t,a;(null==s||null==(a=s.response)||null==(t=a.data)?void 0:t.error)&&(eL(t=>[...t,{id:Date.now().toString(),content:e,sender:"user",timestamp:new Date}]),eL(e=>[...e,{id:(Date.now()+1).toString(),content:"I'm sorry, but I couldn't generate the node. Error: ".concat(s.response.data.error),sender:"assistant",timestamp:new Date}]))}},eF=(e,t)=>{let a=e.charAt(0).toUpperCase()+e.slice(1),s={...b[e],label:e.charAt(0).toUpperCase()+e.slice(1),name:"trigger_".concat(a,"_").concat(S.length+1).toLowerCase(),...t};eI(ev.NEW_NODE,s.name);let r={id:"".concat(S.length+1),type:e,position:{x:250,y:S.length>0?S[S.length-1].position.y+150:100},data:s};A(e=>[...e,{...r}])},ez=e=>{let t=S.find(t=>t.id===e);if(!t)return;let a=t.type.charAt(0).toUpperCase()+t.type.slice(1),s={id:"".concat(S.length+2),type:t.type,position:{x:250,y:S.length>0?S[S.length-1].position.y+150:100},data:{...t.data}};s.data.label=t.type.charAt(0).toUpperCase()+t.type.slice(1),s.data.name="trigger_".concat(a,"_").concat(S.length+1).toLowerCase(),A(e=>[...e,{...s}])},eR=(0,r.useCallback)(e=>{A(t=>t.filter(t=>t.id!==e)),L(t=>t.filter(t=>t.source!==e&&t.target!==e)),_&&_.id===e&&P(null)},[_,A,L]),eO=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0==S.length)return void o.oR.error("You need at least one node to start the Worflow");let s={triggerEvent:S[0].type,nodes:[]},r={},i=[...S];for(let e=0;e<i.length;e+=1){let t=i[e];if(eA[t.type]){if(!eA[t.type].safeParse(t.data).success)return void o.oR.error("You need to fill the information of the node ".concat(t.data.name))}else{let e={};if(t.data.properties.filter(e=>e.required).forEach(t=>{t.name&&(t.required?e[t.name]=B.Yj():e[t.name]=B.Yj().optional())}),!B.Ik(e).safeParse(t.data).success)return void o.oR.error("You need to fill the information of the node ".concat(t.data.name))}r[t.id]=t}let n={};for(let e=0;e<i.length;e+=1){let t=i[e];n[t.id]||s.nodes.push(function e(t,a,s,r){if(t.type==I.start)return{type:t.type,name:t.data.name,input:{},output:{}};if(t.type==I.code)return{type:t.type,name:t.data.name,setting:{code:btoa(unescape(encodeURIComponent(t.data.code))),params:t.data.params},input:{},output:{}};if(t.type==I.api)return{type:t.type,name:t.data.name,setting:{method:t.data.method,url:t.data.endpoint,headers:t.data.headers,body:t.data.body},input:{},output:{}};if(t.type==I.condition){var i,n,l,o,d,c;let h=null==t||null==(n=t.data)||null==(i=n.condition)?void 0:i.left,m=h.startsWith("this.state")?"expression":"raw",u=null==t||null==(o=t.data)||null==(l=o.condition)?void 0:l.right,p=u.startsWith("this.state")?"expression":"raw",f=null==t||null==(c=t.data)||null==(d=c.condition)?void 0:d.operator,x={type:t.type,name:t.data.name,setting:{condition:{left:{type:m,value:h},right:{type:p,value:u},operator:f},success:[],fail:[]},input:{},output:{}};return x.setting.success=edges.filter(e=>e.parentId==t.id&&"true"==e.pathCondition).map(t=>{let i=a[t.target];return s[i.id]=!0,e(i,a,s,r)}),x.setting.fail=edges.filter(e=>e.parentId==t.id&&"false"==e.pathCondition).map(t=>{let i=a[t.target];return s[i.id]=!0,e(i,a,s,r)}),x}if(t.type==I.loop){let r={type:t.type,name:t.data.name,setting:{source:t.data.source||[],nodes:[]},input:{},output:{}};return r.setting.nodes=edges.filter(e=>e.parentId==t.id&&"loop"==e.pathCondition).map((t,r)=>{let i=a[t.target];return s[i.id]=!0,e(i,a,s,r)}),r}let h=t.data;delete h.isCustomNode,delete h.name;let m=t.type.charAt(0).toUpperCase()+t.type.slice(1);return t.data.name="trigger_".concat(m,"_").concat(r+1).toLowerCase(),{type:t.type,name:t.data.name,setting:h,input:{},output:{}}}(t,r,n,e))}if(e)return void ed({isEditMode:null!=t,workflowId:null==t?void 0:t.id,contextVariables:[],envData:[...J],name:a||"",originalWorkflow:{nodes:[...S],edges:[...D]},...s});if(v)await eo({workflowId:v,contextVariables:[],name:a||"",envData:[...J],originalWorkflow:{nodes:[...S],edges:[...D]},...s});else{let e=await ey({contextVariables:[],envData:[...J],name:a||"",originalWorkflow:{nodes:[...S],edges:[...D]},nodes:[...s.nodes]});setTimeout(()=>{h.push("/workflows/".concat(e.id,"/edit"))},1e3)}},eJ=async()=>{let e=await ej(),t=[],a={},s={};e.forEach(e=>{a[e.name]=ef;let r={};e.properties.forEach(e=>{r[e.name]=e.default}),s[e.name]={...r,properties:e.properties,isCustomNode:e.isCustomNode},t.push({type:e.name,label:e.name,icon:f.A,description:e.description,color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200"})}),z(t),C({...w,...a}),N({...b,...s})},eI=(e,t)=>{if(e==ev.ENV_DATA)el(e=>[...e,...t.map(e=>"{{this.state.envData.".concat(e.key,"}}"))]);else if(e==ev.NEW_NODE)el(e=>[...e,"{{this.state.steps.".concat(t,".output}}")]);else if(e==ev.NEW_MANY_NODES){let e=t;e=e.map(e=>"{{this.state.steps.".concat(e,".output}}")),el(t=>[...t,...e])}};return(0,r.useEffect)(()=>{t&&eJ().then(()=>{t.originalWorkflow.nodes=t.originalWorkflow.nodes.map((e,t)=>{let a=e.type,s=b[a];e.data.isCustomNode=s.isCustomNode||!1;let r=a.charAt(0).toUpperCase()+a.slice(1);return e.data.name="trigger_".concat(r,"_").concat(t+1).toLowerCase(),e});let e=t.originalWorkflow.nodes.map(e=>{var t;return null==e||null==(t=e.data)?void 0:t.name});A(t.originalWorkflow.nodes),L(t.originalWorkflow.edges),y(t.id),$([...t.envData]),eI(ev.NEW_MANY_NODES,e),eI(ev.ENV_DATA,t.envData)})},[t]),(0,r.useEffect)(()=>{document.title="".concat(a," - Flow Request Builder")},[a]),(0,r.useEffect)(()=>{t||eJ()},[]),(0,r.useEffect)(()=>{let e=localStorage.getItem("appSettings");if(e)try{let t=JSON.parse(e);K(t.length>0?t:[{id:"openRouterToken",key:"openRouterToken",value:""}])}catch(e){console.error("Error loading settings:",e)}},[]),(0,s.jsxs)("div",{className:"relative h-full",children:[(0,s.jsxs)(i.Ln,{children:[(0,s.jsxs)("div",{ref:m,className:"w-full h-[calc(100vh-4rem)]",children:[(0,s.jsxs)(i.Gc,{nodes:S.map(e=>({...e,data:{...e.data,deleteNode:()=>eR(e.id),duplicateNode:()=>ez(e.id)}})),edges:D,onNodesChange:E,onEdgesChange:T,onConnect:e=>{let t={};for(let e=0;e<S.length;e+=1){let a=S[e];t[a.id]=a}let a=t[null==e?void 0:e.source],s=a&&"condition"==a.type,r=a&&"loop"==a.type;if(s||r)e.parentId=e.source,e.pathCondition=e.sourceHandle;else{let t=D.filter(t=>t.target==e.source);t[0]&&t[0].parentId&&(e.parentId=t[0].parentId,e.pathCondition=t[0].pathCondition)}L(t=>(0,i.rN)(e,t))},onNodeClick:(e,t)=>{P({...t})},nodeTypes:w,fitView:!0,className:"w-full h-full",children:[(0,s.jsx)(n.H,{}),(0,s.jsx)(l.V,{}),(0,s.jsxs)(i.Zk,{position:"top-right",className:"flex gap-2",children:[(0,s.jsxs)(k.$,{size:"sm",variant:"outline",onClick:()=>ea(!0),children:[(0,s.jsx)(W.A,{className:"mr-2 h-4 w-4"}),"Settings"]}),(0,s.jsxs)(k.$,{size:"sm",variant:"outline",onClick:()=>{var e;return null==(e=x.current)?void 0:e.click()},children:[(0,s.jsx)(V.A,{className:"mr-2 h-4 w-4"}),"Upload Collections"]}),(0,s.jsxs)(k.$,{size:"sm",variant:"outline",onClick:()=>eO(!0),children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Run Flow"]}),(0,s.jsxs)(k.$,{size:"sm",variant:"outline",onClick:()=>Y(!0),children:[(0,s.jsx)(U.A,{className:"mr-2 h-4 w-4"}),"Env Data"]}),(0,s.jsxs)(k.$,{size:"sm",onClick:()=>eO(),children:[(0,s.jsx)(q.A,{className:"mr-2 h-4 w-4"}),"Save Flow"]})]}),(0,s.jsx)(i.Zk,{position:"top-left",className:"mt-4",children:(0,s.jsx)(eu,{onAddNode:eF,httpRequestNodes:R,customNodes:F,onAddCurl:()=>ei(!0)})})]}),(0,s.jsx)("input",{type:"file",ref:x,onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;let s=new FileReader;s.onload=e=>{var t;let a=null==(t=e.target)?void 0:t.result;try{let e=function(e){let t=ew.Ay.load(e),a=[];for(let e of t.collection)if(e.children)for(let t of e.children)a.push(function(e,t){return{description:"".concat(e.name," - ").concat(t.name),name:"".concat(e.name.toLowerCase().replace(/\s|-/g,"_"),"_").concat(t.name.toLowerCase().replace(/\s|-/g,"_")),url:t.url,method:t.method,body:Object.keys(t.body||{}).map(e=>({key:e,value:t.body[e],expression:"raw"})),headers:t.headers?t.headers.map(e=>({key:e.name,value:e.value,expression:"raw"})):[]}}(e,t));else a.push(function(e){let t={};return Object.keys(e.body||{}).forEach(a=>{let s=e.body[a];try{s=JSON.parse(e.body[a]),t={...t,...s}}catch(s){t[a]=e.body[a]}}),{description:"".concat(e.name),name:e.name.toLowerCase().replace(/\s|-/g,"_"),url:e.url,method:e.method,body:Object.keys(t||{}).map(e=>({key:e,value:t[e]})),headers:e.headers?e.headers.map(e=>({key:e.name,value:e.value})):[]}}(e));return a}(a);e=e.map(e=>({type:"api",label:e.name,icon:u.A,name:e.name,endpoint:e.url,method:e.method,headers:e.headers,body:e.body,description:e.description,color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200"})),O([...e]),o.oR.success("Uploaded ".concat(e.length," API requests"))}catch(e){console.error(e),o.oR.error("Error parsing YAML file")}},s.readAsText(a)},accept:".yaml,.yml",style:{display:"none"}}),(0,s.jsx)(ek,{messages:eC,onSendMessage:eP,placeholder:"Need help with workflow creation?",maxHeight:"300px",className:"w-90 h-[400px]",title:"Workflow Assistant",isFloating:!0,defaultPosition:{x:350,y:100},defaultMinimized:!0})]}),_&&(0,s.jsx)(M,{optionsMenu:en,node:_,onChange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A(a=>[...a.map(a=>a.id===e?{...a,data:{...a.data,...t}}:a)])},onClose:()=>{P(null)},isOpen:!!_}),(0,s.jsx)(Q,{isOpen:X,onClose:()=>Y(!1),envData:J,onSave:e=>{eI(ev.ENV_DATA,e),$(e)}}),(0,s.jsx)(ee,{isOpen:eh,onClose:()=>em(!1),logs:ec,isLoading:ep}),(0,s.jsx)(et,{isOpen:Z,onClose:()=>ea(!1),settings:H,onSave:e=>{K(e),localStorage.setItem("appSettings",JSON.stringify(e))}}),(0,s.jsx)(er,{isOpen:es,onClose:()=>ei(!1),onSave:e=>{eF("api",e)}})]}),(0,s.jsx)(o.N9,{})]})}},82714:(e,t,a)=>{a.d(t,{J:()=>n});var s=a(95155);a(12115);var r=a(40968),i=a(53999);function n(e){let{className:t,...a}=e;return(0,s.jsx)(r.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},88482:(e,t,a)=>{a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>l});var s=a(95155),r=a(12115),i=a(53999);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},89852:(e,t,a)=>{a.d(t,{p:()=>i});var s=a(95155);a(12115);var r=a(53999);function i(e){let{className:t,type:a,...i}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}}}]);